function jD(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function wS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fI={exports:{}},hg={},pI={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=Symbol.for("react.element"),WD=Symbol.for("react.portal"),XD=Symbol.for("react.fragment"),JD=Symbol.for("react.strict_mode"),KD=Symbol.for("react.profiler"),YD=Symbol.for("react.provider"),ZD=Symbol.for("react.context"),QD=Symbol.for("react.forward_ref"),qD=Symbol.for("react.suspense"),$D=Symbol.for("react.memo"),eF=Symbol.for("react.lazy"),I2=Symbol.iterator;function tF(n){return n===null||typeof n!="object"?null:(n=I2&&n[I2]||n["@@iterator"],typeof n=="function"?n:null)}var mI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gI=Object.assign,vI={};function Wu(n,e,t){this.props=n,this.context=e,this.refs=vI,this.updater=t||mI}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Wu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function _I(){}_I.prototype=Wu.prototype;function MS(n,e,t){this.props=n,this.context=e,this.refs=vI,this.updater=t||mI}var ES=MS.prototype=new _I;ES.constructor=MS;gI(ES,Wu.prototype);ES.isPureReactComponent=!0;var R2=Array.isArray,yI=Object.prototype.hasOwnProperty,CS={current:null},xI={key:!0,ref:!0,__self:!0,__source:!0};function SI(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yI.call(e,i)&&!xI.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:df,type:n,key:s,ref:o,props:r,_owner:CS.current}}function nF(n,e){return{$$typeof:df,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function TS(n){return typeof n=="object"&&n!==null&&n.$$typeof===df}function iF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var b2=/\/+/g;function g_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?iF(""+n.key):e.toString(36)}function e0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case df:case WD:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+g_(o,0):i,R2(r)?(t="",n!=null&&(t=n.replace(b2,"$&/")+"/"),e0(r,e,t,"",function(c){return c})):r!=null&&(TS(r)&&(r=nF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(b2,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",R2(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+g_(s,a);o+=e0(s,e,t,l,r)}else if(l=tF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+g_(s,a++),o+=e0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rp(n,e,t){if(n==null)return n;var i=[],r=0;return e0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function rF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ki={current:null},t0={transition:null},sF={ReactCurrentDispatcher:Ki,ReactCurrentBatchConfig:t0,ReactCurrentOwner:CS};Vt.Children={map:Rp,forEach:function(n,e,t){Rp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Rp(n,function(){e++}),e},toArray:function(n){return Rp(n,function(e){return e})||[]},only:function(n){if(!TS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Vt.Component=Wu;Vt.Fragment=XD;Vt.Profiler=KD;Vt.PureComponent=MS;Vt.StrictMode=JD;Vt.Suspense=qD;Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sF;Vt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=gI({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=CS.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)yI.call(e,l)&&!xI.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:df,type:n.type,key:r,ref:s,props:i,_owner:o}};Vt.createContext=function(n){return n={$$typeof:ZD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:YD,_context:n},n.Consumer=n};Vt.createElement=SI;Vt.createFactory=function(n){var e=SI.bind(null,n);return e.type=n,e};Vt.createRef=function(){return{current:null}};Vt.forwardRef=function(n){return{$$typeof:QD,render:n}};Vt.isValidElement=TS;Vt.lazy=function(n){return{$$typeof:eF,_payload:{_status:-1,_result:n},_init:rF}};Vt.memo=function(n,e){return{$$typeof:$D,type:n,compare:e===void 0?null:e}};Vt.startTransition=function(n){var e=t0.transition;t0.transition={};try{n()}finally{t0.transition=e}};Vt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Vt.useCallback=function(n,e){return Ki.current.useCallback(n,e)};Vt.useContext=function(n){return Ki.current.useContext(n)};Vt.useDebugValue=function(){};Vt.useDeferredValue=function(n){return Ki.current.useDeferredValue(n)};Vt.useEffect=function(n,e){return Ki.current.useEffect(n,e)};Vt.useId=function(){return Ki.current.useId()};Vt.useImperativeHandle=function(n,e,t){return Ki.current.useImperativeHandle(n,e,t)};Vt.useInsertionEffect=function(n,e){return Ki.current.useInsertionEffect(n,e)};Vt.useLayoutEffect=function(n,e){return Ki.current.useLayoutEffect(n,e)};Vt.useMemo=function(n,e){return Ki.current.useMemo(n,e)};Vt.useReducer=function(n,e,t){return Ki.current.useReducer(n,e,t)};Vt.useRef=function(n){return Ki.current.useRef(n)};Vt.useState=function(n){return Ki.current.useState(n)};Vt.useSyncExternalStore=function(n,e,t){return Ki.current.useSyncExternalStore(n,e,t)};Vt.useTransition=function(){return Ki.current.useTransition()};Vt.version="18.2.0";pI.exports=Vt;var J=pI.exports;const jr=wS(J),oF=jD({__proto__:null,default:jr},[J]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=J,lF=Symbol.for("react.element"),cF=Symbol.for("react.fragment"),uF=Object.prototype.hasOwnProperty,hF=aF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dF={key:!0,ref:!0,__self:!0,__source:!0};function AI(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)uF.call(e,i)&&!dF.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:lF,type:n,key:s,ref:o,props:r,_owner:hF.current}}hg.Fragment=cF;hg.jsx=AI;hg.jsxs=AI;fI.exports=hg;var C=fI.exports,g1={},wI={exports:{}},Tr={},MI={exports:{}},EI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,Z){var K=U.length;U.push(Z);e:for(;0<K;){var ae=K-1>>>1,ve=U[ae];if(0<r(ve,Z))U[ae]=Z,U[K]=ve,K=ae;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],K=U.pop();if(K!==Z){U[0]=K;e:for(var ae=0,ve=U.length,Oe=ve>>>1;ae<Oe;){var le=2*(ae+1)-1,Ae=U[le],xe=le+1,Ie=U[xe];if(0>r(Ae,K))xe<ve&&0>r(Ie,Ae)?(U[ae]=Ie,U[xe]=K,ae=xe):(U[ae]=Ae,U[le]=K,ae=le);else if(xe<ve&&0>r(Ie,K))U[ae]=Ie,U[xe]=K,ae=xe;else break e}}return Z}function r(U,Z){var K=U.sortIndex-Z.sortIndex;return K!==0?K:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,S=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=U)i(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(c)}}function M(U){if(S=!1,A(U),!v)if(t(l)!==null)v=!0,ee(P);else{var Z=t(c);Z!==null&&pe(M,Z.startTime-U)}}function P(U,Z){v=!1,S&&(S=!1,g(N),N=-1),m=!0;var K=p;try{for(A(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||U&&!O());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var ve=ae(f.expirationTime<=Z);Z=n.unstable_now(),typeof ve=="function"?f.callback=ve:f===t(l)&&i(l),A(Z)}else i(l);f=t(l)}if(f!==null)var Oe=!0;else{var le=t(c);le!==null&&pe(M,le.startTime-Z),Oe=!1}return Oe}finally{f=null,p=K,m=!1}}var I=!1,L=null,N=-1,B=5,R=-1;function O(){return!(n.unstable_now()-R<B)}function Y(){if(L!==null){var U=n.unstable_now();R=U;var Z=!0;try{Z=L(!0,U)}finally{Z?$():(I=!1,L=null)}}else I=!1}var $;if(typeof x=="function")$=function(){x(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,oe=te.port2;te.port1.onmessage=Y,$=function(){oe.postMessage(null)}}else $=function(){y(Y,0)};function ee(U){L=U,I||(I=!0,$())}function pe(U,Z){N=y(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(P))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var K=p;p=Z;try{return U()}finally{p=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=p;p=U;try{return Z()}finally{p=K}},n.unstable_scheduleCallback=function(U,Z,K){var ae=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ae+K:ae):K=ae,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=K+ve,U={id:d++,callback:Z,priorityLevel:U,startTime:K,expirationTime:ve,sortIndex:-1},K>ae?(U.sortIndex=K,e(c,U),t(l)===null&&U===t(c)&&(S?(g(N),N=-1):S=!0,pe(M,K-ae))):(U.sortIndex=ve,e(l,U),v||m||(v=!0,ee(P))),U},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(U){var Z=p;return function(){var K=p;p=Z;try{return U.apply(this,arguments)}finally{p=K}}}})(EI);MI.exports=EI;var fF=MI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=J,Ar=fF;function Le(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TI=new Set,Ed={};function ec(n,e){Tu(n,e),Tu(n+"Capture",e)}function Tu(n,e){for(Ed[n]=e,n=0;n<e.length;n++)TI.add(e[n])}var Ao=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v1=Object.prototype.hasOwnProperty,pF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P2={},B2={};function mF(n){return v1.call(B2,n)?!0:v1.call(P2,n)?!1:pF.test(n)?B2[n]=!0:(P2[n]=!0,!1)}function gF(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function vF(n,e,t,i){if(e===null||typeof e>"u"||gF(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yi[n]=new Yi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yi[e]=new Yi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yi[n]=new Yi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yi[n]=new Yi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yi[n]=new Yi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yi[n]=new Yi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yi[n]=new Yi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yi[n]=new Yi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yi[n]=new Yi(n,5,!1,n.toLowerCase(),null,!1,!1)});var IS=/[\-:]([a-z])/g;function RS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(IS,RS);yi[e]=new Yi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(IS,RS);yi[e]=new Yi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(IS,RS);yi[e]=new Yi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yi[n]=new Yi(n,1,!1,n.toLowerCase(),null,!1,!1)});yi.xlinkHref=new Yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yi[n]=new Yi(n,1,!1,n.toLowerCase(),null,!0,!0)});function bS(n,e,t,i){var r=yi.hasOwnProperty(e)?yi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vF(e,t,r,i)&&(t=null),i||r===null?mF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var To=CI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bp=Symbol.for("react.element"),qc=Symbol.for("react.portal"),$c=Symbol.for("react.fragment"),PS=Symbol.for("react.strict_mode"),_1=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),RI=Symbol.for("react.context"),BS=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),x1=Symbol.for("react.suspense_list"),NS=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),bI=Symbol.for("react.offscreen"),N2=Symbol.iterator;function wh(n){return n===null||typeof n!="object"?null:(n=N2&&n[N2]||n["@@iterator"],typeof n=="function"?n:null)}var bn=Object.assign,v_;function ed(n){if(v_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);v_=e&&e[1]||""}return`
`+v_+n}var __=!1;function y_(n,e){if(!n||__)return"";__=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{__=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ed(n):""}function _F(n){switch(n.tag){case 5:return ed(n.type);case 16:return ed("Lazy");case 13:return ed("Suspense");case 19:return ed("SuspenseList");case 0:case 2:case 15:return n=y_(n.type,!1),n;case 11:return n=y_(n.type.render,!1),n;case 1:return n=y_(n.type,!0),n;default:return""}}function S1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $c:return"Fragment";case qc:return"Portal";case _1:return"Profiler";case PS:return"StrictMode";case y1:return"Suspense";case x1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RI:return(n.displayName||"Context")+".Consumer";case II:return(n._context.displayName||"Context")+".Provider";case BS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case NS:return e=n.displayName||null,e!==null?e:S1(n.type)||"Memo";case Zo:e=n._payload,n=n._init;try{return S1(n(e))}catch{}}return null}function yF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S1(e);case 8:return e===PS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xF(n){var e=PI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Pp(n){n._valueTracker||(n._valueTracker=xF(n))}function BI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=PI(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function w0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function A1(n,e){var t=e.checked;return bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function L2(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=xa(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NI(n,e){e=e.checked,e!=null&&bS(n,"checked",e,!1)}function w1(n,e){NI(n,e);var t=xa(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?M1(n,e.type,t):e.hasOwnProperty("defaultValue")&&M1(n,e.type,xa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function D2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function M1(n,e,t){(e!=="number"||w0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var td=Array.isArray;function _u(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+xa(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function E1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return bn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function F2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Le(92));if(td(t)){if(1<t.length)throw Error(Le(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xa(t)}}function LI(n,e){var t=xa(e.value),i=xa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function O2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function DI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?DI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Bp,FI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Bp=Bp||document.createElement("div"),Bp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Cd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SF=["Webkit","ms","Moz","O"];Object.keys(ad).forEach(function(n){SF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ad[e]=ad[n]})});function OI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ad.hasOwnProperty(n)&&ad[n]?(""+e).trim():e+"px"}function UI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=OI(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var AF=bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T1(n,e){if(e){if(AF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function I1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R1=null;function LS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var b1=null,yu=null,xu=null;function U2(n){if(n=mf(n)){if(typeof b1!="function")throw Error(Le(280));var e=n.stateNode;e&&(e=gg(e),b1(n.stateNode,n.type,e))}}function kI(n){yu?xu?xu.push(n):xu=[n]:yu=n}function GI(){if(yu){var n=yu,e=xu;if(xu=yu=null,U2(n),e)for(n=0;n<e.length;n++)U2(e[n])}}function zI(n,e){return n(e)}function HI(){}var x_=!1;function VI(n,e,t){if(x_)return n(e,t);x_=!0;try{return zI(n,e,t)}finally{x_=!1,(yu!==null||xu!==null)&&(HI(),GI())}}function Td(n,e){var t=n.stateNode;if(t===null)return null;var i=gg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Le(231,e,typeof t));return t}var P1=!1;if(Ao)try{var Mh={};Object.defineProperty(Mh,"passive",{get:function(){P1=!0}}),window.addEventListener("test",Mh,Mh),window.removeEventListener("test",Mh,Mh)}catch{P1=!1}function wF(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var ld=!1,M0=null,E0=!1,B1=null,MF={onError:function(n){ld=!0,M0=n}};function EF(n,e,t,i,r,s,o,a,l){ld=!1,M0=null,wF.apply(MF,arguments)}function CF(n,e,t,i,r,s,o,a,l){if(EF.apply(this,arguments),ld){if(ld){var c=M0;ld=!1,M0=null}else throw Error(Le(198));E0||(E0=!0,B1=c)}}function tc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function jI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function k2(n){if(tc(n)!==n)throw Error(Le(188))}function TF(n){var e=n.alternate;if(!e){if(e=tc(n),e===null)throw Error(Le(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return k2(r),n;if(s===i)return k2(r),e;s=s.sibling}throw Error(Le(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(t.alternate!==i)throw Error(Le(190))}if(t.tag!==3)throw Error(Le(188));return t.stateNode.current===t?n:e}function WI(n){return n=TF(n),n!==null?XI(n):null}function XI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=XI(n);if(e!==null)return e;n=n.sibling}return null}var JI=Ar.unstable_scheduleCallback,G2=Ar.unstable_cancelCallback,IF=Ar.unstable_shouldYield,RF=Ar.unstable_requestPaint,zn=Ar.unstable_now,bF=Ar.unstable_getCurrentPriorityLevel,DS=Ar.unstable_ImmediatePriority,KI=Ar.unstable_UserBlockingPriority,C0=Ar.unstable_NormalPriority,PF=Ar.unstable_LowPriority,YI=Ar.unstable_IdlePriority,dg=null,Us=null;function BF(n){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(dg,n,void 0,(n.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:DF,NF=Math.log,LF=Math.LN2;function DF(n){return n>>>=0,n===0?32:31-(NF(n)/LF|0)|0}var Np=64,Lp=4194304;function nd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function T0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=nd(a):(s&=o,s!==0&&(i=nd(s)))}else o=t&~r,o!==0?i=nd(o):s!==0&&(i=nd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ps(e),r=1<<t,i|=n[t],e&=~r;return i}function FF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OF(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ps(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=FF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function N1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ZI(){var n=Np;return Np<<=1,!(Np&4194240)&&(Np=64),n}function S_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ff(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ps(e),n[e]=t}function UF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ps(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function FS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ps(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var cn=0;function QI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var qI,OS,$I,eR,tR,L1=!1,Dp=[],la=null,ca=null,ua=null,Id=new Map,Rd=new Map,ta=[],kF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z2(n,e){switch(n){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":Id.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(e.pointerId)}}function Eh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=mf(e),e!==null&&OS(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function GF(n,e,t,i,r){switch(e){case"focusin":return la=Eh(la,n,e,t,i,r),!0;case"dragenter":return ca=Eh(ca,n,e,t,i,r),!0;case"mouseover":return ua=Eh(ua,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Id.set(s,Eh(Id.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Rd.set(s,Eh(Rd.get(s)||null,n,e,t,i,r)),!0}return!1}function nR(n){var e=Al(n.target);if(e!==null){var t=tc(e);if(t!==null){if(e=t.tag,e===13){if(e=jI(t),e!==null){n.blockedOn=e,tR(n.priority,function(){$I(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function n0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=D1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);R1=i,t.target.dispatchEvent(i),R1=null}else return e=mf(t),e!==null&&OS(e),n.blockedOn=t,!1;e.shift()}return!0}function H2(n,e,t){n0(n)&&t.delete(e)}function zF(){L1=!1,la!==null&&n0(la)&&(la=null),ca!==null&&n0(ca)&&(ca=null),ua!==null&&n0(ua)&&(ua=null),Id.forEach(H2),Rd.forEach(H2)}function Ch(n,e){n.blockedOn===e&&(n.blockedOn=null,L1||(L1=!0,Ar.unstable_scheduleCallback(Ar.unstable_NormalPriority,zF)))}function bd(n){function e(r){return Ch(r,n)}if(0<Dp.length){Ch(Dp[0],n);for(var t=1;t<Dp.length;t++){var i=Dp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(la!==null&&Ch(la,n),ca!==null&&Ch(ca,n),ua!==null&&Ch(ua,n),Id.forEach(e),Rd.forEach(e),t=0;t<ta.length;t++)i=ta[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ta.length&&(t=ta[0],t.blockedOn===null);)nR(t),t.blockedOn===null&&ta.shift()}var Su=To.ReactCurrentBatchConfig,I0=!0;function HF(n,e,t,i){var r=cn,s=Su.transition;Su.transition=null;try{cn=1,US(n,e,t,i)}finally{cn=r,Su.transition=s}}function VF(n,e,t,i){var r=cn,s=Su.transition;Su.transition=null;try{cn=4,US(n,e,t,i)}finally{cn=r,Su.transition=s}}function US(n,e,t,i){if(I0){var r=D1(n,e,t,i);if(r===null)P_(n,e,i,R0,t),z2(n,i);else if(GF(r,n,e,t,i))i.stopPropagation();else if(z2(n,i),e&4&&-1<kF.indexOf(n)){for(;r!==null;){var s=mf(r);if(s!==null&&qI(s),s=D1(n,e,t,i),s===null&&P_(n,e,i,R0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else P_(n,e,i,null,t)}}var R0=null;function D1(n,e,t,i){if(R0=null,n=LS(i),n=Al(n),n!==null)if(e=tc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=jI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return R0=n,null}function iR(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bF()){case DS:return 1;case KI:return 4;case C0:case PF:return 16;case YI:return 536870912;default:return 16}default:return 16}}var ra=null,kS=null,i0=null;function rR(){if(i0)return i0;var n,e=kS,t=e.length,i,r="value"in ra?ra.value:ra.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return i0=r.slice(n,1<i?1-i:void 0)}function r0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Fp(){return!0}function V2(){return!1}function Ir(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fp:V2,this.isPropagationStopped=V2,this}return bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Fp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Fp)},persist:function(){},isPersistent:Fp}),e}var Xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GS=Ir(Xu),pf=bn({},Xu,{view:0,detail:0}),jF=Ir(pf),A_,w_,Th,fg=bn({},pf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Th&&(Th&&n.type==="mousemove"?(A_=n.screenX-Th.screenX,w_=n.screenY-Th.screenY):w_=A_=0,Th=n),A_)},movementY:function(n){return"movementY"in n?n.movementY:w_}}),j2=Ir(fg),WF=bn({},fg,{dataTransfer:0}),XF=Ir(WF),JF=bn({},pf,{relatedTarget:0}),M_=Ir(JF),KF=bn({},Xu,{animationName:0,elapsedTime:0,pseudoElement:0}),YF=Ir(KF),ZF=bn({},Xu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),QF=Ir(ZF),qF=bn({},Xu,{data:0}),W2=Ir(qF),$F={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=t4[n])?!!e[n]:!1}function zS(){return n4}var i4=bn({},pf,{key:function(n){if(n.key){var e=$F[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=r0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?e4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zS,charCode:function(n){return n.type==="keypress"?r0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?r0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),r4=Ir(i4),s4=bn({},fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X2=Ir(s4),o4=bn({},pf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zS}),a4=Ir(o4),l4=bn({},Xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),c4=Ir(l4),u4=bn({},fg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h4=Ir(u4),d4=[9,13,27,32],HS=Ao&&"CompositionEvent"in window,cd=null;Ao&&"documentMode"in document&&(cd=document.documentMode);var f4=Ao&&"TextEvent"in window&&!cd,sR=Ao&&(!HS||cd&&8<cd&&11>=cd),J2=" ",K2=!1;function oR(n,e){switch(n){case"keyup":return d4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aR(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eu=!1;function p4(n,e){switch(n){case"compositionend":return aR(e);case"keypress":return e.which!==32?null:(K2=!0,J2);case"textInput":return n=e.data,n===J2&&K2?null:n;default:return null}}function m4(n,e){if(eu)return n==="compositionend"||!HS&&oR(n,e)?(n=rR(),i0=kS=ra=null,eu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sR&&e.locale!=="ko"?null:e.data;default:return null}}var g4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!g4[n.type]:e==="textarea"}function lR(n,e,t,i){kI(i),e=b0(e,"onChange"),0<e.length&&(t=new GS("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var ud=null,Pd=null;function v4(n){yR(n,0)}function pg(n){var e=iu(n);if(BI(e))return n}function _4(n,e){if(n==="change")return e}var cR=!1;if(Ao){var E_;if(Ao){var C_="oninput"in document;if(!C_){var Z2=document.createElement("div");Z2.setAttribute("oninput","return;"),C_=typeof Z2.oninput=="function"}E_=C_}else E_=!1;cR=E_&&(!document.documentMode||9<document.documentMode)}function Q2(){ud&&(ud.detachEvent("onpropertychange",uR),Pd=ud=null)}function uR(n){if(n.propertyName==="value"&&pg(Pd)){var e=[];lR(e,Pd,n,LS(n)),VI(v4,e)}}function y4(n,e,t){n==="focusin"?(Q2(),ud=e,Pd=t,ud.attachEvent("onpropertychange",uR)):n==="focusout"&&Q2()}function x4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pg(Pd)}function S4(n,e){if(n==="click")return pg(e)}function A4(n,e){if(n==="input"||n==="change")return pg(e)}function w4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var gs=typeof Object.is=="function"?Object.is:w4;function Bd(n,e){if(gs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!v1.call(e,r)||!gs(n[r],e[r]))return!1}return!0}function q2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $2(n,e){var t=q2(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=q2(t)}}function hR(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?hR(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dR(){for(var n=window,e=w0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=w0(n.document)}return e}function VS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function M4(n){var e=dR(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&hR(t.ownerDocument.documentElement,t)){if(i!==null&&VS(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=$2(t,s);var o=$2(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var E4=Ao&&"documentMode"in document&&11>=document.documentMode,tu=null,F1=null,hd=null,O1=!1;function eE(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;O1||tu==null||tu!==w0(i)||(i=tu,"selectionStart"in i&&VS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hd&&Bd(hd,i)||(hd=i,i=b0(F1,"onSelect"),0<i.length&&(e=new GS("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=tu)))}function Op(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var nu={animationend:Op("Animation","AnimationEnd"),animationiteration:Op("Animation","AnimationIteration"),animationstart:Op("Animation","AnimationStart"),transitionend:Op("Transition","TransitionEnd")},T_={},fR={};Ao&&(fR=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function mg(n){if(T_[n])return T_[n];if(!nu[n])return n;var e=nu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fR)return T_[n]=e[t];return n}var pR=mg("animationend"),mR=mg("animationiteration"),gR=mg("animationstart"),vR=mg("transitionend"),_R=new Map,tE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ba(n,e){_R.set(n,e),ec(e,[n])}for(var I_=0;I_<tE.length;I_++){var R_=tE[I_],C4=R_.toLowerCase(),T4=R_[0].toUpperCase()+R_.slice(1);ba(C4,"on"+T4)}ba(pR,"onAnimationEnd");ba(mR,"onAnimationIteration");ba(gR,"onAnimationStart");ba("dblclick","onDoubleClick");ba("focusin","onFocus");ba("focusout","onBlur");ba(vR,"onTransitionEnd");Tu("onMouseEnter",["mouseout","mouseover"]);Tu("onMouseLeave",["mouseout","mouseover"]);Tu("onPointerEnter",["pointerout","pointerover"]);Tu("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I4=new Set("cancel close invalid load scroll toggle".split(" ").concat(id));function nE(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,CF(i,e,void 0,n),n.currentTarget=null}function yR(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;nE(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;nE(r,a,c),s=l}}}if(E0)throw n=B1,E0=!1,B1=null,n}function _n(n,e){var t=e[H1];t===void 0&&(t=e[H1]=new Set);var i=n+"__bubble";t.has(i)||(xR(e,n,2,!1),t.add(i))}function b_(n,e,t){var i=0;e&&(i|=4),xR(t,n,i,e)}var Up="_reactListening"+Math.random().toString(36).slice(2);function Nd(n){if(!n[Up]){n[Up]=!0,TI.forEach(function(t){t!=="selectionchange"&&(I4.has(t)||b_(t,!1,n),b_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Up]||(e[Up]=!0,b_("selectionchange",!1,e))}}function xR(n,e,t,i){switch(iR(e)){case 1:var r=HF;break;case 4:r=VF;break;default:r=US}t=r.bind(null,e,t,n),r=void 0,!P1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function P_(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Al(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}VI(function(){var c=s,d=LS(t),f=[];e:{var p=_R.get(n);if(p!==void 0){var m=GS,v=n;switch(n){case"keypress":if(r0(t)===0)break e;case"keydown":case"keyup":m=r4;break;case"focusin":v="focus",m=M_;break;case"focusout":v="blur",m=M_;break;case"beforeblur":case"afterblur":m=M_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=j2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=XF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=a4;break;case pR:case mR:case gR:m=YF;break;case vR:m=c4;break;case"scroll":m=jF;break;case"wheel":m=h4;break;case"copy":case"cut":case"paste":m=QF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=X2}var S=(e&4)!==0,y=!S&&n==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var x=c,A;x!==null;){A=x;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,g!==null&&(M=Td(x,g),M!=null&&S.push(Ld(x,M,A)))),y)break;x=x.return}0<S.length&&(p=new m(p,v,null,t,d),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==R1&&(v=t.relatedTarget||t.fromElement)&&(Al(v)||v[wo]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?Al(v):null,v!==null&&(y=tc(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(S=j2,M="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(S=X2,M="onPointerLeave",g="onPointerEnter",x="pointer"),y=m==null?p:iu(m),A=v==null?p:iu(v),p=new S(M,x+"leave",m,t,d),p.target=y,p.relatedTarget=A,M=null,Al(d)===c&&(S=new S(g,x+"enter",v,t,d),S.target=A,S.relatedTarget=y,M=S),y=M,m&&v)t:{for(S=m,g=v,x=0,A=S;A;A=Sc(A))x++;for(A=0,M=g;M;M=Sc(M))A++;for(;0<x-A;)S=Sc(S),x--;for(;0<A-x;)g=Sc(g),A--;for(;x--;){if(S===g||g!==null&&S===g.alternate)break t;S=Sc(S),g=Sc(g)}S=null}else S=null;m!==null&&iE(f,p,m,S,!1),v!==null&&y!==null&&iE(f,y,v,S,!0)}}e:{if(p=c?iu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=_4;else if(Y2(p))if(cR)P=A4;else{P=x4;var I=y4}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=S4);if(P&&(P=P(n,c))){lR(f,P,t,d);break e}I&&I(n,p,c),n==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&M1(p,"number",p.value)}switch(I=c?iu(c):window,n){case"focusin":(Y2(I)||I.contentEditable==="true")&&(tu=I,F1=c,hd=null);break;case"focusout":hd=F1=tu=null;break;case"mousedown":O1=!0;break;case"contextmenu":case"mouseup":case"dragend":O1=!1,eE(f,t,d);break;case"selectionchange":if(E4)break;case"keydown":case"keyup":eE(f,t,d)}var L;if(HS)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else eu?oR(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(sR&&t.locale!=="ko"&&(eu||N!=="onCompositionStart"?N==="onCompositionEnd"&&eu&&(L=rR()):(ra=d,kS="value"in ra?ra.value:ra.textContent,eu=!0)),I=b0(c,N),0<I.length&&(N=new W2(N,n,null,t,d),f.push({event:N,listeners:I}),L?N.data=L:(L=aR(t),L!==null&&(N.data=L)))),(L=f4?p4(n,t):m4(n,t))&&(c=b0(c,"onBeforeInput"),0<c.length&&(d=new W2("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:c}),d.data=L))}yR(f,e)})}function Ld(n,e,t){return{instance:n,listener:e,currentTarget:t}}function b0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Td(n,t),s!=null&&i.unshift(Ld(n,s,r)),s=Td(n,e),s!=null&&i.push(Ld(n,s,r))),n=n.return}return i}function Sc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function iE(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Td(t,s),l!=null&&o.unshift(Ld(t,l,a))):r||(l=Td(t,s),l!=null&&o.push(Ld(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var R4=/\r\n?/g,b4=/\u0000|\uFFFD/g;function rE(n){return(typeof n=="string"?n:""+n).replace(R4,`
`).replace(b4,"")}function kp(n,e,t){if(e=rE(e),rE(n)!==e&&t)throw Error(Le(425))}function P0(){}var U1=null,k1=null;function G1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z1=typeof setTimeout=="function"?setTimeout:void 0,P4=typeof clearTimeout=="function"?clearTimeout:void 0,sE=typeof Promise=="function"?Promise:void 0,B4=typeof queueMicrotask=="function"?queueMicrotask:typeof sE<"u"?function(n){return sE.resolve(null).then(n).catch(N4)}:z1;function N4(n){setTimeout(function(){throw n})}function B_(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),bd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);bd(e)}function ha(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function oE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ju=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Ju,Dd="__reactProps$"+Ju,wo="__reactContainer$"+Ju,H1="__reactEvents$"+Ju,L4="__reactListeners$"+Ju,D4="__reactHandles$"+Ju;function Al(n){var e=n[Fs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wo]||t[Fs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=oE(n);n!==null;){if(t=n[Fs])return t;n=oE(n)}return e}n=t,t=n.parentNode}return null}function mf(n){return n=n[Fs]||n[wo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function iu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function gg(n){return n[Dd]||null}var V1=[],ru=-1;function Pa(n){return{current:n}}function xn(n){0>ru||(n.current=V1[ru],V1[ru]=null,ru--)}function vn(n,e){ru++,V1[ru]=n.current,n.current=e}var Sa={},Di=Pa(Sa),sr=Pa(!1),Hl=Sa;function Iu(n,e){var t=n.type.contextTypes;if(!t)return Sa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function or(n){return n=n.childContextTypes,n!=null}function B0(){xn(sr),xn(Di)}function aE(n,e,t){if(Di.current!==Sa)throw Error(Le(168));vn(Di,e),vn(sr,t)}function SR(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Le(108,yF(n)||"Unknown",r));return bn({},t,i)}function N0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sa,Hl=Di.current,vn(Di,n),vn(sr,sr.current),!0}function lE(n,e,t){var i=n.stateNode;if(!i)throw Error(Le(169));t?(n=SR(n,e,Hl),i.__reactInternalMemoizedMergedChildContext=n,xn(sr),xn(Di),vn(Di,n)):xn(sr),vn(sr,t)}var lo=null,vg=!1,N_=!1;function AR(n){lo===null?lo=[n]:lo.push(n)}function F4(n){vg=!0,AR(n)}function Ba(){if(!N_&&lo!==null){N_=!0;var n=0,e=cn;try{var t=lo;for(cn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}lo=null,vg=!1}catch(r){throw lo!==null&&(lo=lo.slice(n+1)),JI(DS,Ba),r}finally{cn=e,N_=!1}}return null}var su=[],ou=0,L0=null,D0=0,Hr=[],Vr=0,Vl=null,ho=1,fo="";function pl(n,e){su[ou++]=D0,su[ou++]=L0,L0=n,D0=e}function wR(n,e,t){Hr[Vr++]=ho,Hr[Vr++]=fo,Hr[Vr++]=Vl,Vl=n;var i=ho;n=fo;var r=32-ps(i)-1;i&=~(1<<r),t+=1;var s=32-ps(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ho=1<<32-ps(e)+r|t<<r|i,fo=s+n}else ho=1<<s|t<<r|i,fo=n}function jS(n){n.return!==null&&(pl(n,1),wR(n,1,0))}function WS(n){for(;n===L0;)L0=su[--ou],su[ou]=null,D0=su[--ou],su[ou]=null;for(;n===Vl;)Vl=Hr[--Vr],Hr[Vr]=null,fo=Hr[--Vr],Hr[Vr]=null,ho=Hr[--Vr],Hr[Vr]=null}var xr=null,yr=null,An=!1,ds=null;function MR(n,e){var t=Jr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function cE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,xr=n,yr=ha(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,xr=n,yr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vl!==null?{id:ho,overflow:fo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Jr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,xr=n,yr=null,!0):!1;default:return!1}}function j1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function W1(n){if(An){var e=yr;if(e){var t=e;if(!cE(n,e)){if(j1(n))throw Error(Le(418));e=ha(t.nextSibling);var i=xr;e&&cE(n,e)?MR(i,t):(n.flags=n.flags&-4097|2,An=!1,xr=n)}}else{if(j1(n))throw Error(Le(418));n.flags=n.flags&-4097|2,An=!1,xr=n}}}function uE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xr=n}function Gp(n){if(n!==xr)return!1;if(!An)return uE(n),An=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!G1(n.type,n.memoizedProps)),e&&(e=yr)){if(j1(n))throw ER(),Error(Le(418));for(;e;)MR(n,e),e=ha(e.nextSibling)}if(uE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){yr=ha(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}yr=null}}else yr=xr?ha(n.stateNode.nextSibling):null;return!0}function ER(){for(var n=yr;n;)n=ha(n.nextSibling)}function Ru(){yr=xr=null,An=!1}function XS(n){ds===null?ds=[n]:ds.push(n)}var O4=To.ReactCurrentBatchConfig;function cs(n,e){if(n&&n.defaultProps){e=bn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var F0=Pa(null),O0=null,au=null,JS=null;function KS(){JS=au=O0=null}function YS(n){var e=F0.current;xn(F0),n._currentValue=e}function X1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Au(n,e){O0=n,JS=au=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ir=!0),n.firstContext=null)}function Zr(n){var e=n._currentValue;if(JS!==n)if(n={context:n,memoizedValue:e,next:null},au===null){if(O0===null)throw Error(Le(308));au=n,O0.dependencies={lanes:0,firstContext:n}}else au=au.next=n;return e}var wl=null;function ZS(n){wl===null?wl=[n]:wl.push(n)}function CR(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,ZS(e)):(t.next=r.next,r.next=t),e.interleaved=t,Mo(n,i)}function Mo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Qo=!1;function QS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function da(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Qt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Mo(n,t)}return r=i.interleaved,r===null?(e.next=e,ZS(i)):(e.next=r.next,r.next=e),i.interleaved=e,Mo(n,t)}function s0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,FS(n,t)}}function hE(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function U0(n,e,t,i){var r=n.updateQueue;Qo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,S=a;switch(p=e,m=t,S.tag){case 1:if(v=S.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=bn({},f,p);break e;case 2:Qo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Wl|=o,n.lanes=o,n.memoizedState=f}}function dE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Le(191,r));r.call(i)}}}var IR=new CI.Component().refs;function J1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:bn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var _g={isMounted:function(n){return(n=n._reactInternals)?tc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Xi(),r=pa(n),s=vo(i,r);s.payload=e,t!=null&&(s.callback=t),e=da(n,s,r),e!==null&&(ms(e,n,r,i),s0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Xi(),r=pa(n),s=vo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=da(n,s,r),e!==null&&(ms(e,n,r,i),s0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Xi(),i=pa(n),r=vo(t,i);r.tag=2,e!=null&&(r.callback=e),e=da(n,r,i),e!==null&&(ms(e,n,i,t),s0(e,n,i))}};function fE(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bd(t,i)||!Bd(r,s):!0}function RR(n,e,t){var i=!1,r=Sa,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(r=or(e)?Hl:Di.current,i=e.contextTypes,s=(i=i!=null)?Iu(n,r):Sa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_g,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function pE(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&_g.enqueueReplaceState(e,e.state,null)}function K1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=IR,QS(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Zr(s):(s=or(e)?Hl:Di.current,r.context=Iu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(J1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&_g.enqueueReplaceState(r,r.state,null),U0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Ih(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Le(309));var i=t.stateNode}if(!i)throw Error(Le(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===IR&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Le(284));if(!t._owner)throw Error(Le(290,n))}return n}function zp(n,e){throw n=Object.prototype.toString.call(e),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function mE(n){var e=n._init;return e(n._payload)}function bR(n){function e(g,x){if(n){var A=g.deletions;A===null?(g.deletions=[x],g.flags|=16):A.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=ma(g,x),g.index=0,g.sibling=null,g}function s(g,x,A){return g.index=A,n?(A=g.alternate,A!==null?(A=A.index,A<x?(g.flags|=2,x):A):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,A,M){return x===null||x.tag!==6?(x=G_(A,g.mode,M),x.return=g,x):(x=r(x,A),x.return=g,x)}function l(g,x,A,M){var P=A.type;return P===$c?d(g,x,A.props.children,M,A.key):x!==null&&(x.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Zo&&mE(P)===x.type)?(M=r(x,A.props),M.ref=Ih(g,x,A),M.return=g,M):(M=h0(A.type,A.key,A.props,null,g.mode,M),M.ref=Ih(g,x,A),M.return=g,M)}function c(g,x,A,M){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=z_(A,g.mode,M),x.return=g,x):(x=r(x,A.children||[]),x.return=g,x)}function d(g,x,A,M,P){return x===null||x.tag!==7?(x=Dl(A,g.mode,M,P),x.return=g,x):(x=r(x,A),x.return=g,x)}function f(g,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=G_(""+x,g.mode,A),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bp:return A=h0(x.type,x.key,x.props,null,g.mode,A),A.ref=Ih(g,null,x),A.return=g,A;case qc:return x=z_(x,g.mode,A),x.return=g,x;case Zo:var M=x._init;return f(g,M(x._payload),A)}if(td(x)||wh(x))return x=Dl(x,g.mode,A,null),x.return=g,x;zp(g,x)}return null}function p(g,x,A,M){var P=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return P!==null?null:a(g,x,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case bp:return A.key===P?l(g,x,A,M):null;case qc:return A.key===P?c(g,x,A,M):null;case Zo:return P=A._init,p(g,x,P(A._payload),M)}if(td(A)||wh(A))return P!==null?null:d(g,x,A,M,null);zp(g,A)}return null}function m(g,x,A,M,P){if(typeof M=="string"&&M!==""||typeof M=="number")return g=g.get(A)||null,a(x,g,""+M,P);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case bp:return g=g.get(M.key===null?A:M.key)||null,l(x,g,M,P);case qc:return g=g.get(M.key===null?A:M.key)||null,c(x,g,M,P);case Zo:var I=M._init;return m(g,x,A,I(M._payload),P)}if(td(M)||wh(M))return g=g.get(A)||null,d(x,g,M,P,null);zp(x,M)}return null}function v(g,x,A,M){for(var P=null,I=null,L=x,N=x=0,B=null;L!==null&&N<A.length;N++){L.index>N?(B=L,L=null):B=L.sibling;var R=p(g,L,A[N],M);if(R===null){L===null&&(L=B);break}n&&L&&R.alternate===null&&e(g,L),x=s(R,x,N),I===null?P=R:I.sibling=R,I=R,L=B}if(N===A.length)return t(g,L),An&&pl(g,N),P;if(L===null){for(;N<A.length;N++)L=f(g,A[N],M),L!==null&&(x=s(L,x,N),I===null?P=L:I.sibling=L,I=L);return An&&pl(g,N),P}for(L=i(g,L);N<A.length;N++)B=m(L,g,N,A[N],M),B!==null&&(n&&B.alternate!==null&&L.delete(B.key===null?N:B.key),x=s(B,x,N),I===null?P=B:I.sibling=B,I=B);return n&&L.forEach(function(O){return e(g,O)}),An&&pl(g,N),P}function S(g,x,A,M){var P=wh(A);if(typeof P!="function")throw Error(Le(150));if(A=P.call(A),A==null)throw Error(Le(151));for(var I=P=null,L=x,N=x=0,B=null,R=A.next();L!==null&&!R.done;N++,R=A.next()){L.index>N?(B=L,L=null):B=L.sibling;var O=p(g,L,R.value,M);if(O===null){L===null&&(L=B);break}n&&L&&O.alternate===null&&e(g,L),x=s(O,x,N),I===null?P=O:I.sibling=O,I=O,L=B}if(R.done)return t(g,L),An&&pl(g,N),P;if(L===null){for(;!R.done;N++,R=A.next())R=f(g,R.value,M),R!==null&&(x=s(R,x,N),I===null?P=R:I.sibling=R,I=R);return An&&pl(g,N),P}for(L=i(g,L);!R.done;N++,R=A.next())R=m(L,g,N,R.value,M),R!==null&&(n&&R.alternate!==null&&L.delete(R.key===null?N:R.key),x=s(R,x,N),I===null?P=R:I.sibling=R,I=R);return n&&L.forEach(function(Y){return e(g,Y)}),An&&pl(g,N),P}function y(g,x,A,M){if(typeof A=="object"&&A!==null&&A.type===$c&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case bp:e:{for(var P=A.key,I=x;I!==null;){if(I.key===P){if(P=A.type,P===$c){if(I.tag===7){t(g,I.sibling),x=r(I,A.props.children),x.return=g,g=x;break e}}else if(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Zo&&mE(P)===I.type){t(g,I.sibling),x=r(I,A.props),x.ref=Ih(g,I,A),x.return=g,g=x;break e}t(g,I);break}else e(g,I);I=I.sibling}A.type===$c?(x=Dl(A.props.children,g.mode,M,A.key),x.return=g,g=x):(M=h0(A.type,A.key,A.props,null,g.mode,M),M.ref=Ih(g,x,A),M.return=g,g=M)}return o(g);case qc:e:{for(I=A.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){t(g,x.sibling),x=r(x,A.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=z_(A,g.mode,M),x.return=g,g=x}return o(g);case Zo:return I=A._init,y(g,x,I(A._payload),M)}if(td(A))return v(g,x,A,M);if(wh(A))return S(g,x,A,M);zp(g,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(t(g,x.sibling),x=r(x,A),x.return=g,g=x):(t(g,x),x=G_(A,g.mode,M),x.return=g,g=x),o(g)):t(g,x)}return y}var bu=bR(!0),PR=bR(!1),gf={},ks=Pa(gf),Fd=Pa(gf),Od=Pa(gf);function Ml(n){if(n===gf)throw Error(Le(174));return n}function qS(n,e){switch(vn(Od,e),vn(Fd,n),vn(ks,gf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:C1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=C1(e,n)}xn(ks),vn(ks,e)}function Pu(){xn(ks),xn(Fd),xn(Od)}function BR(n){Ml(Od.current);var e=Ml(ks.current),t=C1(e,n.type);e!==t&&(vn(Fd,n),vn(ks,t))}function $S(n){Fd.current===n&&(xn(ks),xn(Fd))}var Cn=Pa(0);function k0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L_=[];function eA(){for(var n=0;n<L_.length;n++)L_[n]._workInProgressVersionPrimary=null;L_.length=0}var o0=To.ReactCurrentDispatcher,D_=To.ReactCurrentBatchConfig,jl=0,Rn=null,Qn=null,ai=null,G0=!1,dd=!1,Ud=0,U4=0;function Ci(){throw Error(Le(321))}function tA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!gs(n[t],e[t]))return!1;return!0}function nA(n,e,t,i,r,s){if(jl=s,Rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,o0.current=n===null||n.memoizedState===null?H4:V4,n=t(i,r),dd){s=0;do{if(dd=!1,Ud=0,25<=s)throw Error(Le(301));s+=1,ai=Qn=null,e.updateQueue=null,o0.current=j4,n=t(i,r)}while(dd)}if(o0.current=z0,e=Qn!==null&&Qn.next!==null,jl=0,ai=Qn=Rn=null,G0=!1,e)throw Error(Le(300));return n}function iA(){var n=Ud!==0;return Ud=0,n}function Ds(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?Rn.memoizedState=ai=n:ai=ai.next=n,ai}function Qr(){if(Qn===null){var n=Rn.alternate;n=n!==null?n.memoizedState:null}else n=Qn.next;var e=ai===null?Rn.memoizedState:ai.next;if(e!==null)ai=e,Qn=n;else{if(n===null)throw Error(Le(310));Qn=n,n={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},ai===null?Rn.memoizedState=ai=n:ai=ai.next=n}return ai}function kd(n,e){return typeof e=="function"?e(n):e}function F_(n){var e=Qr(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var i=Qn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((jl&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Rn.lanes|=d,Wl|=d}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,gs(i,e.memoizedState)||(ir=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Rn.lanes|=s,Wl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function O_(n){var e=Qr(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);gs(s,e.memoizedState)||(ir=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function NR(){}function LR(n,e){var t=Rn,i=Qr(),r=e(),s=!gs(i.memoizedState,r);if(s&&(i.memoizedState=r,ir=!0),i=i.queue,rA(OR.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ai!==null&&ai.memoizedState.tag&1){if(t.flags|=2048,Gd(9,FR.bind(null,t,i,r,e),void 0,null),li===null)throw Error(Le(349));jl&30||DR(t,e,r)}return r}function DR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function FR(n,e,t,i){e.value=t,e.getSnapshot=i,UR(e)&&kR(n)}function OR(n,e,t){return t(function(){UR(e)&&kR(n)})}function UR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!gs(n,t)}catch{return!0}}function kR(n){var e=Mo(n,1);e!==null&&ms(e,n,1,-1)}function gE(n){var e=Ds();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:n},e.queue=n,n=n.dispatch=z4.bind(null,Rn,n),[e.memoizedState,n]}function Gd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function GR(){return Qr().memoizedState}function a0(n,e,t,i){var r=Ds();Rn.flags|=n,r.memoizedState=Gd(1|e,t,void 0,i===void 0?null:i)}function yg(n,e,t,i){var r=Qr();i=i===void 0?null:i;var s=void 0;if(Qn!==null){var o=Qn.memoizedState;if(s=o.destroy,i!==null&&tA(i,o.deps)){r.memoizedState=Gd(e,t,s,i);return}}Rn.flags|=n,r.memoizedState=Gd(1|e,t,s,i)}function vE(n,e){return a0(8390656,8,n,e)}function rA(n,e){return yg(2048,8,n,e)}function zR(n,e){return yg(4,2,n,e)}function HR(n,e){return yg(4,4,n,e)}function VR(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function jR(n,e,t){return t=t!=null?t.concat([n]):null,yg(4,4,VR.bind(null,e,n),t)}function sA(){}function WR(n,e){var t=Qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&tA(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function XR(n,e){var t=Qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&tA(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function JR(n,e,t){return jl&21?(gs(t,e)||(t=ZI(),Rn.lanes|=t,Wl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ir=!0),n.memoizedState=t)}function k4(n,e){var t=cn;cn=t!==0&&4>t?t:4,n(!0);var i=D_.transition;D_.transition={};try{n(!1),e()}finally{cn=t,D_.transition=i}}function KR(){return Qr().memoizedState}function G4(n,e,t){var i=pa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},YR(n))ZR(e,t);else if(t=CR(n,e,t,i),t!==null){var r=Xi();ms(t,n,i,r),QR(t,e,i)}}function z4(n,e,t){var i=pa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(YR(n))ZR(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,gs(a,o)){var l=e.interleaved;l===null?(r.next=r,ZS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=CR(n,e,r,i),t!==null&&(r=Xi(),ms(t,n,i,r),QR(t,e,i))}}function YR(n){var e=n.alternate;return n===Rn||e!==null&&e===Rn}function ZR(n,e){dd=G0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function QR(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,FS(n,t)}}var z0={readContext:Zr,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useInsertionEffect:Ci,useLayoutEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useMutableSource:Ci,useSyncExternalStore:Ci,useId:Ci,unstable_isNewReconciler:!1},H4={readContext:Zr,useCallback:function(n,e){return Ds().memoizedState=[n,e===void 0?null:e],n},useContext:Zr,useEffect:vE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,a0(4194308,4,VR.bind(null,e,n),t)},useLayoutEffect:function(n,e){return a0(4194308,4,n,e)},useInsertionEffect:function(n,e){return a0(4,2,n,e)},useMemo:function(n,e){var t=Ds();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ds();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=G4.bind(null,Rn,n),[i.memoizedState,n]},useRef:function(n){var e=Ds();return n={current:n},e.memoizedState=n},useState:gE,useDebugValue:sA,useDeferredValue:function(n){return Ds().memoizedState=n},useTransition:function(){var n=gE(!1),e=n[0];return n=k4.bind(null,n[1]),Ds().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Rn,r=Ds();if(An){if(t===void 0)throw Error(Le(407));t=t()}else{if(t=e(),li===null)throw Error(Le(349));jl&30||DR(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,vE(OR.bind(null,i,s,n),[n]),i.flags|=2048,Gd(9,FR.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ds(),e=li.identifierPrefix;if(An){var t=fo,i=ho;t=(i&~(1<<32-ps(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ud++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=U4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},V4={readContext:Zr,useCallback:WR,useContext:Zr,useEffect:rA,useImperativeHandle:jR,useInsertionEffect:zR,useLayoutEffect:HR,useMemo:XR,useReducer:F_,useRef:GR,useState:function(){return F_(kd)},useDebugValue:sA,useDeferredValue:function(n){var e=Qr();return JR(e,Qn.memoizedState,n)},useTransition:function(){var n=F_(kd)[0],e=Qr().memoizedState;return[n,e]},useMutableSource:NR,useSyncExternalStore:LR,useId:KR,unstable_isNewReconciler:!1},j4={readContext:Zr,useCallback:WR,useContext:Zr,useEffect:rA,useImperativeHandle:jR,useInsertionEffect:zR,useLayoutEffect:HR,useMemo:XR,useReducer:O_,useRef:GR,useState:function(){return O_(kd)},useDebugValue:sA,useDeferredValue:function(n){var e=Qr();return Qn===null?e.memoizedState=n:JR(e,Qn.memoizedState,n)},useTransition:function(){var n=O_(kd)[0],e=Qr().memoizedState;return[n,e]},useMutableSource:NR,useSyncExternalStore:LR,useId:KR,unstable_isNewReconciler:!1};function Bu(n,e){try{var t="",i=e;do t+=_F(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function U_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Y1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var W4=typeof WeakMap=="function"?WeakMap:Map;function qR(n,e,t){t=vo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){V0||(V0=!0,sx=i),Y1(n,e)},t}function $R(n,e,t){t=vo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Y1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Y1(n,e),typeof i!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function _E(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new W4;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=sO.bind(null,n,e,t),e.then(n,n))}function yE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function xE(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=vo(-1,1),e.tag=2,da(t,e,1))),t.lanes|=1),n)}var X4=To.ReactCurrentOwner,ir=!1;function ji(n,e,t,i){e.child=n===null?PR(e,null,t,i):bu(e,n.child,t,i)}function SE(n,e,t,i,r){t=t.render;var s=e.ref;return Au(e,r),i=nA(n,e,t,i,s,r),t=iA(),n!==null&&!ir?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Eo(n,e,r)):(An&&t&&jS(e),e.flags|=1,ji(n,e,i,r),e.child)}function AE(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!fA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,eb(n,e,s,i,r)):(n=h0(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Bd,t(o,i)&&n.ref===e.ref)return Eo(n,e,r)}return e.flags|=1,n=ma(s,i),n.ref=e.ref,n.return=e,e.child=n}function eb(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Bd(s,i)&&n.ref===e.ref)if(ir=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ir=!0);else return e.lanes=n.lanes,Eo(n,e,r)}return Z1(n,e,t,i,r)}function tb(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(cu,mr),mr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,vn(cu,mr),mr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,vn(cu,mr),mr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,vn(cu,mr),mr|=i;return ji(n,e,r,t),e.child}function nb(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Z1(n,e,t,i,r){var s=or(t)?Hl:Di.current;return s=Iu(e,s),Au(e,r),t=nA(n,e,t,i,s,r),i=iA(),n!==null&&!ir?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Eo(n,e,r)):(An&&i&&jS(e),e.flags|=1,ji(n,e,t,r),e.child)}function wE(n,e,t,i,r){if(or(t)){var s=!0;N0(e)}else s=!1;if(Au(e,r),e.stateNode===null)l0(n,e),RR(e,t,i),K1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Zr(c):(c=or(t)?Hl:Di.current,c=Iu(e,c));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&pE(e,o,i,c),Qo=!1;var p=e.memoizedState;o.state=p,U0(e,i,o,r),l=e.memoizedState,a!==i||p!==l||sr.current||Qo?(typeof d=="function"&&(J1(e,t,d,i),l=e.memoizedState),(a=Qo||fE(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,TR(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:cs(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=or(t)?Hl:Di.current,l=Iu(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&pE(e,o,i,l),Qo=!1,p=e.memoizedState,o.state=p,U0(e,i,o,r);var v=e.memoizedState;a!==f||p!==v||sr.current||Qo?(typeof m=="function"&&(J1(e,t,m,i),v=e.memoizedState),(c=Qo||fE(e,t,c,i,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Q1(n,e,t,i,s,r)}function Q1(n,e,t,i,r,s){nb(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&lE(e,t,!1),Eo(n,e,s);i=e.stateNode,X4.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=bu(e,n.child,null,s),e.child=bu(e,null,a,s)):ji(n,e,a,s),e.memoizedState=i.state,r&&lE(e,t,!0),e.child}function ib(n){var e=n.stateNode;e.pendingContext?aE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&aE(n,e.context,!1),qS(n,e.containerInfo)}function ME(n,e,t,i,r){return Ru(),XS(r),e.flags|=256,ji(n,e,t,i),e.child}var q1={dehydrated:null,treeContext:null,retryLane:0};function $1(n){return{baseLanes:n,cachePool:null,transitions:null}}function rb(n,e,t){var i=e.pendingProps,r=Cn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),vn(Cn,r&1),n===null)return W1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ag(o,i,0,null),n=Dl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=$1(t),e.memoizedState=q1,n):oA(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return J4(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ma(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ma(a,s):(s=Dl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?$1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=q1,i}return s=n.child,n=s.sibling,i=ma(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function oA(n,e){return e=Ag({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Hp(n,e,t,i){return i!==null&&XS(i),bu(e,n.child,null,t),n=oA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function J4(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=U_(Error(Le(422))),Hp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ag({mode:"visible",children:i.children},r,0,null),s=Dl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&bu(e,n.child,null,o),e.child.memoizedState=$1(o),e.memoizedState=q1,s);if(!(e.mode&1))return Hp(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Le(419)),i=U_(s,i,void 0),Hp(n,e,o,i)}if(a=(o&n.childLanes)!==0,ir||a){if(i=li,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Mo(n,r),ms(i,n,r,-1))}return dA(),i=U_(Error(Le(421))),Hp(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=oO.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,yr=ha(r.nextSibling),xr=e,An=!0,ds=null,n!==null&&(Hr[Vr++]=ho,Hr[Vr++]=fo,Hr[Vr++]=Vl,ho=n.id,fo=n.overflow,Vl=e),e=oA(e,i.children),e.flags|=4096,e)}function EE(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),X1(n.return,e,t)}function k_(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function sb(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ji(n,e,i.children,t),i=Cn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&EE(n,t,e);else if(n.tag===19)EE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(vn(Cn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&k0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),k_(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&k0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}k_(e,!0,t,null,s);break;case"together":k_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function l0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Eo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Wl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Le(153));if(e.child!==null){for(n=e.child,t=ma(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ma(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function K4(n,e,t){switch(e.tag){case 3:ib(e),Ru();break;case 5:BR(e);break;case 1:or(e.type)&&N0(e);break;case 4:qS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;vn(F0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(vn(Cn,Cn.current&1),e.flags|=128,null):t&e.child.childLanes?rb(n,e,t):(vn(Cn,Cn.current&1),n=Eo(n,e,t),n!==null?n.sibling:null);vn(Cn,Cn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return sb(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),vn(Cn,Cn.current),i)break;return null;case 22:case 23:return e.lanes=0,tb(n,e,t)}return Eo(n,e,t)}var ob,ex,ab,lb;ob=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ex=function(){};ab=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ml(ks.current);var s=null;switch(t){case"input":r=A1(n,r),i=A1(n,i),s=[];break;case"select":r=bn({},r,{value:void 0}),i=bn({},i,{value:void 0}),s=[];break;case"textarea":r=E1(n,r),i=E1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=P0)}T1(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ed.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ed.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_n("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};lb=function(n,e,t,i){t!==i&&(e.flags|=4)};function Rh(n,e){if(!An)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ti(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function Y4(n,e,t){var i=e.pendingProps;switch(WS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(e),null;case 1:return or(e.type)&&B0(),Ti(e),null;case 3:return i=e.stateNode,Pu(),xn(sr),xn(Di),eA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Gp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ds!==null&&(lx(ds),ds=null))),ex(n,e),Ti(e),null;case 5:$S(e);var r=Ml(Od.current);if(t=e.type,n!==null&&e.stateNode!=null)ab(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Le(166));return Ti(e),null}if(n=Ml(ks.current),Gp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Fs]=e,i[Dd]=s,n=(e.mode&1)!==0,t){case"dialog":_n("cancel",i),_n("close",i);break;case"iframe":case"object":case"embed":_n("load",i);break;case"video":case"audio":for(r=0;r<id.length;r++)_n(id[r],i);break;case"source":_n("error",i);break;case"img":case"image":case"link":_n("error",i),_n("load",i);break;case"details":_n("toggle",i);break;case"input":L2(i,s),_n("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},_n("invalid",i);break;case"textarea":F2(i,s),_n("invalid",i)}T1(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&kp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kp(i.textContent,a,n),r=["children",""+a]):Ed.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_n("scroll",i)}switch(t){case"input":Pp(i),D2(i,s,!0);break;case"textarea":Pp(i),O2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=P0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=DI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Fs]=e,n[Dd]=i,ob(n,e,!1,!1),e.stateNode=n;e:{switch(o=I1(t,i),t){case"dialog":_n("cancel",n),_n("close",n),r=i;break;case"iframe":case"object":case"embed":_n("load",n),r=i;break;case"video":case"audio":for(r=0;r<id.length;r++)_n(id[r],n);r=i;break;case"source":_n("error",n),r=i;break;case"img":case"image":case"link":_n("error",n),_n("load",n),r=i;break;case"details":_n("toggle",n),r=i;break;case"input":L2(n,i),r=A1(n,i),_n("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=bn({},i,{value:void 0}),_n("invalid",n);break;case"textarea":F2(n,i),r=E1(n,i),_n("invalid",n);break;default:r=i}T1(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?UI(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&FI(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Cd(n,l):typeof l=="number"&&Cd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ed.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_n("scroll",n):l!=null&&bS(n,s,l,o))}switch(t){case"input":Pp(n),D2(n,i,!1);break;case"textarea":Pp(n),O2(n);break;case"option":i.value!=null&&n.setAttribute("value",""+xa(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?_u(n,!!i.multiple,s,!1):i.defaultValue!=null&&_u(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=P0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ti(e),null;case 6:if(n&&e.stateNode!=null)lb(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Le(166));if(t=Ml(Od.current),Ml(ks.current),Gp(e)){if(i=e.stateNode,t=e.memoizedProps,i[Fs]=e,(s=i.nodeValue!==t)&&(n=xr,n!==null))switch(n.tag){case 3:kp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&kp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Fs]=e,e.stateNode=i}return Ti(e),null;case 13:if(xn(Cn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(An&&yr!==null&&e.mode&1&&!(e.flags&128))ER(),Ru(),e.flags|=98560,s=!1;else if(s=Gp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[Fs]=e}else Ru(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ti(e),s=!1}else ds!==null&&(lx(ds),ds=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Cn.current&1?$n===0&&($n=3):dA())),e.updateQueue!==null&&(e.flags|=4),Ti(e),null);case 4:return Pu(),ex(n,e),n===null&&Nd(e.stateNode.containerInfo),Ti(e),null;case 10:return YS(e.type._context),Ti(e),null;case 17:return or(e.type)&&B0(),Ti(e),null;case 19:if(xn(Cn),s=e.memoizedState,s===null)return Ti(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Rh(s,!1);else{if($n!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=k0(n),o!==null){for(e.flags|=128,Rh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return vn(Cn,Cn.current&1|2),e.child}n=n.sibling}s.tail!==null&&zn()>Nu&&(e.flags|=128,i=!0,Rh(s,!1),e.lanes=4194304)}else{if(!i)if(n=k0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Rh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!An)return Ti(e),null}else 2*zn()-s.renderingStartTime>Nu&&t!==1073741824&&(e.flags|=128,i=!0,Rh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=zn(),e.sibling=null,t=Cn.current,vn(Cn,i?t&1|2:t&1),e):(Ti(e),null);case 22:case 23:return hA(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?mr&1073741824&&(Ti(e),e.subtreeFlags&6&&(e.flags|=8192)):Ti(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function Z4(n,e){switch(WS(e),e.tag){case 1:return or(e.type)&&B0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Pu(),xn(sr),xn(Di),eA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return $S(e),null;case 13:if(xn(Cn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));Ru()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return xn(Cn),null;case 4:return Pu(),null;case 10:return YS(e.type._context),null;case 22:case 23:return hA(),null;case 24:return null;default:return null}}var Vp=!1,Bi=!1,Q4=typeof WeakSet=="function"?WeakSet:Set,$e=null;function lu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ln(n,e,i)}else t.current=null}function tx(n,e,t){try{t()}catch(i){Ln(n,e,i)}}var CE=!1;function q4(n,e){if(U1=I0,n=dR(),VS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++d===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(k1={focusedElem:n,selectionRange:t},I0=!1,$e=e;$e!==null;)if(e=$e,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,$e=n;else for(;$e!==null;){e=$e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,y=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:cs(e.type,S),y);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(M){Ln(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}return v=CE,CE=!1,v}function fd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&tx(e,t,s)}r=r.next}while(r!==i)}}function xg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function nx(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function cb(n){var e=n.alternate;e!==null&&(n.alternate=null,cb(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fs],delete e[Dd],delete e[H1],delete e[L4],delete e[D4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ub(n){return n.tag===5||n.tag===3||n.tag===4}function TE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ub(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ix(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=P0));else if(i!==4&&(n=n.child,n!==null))for(ix(n,e,t),n=n.sibling;n!==null;)ix(n,e,t),n=n.sibling}function rx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(rx(n,e,t),n=n.sibling;n!==null;)rx(n,e,t),n=n.sibling}var di=null,hs=!1;function Oo(n,e,t){for(t=t.child;t!==null;)hb(n,e,t),t=t.sibling}function hb(n,e,t){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(dg,t)}catch{}switch(t.tag){case 5:Bi||lu(t,e);case 6:var i=di,r=hs;di=null,Oo(n,e,t),di=i,hs=r,di!==null&&(hs?(n=di,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):di.removeChild(t.stateNode));break;case 18:di!==null&&(hs?(n=di,t=t.stateNode,n.nodeType===8?B_(n.parentNode,t):n.nodeType===1&&B_(n,t),bd(n)):B_(di,t.stateNode));break;case 4:i=di,r=hs,di=t.stateNode.containerInfo,hs=!0,Oo(n,e,t),di=i,hs=r;break;case 0:case 11:case 14:case 15:if(!Bi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tx(t,e,o),r=r.next}while(r!==i)}Oo(n,e,t);break;case 1:if(!Bi&&(lu(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Ln(t,e,a)}Oo(n,e,t);break;case 21:Oo(n,e,t);break;case 22:t.mode&1?(Bi=(i=Bi)||t.memoizedState!==null,Oo(n,e,t),Bi=i):Oo(n,e,t);break;default:Oo(n,e,t)}}function IE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Q4),e.forEach(function(i){var r=aO.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function is(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:di=a.stateNode,hs=!1;break e;case 3:di=a.stateNode.containerInfo,hs=!0;break e;case 4:di=a.stateNode.containerInfo,hs=!0;break e}a=a.return}if(di===null)throw Error(Le(160));hb(s,o,r),di=null,hs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ln(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)db(e,n),e=e.sibling}function db(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(is(e,n),Ps(n),i&4){try{fd(3,n,n.return),xg(3,n)}catch(S){Ln(n,n.return,S)}try{fd(5,n,n.return)}catch(S){Ln(n,n.return,S)}}break;case 1:is(e,n),Ps(n),i&512&&t!==null&&lu(t,t.return);break;case 5:if(is(e,n),Ps(n),i&512&&t!==null&&lu(t,t.return),n.flags&32){var r=n.stateNode;try{Cd(r,"")}catch(S){Ln(n,n.return,S)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&NI(r,s),I1(a,o);var c=I1(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?UI(r,f):d==="dangerouslySetInnerHTML"?FI(r,f):d==="children"?Cd(r,f):bS(r,d,f,c)}switch(a){case"input":w1(r,s);break;case"textarea":LI(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?_u(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?_u(r,!!s.multiple,s.defaultValue,!0):_u(r,!!s.multiple,s.multiple?[]:"",!1))}r[Dd]=s}catch(S){Ln(n,n.return,S)}}break;case 6:if(is(e,n),Ps(n),i&4){if(n.stateNode===null)throw Error(Le(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(S){Ln(n,n.return,S)}}break;case 3:if(is(e,n),Ps(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(S){Ln(n,n.return,S)}break;case 4:is(e,n),Ps(n);break;case 13:is(e,n),Ps(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(cA=zn())),i&4&&IE(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Bi=(c=Bi)||d,is(e,n),Bi=c):is(e,n),Ps(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for($e=n,d=n.child;d!==null;){for(f=$e=d;$e!==null;){switch(p=$e,m=p.child,p.tag){case 0:case 11:case 14:case 15:fd(4,p,p.return);break;case 1:lu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Ln(i,t,S)}}break;case 5:lu(p,p.return);break;case 22:if(p.memoizedState!==null){bE(f);continue}}m!==null?(m.return=p,$e=m):bE(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OI("display",o))}catch(S){Ln(n,n.return,S)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){Ln(n,n.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:is(e,n),Ps(n),i&4&&IE(n);break;case 21:break;default:is(e,n),Ps(n)}}function Ps(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(ub(t)){var i=t;break e}t=t.return}throw Error(Le(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Cd(r,""),i.flags&=-33);var s=TE(n);rx(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=TE(n);ix(n,a,o);break;default:throw Error(Le(161))}}catch(l){Ln(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function $4(n,e,t){$e=n,fb(n)}function fb(n,e,t){for(var i=(n.mode&1)!==0;$e!==null;){var r=$e,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Vp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Bi;a=Vp;var c=Bi;if(Vp=o,(Bi=l)&&!c)for($e=r;$e!==null;)o=$e,l=o.child,o.tag===22&&o.memoizedState!==null?PE(r):l!==null?(l.return=o,$e=l):PE(r);for(;s!==null;)$e=s,fb(s),s=s.sibling;$e=r,Vp=a,Bi=c}RE(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$e=s):RE(n)}}function RE(n){for(;$e!==null;){var e=$e;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bi||xg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:cs(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dE(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}dE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&bd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}Bi||e.flags&512&&nx(e)}catch(p){Ln(e,e.return,p)}}if(e===n){$e=null;break}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}}function bE(n){for(;$e!==null;){var e=$e;if(e===n){$e=null;break}var t=e.sibling;if(t!==null){t.return=e.return,$e=t;break}$e=e.return}}function PE(n){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{xg(4,e)}catch(l){Ln(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ln(e,r,l)}}var s=e.return;try{nx(e)}catch(l){Ln(e,s,l)}break;case 5:var o=e.return;try{nx(e)}catch(l){Ln(e,o,l)}}}catch(l){Ln(e,e.return,l)}if(e===n){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var eO=Math.ceil,H0=To.ReactCurrentDispatcher,aA=To.ReactCurrentOwner,Yr=To.ReactCurrentBatchConfig,Qt=0,li=null,Jn=null,mi=0,mr=0,cu=Pa(0),$n=0,zd=null,Wl=0,Sg=0,lA=0,pd=null,tr=null,cA=0,Nu=1/0,oo=null,V0=!1,sx=null,fa=null,jp=!1,sa=null,j0=0,md=0,ox=null,c0=-1,u0=0;function Xi(){return Qt&6?zn():c0!==-1?c0:c0=zn()}function pa(n){return n.mode&1?Qt&2&&mi!==0?mi&-mi:O4.transition!==null?(u0===0&&(u0=ZI()),u0):(n=cn,n!==0||(n=window.event,n=n===void 0?16:iR(n.type)),n):1}function ms(n,e,t,i){if(50<md)throw md=0,ox=null,Error(Le(185));ff(n,t,i),(!(Qt&2)||n!==li)&&(n===li&&(!(Qt&2)&&(Sg|=t),$n===4&&na(n,mi)),ar(n,i),t===1&&Qt===0&&!(e.mode&1)&&(Nu=zn()+500,vg&&Ba()))}function ar(n,e){var t=n.callbackNode;OF(n,e);var i=T0(n,n===li?mi:0);if(i===0)t!==null&&G2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&G2(t),e===1)n.tag===0?F4(BE.bind(null,n)):AR(BE.bind(null,n)),B4(function(){!(Qt&6)&&Ba()}),t=null;else{switch(QI(i)){case 1:t=DS;break;case 4:t=KI;break;case 16:t=C0;break;case 536870912:t=YI;break;default:t=C0}t=Sb(t,pb.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function pb(n,e){if(c0=-1,u0=0,Qt&6)throw Error(Le(327));var t=n.callbackNode;if(wu()&&n.callbackNode!==t)return null;var i=T0(n,n===li?mi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=W0(n,i);else{e=i;var r=Qt;Qt|=2;var s=gb();(li!==n||mi!==e)&&(oo=null,Nu=zn()+500,Ll(n,e));do try{iO();break}catch(a){mb(n,a)}while(!0);KS(),H0.current=s,Qt=r,Jn!==null?e=0:(li=null,mi=0,e=$n)}if(e!==0){if(e===2&&(r=N1(n),r!==0&&(i=r,e=ax(n,r))),e===1)throw t=zd,Ll(n,0),na(n,i),ar(n,zn()),t;if(e===6)na(n,i);else{if(r=n.current.alternate,!(i&30)&&!tO(r)&&(e=W0(n,i),e===2&&(s=N1(n),s!==0&&(i=s,e=ax(n,s))),e===1))throw t=zd,Ll(n,0),na(n,i),ar(n,zn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Le(345));case 2:ml(n,tr,oo);break;case 3:if(na(n,i),(i&130023424)===i&&(e=cA+500-zn(),10<e)){if(T0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Xi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=z1(ml.bind(null,n,tr,oo),e);break}ml(n,tr,oo);break;case 4:if(na(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-ps(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=zn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*eO(i/1960))-i,10<i){n.timeoutHandle=z1(ml.bind(null,n,tr,oo),i);break}ml(n,tr,oo);break;case 5:ml(n,tr,oo);break;default:throw Error(Le(329))}}}return ar(n,zn()),n.callbackNode===t?pb.bind(null,n):null}function ax(n,e){var t=pd;return n.current.memoizedState.isDehydrated&&(Ll(n,e).flags|=256),n=W0(n,e),n!==2&&(e=tr,tr=t,e!==null&&lx(e)),n}function lx(n){tr===null?tr=n:tr.push.apply(tr,n)}function tO(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!gs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function na(n,e){for(e&=~lA,e&=~Sg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ps(e),i=1<<t;n[t]=-1,e&=~i}}function BE(n){if(Qt&6)throw Error(Le(327));wu();var e=T0(n,0);if(!(e&1))return ar(n,zn()),null;var t=W0(n,e);if(n.tag!==0&&t===2){var i=N1(n);i!==0&&(e=i,t=ax(n,i))}if(t===1)throw t=zd,Ll(n,0),na(n,e),ar(n,zn()),t;if(t===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ml(n,tr,oo),ar(n,zn()),null}function uA(n,e){var t=Qt;Qt|=1;try{return n(e)}finally{Qt=t,Qt===0&&(Nu=zn()+500,vg&&Ba())}}function Xl(n){sa!==null&&sa.tag===0&&!(Qt&6)&&wu();var e=Qt;Qt|=1;var t=Yr.transition,i=cn;try{if(Yr.transition=null,cn=1,n)return n()}finally{cn=i,Yr.transition=t,Qt=e,!(Qt&6)&&Ba()}}function hA(){mr=cu.current,xn(cu)}function Ll(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,P4(t)),Jn!==null)for(t=Jn.return;t!==null;){var i=t;switch(WS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&B0();break;case 3:Pu(),xn(sr),xn(Di),eA();break;case 5:$S(i);break;case 4:Pu();break;case 13:xn(Cn);break;case 19:xn(Cn);break;case 10:YS(i.type._context);break;case 22:case 23:hA()}t=t.return}if(li=n,Jn=n=ma(n.current,null),mi=mr=e,$n=0,zd=null,lA=Sg=Wl=0,tr=pd=null,wl!==null){for(e=0;e<wl.length;e++)if(t=wl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}wl=null}return n}function mb(n,e){do{var t=Jn;try{if(KS(),o0.current=z0,G0){for(var i=Rn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}G0=!1}if(jl=0,ai=Qn=Rn=null,dd=!1,Ud=0,aA.current=null,t===null||t.return===null){$n=1,zd=e,Jn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=mi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=yE(o);if(m!==null){m.flags&=-257,xE(m,o,a,s,e),m.mode&1&&_E(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){_E(s,c,e),dA();break e}l=Error(Le(426))}}else if(An&&a.mode&1){var y=yE(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),xE(y,o,a,s,e),XS(Bu(l,a));break e}}s=l=Bu(l,a),$n!==4&&($n=2),pd===null?pd=[s]:pd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=qR(s,l,e);hE(s,g);break e;case 1:a=l;var x=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(fa===null||!fa.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=$R(s,a,e);hE(s,M);break e}}s=s.return}while(s!==null)}_b(t)}catch(P){e=P,Jn===t&&t!==null&&(Jn=t=t.return);continue}break}while(!0)}function gb(){var n=H0.current;return H0.current=z0,n===null?z0:n}function dA(){($n===0||$n===3||$n===2)&&($n=4),li===null||!(Wl&268435455)&&!(Sg&268435455)||na(li,mi)}function W0(n,e){var t=Qt;Qt|=2;var i=gb();(li!==n||mi!==e)&&(oo=null,Ll(n,e));do try{nO();break}catch(r){mb(n,r)}while(!0);if(KS(),Qt=t,H0.current=i,Jn!==null)throw Error(Le(261));return li=null,mi=0,$n}function nO(){for(;Jn!==null;)vb(Jn)}function iO(){for(;Jn!==null&&!IF();)vb(Jn)}function vb(n){var e=xb(n.alternate,n,mr);n.memoizedProps=n.pendingProps,e===null?_b(n):Jn=e,aA.current=null}function _b(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Z4(t,e),t!==null){t.flags&=32767,Jn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$n=6,Jn=null;return}}else if(t=Y4(t,e,mr),t!==null){Jn=t;return}if(e=e.sibling,e!==null){Jn=e;return}Jn=e=n}while(e!==null);$n===0&&($n=5)}function ml(n,e,t){var i=cn,r=Yr.transition;try{Yr.transition=null,cn=1,rO(n,e,t,i)}finally{Yr.transition=r,cn=i}return null}function rO(n,e,t,i){do wu();while(sa!==null);if(Qt&6)throw Error(Le(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(UF(n,s),n===li&&(Jn=li=null,mi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||jp||(jp=!0,Sb(C0,function(){return wu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Yr.transition,Yr.transition=null;var o=cn;cn=1;var a=Qt;Qt|=4,aA.current=null,q4(n,t),db(t,n),M4(k1),I0=!!U1,k1=U1=null,n.current=t,$4(t),RF(),Qt=a,cn=o,Yr.transition=s}else n.current=t;if(jp&&(jp=!1,sa=n,j0=r),s=n.pendingLanes,s===0&&(fa=null),BF(t.stateNode),ar(n,zn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(V0)throw V0=!1,n=sx,sx=null,n;return j0&1&&n.tag!==0&&wu(),s=n.pendingLanes,s&1?n===ox?md++:(md=0,ox=n):md=0,Ba(),null}function wu(){if(sa!==null){var n=QI(j0),e=Yr.transition,t=cn;try{if(Yr.transition=null,cn=16>n?16:n,sa===null)var i=!1;else{if(n=sa,sa=null,j0=0,Qt&6)throw Error(Le(331));var r=Qt;for(Qt|=4,$e=n.current;$e!==null;){var s=$e,o=s.child;if($e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($e=c;$e!==null;){var d=$e;switch(d.tag){case 0:case 11:case 15:fd(8,d,s)}var f=d.child;if(f!==null)f.return=d,$e=f;else for(;$e!==null;){d=$e;var p=d.sibling,m=d.return;if(cb(d),d===c){$e=null;break}if(p!==null){p.return=m,$e=p;break}$e=m}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var y=S.sibling;S.sibling=null,S=y}while(S!==null)}}$e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$e=o;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$e=g;break e}$e=s.return}}var x=n.current;for($e=x;$e!==null;){o=$e;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,$e=A;else e:for(o=x;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xg(9,a)}}catch(P){Ln(a,a.return,P)}if(a===o){$e=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,$e=M;break e}$e=a.return}}if(Qt=r,Ba(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(dg,n)}catch{}i=!0}return i}finally{cn=t,Yr.transition=e}}return!1}function NE(n,e,t){e=Bu(t,e),e=qR(n,e,1),n=da(n,e,1),e=Xi(),n!==null&&(ff(n,1,e),ar(n,e))}function Ln(n,e,t){if(n.tag===3)NE(n,n,t);else for(;e!==null;){if(e.tag===3){NE(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fa===null||!fa.has(i))){n=Bu(t,n),n=$R(e,n,1),e=da(e,n,1),n=Xi(),e!==null&&(ff(e,1,n),ar(e,n));break}}e=e.return}}function sO(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Xi(),n.pingedLanes|=n.suspendedLanes&t,li===n&&(mi&t)===t&&($n===4||$n===3&&(mi&130023424)===mi&&500>zn()-cA?Ll(n,0):lA|=t),ar(n,e)}function yb(n,e){e===0&&(n.mode&1?(e=Lp,Lp<<=1,!(Lp&130023424)&&(Lp=4194304)):e=1);var t=Xi();n=Mo(n,e),n!==null&&(ff(n,e,t),ar(n,t))}function oO(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),yb(n,t)}function aO(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Le(314))}i!==null&&i.delete(e),yb(n,t)}var xb;xb=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||sr.current)ir=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ir=!1,K4(n,e,t);ir=!!(n.flags&131072)}else ir=!1,An&&e.flags&1048576&&wR(e,D0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;l0(n,e),n=e.pendingProps;var r=Iu(e,Di.current);Au(e,t),r=nA(null,e,i,n,r,t);var s=iA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,or(i)?(s=!0,N0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,QS(e),r.updater=_g,e.stateNode=r,r._reactInternals=e,K1(e,i,n,t),e=Q1(null,e,i,!0,s,t)):(e.tag=0,An&&s&&jS(e),ji(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(l0(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=cO(i),n=cs(i,n),r){case 0:e=Z1(null,e,i,n,t);break e;case 1:e=wE(null,e,i,n,t);break e;case 11:e=SE(null,e,i,n,t);break e;case 14:e=AE(null,e,i,cs(i.type,n),t);break e}throw Error(Le(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),Z1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),wE(n,e,i,r,t);case 3:e:{if(ib(e),n===null)throw Error(Le(387));i=e.pendingProps,s=e.memoizedState,r=s.element,TR(n,e),U0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Bu(Error(Le(423)),e),e=ME(n,e,i,t,r);break e}else if(i!==r){r=Bu(Error(Le(424)),e),e=ME(n,e,i,t,r);break e}else for(yr=ha(e.stateNode.containerInfo.firstChild),xr=e,An=!0,ds=null,t=PR(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ru(),i===r){e=Eo(n,e,t);break e}ji(n,e,i,t)}e=e.child}return e;case 5:return BR(e),n===null&&W1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,G1(i,r)?o=null:s!==null&&G1(i,s)&&(e.flags|=32),nb(n,e),ji(n,e,o,t),e.child;case 6:return n===null&&W1(e),null;case 13:return rb(n,e,t);case 4:return qS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=bu(e,null,i,t):ji(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),SE(n,e,i,r,t);case 7:return ji(n,e,e.pendingProps,t),e.child;case 8:return ji(n,e,e.pendingProps.children,t),e.child;case 12:return ji(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,vn(F0,i._currentValue),i._currentValue=o,s!==null)if(gs(s.value,o)){if(s.children===r.children&&!sr.current){e=Eo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=vo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),X1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),X1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ji(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Au(e,t),r=Zr(r),i=i(r),e.flags|=1,ji(n,e,i,t),e.child;case 14:return i=e.type,r=cs(i,e.pendingProps),r=cs(i.type,r),AE(n,e,i,r,t);case 15:return eb(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cs(i,r),l0(n,e),e.tag=1,or(i)?(n=!0,N0(e)):n=!1,Au(e,t),RR(e,i,r),K1(e,i,r,t),Q1(null,e,i,!0,n,t);case 19:return sb(n,e,t);case 22:return tb(n,e,t)}throw Error(Le(156,e.tag))};function Sb(n,e){return JI(n,e)}function lO(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(n,e,t,i){return new lO(n,e,t,i)}function fA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cO(n){if(typeof n=="function")return fA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===BS)return 11;if(n===NS)return 14}return 2}function ma(n,e){var t=n.alternate;return t===null?(t=Jr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function h0(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")fA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case $c:return Dl(t.children,r,s,e);case PS:o=8,r|=8;break;case _1:return n=Jr(12,t,e,r|2),n.elementType=_1,n.lanes=s,n;case y1:return n=Jr(13,t,e,r),n.elementType=y1,n.lanes=s,n;case x1:return n=Jr(19,t,e,r),n.elementType=x1,n.lanes=s,n;case bI:return Ag(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case II:o=10;break e;case RI:o=9;break e;case BS:o=11;break e;case NS:o=14;break e;case Zo:o=16,i=null;break e}throw Error(Le(130,n==null?n:typeof n,""))}return e=Jr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Dl(n,e,t,i){return n=Jr(7,n,i,e),n.lanes=t,n}function Ag(n,e,t,i){return n=Jr(22,n,i,e),n.elementType=bI,n.lanes=t,n.stateNode={isHidden:!1},n}function G_(n,e,t){return n=Jr(6,n,null,e),n.lanes=t,n}function z_(n,e,t){return e=Jr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function uO(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S_(0),this.expirationTimes=S_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S_(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function pA(n,e,t,i,r,s,o,a,l){return n=new uO(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},QS(s),n}function hO(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Ab(n){if(!n)return Sa;n=n._reactInternals;e:{if(tc(n)!==n||n.tag!==1)throw Error(Le(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(n.tag===1){var t=n.type;if(or(t))return SR(n,t,e)}return e}function wb(n,e,t,i,r,s,o,a,l){return n=pA(t,i,!0,n,r,s,o,a,l),n.context=Ab(null),t=n.current,i=Xi(),r=pa(t),s=vo(i,r),s.callback=e??null,da(t,s,r),n.current.lanes=r,ff(n,r,i),ar(n,i),n}function wg(n,e,t,i){var r=e.current,s=Xi(),o=pa(r);return t=Ab(t),e.context===null?e.context=t:e.pendingContext=t,e=vo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=da(r,e,o),n!==null&&(ms(n,r,o,s),s0(n,r,o)),o}function X0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function LE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function mA(n,e){LE(n,e),(n=n.alternate)&&LE(n,e)}function dO(){return null}var Mb=typeof reportError=="function"?reportError:function(n){console.error(n)};function gA(n){this._internalRoot=n}Mg.prototype.render=gA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Le(409));wg(n,e,null,null)};Mg.prototype.unmount=gA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Xl(function(){wg(null,n,null,null)}),e[wo]=null}};function Mg(n){this._internalRoot=n}Mg.prototype.unstable_scheduleHydration=function(n){if(n){var e=eR();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ta.length&&e!==0&&e<ta[t].priority;t++);ta.splice(t,0,n),t===0&&nR(n)}};function vA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Eg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function DE(){}function fO(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=X0(o);s.call(c)}}var o=wb(e,i,n,0,null,!1,!1,"",DE);return n._reactRootContainer=o,n[wo]=o.current,Nd(n.nodeType===8?n.parentNode:n),Xl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=X0(l);a.call(c)}}var l=pA(n,0,!1,null,null,!1,!1,"",DE);return n._reactRootContainer=l,n[wo]=l.current,Nd(n.nodeType===8?n.parentNode:n),Xl(function(){wg(e,l,t,i)}),l}function Cg(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=X0(o);a.call(l)}}wg(e,o,n,r)}else o=fO(t,e,n,r,i);return X0(o)}qI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=nd(e.pendingLanes);t!==0&&(FS(e,t|1),ar(e,zn()),!(Qt&6)&&(Nu=zn()+500,Ba()))}break;case 13:Xl(function(){var i=Mo(n,1);if(i!==null){var r=Xi();ms(i,n,1,r)}}),mA(n,1)}};OS=function(n){if(n.tag===13){var e=Mo(n,134217728);if(e!==null){var t=Xi();ms(e,n,134217728,t)}mA(n,134217728)}};$I=function(n){if(n.tag===13){var e=pa(n),t=Mo(n,e);if(t!==null){var i=Xi();ms(t,n,e,i)}mA(n,e)}};eR=function(){return cn};tR=function(n,e){var t=cn;try{return cn=n,e()}finally{cn=t}};b1=function(n,e,t){switch(e){case"input":if(w1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=gg(i);if(!r)throw Error(Le(90));BI(i),w1(i,r)}}}break;case"textarea":LI(n,t);break;case"select":e=t.value,e!=null&&_u(n,!!t.multiple,e,!1)}};zI=uA;HI=Xl;var pO={usingClientEntryPoint:!1,Events:[mf,iu,gg,kI,GI,uA]},bh={findFiberByHostInstance:Al,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mO={bundleType:bh.bundleType,version:bh.version,rendererPackageName:bh.rendererPackageName,rendererConfig:bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WI(n),n===null?null:n.stateNode},findFiberByHostInstance:bh.findFiberByHostInstance||dO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wp.isDisabled&&Wp.supportsFiber)try{dg=Wp.inject(mO),Us=Wp}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pO;Tr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vA(e))throw Error(Le(200));return hO(n,e,null,t)};Tr.createRoot=function(n,e){if(!vA(n))throw Error(Le(299));var t=!1,i="",r=Mb;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=pA(n,1,!1,null,null,t,!1,i,r),n[wo]=e.current,Nd(n.nodeType===8?n.parentNode:n),new gA(e)};Tr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=WI(e),n=n===null?null:n.stateNode,n};Tr.flushSync=function(n){return Xl(n)};Tr.hydrate=function(n,e,t){if(!Eg(e))throw Error(Le(200));return Cg(null,n,e,!0,t)};Tr.hydrateRoot=function(n,e,t){if(!vA(n))throw Error(Le(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=Mb;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wb(e,null,n,1,t??null,r,!1,s,o),n[wo]=e.current,Nd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Mg(e)};Tr.render=function(n,e,t){if(!Eg(e))throw Error(Le(200));return Cg(null,n,e,!1,t)};Tr.unmountComponentAtNode=function(n){if(!Eg(n))throw Error(Le(40));return n._reactRootContainer?(Xl(function(){Cg(null,null,n,!1,function(){n._reactRootContainer=null,n[wo]=null})}),!0):!1};Tr.unstable_batchedUpdates=uA;Tr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Eg(t))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return Cg(n,e,t,!1,i)};Tr.version="18.2.0-next-9e3b772b8-20220608";function Eb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Eb)}catch(n){console.error(n)}}Eb(),wI.exports=Tr;var gO=wI.exports,FE=gO;g1.createRoot=FE.createRoot,g1.hydrateRoot=FE.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hd(){return Hd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hd.apply(this,arguments)}var oa;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(oa||(oa={}));const OE="popstate";function vO(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return cx("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:J0(r)}return yO(e,t,null,n)}function On(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cb(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _O(){return Math.random().toString(36).substr(2,8)}function UE(n,e){return{usr:n.state,key:n.key,idx:e}}function cx(n,e,t,i){return t===void 0&&(t=null),Hd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ku(e):e,{state:t,key:e&&e.key||i||_O()})}function J0(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ku(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function yO(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=oa.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Hd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=oa.Pop;let y=d(),g=y==null?null:y-c;c=y,l&&l({action:a,location:S.location,delta:g})}function p(y,g){a=oa.Push;let x=cx(S.location,y,g);t&&t(x,y),c=d()+1;let A=UE(x,c),M=S.createHref(x);try{o.pushState(A,"",M)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(M)}s&&l&&l({action:a,location:S.location,delta:1})}function m(y,g){a=oa.Replace;let x=cx(S.location,y,g);t&&t(x,y),c=d();let A=UE(x,c),M=S.createHref(x);o.replaceState(A,"",M),s&&l&&l({action:a,location:S.location,delta:0})}function v(y){let g=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof y=="string"?y:J0(y);return x=x.replace(/ $/,"%20"),On(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let S={get action(){return a},get location(){return n(r,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(OE,f),l=y,()=>{r.removeEventListener(OE,f),l=null}},createHref(y){return e(r,y)},createURL:v,encodeLocation(y){let g=v(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(y){return o.go(y)}};return S}var kE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(kE||(kE={}));function xO(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Ku(e):e,r=Lu(i.pathname||"/",t);if(r==null)return null;let s=Tb(n);SO(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=BO(r);o=bO(s[a],l)}return o}function Tb(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(On(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ga([i,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(On(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Tb(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:IO(c,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of Ib(s.path))r(s,o,l)}),e}function Ib(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=Ib(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function SO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RO(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const AO=/^:[\w-]+$/,wO=3,MO=2,EO=1,CO=10,TO=-2,GE=n=>n==="*";function IO(n,e){let t=n.split("/"),i=t.length;return t.some(GE)&&(i+=TO),e&&(i+=MO),t.filter(r=>!GE(r)).reduce((r,s)=>r+(AO.test(s)?wO:s===""?EO:CO),i)}function RO(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function bO(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=r==="/"?e:e.slice(r.length)||"/",d=ux({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(i,d.params);let f=a.route;s.push({params:i,pathname:ga([r,d.pathname]),pathnameBase:FO(ga([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=ga([r,d.pathnameBase]))}return s}function ux(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=PO(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function PO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Cb(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function BO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cb(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Lu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function NO(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Ku(n):n;return{pathname:t?t.startsWith("/")?t:LO(t,e):e,search:OO(i),hash:UO(r)}}function LO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function H_(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rb(n,e){let t=DO(n);return e?t.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function bb(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Ku(n):(r=Hd({},n),On(!r.pathname||!r.pathname.includes("?"),H_("?","pathname","search",r)),On(!r.pathname||!r.pathname.includes("#"),H_("#","pathname","hash",r)),On(!r.search||!r.search.includes("#"),H_("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=NO(r,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ga=n=>n.join("/").replace(/\/\/+/g,"/"),FO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function kO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Pb=["post","put","patch","delete"];new Set(Pb);const GO=["get",...Pb];new Set(GO);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vd(){return Vd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vd.apply(this,arguments)}const Tg=J.createContext(null),Bb=J.createContext(null),Na=J.createContext(null),Ig=J.createContext(null),La=J.createContext({outlet:null,matches:[],isDataRoute:!1}),Nb=J.createContext(null);function zO(n,e){let{relative:t}=e===void 0?{}:e;vf()||On(!1);let{basename:i,navigator:r}=J.useContext(Na),{hash:s,pathname:o,search:a}=Rg(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ga([i,o])),r.createHref({pathname:l,search:a,hash:s})}function vf(){return J.useContext(Ig)!=null}function Da(){return vf()||On(!1),J.useContext(Ig).location}function Lb(n){J.useContext(Na).static||J.useLayoutEffect(n)}function HO(){let{isDataRoute:n}=J.useContext(La);return n?nU():VO()}function VO(){vf()||On(!1);let n=J.useContext(Tg),{basename:e,future:t,navigator:i}=J.useContext(Na),{matches:r}=J.useContext(La),{pathname:s}=Da(),o=JSON.stringify(Rb(r,t.v7_relativeSplatPath)),a=J.useRef(!1);return Lb(()=>{a.current=!0}),J.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=bb(c,JSON.parse(o),s,d.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ga([e,f.pathname])),(d.replace?i.replace:i.push)(f,d.state,d)},[e,i,o,s,n])}function jO(){let{matches:n}=J.useContext(La),e=n[n.length-1];return e?e.params:{}}function Rg(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=J.useContext(Na),{matches:r}=J.useContext(La),{pathname:s}=Da(),o=JSON.stringify(Rb(r,i.v7_relativeSplatPath));return J.useMemo(()=>bb(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function WO(n,e){return XO(n,e)}function XO(n,e,t,i){vf()||On(!1);let{navigator:r}=J.useContext(Na),{matches:s}=J.useContext(La),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Da(),d;if(e){var f;let y=typeof e=="string"?Ku(e):e;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||On(!1),d=y}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let y=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=xO(n,{pathname:m}),S=QO(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ga([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:ga([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,t,i);return e&&S?J.createElement(Ig.Provider,{value:{location:Vd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:oa.Pop}},S):S}function JO(){let n=tU(),e=kO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:r},t):null,null)}const KO=J.createElement(JO,null);class YO extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(La.Provider,{value:this.props.routeContext},J.createElement(Nb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZO(n){let{routeContext:e,match:t,children:i}=n,r=J.useContext(Tg);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(La.Provider,{value:e},i)}function QO(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id]));d>=0||On(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let m,v=!1,S=null,y=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||KO,l&&(c<0&&p===0?(iU("route-fallback",!1),v=!0,y=null):c===p&&(v=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),x=()=>{let A;return m?A=S:v?A=y:f.route.Component?A=J.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=d,J.createElement(ZO,{match:f,routeContext:{outlet:d,matches:g,isDataRoute:t!=null},children:A})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?J.createElement(YO,{location:t.location,revalidation:t.revalidation,component:S,error:m,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var Db=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Db||{}),K0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(K0||{});function qO(n){let e=J.useContext(Tg);return e||On(!1),e}function $O(n){let e=J.useContext(Bb);return e||On(!1),e}function eU(n){let e=J.useContext(La);return e||On(!1),e}function Fb(n){let e=eU(),t=e.matches[e.matches.length-1];return t.route.id||On(!1),t.route.id}function tU(){var n;let e=J.useContext(Nb),t=$O(K0.UseRouteError),i=Fb(K0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function nU(){let{router:n}=qO(Db.UseNavigateStable),e=Fb(K0.UseNavigateStable),t=J.useRef(!1);return Lb(()=>{t.current=!0}),J.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Vd({fromRouteId:e},s)))},[n,e])}const zE={};function iU(n,e,t){!e&&!zE[n]&&(zE[n]=!0)}function Yc(n){On(!1)}function rU(n){let{basename:e="/",children:t=null,location:i,navigationType:r=oa.Pop,navigator:s,static:o=!1,future:a}=n;vf()&&On(!1);let l=e.replace(/^\/*/,"/"),c=J.useMemo(()=>({basename:l,navigator:s,static:o,future:Vd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Ku(i));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:v="default"}=i,S=J.useMemo(()=>{let y=Lu(d,l);return y==null?null:{location:{pathname:y,search:f,hash:p,state:m,key:v},navigationType:r}},[l,d,f,p,m,v,r]);return S==null?null:J.createElement(Na.Provider,{value:c},J.createElement(Ig.Provider,{children:t,value:S}))}function sU(n){let{children:e,location:t}=n;return WO(hx(e),t)}new Promise(()=>{});function hx(n,e){e===void 0&&(e=[]);let t=[];return J.Children.forEach(n,(i,r)=>{if(!J.isValidElement(i))return;let s=[...e,r];if(i.type===J.Fragment){t.push.apply(t,hx(i.props.children,s));return}i.type!==Yc&&On(!1),!i.props.index||!i.props.children||On(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=hx(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Y0(){return Y0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Y0.apply(this,arguments)}function Ob(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function oU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aU(n,e){return n.button===0&&(!e||e==="_self")&&!oU(n)}const lU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cU=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],uU="6";try{window.__reactRouterVersion=uU}catch{}const hU=J.createContext({isTransitioning:!1}),dU="startTransition",HE=oF[dU];function fU(n){let{basename:e,children:t,future:i,window:r}=n,s=J.useRef();s.current==null&&(s.current=vO({window:r,v5Compat:!0}));let o=s.current,[a,l]=J.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=J.useCallback(f=>{c&&HE?HE(()=>l(f)):l(f)},[l,c]);return J.useLayoutEffect(()=>o.listen(d),[o,d]),J.createElement(rU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const pU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nr=J.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:f}=e,p=Ob(e,lU),{basename:m}=J.useContext(Na),v,S=!1;if(typeof c=="string"&&mU.test(c)&&(v=c,pU))try{let A=new URL(window.location.href),M=c.startsWith("//")?new URL(A.protocol+c):new URL(c),P=Lu(M.pathname,m);M.origin===A.origin&&P!=null?c=P+M.search+M.hash:S=!0}catch{}let y=zO(c,{relative:r}),g=vU(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:r,unstable_viewTransition:f});function x(A){i&&i(A),A.defaultPrevented||g(A)}return J.createElement("a",Y0({},p,{href:v||y,onClick:S||s?i:x,ref:t,target:l}))}),Xp=J.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:d}=e,f=Ob(e,cU),p=Rg(l,{relative:f.relative}),m=Da(),v=J.useContext(Bb),{navigator:S,basename:y}=J.useContext(Na),g=v!=null&&_U(p)&&c===!0,x=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,A=m.pathname,M=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(A=A.toLowerCase(),M=M?M.toLowerCase():null,x=x.toLowerCase()),M&&y&&(M=Lu(M,y)||M);const P=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let I=A===x||!o&&A.startsWith(x)&&A.charAt(P)==="/",L=M!=null&&(M===x||!o&&M.startsWith(x)&&M.charAt(x.length)==="/"),N={isActive:I,isPending:L,isTransitioning:g},B=I?i:void 0,R;typeof s=="function"?R=s(N):R=[s,I?"active":null,L?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(N):a;return J.createElement(nr,Y0({},f,{"aria-current":B,className:R,ref:t,style:O,to:l,unstable_viewTransition:c}),typeof d=="function"?d(N):d)});var dx;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(dx||(dx={}));var VE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(VE||(VE={}));function gU(n){let e=J.useContext(Tg);return e||On(!1),e}function vU(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=HO(),c=Da(),d=Rg(n,{relative:o});return J.useCallback(f=>{if(aU(f,t)){f.preventDefault();let p=i!==void 0?i:J0(c)===J0(d);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,i,r,t,n,s,o,a])}function _U(n,e){e===void 0&&(e={});let t=J.useContext(hU);t==null&&On(!1);let{basename:i}=gU(dx.useViewTransitionState),r=Rg(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Lu(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=Lu(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ux(r.pathname,o)!=null||ux(r.pathname,s)!=null}const _A=J.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),bg=J.createContext({}),Pg=J.createContext(null),yA=typeof document<"u",xA=yA?J.useLayoutEffect:J.useEffect,Ub=J.createContext({strict:!1}),SA=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yU="framerAppearId",kb="data-"+SA(yU),xU={skipAnimations:!1,useManualTiming:!1};class jE{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function SU(n){let e=new jE,t=new jE,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const f=d&&r,p=f?e:t;return c&&o.add(l),p.add(l)&&f&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let c=0;c<i;c++){const d=e.order[c];o.has(d)&&(a.schedule(d),n()),d(l)}r=!1,s&&(s=!1,a.process(l))}};return a}const Jp=["read","resolveKeyframes","update","preRender","render","postRender"],AU=40;function Gb(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Jp.reduce((f,p)=>(f[p]=SU(()=>t=!0),f),{}),o=f=>{s[f].process(r)},a=()=>{const f=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(f-r.timestamp,AU),1),r.timestamp=f,r.isProcessing=!0,Jp.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:Jp.reduce((f,p)=>{const m=s[p];return f[p]=(v,S=!1,y=!1)=>(t||l(),m.schedule(v,S,y)),f},{}),cancel:f=>Jp.forEach(p=>s[p].cancel(f)),state:r,steps:s}}const{schedule:AA,cancel:pK}=Gb(queueMicrotask,!1);function wU(n,e,t,i){const{visualElement:r}=J.useContext(bg),s=J.useContext(Ub),o=J.useContext(Pg),a=J.useContext(_A).reducedMotion,l=J.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;J.useInsertionEffect(()=>{c&&c.update(t,o)});const d=J.useRef(!!(t[kb]&&!window.HandoffComplete));return xA(()=>{c&&(AA.postRender(c.render),d.current&&c.animationState&&c.animationState.animateChanges())}),J.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function uu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function MU(n,e,t){return J.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):uu(t)&&(t.current=i))},[e])}function jd(n){return typeof n=="string"||Array.isArray(n)}function Bg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const wA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MA=["initial",...wA];function Ng(n){return Bg(n.animate)||MA.some(e=>jd(n[e]))}function zb(n){return!!(Ng(n)||n.variants)}function EU(n,e){if(Ng(n)){const{initial:t,animate:i}=n;return{initial:t===!1||jd(t)?t:void 0,animate:jd(i)?i:void 0}}return n.inherit!==!1?e:{}}function CU(n){const{initial:e,animate:t}=EU(n,J.useContext(bg));return J.useMemo(()=>({initial:e,animate:t}),[WE(e),WE(t)])}function WE(n){return Array.isArray(n)?n.join(" "):n}const XE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wd={};for(const n in XE)Wd[n]={isEnabled:e=>XE[n].some(t=>!!e[t])};function TU(n){for(const e in n)Wd[e]={...Wd[e],...n[e]}}const EA=J.createContext({}),Hb=J.createContext({}),IU=Symbol.for("motionComponentSymbol");function RU({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&TU(n);function s(a,l){let c;const d={...J.useContext(_A),...a,layoutId:bU(a)},{isStatic:f}=d,p=CU(a),m=i(a,f);if(!f&&yA){p.visualElement=wU(r,m,d,e);const v=J.useContext(Hb),S=J.useContext(Ub).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,S,n,v))}return C.jsxs(bg.Provider,{value:p,children:[c&&p.visualElement?C.jsx(c,{visualElement:p.visualElement,...d}):null,t(r,a,MU(m,p.visualElement,l),m,f,p.visualElement)]})}const o=J.forwardRef(s);return o[IU]=r,o}function bU({layoutId:n}){const e=J.useContext(EA).id;return e&&n!==void 0?e+"-"+n:n}function PU(n){function e(i,r={}){return RU(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const BU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function CA(n){return typeof n!="string"||n.includes("-")?!1:!!(BU.indexOf(n)>-1||/[A-Z]/u.test(n))}const Z0={};function NU(n){Object.assign(Z0,n)}const _f=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nc=new Set(_f);function Vb(n,{layout:e,layoutId:t}){return nc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Z0[n]||n==="opacity")}const Ni=n=>!!(n&&n.getVelocity),LU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DU=_f.length;function FU(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<DU;o++){const a=_f[o];if(n[a]!==void 0){const l=LU[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const jb=n=>e=>typeof e=="string"&&e.startsWith(n),Wb=jb("--"),OU=jb("var(--"),TA=n=>OU(n)?UU.test(n.split("/*")[0].trim()):!1,UU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kU=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Aa=(n,e,t)=>t>e?e:t<n?n:t,Yu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},gd={...Yu,transform:n=>Aa(0,1,n)},Kp={...Yu,default:1},vd=n=>Math.round(n*1e5)/1e5,IA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,GU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,zU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function yf(n){return typeof n=="string"}const xf=n=>({test:e=>yf(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ko=xf("deg"),Gs=xf("%"),gt=xf("px"),HU=xf("vh"),VU=xf("vw"),JE={...Gs,parse:n=>Gs.parse(n)/100,transform:n=>Gs.transform(n*100)},KE={...Yu,transform:Math.round},Xb={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,radius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,size:gt,top:gt,right:gt,bottom:gt,left:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,rotate:Ko,rotateX:Ko,rotateY:Ko,rotateZ:Ko,scale:Kp,scaleX:Kp,scaleY:Kp,scaleZ:Kp,skew:Ko,skewX:Ko,skewY:Ko,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:gd,originX:JE,originY:JE,originZ:gt,zIndex:KE,backgroundPositionX:gt,backgroundPositionY:gt,fillOpacity:gd,strokeOpacity:gd,numOctaves:KE};function RA(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,c=!1,d=!0;for(const f in e){const p=e[f];if(Wb(f)){s[f]=p;continue}const m=Xb[f],v=kU(p,m);if(nc.has(f)){if(l=!0,o[f]=v,!d)continue;p!==(m.default||0)&&(d=!1)}else f.startsWith("origin")?(c=!0,a[f]=v):r[f]=v}if(e.transform||(l||i?r.transform=FU(n.transform,t,d,i):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${f} ${p} ${m}`}}const bA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Jb(n,e,t){for(const i in e)!Ni(e[i])&&!Vb(i,t)&&(n[i]=e[i])}function jU({transformTemplate:n},e,t){return J.useMemo(()=>{const i=bA();return RA(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function WU(n,e,t){const i=n.style||{},r={};return Jb(r,i,n),Object.assign(r,jU(n,e,t)),r}function XU(n,e,t){const i={},r=WU(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const JU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Q0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||JU.has(n)}let Kb=n=>!Q0(n);function KU(n){n&&(Kb=e=>e.startsWith("on")?!Q0(e):n(e))}try{KU(require("@emotion/is-prop-valid").default)}catch{}function YU(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(Kb(r)||t===!0&&Q0(r)||!e&&!Q0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function YE(n,e,t){return typeof n=="string"?n:gt.transform(e+t*n)}function ZU(n,e,t){const i=YE(e,n.x,n.width),r=YE(t,n.y,n.height);return`${i} ${r}`}const QU={offset:"stroke-dashoffset",array:"stroke-dasharray"},qU={offset:"strokeDashoffset",array:"strokeDasharray"};function $U(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?QU:qU;n[s.offset]=gt.transform(-i);const o=gt.transform(e),a=gt.transform(t);n[s.array]=`${o} ${a}`}function PA(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,f,p){if(RA(n,c,d,p),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v,dimensions:S}=n;m.transform&&(S&&(v.transform=m.transform),delete m.transform),S&&(r!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=ZU(S,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&$U(m,o,a,l,!1)}const Yb=()=>({...bA(),attrs:{}}),BA=n=>typeof n=="string"&&n.toLowerCase()==="svg";function e5(n,e,t,i){const r=J.useMemo(()=>{const s=Yb();return PA(s,e,{enableHardwareAcceleration:!1},BA(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};Jb(s,n.style,n),r.style={...s,...r.style}}return r}function t5(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(CA(t)?e5:XU)(i,s,o,t),c=YU(i,typeof t=="string",n),d=t!==J.Fragment?{...c,...l,ref:r}:{},{children:f}=i,p=J.useMemo(()=>Ni(f)?f.get():f,[f]);return J.createElement(t,{...d,children:p})}}function Zb(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const Qb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qb(n,e,t,i){Zb(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(Qb.has(r)?r:SA(r),e.attrs[r])}function NA(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(Ni(r[o])||e.style&&Ni(e.style[o])||Vb(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function $b(n,e,t){const i=NA(n,e,t);for(const r in n)if(Ni(n[r])||Ni(e[r])){const s=_f.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function LA(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function eP(n){const e=J.useRef(null);return e.current===null&&(e.current=n()),e.current}const fx=n=>Array.isArray(n),n5=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),i5=n=>fx(n)?n[n.length-1]||0:n;function d0(n){const e=Ni(n)?n.get():n;return n5(e)?e.toValue():e}function r5({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:s5(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const tP=n=>(e,t)=>{const i=J.useContext(bg),r=J.useContext(Pg),s=()=>r5(n,e,i,r);return t?s():eP(s)};function s5(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=d0(s[p]);let{initial:o,animate:a}=n;const l=Ng(n),c=zb(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const f=d?a:o;return f&&typeof f!="boolean"&&!Bg(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const v=LA(n,m);if(!v)return;const{transitionEnd:S,transition:y,...g}=v;for(const x in g){let A=g[x];if(Array.isArray(A)){const M=d?A.length-1:0;A=A[M]}A!==null&&(r[x]=A)}for(const x in S)r[x]=S[x]}),r}const Li=n=>n,{schedule:ci,cancel:wa,state:fi,steps:V_}=Gb(typeof requestAnimationFrame<"u"?requestAnimationFrame:Li,!0),o5={useVisualState:tP({scrapeMotionValuesFromProps:$b,createRenderState:Yb,onMount:(n,e,{renderState:t,latestValues:i})=>{ci.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),ci.render(()=>{PA(t,i,{enableHardwareAcceleration:!1},BA(e.tagName),n.transformTemplate),qb(e,t)})}})},a5={useVisualState:tP({scrapeMotionValuesFromProps:NA,createRenderState:bA})};function l5(n,{forwardMotionProps:e=!1},t,i){return{...CA(n)?o5:a5,preloadedFeatures:t,useRender:t5(e),createVisualElement:i,Component:n}}function po(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const nP=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Lg(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const c5=n=>e=>nP(e)&&n(e,Lg(e));function _o(n,e,t,i){return po(n,e,c5(t),i)}const u5=(n,e)=>t=>e(n(t)),yo=(...n)=>n.reduce(u5);function iP(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const ZE=iP("dragHorizontal"),QE=iP("dragVertical");function rP(n){let e=!1;if(n==="y")e=QE();else if(n==="x")e=ZE();else{const t=ZE(),i=QE();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function sP(){const n=rP(!0);return n?(n(),!1):!0}class Fa{constructor(e){this.isMounted=!1,this.node=e}update(){}}function qE(n,e){const t=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(s,o)=>{if(s.pointerType==="touch"||sP())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e);const l=a[i];l&&l(s,o)};return _o(n.current,t,r,{passive:!n.getProps()[i]})}class h5 extends Fa{mount(){this.unmount=yo(qE(this.node,!0),qE(this.node,!1))}unmount(){}}class d5 extends Fa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yo(po(this.node.current,"focus",()=>this.onFocus()),po(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const oP=(n,e)=>e?n===e?!0:oP(n,e.parentElement):!1;function j_(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Lg(t))}class f5 extends Fa{constructor(){super(...arguments),this.removeStartListeners=Li,this.removeEndListeners=Li,this.removeAccessibleListeners=Li,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=_o(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:f}=this.node.getProps();!f&&!oP(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)},{passive:!(i.onTap||i.onPointerUp)}),o=_o(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=yo(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||j_("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&d(l,c)})};this.removeEndListeners(),this.removeEndListeners=po(this.node.current,"keyup",o),j_("down",(a,l)=>{this.startPress(a,l)})},t=po(this.node.current,"keydown",e),i=()=>{this.isPressing&&j_("cancel",(s,o)=>this.cancelPress(s,o))},r=po(this.node.current,"blur",i);this.removeAccessibleListeners=yo(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&i(e,t)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sP()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&i(e,t)}mount(){const e=this.node.getProps(),t=_o(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=po(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=yo(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const px=new WeakMap,W_=new WeakMap,p5=n=>{const e=px.get(n.target);e&&e(n)},m5=n=>{n.forEach(p5)};function g5({root:n,...e}){const t=n||document;W_.has(t)||W_.set(t,{});const i=W_.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(m5,{root:n,...e})),i[r]}function v5(n,e,t){const i=g5(e);return px.set(n,t),i.observe(n),()=>{px.delete(n),i.unobserve(n)}}const _5={some:0,all:1};class y5 extends Fa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:_5[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return v5(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(x5(e,t))&&this.startObserver()}unmount(){}}function x5({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const S5={inView:{Feature:y5},tap:{Feature:f5},focus:{Feature:d5},hover:{Feature:h5}};function aP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function A5(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function w5(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function Dg(n,e,t){const i=n.getProps();return LA(i,e,t!==void 0?t:i.custom,A5(n),w5(n))}const va=n=>n*1e3,xo=n=>n/1e3,M5={type:"spring",stiffness:500,damping:25,restSpeed:10},E5=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),C5={type:"keyframes",duration:.8},T5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},I5=(n,{keyframes:e})=>e.length>2?C5:nc.has(n)?n.startsWith("scale")?E5(e[1]):M5:T5;function R5({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function DA(n,e){return n[e]||n.default||n}const b5=n=>n!==null;function Fg(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(b5),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}let f0;function P5(){f0=void 0}const _a={now:()=>(f0===void 0&&_a.set(fi.isProcessing||xU.useManualTiming?fi.timestamp:performance.now()),f0),set:n=>{f0=n,queueMicrotask(P5)}},lP=n=>/^0[^.\s]+$/u.test(n);function B5(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||lP(n):!0}let cP=Li;const uP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),N5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L5(n){const e=N5.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function hP(n,e,t=1){const[i,r]=L5(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return uP(o)?parseFloat(o):o}return TA(r)?hP(r,e,t+1):r}const D5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),$E=n=>n===Yu||n===gt,eC=(n,e)=>parseFloat(n.split(", ")[e]),tC=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return eC(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?eC(s[1],n):0}},F5=new Set(["x","y","z"]),O5=_f.filter(n=>!F5.has(n));function U5(n){const e=[];return O5.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Du={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:tC(4,13),y:tC(5,14)};Du.translateX=Du.x;Du.translateY=Du.y;const dP=n=>e=>e.test(n),k5={test:n=>n==="auto",parse:n=>n},fP=[Yu,gt,Gs,Ko,VU,HU,k5],nC=n=>fP.find(dP(n)),Fl=new Set;let mx=!1,gx=!1;function pP(){if(gx){const n=Array.from(Fl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=U5(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}gx=!1,mx=!1,Fl.forEach(n=>n.complete()),Fl.clear()}function mP(){Fl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(gx=!0)})}function G5(){mP(),pP()}class FA{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fl.add(this),mx||(mx=!0,ci.read(mP),ci.resolveKeyframes(pP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const OA=(n,e)=>t=>!!(yf(t)&&zU.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),gP=(n,e,t)=>i=>{if(!yf(i))return i;const[r,s,o,a]=i.match(IA);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},z5=n=>Aa(0,255,n),X_={...Yu,transform:n=>Math.round(z5(n))},El={test:OA("rgb","red"),parse:gP("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+X_.transform(n)+", "+X_.transform(e)+", "+X_.transform(t)+", "+vd(gd.transform(i))+")"};function H5(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const vx={test:OA("#"),parse:H5,transform:El.transform},hu={test:OA("hsl","hue"),parse:gP("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Gs.transform(vd(e))+", "+Gs.transform(vd(t))+", "+vd(gd.transform(i))+")"},Pi={test:n=>El.test(n)||vx.test(n)||hu.test(n),parse:n=>El.test(n)?El.parse(n):hu.test(n)?hu.parse(n):vx.parse(n),transform:n=>yf(n)?n:n.hasOwnProperty("red")?El.transform(n):hu.transform(n)};function V5(n){var e,t;return isNaN(n)&&yf(n)&&(((e=n.match(IA))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(GU))===null||t===void 0?void 0:t.length)||0)>0}const vP="number",_P="color",j5="var",W5="var(",iC="${}",X5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function q0(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(X5,l=>(Pi.test(l)?(i.color.push(s),r.push(_P),t.push(Pi.parse(l))):l.startsWith(W5)?(i.var.push(s),r.push(j5),t.push(l)):(i.number.push(s),r.push(vP),t.push(parseFloat(l))),++s,iC)).split(iC);return{values:t,split:a,indexes:i,types:r}}function yP(n){return q0(n).values}function xP(n){const{split:e,types:t}=q0(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===vP?s+=vd(r[o]):a===_P?s+=Pi.transform(r[o]):s+=r[o]}return s}}const J5=n=>typeof n=="number"?0:n;function K5(n){const e=yP(n);return xP(n)(e.map(J5))}const Ma={test:V5,parse:yP,createTransformer:xP,getAnimatableNone:K5},Y5=new Set(["brightness","contrast","saturate","opacity"]);function Z5(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(IA)||[];if(!i)return n;const r=t.replace(i,"");let s=Y5.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Q5=/\b([a-z-]*)\(.*?\)/gu,_x={...Ma,getAnimatableNone:n=>{const e=n.match(Q5);return e?e.map(Z5).join(" "):n}},q5={...Xb,color:Pi,backgroundColor:Pi,outlineColor:Pi,fill:Pi,stroke:Pi,borderColor:Pi,borderTopColor:Pi,borderRightColor:Pi,borderBottomColor:Pi,borderLeftColor:Pi,filter:_x,WebkitFilter:_x},UA=n=>q5[n];function SP(n,e){let t=UA(n);return t!==_x&&(t=Ma),t.getAnimatableNone?t.getAnimatableNone(e):void 0}function $5(n,e,t){let i=0,r;for(;i<n.length&&!r;)typeof n[i]=="string"&&n[i]!=="none"&&n[i]!=="0"&&(r=n[i]),i++;if(r&&t)for(const s of e)n[s]=SP(t,r)}class AP extends FA{constructor(e,t,i,r){super(e,t,i,r,r==null?void 0:r.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){const c=e[l];if(typeof c=="string"&&TA(c)){const d=hP(c,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(!D5.has(i)||e.length!==2)return this.resolveNoneKeyframes();const[r,s]=e,o=nC(r),a=nC(s);if(o!==a)if($E(o)&&$E(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)B5(e[r])&&i.push(r);i.length&&$5(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Du[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Du[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function ek(n){let e;return()=>(e===void 0&&(e=n()),e)}const rC=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ma.test(n)||n==="0")&&!n.startsWith("url("));function tk(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function nk(n,e,t,i){const r=n[0];if(r===null)return!1;const s=n[n.length-1],o=rC(r,e),a=rC(s,e);return!o||!a?!1:tk(n)||t==="spring"&&i}class wP{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&G5(),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!nk(e,i,r,s))if(o)this.options.duration=0;else{l==null||l(Fg(e,this.options,t)),a==null||a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,t);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...d},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function MP(n,e){return e?n*(1e3/e):0}const ik=5;function EP(n,e,t){const i=Math.max(e-ik,0);return MP(t-n(i),e-i)}const J_=.001,rk=.01,sk=10,ok=.05,ak=1;function lk({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=Aa(ok,ak,o),n=Aa(rk,sk,xo(n)),o<1?(r=c=>{const d=c*o,f=d*n,p=d-t,m=yx(c,o),v=Math.exp(-f);return J_-p/m*v},s=c=>{const f=c*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-f),S=yx(Math.pow(c,2),o);return(-r(c)+J_>0?-1:1)*((p-m)*v)/S}):(r=c=>{const d=Math.exp(-c*n),f=(c-t)*n+1;return-J_+d*f},s=c=>{const d=Math.exp(-c*n),f=(t-c)*(n*n);return d*f});const a=5/n,l=uk(r,s,a);if(n=va(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const ck=12;function uk(n,e,t){let i=t;for(let r=1;r<ck;r++)i=i-n(i)/e(i);return i}function yx(n,e){return n*Math.sqrt(1-e*e)}const hk=["duration","bounce"],dk=["stiffness","damping","mass"];function sC(n,e){return e.some(t=>n[t]!==void 0)}function fk(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!sC(n,dk)&&sC(n,hk)){const t=lk(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function CP({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=fk({...i,velocity:-xo(i.velocity||0)}),m=f||0,v=l/(2*Math.sqrt(a*c)),S=s-r,y=xo(Math.sqrt(a/c)),g=Math.abs(S)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let x;if(v<1){const A=yx(y,v);x=M=>{const P=Math.exp(-v*y*M);return s-P*((m+v*y*S)/A*Math.sin(A*M)+S*Math.cos(A*M))}}else if(v===1)x=A=>s-Math.exp(-y*A)*(S+(m+y*S)*A);else{const A=y*Math.sqrt(v*v-1);x=M=>{const P=Math.exp(-v*y*M),I=Math.min(A*M,300);return s-P*((m+v*y*S)*Math.sinh(I)+A*S*Math.cosh(I))/A}}return{calculatedDuration:p&&d||null,next:A=>{const M=x(A);if(p)o.done=A>=d;else{let P=m;A!==0&&(v<1?P=EP(x,A,M):P=0);const I=Math.abs(P)<=t,L=Math.abs(s-M)<=e;o.done=I&&L}return o.value=o.done?s:M,o}}}function oC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=n[0],p={done:!1,value:f},m=N=>a!==void 0&&N<a||l!==void 0&&N>l,v=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let S=t*e;const y=f+S,g=o===void 0?y:o(y);g!==y&&(S=g-f);const x=N=>-S*Math.exp(-N/i),A=N=>g+x(N),M=N=>{const B=x(N),R=A(N);p.done=Math.abs(B)<=c,p.value=p.done?g:R};let P,I;const L=N=>{m(p.value)&&(P=N,I=CP({keyframes:[p.value,v(p.value)],velocity:EP(A,N,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:d}))};return L(0),{calculatedDuration:null,next:N=>{let B=!1;return!I&&P===void 0&&(B=!0,M(N),L(N)),P!==void 0&&N>=P?I.next(N-P):(!B&&M(N),p)}}}const TP=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,pk=1e-7,mk=12;function gk(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=TP(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>pk&&++a<mk);return o}function Sf(n,e,t,i){if(n===e&&t===i)return Li;const r=s=>gk(s,0,1,n,t);return s=>s===0||s===1?s:TP(r(s),e,i)}const vk=Sf(.42,0,1,1),_k=Sf(0,0,.58,1),IP=Sf(.42,0,.58,1),yk=n=>Array.isArray(n)&&typeof n[0]!="number",RP=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,bP=n=>e=>1-n(1-e),kA=n=>1-Math.sin(Math.acos(n)),PP=bP(kA),xk=RP(kA),BP=Sf(.33,1.53,.69,.99),GA=bP(BP),Sk=RP(GA),Ak=n=>(n*=2)<1?.5*GA(n):.5*(2-Math.pow(2,-10*(n-1))),wk={linear:Li,easeIn:vk,easeInOut:IP,easeOut:_k,circIn:kA,circInOut:xk,circOut:PP,backIn:GA,backInOut:Sk,backOut:BP,anticipate:Ak},aC=n=>{if(Array.isArray(n)){cP(n.length===4);const[e,t,i,r]=n;return Sf(e,t,i,r)}else if(typeof n=="string")return wk[n];return n},Xd=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Tn=(n,e,t)=>n+(e-n)*t;function K_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Mk({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=K_(l,a,n+1/3),s=K_(l,a,n),o=K_(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const Y_=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},Ek=[vx,El,hu],Ck=n=>Ek.find(e=>e.test(n));function lC(n){const e=Ck(n);let t=e.parse(n);return e===hu&&(t=Mk(t)),t}const cC=(n,e)=>{const t=lC(n),i=lC(e),r={...t};return s=>(r.red=Y_(t.red,i.red,s),r.green=Y_(t.green,i.green,s),r.blue=Y_(t.blue,i.blue,s),r.alpha=Tn(t.alpha,i.alpha,s),El.transform(r))};function xx(n,e){return t=>t>0?e:n}function Tk(n,e){return t=>Tn(n,e,t)}function zA(n){return typeof n=="number"?Tk:typeof n=="string"?TA(n)?xx:Pi.test(n)?cC:bk:Array.isArray(n)?NP:typeof n=="object"?Pi.test(n)?cC:Ik:xx}function NP(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>zA(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function Ik(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=zA(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Rk(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const bk=(n,e)=>{const t=Ma.createTransformer(e),i=q0(n),r=q0(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?yo(NP(Rk(i,r),r.values),t):xx(n,e)};function LP(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Tn(n,e,t):zA(n)(n,e)}function Pk(n,e,t){const i=[],r=t||LP,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Li:e;a=yo(l,a)}i.push(a)}return i}function Bk(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(cP(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Pk(e,i,r),a=o.length,l=c=>{let d=0;if(a>1)for(;d<n.length-2&&!(c<n[d+1]);d++);const f=Xd(n[d],n[d+1],c);return o[d](f)};return t?c=>l(Aa(n[0],n[s-1],c)):l}function Nk(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Xd(0,e,i);n.push(Tn(t,1,r))}}function Lk(n){const e=[0];return Nk(e,n.length-1),e}function Dk(n,e){return n.map(t=>t*e)}function Fk(n,e){return n.map(()=>e||IP).splice(0,n.length-1)}function $0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=yk(i)?i.map(aC):aC(i),s={done:!1,value:e[0]},o=Dk(t&&t.length===e.length?t:Lk(e),n),a=Bk(o,e,{ease:Array.isArray(r)?r:Fk(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const uC=2e4;function Ok(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<uC;)e+=t,i=n.next(e);return e>=uC?1/0:e}const Uk=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ci.update(e,!0),stop:()=>wa(e),now:()=>fi.isProcessing?fi.timestamp:_a.now()}},kk={decay:oC,inertia:oC,tween:$0,keyframes:$0,spring:CP},Gk=n=>n/100;class HA extends wP{constructor({KeyframeResolver:e=FA,...t}){super(t),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:i,motionValue:r,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);i&&r&&r.owner?this.resolver=r.owner.resolveKeyframes(s,o,i,r):this.resolver=new e(s,o,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=kk[t]||$0;let l,c;a!==$0&&typeof e[0]!="number"&&(l=yo(Gk,LP(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Ok(d));const{calculatedDuration:f}=d,p=f+r,m=p*(i+1)-r;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:S,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),x=this.speed>=0?g<0:g>d;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let A=this.currentTime,M=s;if(m){const N=Math.min(this.currentTime,d)/f;let B=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&B--,B=Math.min(B,m+1),!!(B%2)&&(v==="reverse"?(R=1-R,S&&(R-=S/f)):v==="mirror"&&(M=o)),A=Aa(0,1,R)*f}const P=x?{done:!1,value:l[0]}:M.next(A);a&&(P.value=a(P.value));let{done:I}=P;!x&&c!==null&&(I=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return L&&r!==void 0&&(P.value=Fg(l,this.options,r)),y&&y(P.value),L&&this.finish(),P}get duration(){const{resolved:e}=this;return e?xo(e.calculatedDuration):0}get time(){return xo(this.currentTime)}set time(e){e=va(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=xo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Uk,onPlay:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=i),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const DP=n=>Array.isArray(n)&&typeof n[0]=="number";function FP(n){return!!(!n||typeof n=="string"&&n in VA||DP(n)||Array.isArray(n)&&n.every(FP))}const rd=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,VA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rd([0,.65,.55,1]),circOut:rd([.55,0,1,.45]),backIn:rd([.31,.01,.66,-.59]),backOut:rd([.33,1.53,.69,.99])};function zk(n){return OP(n)||VA.easeOut}function OP(n){if(n)return DP(n)?rd(n):Array.isArray(n)?n.map(zk):VA[n]}function Hk(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const d=OP(a);return Array.isArray(d)&&(c.easing=d),n.animate(c,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Vk=ek(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jk=new Set(["opacity","clipPath","filter","transform"]),eg=10,Wk=2e4;function Xk(n){return n.type==="spring"||n.name==="backgroundColor"||!FP(n.ease)}function Jk(n,e){const t=new HA({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<Wk;)i=t.sample(s),r.push(i.value),s+=eg;return{times:void 0,keyframes:r,duration:s-eg,ease:"linear"}}class hC extends wP{constructor(e){super(e);const{name:t,motionValue:i,keyframes:r}=this.options;this.resolver=new AP(r,(s,o)=>this.onKeyframesResolved(s,o),t,i),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:c}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(Xk(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,...v}=this.options,S=Jk(e,v);e=S.keyframes,e.length===1&&(e[1]=e[0]),r=S.duration,s=S.times,o=S.ease,a="keyframes"}const d=Hk(l.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return d.startTime=_a.now(),this.pendingTimeline?(d.timeline=this.pendingTimeline,this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(Fg(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return xo(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return xo(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=va(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Li;const{animation:i}=t;i.timeline=e,i.onfinish=null}return Li}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(!(t.playState==="idle"||t.playState==="finished")){if(this.time){const{motionValue:l,onUpdate:c,onComplete:d,...f}=this.options,p=new HA({...f,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),m=va(this.time);l.setWithVelocity(p.sample(m-eg).value,p.sample(m).value,eg)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return Vk()&&i&&jk.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const jA=(n,e,t,i={},r,s)=>o=>{const a=DA(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-va(l);let d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};R5(a)||(d={...d,...I5(n,d)}),d.duration&&(d.duration=va(d.duration)),d.repeatDelay&&(d.repeatDelay=va(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Fg(d.keyframes,a);if(p!==void 0){ci.update(()=>{d.onUpdate(p),d.onComplete()});return}}return!s&&hC.supports(d)?new hC(d):new HA(d)};function tg(n){return!!(Ni(n)&&n.add)}function WA(n,e){n.indexOf(e)===-1&&n.push(e)}function XA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class JA{constructor(){this.subscriptions=[]}add(e){return WA(this.subscriptions,e),()=>XA(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dC=30,Kk=n=>!isNaN(parseFloat(n));class Yk{constructor(e,t={}){this.version="11.1.7",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=_a.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=Kk(this.current),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=_a.now()}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new JA);const i=this.events[e].add(t);return e==="change"?()=>{i(),ci.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_a.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,dC);return MP(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jd(n,e){return new Yk(n,e)}function Zk(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Jd(t))}function Qk(n,e){const t=Dg(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=i5(s[o]);Zk(n,o,a)}}function qk({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function UP(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;const c=n.getValue("willChange");i&&(o=i);const d=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const p in l){const m=n.getValue(p,(s=n.latestValues[p])!==null&&s!==void 0?s:null),v=l[p];if(v===void 0||f&&qk(f,p))continue;const S={delay:t,elapsed:0,...DA(o||{},p)};let y=!1;if(window.HandoffAppearAnimations){const A=n.getProps()[kb];if(A){const M=window.HandoffAppearAnimations(A,p);M!==null&&(S.elapsed=M,y=!0)}}m.start(jA(p,m,v,n.shouldReduceMotion&&nc.has(p)?{type:!1}:S,n,y));const g=m.animation;g&&(tg(c)&&(c.add(p),g.then(()=>c.remove(p))),d.push(g))}return a&&Promise.all(d).then(()=>{ci.update(()=>{a&&Qk(n,a)})}),d}function Sx(n,e,t={}){var i;const r=Dg(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(UP(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=s;return $k(n,e,d+c,f,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(t.delay)])}function $k(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(eG).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(Sx(c,e,{...s,delay:t+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function eG(n,e){return n.sortNodePosition(e)}function tG(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Sx(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Sx(n,e,t);else{const r=typeof e=="function"?Dg(n,e,t.custom):e;i=Promise.all(UP(n,r,t))}return i.then(()=>{ci.postRender(()=>{n.notify("AnimationComplete",e)})})}const nG=[...wA].reverse(),iG=wA.length;function rG(n){return e=>Promise.all(e.map(({animation:t,options:i})=>tG(n,t,i)))}function sG(n){let e=rG(n);const t=aG();let i=!0;const r=l=>(c,d)=>{var f;const p=Dg(n,d,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:v,...S}=p;c={...c,...S,...v}}return c};function s(l){e=l(n)}function o(l){const c=n.getProps(),d=n.getVariantContext(!0)||{},f=[],p=new Set;let m={},v=1/0;for(let y=0;y<iG;y++){const g=nG[y],x=t[g],A=c[g]!==void 0?c[g]:d[g],M=jd(A),P=g===l?x.isActive:null;P===!1&&(v=y);let I=A===d[g]&&A!==c[g]&&M;if(I&&i&&n.manuallyAnimateOnMount&&(I=!1),x.protectedKeys={...m},!x.isActive&&P===null||!A&&!x.prevProp||Bg(A)||typeof A=="boolean")continue;let N=oG(x.prevProp,A)||g===l&&x.isActive&&!I&&M||y>v&&M,B=!1;const R=Array.isArray(A)?A:[A];let O=R.reduce(r(g),{});P===!1&&(O={});const{prevResolvedValues:Y={}}=x,$={...Y,...O},te=oe=>{N=!0,p.has(oe)&&(B=!0,p.delete(oe)),x.needsAnimating[oe]=!0;const ee=n.getValue(oe);ee&&(ee.liveStyle=!1)};for(const oe in $){const ee=O[oe],pe=Y[oe];if(m.hasOwnProperty(oe))continue;let U=!1;fx(ee)&&fx(pe)?U=!aP(ee,pe):U=ee!==pe,U?ee!=null?te(oe):p.add(oe):ee!==void 0&&p.has(oe)?te(oe):x.protectedKeys[oe]=!0}x.prevProp=A,x.prevResolvedValues=O,x.isActive&&(m={...m,...O}),i&&n.blockInitialAnimation&&(N=!1),N&&(!I||B)&&f.push(...R.map(oe=>({animation:oe,options:{type:g}})))}if(p.size){const y={};p.forEach(g=>{const x=n.getBaseTarget(g),A=n.getValue(g);A&&(A.liveStyle=!0),y[g]=x??null}),f.push({animation:y})}let S=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(f):Promise.resolve()}function a(l,c){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function oG(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!aP(e,n):!1}function qa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aG(){return{animate:qa(!0),whileInView:qa(),whileHover:qa(),whileTap:qa(),whileDrag:qa(),whileFocus:qa(),exit:qa()}}class lG extends Fa{constructor(e){super(e),e.animationState||(e.animationState=sG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Bg(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let cG=0;class uG extends Fa{constructor(){super(...arguments),this.id=cG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hG={animation:{Feature:lG},exit:{Feature:uG}},fC=(n,e)=>Math.abs(n-e);function dG(n,e){const t=fC(n.x,e.x),i=fC(n.y,e.y);return Math.sqrt(t**2+i**2)}class kP{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Q_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=dG(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=f,{timestamp:S}=fi;this.history.push({...v,timestamp:S});const{onStart:y,onMove:g}=this.handlers;p||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Z_(p,this.transformPagePoint),ci.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Q_(f.type==="pointercancel"?this.lastMoveEventInfo:Z_(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,y),v&&v(f,y)},!nP(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=Lg(e),a=Z_(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=fi;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,Q_(a,this.history)),this.removeListeners=yo(_o(this.contextWindow,"pointermove",this.handlePointerMove),_o(this.contextWindow,"pointerup",this.handlePointerUp),_o(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wa(this.updatePoint)}}function Z_(n,e){return e?{point:e(n.point)}:n}function pC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Q_({point:n},e){return{point:n,delta:pC(n,GP(e)),offset:pC(n,fG(e)),velocity:pG(e,.1)}}function fG(n){return n[0]}function GP(n){return n[n.length-1]}function pG(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=GP(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>va(e)));)t--;if(!i)return{x:0,y:0};const s=xo(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wr(n){return n.max-n.min}function Ax(n,e=0,t=.01){return Math.abs(n-e)<=t}function mC(n,e,t,i=.5){n.origin=i,n.originPoint=Tn(e.min,e.max,n.origin),n.scale=wr(t)/wr(e),(Ax(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Tn(t.min,t.max,n.origin)-n.originPoint,(Ax(n.translate)||isNaN(n.translate))&&(n.translate=0)}function _d(n,e,t,i){mC(n.x,e.x,t.x,i?i.originX:void 0),mC(n.y,e.y,t.y,i?i.originY:void 0)}function gC(n,e,t){n.min=t.min+e.min,n.max=n.min+wr(e)}function mG(n,e,t){gC(n.x,e.x,t.x),gC(n.y,e.y,t.y)}function vC(n,e,t){n.min=e.min-t.min,n.max=n.min+wr(e)}function yd(n,e,t){vC(n.x,e.x,t.x),vC(n.y,e.y,t.y)}function gG(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Tn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Tn(t,n,i.max):Math.min(n,t)),n}function _C(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function vG(n,{top:e,left:t,bottom:i,right:r}){return{x:_C(n.x,t,r),y:_C(n.y,e,i)}}function yC(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function _G(n,e){return{x:yC(n.x,e.x),y:yC(n.y,e.y)}}function yG(n,e){let t=.5;const i=wr(n),r=wr(e);return r>i?t=Xd(e.min,e.max-i,n.min):i>r&&(t=Xd(n.min,n.max-r,e.min)),Aa(0,1,t)}function xG(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const wx=.35;function SG(n=wx){return n===!1?n=0:n===!0&&(n=wx),{x:xC(n,"left","right"),y:xC(n,"top","bottom")}}function xC(n,e,t){return{min:SC(n,e),max:SC(n,t)}}function SC(n,e){return typeof n=="number"?n:n[e]||0}const AC=()=>({translate:0,scale:1,origin:0,originPoint:0}),du=()=>({x:AC(),y:AC()}),wC=()=>({min:0,max:0}),Gn=()=>({x:wC(),y:wC()});function Gr(n){return[n("x"),n("y")]}function zP({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function AG({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function wG(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function q_(n){return n===void 0||n===1}function Mx({scale:n,scaleX:e,scaleY:t}){return!q_(n)||!q_(e)||!q_(t)}function gl(n){return Mx(n)||HP(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function HP(n){return MC(n.x)||MC(n.y)}function MC(n){return n&&n!=="0%"}function ng(n,e,t){const i=n-t,r=e*i;return t+r}function EC(n,e,t,i,r){return r!==void 0&&(n=ng(n,r,i)),ng(n,t,i)+e}function Ex(n,e=0,t=1,i,r){n.min=EC(n.min,e,t,i,r),n.max=EC(n.max,e,t,i,r)}function VP(n,{x:e,y:t}){Ex(n.x,e.translate,e.scale,e.originPoint),Ex(n.y,t.translate,t.scale,t.originPoint)}function MG(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&fu(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VP(n,o)),i&&gl(s.latestValues)&&fu(n,s.latestValues))}e.x=CC(e.x),e.y=CC(e.y)}function CC(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function qo(n,e){n.min=n.min+e,n.max=n.max+e}function TC(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Tn(n.min,n.max,s);Ex(n,e[t],e[i],o,e.scale)}const EG=["x","scaleX","originX"],CG=["y","scaleY","originY"];function fu(n,e){TC(n.x,e,EG),TC(n.y,e,CG)}function jP(n,e){return zP(wG(n.getBoundingClientRect(),e))}function TG(n,e,t){const i=jP(n,t),{scroll:r}=e;return r&&(qo(i.x,r.offset.x),qo(i.y,r.offset.y)),i}const WP=({current:n})=>n?n.ownerDocument.defaultView:null,IG=new WeakMap;class RG{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Lg(d,"page").point)},s=(d,f)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=rP(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gr(y=>{let g=this.getAxisMotionValue(y).get()||0;if(Gs.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const A=x.layout.layoutBox[y];A&&(g=wr(A)*(parseFloat(g)/100))}}this.originPoint[y]=g}),v&&v(d,f);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:S}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:y}=f;if(m&&this.currentDirection===null){this.currentDirection=bG(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),S&&S(d,f)},a=(d,f)=>this.stop(d,f),l=()=>Gr(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new kP(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:WP(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&s(e,t)}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Yp(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=gG(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&uu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=vG(r.layoutBox,t):this.constraints=!1,this.elastic=SG(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=xG(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!uu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=TG(i,r.root,this.visualElement.getTransformPagePoint());let o=_G(r.layout.layoutBox,s);if(t){const a=t(AG(o));this.hasMutatedConstraints=!!a,a&&(o=zP(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Gr(d=>{if(!Yp(d,t,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(jA(e,i,0,t,this.visualElement))}stopAnimation(){Gr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Gr(t=>{const{drag:i}=this.getProps();if(!Yp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Tn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!uu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Gr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=yG({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Gr(o=>{if(!Yp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Tn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;IG.set(this.visualElement,this);const e=this.visualElement.current,t=_o(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();uu(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=po(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Gr(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=wx,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Yp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function bG(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class PG extends Fa{constructor(e){super(e),this.removeGroupControls=Li,this.removeListeners=Li,this.controls=new RG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Li}unmount(){this.removeGroupControls(),this.removeListeners()}}const IC=n=>(e,t)=>{n&&n(e,t)};class BG extends Fa{constructor(){super(...arguments),this.removePointerDownListener=Li}onPointerDown(e){this.session=new kP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:IC(e),onStart:IC(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&r(s,o)}}}mount(){this.removePointerDownListener=_o(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function NG(){const n=J.useContext(Pg);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=J.useId();return J.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const p0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ph={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(gt.test(n))n=parseFloat(n);else return n;const t=RC(n,e.target.x),i=RC(n,e.target.y);return`${t}% ${i}%`}},LG={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Ma.parse(n);if(r.length>5)return i;const s=Ma.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Tn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class DG extends J.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;NU(FG),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),p0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ci.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),AA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XP(n){const[e,t]=NG(),i=J.useContext(EA);return C.jsx(DG,{...n,layoutGroup:i,switchLayoutGroup:J.useContext(Hb),isPresent:e,safeToRemove:t})}const FG={borderRadius:{...Ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ph,borderTopRightRadius:Ph,borderBottomLeftRadius:Ph,borderBottomRightRadius:Ph,boxShadow:LG},JP=["TopLeft","TopRight","BottomLeft","BottomRight"],OG=JP.length,bC=n=>typeof n=="string"?parseFloat(n):n,PC=n=>typeof n=="number"||gt.test(n);function UG(n,e,t,i,r,s){r?(n.opacity=Tn(0,t.opacity!==void 0?t.opacity:1,kG(i)),n.opacityExit=Tn(e.opacity!==void 0?e.opacity:1,0,GG(i))):s&&(n.opacity=Tn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<OG;o++){const a=`border${JP[o]}Radius`;let l=BC(e,a),c=BC(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||PC(l)===PC(c)?(n[a]=Math.max(Tn(bC(l),bC(c),i),0),(Gs.test(c)||Gs.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Tn(e.rotate||0,t.rotate||0,i))}function BC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const kG=KP(0,.5,PP),GG=KP(.5,.95,Li);function KP(n,e,t){return i=>i<n?0:i>e?1:t(Xd(n,e,i))}function NC(n,e){n.min=e.min,n.max=e.max}function Or(n,e){NC(n.x,e.x),NC(n.y,e.y)}function LC(n,e,t,i,r){return n-=e,n=ng(n,1/t,i),r!==void 0&&(n=ng(n,1/r,i)),n}function zG(n,e=0,t=1,i=.5,r,s=n,o=n){if(Gs.test(e)&&(e=parseFloat(e),e=Tn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Tn(s.min,s.max,i);n===s&&(a-=e),n.min=LC(n.min,e,t,a,r),n.max=LC(n.max,e,t,a,r)}function DC(n,e,[t,i,r],s,o){zG(n,e[t],e[i],e[r],e.scale,s,o)}const HG=["x","scaleX","originX"],VG=["y","scaleY","originY"];function FC(n,e,t,i){DC(n.x,e,HG,t?t.x:void 0,i?i.x:void 0),DC(n.y,e,VG,t?t.y:void 0,i?i.y:void 0)}function OC(n){return n.translate===0&&n.scale===1}function YP(n){return OC(n.x)&&OC(n.y)}function jG(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function ZP(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function UC(n){return wr(n.x)/wr(n.y)}class WG{constructor(){this.members=[]}add(e){WA(this.members,e),e.scheduleRender()}remove(e){if(XA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kC(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:p,skewX:m,skewY:v}=t;c&&(i=`perspective(${c}px) ${i}`),d&&(i+=`rotate(${d}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const XG=(n,e)=>n.depth-e.depth;class JG{constructor(){this.children=[],this.isDirty=!1}add(e){WA(this.children,e),this.isDirty=!0}remove(e){XA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XG),this.isDirty=!1,this.children.forEach(e)}}function KG(n,e){const t=_a.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(wa(i),n(s-e))};return ci.read(i,!0),()=>wa(i)}function YG(n){window.MotionDebug&&window.MotionDebug.record(n)}function ZG(n){return n instanceof SVGElement&&n.tagName!=="svg"}function QG(n,e,t){const i=Ni(n)?n:Jd(n);return i.start(jA("",i,e,t)),i.animation}const $_=["","X","Y","Z"],qG={visibility:"hidden"},GC=1e3;let $G=0;const vl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ey(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function QP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=$G++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,vl.totalNodes=vl.resolvedTargetDeltas=vl.recalculatedProjection=0,this.nodes.forEach(n6),this.nodes.forEach(a6),this.nodes.forEach(l6),this.nodes.forEach(i6),YG(vl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new JG)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new JA),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ZG(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=KG(p,250),p0.hasAnimatedSinceResize&&(p0.hasAnimatedSinceResize=!1,this.nodes.forEach(HC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||f6,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=d.getProps(),x=!this.targetLayout||!ZP(this.targetLayout,v)||m,A=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,A);const M={...DA(S,"layout"),onPlay:y,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else p||HC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zC);return}this.isUpdating||this.nodes.forEach(s6),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(o6),this.nodes.forEach(e6),this.nodes.forEach(t6),this.clearAllSnapshots();const a=_a.now();fi.delta=Aa(0,1e3/60,a-fi.timestamp),fi.timestamp=a,fi.isProcessing=!0,V_.update.process(fi),V_.preRender.process(fi),V_.render.process(fi),fi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,AA.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(r6),this.sharedNodes.forEach(u6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ci.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ci.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!YP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||gl(this.latestValues)||d)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),p6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Gn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(qo(a.x,l.offset.x),qo(a.y,l.offset.y)),a}removeElementScroll(o){const a=Gn();Or(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:f}=c;if(c!==this.root&&d&&f.layoutScroll){if(d.isRoot){Or(a,o);const{scroll:p}=this.root;p&&(qo(a.x,-p.offset.x),qo(a.y,-p.offset.y))}qo(a.x,d.offset.x),qo(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=Gn();Or(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fu(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),gl(d.latestValues)&&fu(l,d.latestValues)}return gl(this.latestValues)&&fu(l,this.latestValues),l}removeTransform(o){const a=Gn();Or(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!gl(c.latestValues))continue;Mx(c.latestValues)&&c.updateSnapshot();const d=Gn(),f=c.measurePageBox();Or(d,f),FC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return gl(this.latestValues)&&FC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=fi.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gn(),this.relativeTargetOrigin=Gn(),yd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Gn(),this.targetWithTransforms=Gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Or(this.target,this.layout.layoutBox),VP(this.target,this.targetDelta)):Or(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gn(),this.relativeTargetOrigin=Gn(),yd(this.relativeTargetOrigin,this.target,m.target),Or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}vl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Mx(this.parent.latestValues)||HP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===fi.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Or(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;MG(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Gn());const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=du(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=du(),this.projectionDeltaWithTransform=du());const S=this.projectionTransform;_d(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=kC(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),vl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=du();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Gn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,S=m!==v,y=this.getStack(),g=!y||y.members.length<=1,x=!!(S&&!g&&this.options.crossfade===!0&&!this.path.some(d6));this.animationProgress=0;let A;this.mixTargetDelta=M=>{const P=M/1e3;VC(f.x,o.x,P),VC(f.y,o.y,P),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h6(this.relativeTarget,this.relativeTargetOrigin,p,P),A&&jG(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Gn()),Or(A,this.relativeTarget)),S&&(this.animationValues=d,UG(d,c,this.latestValues,P,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ci.update(()=>{p0.hasAnimatedSinceResize=!0,this.currentAnimation=QG(0,GC,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&qP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Gn();const f=wr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=wr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Or(a,l),fu(a,d),_d(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new WG),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&ey("z",o,c,this.animationValues);for(let d=0;d<$_.length;d++)ey(`rotate${$_[d]}`,o,c,this.animationValues),ey(`skew${$_[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return qG;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=d0(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=d0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!gl(this.latestValues)&&(S.transform=d?d({},""):"none",this.hasProjected=!1),S}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=kC(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Z0){if(p[S]===void 0)continue;const{correct:y,applyTo:g}=Z0[S],x=c.transform==="none"?p[S]:y(p[S],f);if(g){const A=g.length;for(let M=0;M<A;M++)c[g[M]]=x}else c[S]=x}return this.options.layoutId&&(c.pointerEvents=f===this?d0(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(zC),this.root.sharedNodes.clear()}}}function e6(n){n.updateLayout()}function t6(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Gr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=wr(p);p.min=i[f].min,p.max=p.min+m}):qP(s,t.layoutBox,i)&&Gr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=wr(i[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=du();_d(a,i,t.layoutBox);const l=du();o?_d(l,n.applyTransform(r,!0),t.measuredBox):_d(l,i,t.layoutBox);const c=!YP(a);let d=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const v=Gn();yd(v,t.layoutBox,p.layoutBox);const S=Gn();yd(S,i,m.layoutBox),ZP(v,S)||(d=!0),f.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=v,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function n6(n){vl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function i6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function r6(n){n.clearSnapshot()}function zC(n){n.clearMeasurements()}function s6(n){n.isLayoutDirty=!1}function o6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function HC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function a6(n){n.resolveTargetDelta()}function l6(n){n.calcProjection()}function c6(n){n.resetSkewAndRotation()}function u6(n){n.removeLeadSnapshot()}function VC(n,e,t){n.translate=Tn(e.translate,0,t),n.scale=Tn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function jC(n,e,t,i){n.min=Tn(e.min,t.min,i),n.max=Tn(e.max,t.max,i)}function h6(n,e,t,i){jC(n.x,e.x,t.x,i),jC(n.y,e.y,t.y,i)}function d6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const f6={duration:.45,ease:[.4,0,.1,1]},WC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),XC=WC("applewebkit/")&&!WC("chrome/")?Math.round:Li;function JC(n){n.min=XC(n.min),n.max=XC(n.max)}function p6(n){JC(n.x),JC(n.y)}function qP(n,e,t){return n==="position"||n==="preserve-aspect"&&!Ax(UC(e),UC(t),.2)}const m6=QP({attachResizeListener:(n,e)=>po(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ty={current:void 0},$P=QP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!ty.current){const n=new m6({});n.mount(window),n.setOptions({layoutScroll:!0}),ty.current=n}return ty.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),g6={pan:{Feature:BG},drag:{Feature:PG,ProjectionNode:$P,MeasureLayout:XP}},Cx={current:null},eB={current:!1};function v6(){if(eB.current=!0,!!yA)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Cx.current=n.matches;n.addListener(e),e()}else Cx.current=!1}function _6(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Ni(s))n.addValue(r,s),tg(i)&&i.add(r);else if(Ni(o))n.addValue(r,Jd(s,{owner:n})),tg(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Jd(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const KC=new WeakMap,y6=[...fP,Pi,Ma],x6=n=>y6.find(dP(n)),tB=Object.keys(Wd),S6=tB.length,YC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],A6=MA.length;function nB(n){if(n)return n.options.allowProjection!==!1?n.projection:nB(n.parent)}class w6{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.resolveKeyframes=(p,m,v,S)=>new this.KeyframeResolver(p,m,v,S,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=FA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ci.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Ng(t),this.isVariantNode=zb(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in f){const m=f[p];l[p]!==void 0&&Ni(m)&&(m.set(l[p],!1),tg(d)&&d.add(p))}}mount(e){this.current=e,KC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),eB.current||v6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){var e;KC.delete(this.current),this.projection&&this.projection.unmount(),wa(this.notifyUpdate),wa(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)(e=this.features[t])===null||e===void 0||e.unmount();this.current=null}bindToMotionValue(e,t){const i=nc.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ci.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<S6;l++){const c=tB[l],{isEnabled:d,Feature:f,ProjectionNode:p,MeasureLayout:m}=Wd[c];p&&(o=p),d(t)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,nB(this.parent));const{layoutId:l,layout:c,drag:d,dragConstraints:f,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||f&&uu(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<YC.length;i++){const r=YC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=_6(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<A6;i++){const r=MA[i],s=this.props[r];(jd(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Jd(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(uP(r)||lP(r))?r=parseFloat(r):!x6(r)&&Ma.test(t)&&(r=SP(e,t)),this.setBaseTarget(e,Ni(r)?r.get():r)),Ni(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=LA(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ni(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new JA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class iB extends w6{constructor(){super(...arguments),this.KeyframeResolver=AP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function M6(n){return window.getComputedStyle(n)}class E6 extends iB{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(nc.has(t)){const i=UA(t);return i&&i.default||0}else{const i=M6(e),r=(Wb(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return jP(e,t)}build(e,t,i,r){RA(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return NA(e,t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ni(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){Zb(e,t,i,r)}}class C6 extends iB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(nc.has(t)){const i=UA(t);return i&&i.default||0}return t=Qb.has(t)?t:SA(t),e.getAttribute(t)}measureInstanceViewportBox(){return Gn()}scrapeMotionValuesFromProps(e,t,i){return $b(e,t,i)}build(e,t,i,r){PA(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){qb(e,t,i,r)}mount(e){this.isSVGTag=BA(e.tagName),super.mount(e)}}const T6=(n,e)=>CA(n)?new C6(e,{enableHardwareAcceleration:!1}):new E6(e,{allowProjection:n!==J.Fragment,enableHardwareAcceleration:!0}),I6={layout:{ProjectionNode:$P,MeasureLayout:XP}},R6={...hG,...S5,...g6,...I6},ut=PU((n,e)=>l5(n,e,R6,T6));function rB(){const n=J.useRef(!1);return xA(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function b6(){const n=rB(),[e,t]=J.useState(0),i=J.useCallback(()=>{n.current&&t(e+1)},[e]);return[J.useCallback(()=>ci.postRender(i),[i]),e]}class P6 extends J.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B6({children:n,isPresent:e}){const t=J.useId(),i=J.useRef(null),r=J.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=J.useContext(_A);return J.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),C.jsx(P6,{isPresent:e,childRef:i,sizeRef:r,children:J.cloneElement(n,{ref:i})})}const ny=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=eP(N6),l=J.useId(),c=J.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:d=>{a.set(d,!0);for(const f of a.values())if(!f)return;i&&i()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random()]:[t]);return J.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[t]),J.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=C.jsx(B6,{isPresent:t,children:n})),C.jsx(Pg.Provider,{value:c,children:n})};function N6(){return new Map}function L6(n){return J.useEffect(()=>()=>n(),[])}const _l=n=>n.key||"";function D6(n,e){n.forEach(t=>{const i=_l(t);e.set(i,t)})}function F6(n){const e=[];return J.Children.forEach(n,t=>{J.isValidElement(t)&&e.push(t)}),e}const Kd=({children:n,custom:e,initial:t=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=J.useContext(EA).forceRender||b6()[0],l=rB(),c=F6(n);let d=c;const f=J.useRef(new Map).current,p=J.useRef(d),m=J.useRef(new Map).current,v=J.useRef(!0);if(xA(()=>{v.current=!1,D6(c,m),p.current=d}),L6(()=>{v.current=!0,m.clear(),f.clear()}),v.current)return C.jsx(C.Fragment,{children:d.map(x=>C.jsx(ny,{isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o,children:x},_l(x)))});d=[...d];const S=p.current.map(_l),y=c.map(_l),g=S.length;for(let x=0;x<g;x++){const A=S[x];y.indexOf(A)===-1&&!f.has(A)&&f.set(A,void 0)}return o==="wait"&&f.size&&(d=[]),f.forEach((x,A)=>{if(y.indexOf(A)!==-1)return;const M=m.get(A);if(!M)return;const P=S.indexOf(A);let I=x;if(!I){const L=()=>{f.delete(A);const N=Array.from(m.keys()).filter(B=>!y.includes(B));if(N.forEach(B=>m.delete(B)),p.current=c.filter(B=>{const R=_l(B);return R===A||N.includes(R)}),!f.size){if(l.current===!1)return;a(),i&&i()}};I=C.jsx(ny,{isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:s,mode:o,children:M},_l(M)),f.set(A,I)}d.splice(P,0,I)}),d=d.map(x=>{const A=x.key;return f.has(A)?x:C.jsx(ny,{isPresent:!0,presenceAffectsLayout:s,mode:o,children:x},_l(x))}),C.jsx(C.Fragment,{children:f.size?d:d.map(x=>J.cloneElement(x))})};function ig(){return ig=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ig.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Zu="165",O6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},U6={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sB=0,Tx=1,oB=2,k6=3,aB=0,Og=1,xd=2,us=3,Ws=0,Ji=1,Wr=2,zs=0,Ol=1,Ix=2,Rx=3,bx=4,lB=5,ia=100,cB=101,uB=102,hB=103,dB=104,fB=200,pB=201,mB=202,gB=203,rg=204,sg=205,vB=206,_B=207,yB=208,xB=209,SB=210,AB=211,wB=212,MB=213,EB=214,CB=0,TB=1,IB=2,Yd=3,RB=4,bB=5,PB=6,BB=7,Af=0,NB=1,LB=2,Hs=0,DB=1,FB=2,OB=3,KA=4,UB=5,kB=6,GB=7,Px="attached",zB="detached",Ea=300,Xs=301,Ca=302,Fu=303,Zd=304,Qu=306,Ta=1e3,Hn=1001,Ou=1002,ei=1003,Ug=1004,G6=1004,Cl=1005,z6=1005,rn=1006,Mu=1007,H6=1007,Kr=1008,Bx=1008,Mr=1009,YA=1010,ZA=1011,Qd=1012,kg=1013,Ia=1014,Fn=1015,pi=1016,QA=1017,qA=1018,Jl=1020,HB=35902,VB=1021,jB=1022,Kn=1023,WB=1024,XB=1025,Ul=1026,Kl=1027,Gg=1028,$A=1029,JB=1030,ew=1031,tw=1033,m0=33776,g0=33777,v0=33778,_0=33779,Nx=35840,Lx=35841,Dx=35842,Fx=35843,Ox=36196,Ux=37492,kx=37496,Gx=37808,zx=37809,Hx=37810,Vx=37811,jx=37812,Wx=37813,Xx=37814,Jx=37815,Kx=37816,Yx=37817,Zx=37818,Qx=37819,qx=37820,$x=37821,y0=36492,eS=36494,tS=36495,KB=36283,nS=36284,iS=36285,rS=36286,YB=2200,ZB=2201,QB=2202,Uu=2300,ku=2301,x0=2302,Tl=2400,Il=2401,qd=2402,zg=2500,nw=2501,qB=0,iw=1,og=2,$B=3200,eN=3201,Oa=0,tN=1,co="",vr="srgb",qr="srgb-linear",Hg="display-p3",wf="display-p3-linear",$d="linear",mn="srgb",ef="rec709",tf="p3",V6=0,yl=7680,j6=7681,W6=7682,X6=7683,J6=34055,K6=34056,Y6=5386,Z6=512,Q6=513,q6=514,$6=515,e8=516,t8=517,n8=518,sS=519,nN=512,iN=513,rN=514,rw=515,sN=516,oN=517,aN=518,lN=519,nf=35044,i8=35048,r8=35040,s8=35045,o8=35049,a8=35041,l8=35046,c8=35050,u8=35042,h8="100",oS="300 es",Os=2e3,rf=2001;let Io=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZC=1234567;const kl=Math.PI/180,Gu=180/Math.PI;function Sr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ii[n&255]+Ii[n>>8&255]+Ii[n>>16&255]+Ii[n>>24&255]+"-"+Ii[e&255]+Ii[e>>8&255]+"-"+Ii[e>>16&15|64]+Ii[e>>24&255]+"-"+Ii[t&63|128]+Ii[t>>8&255]+"-"+Ii[t>>16&255]+Ii[t>>24&255]+Ii[i&255]+Ii[i>>8&255]+Ii[i>>16&255]+Ii[i>>24&255]).toLowerCase()}function Dn(n,e,t){return Math.max(e,Math.min(t,n))}function sw(n,e){return(n%e+e)%e}function d8(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function f8(n,e,t){return n!==e?(t-n)/(e-n):0}function Sd(n,e,t){return(1-t)*n+t*e}function p8(n,e,t,i){return Sd(n,e,1-Math.exp(-t*i))}function m8(n,e=1){return e-Math.abs(sw(n,e*2)-e)}function g8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function v8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function y8(n,e){return n+Math.random()*(e-n)}function x8(n){return n*(.5-Math.random())}function S8(n){n!==void 0&&(ZC=n);let e=ZC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function A8(n){return n*kl}function w8(n){return n*Gu}function M8(n){return(n&n-1)===0&&n!==0}function E8(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function C8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function T8(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),d=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*d,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*d,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*d,a*c);break;case"XZX":n.set(a*d,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*d,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Wi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ow={DEG2RAD:kl,RAD2DEG:Gu,generateUUID:Sr,clamp:Dn,euclideanModulo:sw,mapLinear:d8,inverseLerp:f8,lerp:Sd,damp:p8,pingpong:m8,smoothstep:g8,smootherstep:v8,randInt:_8,randFloat:y8,randFloatSpread:x8,seededRandom:S8,degToRad:A8,radToDeg:w8,isPowerOfTwo:M8,ceilPowerOfTwo:E8,floorPowerOfTwo:C8,setQuaternionFromProperEuler:T8,normalize:bt,denormalize:Wi};class we{constructor(e=0,t=0){we.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,t,i,r,s,o,a,l,c){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],f=i[7],p=i[2],m=i[5],v=i[8],S=r[0],y=r[3],g=r[6],x=r[1],A=r[4],M=r[7],P=r[2],I=r[5],L=r[8];return s[0]=o*S+a*x+l*P,s[3]=o*y+a*A+l*I,s[6]=o*g+a*M+l*L,s[1]=c*S+d*x+f*P,s[4]=c*y+d*A+f*I,s[7]=c*g+d*M+f*L,s[2]=p*S+m*x+v*P,s[5]=p*y+m*A+v*I,s[8]=p*g+m*M+v*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-i*s*d+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,v=t*f+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/v;return e[0]=f*S,e[1]=(r*c-d*i)*S,e[2]=(a*i-r*o)*S,e[3]=p*S,e[4]=(d*t-r*l)*S,e[5]=(r*s-a*t)*S,e[6]=m*S,e[7]=(i*l-c*t)*S,e[8]=(o*t-i*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(iy.makeScale(e,t)),this}rotate(e){return this.premultiply(iy.makeRotation(-e)),this}translate(e,t){return this.premultiply(iy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const iy=new Rt;function cN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const I8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function pu(n,e){return new I8[n](e)}function sf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function uN(){const n=sf("canvas");return n.style.display="block",n}const QC={};function aw(n){n in QC||(QC[n]=!0,console.warn(n))}function R8(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const qC=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),$C=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Zp={[qr]:{transfer:$d,primaries:ef,toReference:n=>n,fromReference:n=>n},[vr]:{transfer:mn,primaries:ef,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[wf]:{transfer:$d,primaries:tf,toReference:n=>n.applyMatrix3($C),fromReference:n=>n.applyMatrix3(qC)},[Hg]:{transfer:mn,primaries:tf,toReference:n=>n.convertSRGBToLinear().applyMatrix3($C),fromReference:n=>n.applyMatrix3(qC).convertLinearToSRGB()}},b8=new Set([qr,wf]),on={enabled:!0,_workingColorSpace:qr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!b8.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Zp[e].toReference,r=Zp[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Zp[n].primaries},getTransfer:function(n){return n===co?$d:Zp[n].transfer}};function Eu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ry(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ac;class hN{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ac===void 0&&(Ac=sf("canvas")),Ac.width=e.width,Ac.height=e.height;const i=Ac.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ac}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Eu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Eu(t[i]/255)*255):t[i]=Eu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let P8=0;class Rl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:P8++}),this.uuid=Sr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(sy(r[o].image)):s.push(sy(r[o]))}else s=sy(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function sy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?hN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let B8=0;class sn extends Io{constructor(e=sn.DEFAULT_IMAGE,t=sn.DEFAULT_MAPPING,i=Hn,r=Hn,s=rn,o=Kr,a=Kn,l=Mr,c=sn.DEFAULT_ANISOTROPY,d=co){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:B8++}),this.uuid=Sr(),this.name="",this.source=new Rl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new we(0,0),this.repeat=new we(1,1),this.center=new we(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ea)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ta:e.x=e.x-Math.floor(e.x);break;case Hn:e.x=e.x<0?0:1;break;case Ou:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ta:e.y=e.y-Math.floor(e.y);break;case Hn:e.y=e.y<0?0:1;break;case Ou:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}sn.DEFAULT_IMAGE=null;sn.DEFAULT_MAPPING=Ea;sn.DEFAULT_ANISOTROPY=1;class ln{constructor(e=0,t=0,i=0,r=1){ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],v=l[9],S=l[2],y=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-S)<.01&&Math.abs(v-y)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+S)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(c+1)/2,M=(m+1)/2,P=(g+1)/2,I=(d+p)/4,L=(f+S)/4,N=(v+y)/4;return A>M&&A>P?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=I/i,s=L/i):M>P?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=I/r,s=N/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=L/s,r=N/s),this.set(i,r,s,t),this}let x=Math.sqrt((y-v)*(y-v)+(f-S)*(f-S)+(p-d)*(p-d));return Math.abs(x)<.001&&(x=1),this.x=(y-v)/x,this.y=(f-S)/x,this.z=(p-d)/x,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dN extends Io{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ln(0,0,e,t),this.scissorTest=!1,this.viewport=new ln(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new sn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Rl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Er extends dN{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Vg extends sn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ei,this.minFilter=ei,this.wrapR=Hn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class N8 extends Er{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Vg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class lw extends sn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ei,this.minFilter=ei,this.wrapR=Hn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class L8 extends Er{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new lw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class gi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],d=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],S=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=S;return}if(f!==S||l!==p||c!==m||d!==v){let y=1-a;const g=l*p+c*m+d*v+f*S,x=g>=0?1:-1,A=1-g*g;if(A>Number.EPSILON){const P=Math.sqrt(A),I=Math.atan2(P,g*x);y=Math.sin(y*I)/P,a=Math.sin(a*I)/P}const M=a*x;if(l=l*y+p*M,c=c*y+m*M,d=d*y+v*M,f=f*y+S*M,y===1-a){const P=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=P,c*=P,d*=P,f*=P}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],f=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+d*f+l*m-c*p,e[t+1]=l*v+d*p+c*f-a*m,e[t+2]=c*v+d*m+a*p-l*f,e[t+3]=d*v-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"YXZ":this._x=p*d*f+c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"ZXY":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f-p*m*v;break;case"ZYX":this._x=p*d*f-c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f+p*m*v;break;case"YZX":this._x=p*d*f+c*m*v,this._y=c*m*f+p*d*v,this._z=c*d*v-p*m*f,this._w=c*d*f-p*m*v;break;case"XZY":this._x=p*d*f-c*m*v,this._y=c*m*f-p*d*v,this._z=c*d*v+p*m*f,this._w=c*d*f+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Dn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-i*c,this._z=s*d+o*c+i*l-r*a,this._w=o*d-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(eT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(eT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),d=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*d,this.y=i+l*d+a*c-s*f,this.z=r+l*f+s*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return oy.copy(this).projectOnVector(e),this.sub(oy)}reflect(e){return this.sub(oy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const oy=new z,eT=new gi;class vi{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(rs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(rs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=rs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,rs):rs.fromBufferAttribute(s,o),rs.applyMatrix4(e.matrixWorld),this.expandByPoint(rs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Qp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Qp.copy(i.boundingBox)),Qp.applyMatrix4(e.matrixWorld),this.union(Qp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,rs),rs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bh),qp.subVectors(this.max,Bh),wc.subVectors(e.a,Bh),Mc.subVectors(e.b,Bh),Ec.subVectors(e.c,Bh),Uo.subVectors(Mc,wc),ko.subVectors(Ec,Mc),$a.subVectors(wc,Ec);let t=[0,-Uo.z,Uo.y,0,-ko.z,ko.y,0,-$a.z,$a.y,Uo.z,0,-Uo.x,ko.z,0,-ko.x,$a.z,0,-$a.x,-Uo.y,Uo.x,0,-ko.y,ko.x,0,-$a.y,$a.x,0];return!ay(t,wc,Mc,Ec,qp)||(t=[1,0,0,0,1,0,0,0,1],!ay(t,wc,Mc,Ec,qp))?!1:($p.crossVectors(Uo,ko),t=[$p.x,$p.y,$p.z],ay(t,wc,Mc,Ec,qp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(rs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(eo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),eo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),eo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),eo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),eo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),eo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),eo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),eo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(eo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eo=[new z,new z,new z,new z,new z,new z,new z,new z],rs=new z,Qp=new vi,wc=new z,Mc=new z,Ec=new z,Uo=new z,ko=new z,$a=new z,Bh=new z,qp=new z,$p=new z,el=new z;function ay(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){el.fromArray(n,s);const a=r.x*Math.abs(el.x)+r.y*Math.abs(el.y)+r.z*Math.abs(el.z),l=e.dot(el),c=t.dot(el),d=i.dot(el);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const D8=new vi,Nh=new z,ly=new z;class ui{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):D8.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Nh.subVectors(e,this.center);const t=Nh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Nh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ly.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Nh.copy(e.center).add(ly)),this.expandByPoint(Nh.copy(e.center).sub(ly))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const to=new z,cy=new z,em=new z,Go=new z,uy=new z,tm=new z,hy=new z;class qu{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,to)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=to.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(to.copy(this.origin).addScaledVector(this.direction,t),to.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){cy.copy(e).add(t).multiplyScalar(.5),em.copy(t).sub(e).normalize(),Go.copy(this.origin).sub(cy);const s=e.distanceTo(t)*.5,o=-this.direction.dot(em),a=Go.dot(this.direction),l=-Go.dot(em),c=Go.lengthSq(),d=Math.abs(1-o*o);let f,p,m,v;if(d>0)if(f=o*l-a,p=o*a-l,v=s*d,f>=0)if(p>=-v)if(p<=v){const S=1/d;f*=S,p*=S,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=v?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(cy).addScaledVector(em,p),m}intersectSphere(e,t){to.subVectors(e.center,this.origin);const i=to.dot(this.direction),r=to.dot(to)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,to)!==null}intersectTriangle(e,t,i,r,s){uy.subVectors(t,e),tm.subVectors(i,e),hy.crossVectors(uy,tm);let o=this.direction.dot(hy),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Go.subVectors(this.origin,e);const l=a*this.direction.dot(tm.crossVectors(Go,tm));if(l<0)return null;const c=a*this.direction.dot(uy.cross(Go));if(c<0||l+c>o)return null;const d=-a*Go.dot(hy);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ht{constructor(e,t,i,r,s,o,a,l,c,d,f,p,m,v,S,y){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,d,f,p,m,v,S,y)}set(e,t,i,r,s,o,a,l,c,d,f,p,m,v,S,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=f,g[14]=p,g[3]=m,g[7]=v,g[11]=S,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ht().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Cc.setFromMatrixColumn(e,0).length(),s=1/Cc.setFromMatrixColumn(e,1).length(),o=1/Cc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*f,v=a*d,S=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=m+v*c,t[5]=p-S*c,t[9]=-a*l,t[2]=S-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*f,v=c*d,S=c*f;t[0]=p+S*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*d,t[9]=-a,t[2]=m*a-v,t[6]=S+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*f,v=c*d,S=c*f;t[0]=p-S*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*d,t[9]=S-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*f,v=a*d,S=a*f;t[0]=l*d,t[4]=v*c-m,t[8]=p*c+S,t[1]=l*f,t[5]=S*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,S=a*c;t[0]=l*d,t[4]=S-p*f,t[8]=v*f+m,t[1]=f,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*f+v,t[10]=p-S*f}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,S=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=p*f+S,t[5]=o*d,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*d,t[10]=S*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(F8,e,O8)}lookAt(e,t,i){const r=this.elements;return fr.subVectors(e,t),fr.lengthSq()===0&&(fr.z=1),fr.normalize(),zo.crossVectors(i,fr),zo.lengthSq()===0&&(Math.abs(i.z)===1?fr.x+=1e-4:fr.z+=1e-4,fr.normalize(),zo.crossVectors(i,fr)),zo.normalize(),nm.crossVectors(fr,zo),r[0]=zo.x,r[4]=nm.x,r[8]=fr.x,r[1]=zo.y,r[5]=nm.y,r[9]=fr.y,r[2]=zo.z,r[6]=nm.z,r[10]=fr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],f=i[5],p=i[9],m=i[13],v=i[2],S=i[6],y=i[10],g=i[14],x=i[3],A=i[7],M=i[11],P=i[15],I=r[0],L=r[4],N=r[8],B=r[12],R=r[1],O=r[5],Y=r[9],$=r[13],te=r[2],oe=r[6],ee=r[10],pe=r[14],U=r[3],Z=r[7],K=r[11],ae=r[15];return s[0]=o*I+a*R+l*te+c*U,s[4]=o*L+a*O+l*oe+c*Z,s[8]=o*N+a*Y+l*ee+c*K,s[12]=o*B+a*$+l*pe+c*ae,s[1]=d*I+f*R+p*te+m*U,s[5]=d*L+f*O+p*oe+m*Z,s[9]=d*N+f*Y+p*ee+m*K,s[13]=d*B+f*$+p*pe+m*ae,s[2]=v*I+S*R+y*te+g*U,s[6]=v*L+S*O+y*oe+g*Z,s[10]=v*N+S*Y+y*ee+g*K,s[14]=v*B+S*$+y*pe+g*ae,s[3]=x*I+A*R+M*te+P*U,s[7]=x*L+A*O+M*oe+P*Z,s[11]=x*N+A*Y+M*ee+P*K,s[15]=x*B+A*$+M*pe+P*ae,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14],v=e[3],S=e[7],y=e[11],g=e[15];return v*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+S*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+y*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*d-i*c*d)+g*(-r*a*d-t*l*f+t*a*p+r*o*f-i*o*p+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],v=e[12],S=e[13],y=e[14],g=e[15],x=f*y*c-S*p*c+S*l*m-a*y*m-f*l*g+a*p*g,A=v*p*c-d*y*c-v*l*m+o*y*m+d*l*g-o*p*g,M=d*S*c-v*f*c+v*a*m-o*S*m-d*a*g+o*f*g,P=v*f*l-d*S*l-v*a*p+o*S*p+d*a*y-o*f*y,I=t*x+i*A+r*M+s*P;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/I;return e[0]=x*L,e[1]=(S*p*s-f*y*s-S*r*m+i*y*m+f*r*g-i*p*g)*L,e[2]=(a*y*s-S*l*s+S*r*c-i*y*c-a*r*g+i*l*g)*L,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*L,e[4]=A*L,e[5]=(d*y*s-v*p*s+v*r*m-t*y*m-d*r*g+t*p*g)*L,e[6]=(v*l*s-o*y*s-v*r*c+t*y*c+o*r*g-t*l*g)*L,e[7]=(o*p*s-d*l*s+d*r*c-t*p*c-o*r*m+t*l*m)*L,e[8]=M*L,e[9]=(v*f*s-d*S*s-v*i*m+t*S*m+d*i*g-t*f*g)*L,e[10]=(o*S*s-v*a*s+v*i*c-t*S*c-o*i*g+t*a*g)*L,e[11]=(d*a*s-o*f*s-d*i*c+t*f*c+o*i*m-t*a*m)*L,e[12]=P*L,e[13]=(d*S*r-v*f*r+v*i*p-t*S*p-d*i*y+t*f*y)*L,e[14]=(v*a*r-o*S*r-v*i*l+t*S*l+o*i*y-t*a*y)*L,e[15]=(o*f*r-d*a*r+d*i*l-t*f*l-o*i*p+t*a*p)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,v=s*f,S=o*d,y=o*f,g=a*f,x=l*c,A=l*d,M=l*f,P=i.x,I=i.y,L=i.z;return r[0]=(1-(S+g))*P,r[1]=(m+M)*P,r[2]=(v-A)*P,r[3]=0,r[4]=(m-M)*I,r[5]=(1-(p+g))*I,r[6]=(y+x)*I,r[7]=0,r[8]=(v+A)*L,r[9]=(y-x)*L,r[10]=(1-(p+S))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Cc.set(r[0],r[1],r[2]).length();const o=Cc.set(r[4],r[5],r[6]).length(),a=Cc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ss.copy(this);const c=1/s,d=1/o,f=1/a;return ss.elements[0]*=c,ss.elements[1]*=c,ss.elements[2]*=c,ss.elements[4]*=d,ss.elements[5]*=d,ss.elements[6]*=d,ss.elements[8]*=f,ss.elements[9]*=f,ss.elements[10]*=f,t.setFromRotationMatrix(ss),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Os){const l=this.elements,c=2*s/(t-e),d=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Os)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===rf)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Os){const l=this.elements,c=1/(t-e),d=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*d;let v,S;if(a===Os)v=(o+s)*f,S=-2*f;else if(a===rf)v=s*f,S=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=S,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Cc=new z,ss=new ht,F8=new z(0,0,0),O8=new z(1,1,1),zo=new z,nm=new z,fr=new z,tT=new ht,nT=new gi;class Cr{constructor(e=0,t=0,i=0,r=Cr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],d=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Dn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Dn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Dn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return tT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nT.setFromEuler(this),this.setFromQuaternion(nT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cr.DEFAULT_ORDER="XYZ";class Gl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let U8=0;const iT=new z,Tc=new gi,no=new ht,im=new z,Lh=new z,k8=new z,G8=new gi,rT=new z(1,0,0),sT=new z(0,1,0),oT=new z(0,0,1),aT={type:"added"},z8={type:"removed"},Ic={type:"childadded",child:null},dy={type:"childremoved",child:null};class Ht extends Io{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:U8++}),this.uuid=Sr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ht.DEFAULT_UP.clone();const e=new z,t=new Cr,i=new gi,r=new z(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ht},normalMatrix:{value:new Rt}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Ht.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Gl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tc.setFromAxisAngle(e,t),this.quaternion.multiply(Tc),this}rotateOnWorldAxis(e,t){return Tc.setFromAxisAngle(e,t),this.quaternion.premultiply(Tc),this}rotateX(e){return this.rotateOnAxis(rT,e)}rotateY(e){return this.rotateOnAxis(sT,e)}rotateZ(e){return this.rotateOnAxis(oT,e)}translateOnAxis(e,t){return iT.copy(e).applyQuaternion(this.quaternion),this.position.add(iT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(rT,e)}translateY(e){return this.translateOnAxis(sT,e)}translateZ(e){return this.translateOnAxis(oT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(no.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?im.copy(e):im.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Lh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?no.lookAt(Lh,im,this.up):no.lookAt(im,Lh,this.up),this.quaternion.setFromRotationMatrix(no),r&&(no.extractRotation(r.matrixWorld),Tc.setFromRotationMatrix(no),this.quaternion.premultiply(Tc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(aT),Ic.child=e,this.dispatchEvent(Ic),Ic.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(z8),dy.child=e,this.dispatchEvent(dy),dy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),no.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),no.multiply(e.parent.matrixWorld)),e.applyMatrix4(no),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(aT),Ic.child=e,this.dispatchEvent(Ic),Ic.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lh,e,k8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lh,G8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ht.DEFAULT_UP=new z(0,1,0);Ht.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ht.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const os=new z,io=new z,fy=new z,ro=new z,Rc=new z,bc=new z,lT=new z,py=new z,my=new z,gy=new z;class _r{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),os.subVectors(e,t),r.cross(os);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){os.subVectors(r,t),io.subVectors(i,t),fy.subVectors(e,t);const o=os.dot(os),a=os.dot(io),l=os.dot(fy),c=io.dot(io),d=io.dot(fy),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ro)===null?!1:ro.x>=0&&ro.y>=0&&ro.x+ro.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ro)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ro.x),l.addScaledVector(o,ro.y),l.addScaledVector(a,ro.z),l)}static isFrontFacing(e,t,i,r){return os.subVectors(i,t),io.subVectors(e,t),os.cross(io).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return os.subVectors(this.c,this.b),io.subVectors(this.a,this.b),os.cross(io).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _r.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return _r.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return _r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Rc.subVectors(r,i),bc.subVectors(s,i),py.subVectors(e,i);const l=Rc.dot(py),c=bc.dot(py);if(l<=0&&c<=0)return t.copy(i);my.subVectors(e,r);const d=Rc.dot(my),f=bc.dot(my);if(d>=0&&f<=d)return t.copy(r);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(i).addScaledVector(Rc,o);gy.subVectors(e,s);const m=Rc.dot(gy),v=bc.dot(gy);if(v>=0&&m<=v)return t.copy(s);const S=m*c-l*v;if(S<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(bc,a);const y=d*v-m*f;if(y<=0&&f-d>=0&&m-v>=0)return lT.subVectors(s,r),a=(f-d)/(f-d+(m-v)),t.copy(r).addScaledVector(lT,a);const g=1/(y+S+p);return o=S*g,a=p*g,t.copy(i).addScaledVector(Rc,o).addScaledVector(bc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const fN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ho={h:0,s:0,l:0},rm={h:0,s:0,l:0};function vy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class je{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,on.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=on.workingColorSpace){return this.r=e,this.g=t,this.b=i,on.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=on.workingColorSpace){if(e=sw(e,1),t=Dn(t,0,1),i=Dn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=vy(o,s,e+1/3),this.g=vy(o,s,e),this.b=vy(o,s,e-1/3)}return on.toWorkingColorSpace(this,r),this}setStyle(e,t=vr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=vr){const i=fN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Eu(e.r),this.g=Eu(e.g),this.b=Eu(e.b),this}copyLinearToSRGB(e){return this.r=ry(e.r),this.g=ry(e.g),this.b=ry(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vr){return on.fromWorkingColorSpace(Ri.copy(this),e),Math.round(Dn(Ri.r*255,0,255))*65536+Math.round(Dn(Ri.g*255,0,255))*256+Math.round(Dn(Ri.b*255,0,255))}getHexString(e=vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=on.workingColorSpace){on.fromWorkingColorSpace(Ri.copy(this),t);const i=Ri.r,r=Ri.g,s=Ri.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=on.workingColorSpace){return on.fromWorkingColorSpace(Ri.copy(this),t),e.r=Ri.r,e.g=Ri.g,e.b=Ri.b,e}getStyle(e=vr){on.fromWorkingColorSpace(Ri.copy(this),e);const t=Ri.r,i=Ri.g,r=Ri.b;return e!==vr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ho),this.setHSL(Ho.h+e,Ho.s+t,Ho.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ho),e.getHSL(rm);const i=Sd(Ho.h,rm.h,t),r=Sd(Ho.s,rm.s,t),s=Sd(Ho.l,rm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ri=new je;je.NAMES=fN;let H8=0;class Yn extends Io{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:H8++}),this.uuid=Sr(),this.name="",this.type="Material",this.blending=Ol,this.side=Ws,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=rg,this.blendDst=sg,this.blendEquation=ia,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new je(0,0,0),this.blendAlpha=0,this.depthFunc=Yd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yl,this.stencilZFail=yl,this.stencilZPass=yl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ol&&(i.blending=this.blending),this.side!==Ws&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==rg&&(i.blendSrc=this.blendSrc),this.blendDst!==sg&&(i.blendDst=this.blendDst),this.blendEquation!==ia&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Yd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==sS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==yl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==yl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class rr extends Yn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=Af,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const uo=V8();function V8(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function er(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Dn(n,-65504,65504),uo.floatView[0]=n;const e=uo.uint32View[0],t=e>>23&511;return uo.baseTable[t]+((e&8388607)>>uo.shiftTable[t])}function sd(n){const e=n>>10;return uo.uint32View[0]=uo.mantissaTable[uo.offsetTable[e]+(n&1023)]+uo.exponentTable[e],uo.floatView[0]}const bl={toHalfFloat:er,fromHalfFloat:sd},Xn=new z,sm=new we;class Kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=nf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Fn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return aw("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)sm.fromBufferAttribute(this,t),sm.applyMatrix3(e),this.setXY(t,sm.x,sm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Xn.fromBufferAttribute(this,t),Xn.applyMatrix3(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Xn.fromBufferAttribute(this,t),Xn.applyMatrix4(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Xn.fromBufferAttribute(this,t),Xn.applyNormalMatrix(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Xn.fromBufferAttribute(this,t),Xn.transformDirection(e),this.setXYZ(t,Xn.x,Xn.y,Xn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Wi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Wi(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Wi(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Wi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Wi(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==nf&&(e.usage=this.usage),e}}class j8 extends Kt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class W8 extends Kt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class X8 extends Kt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class J8 extends Kt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class cw extends Kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class K8 extends Kt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class uw extends Kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Y8 extends Kt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=sd(this.array[e*this.itemSize]);return this.normalized&&(t=Wi(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=er(t),this}getY(e){let t=sd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Wi(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=er(t),this}getZ(e){let t=sd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Wi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=er(t),this}getW(e){let t=sd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Wi(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=er(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=er(t),this.array[e+1]=er(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.array[e+0]=er(t),this.array[e+1]=er(i),this.array[e+2]=er(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.array[e+0]=er(t),this.array[e+1]=er(i),this.array[e+2]=er(r),this.array[e+3]=er(s),this}}class st extends Kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Z8=0;const Ur=new ht,_y=new Ht,Pc=new z,pr=new vi,Dh=new vi,oi=new z;class It extends Io{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Z8++}),this.uuid=Sr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cN(e)?uw:cw)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Rt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,i){return Ur.makeTranslation(e,t,i),this.applyMatrix4(Ur),this}scale(e,t,i){return Ur.makeScale(e,t,i),this.applyMatrix4(Ur),this}lookAt(e){return _y.lookAt(e),_y.updateMatrix(),this.applyMatrix4(_y.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pc).negate(),this.translate(Pc.x,Pc.y,Pc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new st(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];pr.setFromBufferAttribute(s),this.morphTargetsRelative?(oi.addVectors(this.boundingBox.min,pr.min),this.boundingBox.expandByPoint(oi),oi.addVectors(this.boundingBox.max,pr.max),this.boundingBox.expandByPoint(oi)):(this.boundingBox.expandByPoint(pr.min),this.boundingBox.expandByPoint(pr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(e){const i=this.boundingSphere.center;if(pr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Dh.setFromBufferAttribute(a),this.morphTargetsRelative?(oi.addVectors(pr.min,Dh.min),pr.expandByPoint(oi),oi.addVectors(pr.max,Dh.max),pr.expandByPoint(oi)):(pr.expandByPoint(Dh.min),pr.expandByPoint(Dh.max))}pr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)oi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(oi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)oi.fromBufferAttribute(a,c),l&&(Pc.fromBufferAttribute(e,c),oi.add(Pc)),r=Math.max(r,i.distanceToSquared(oi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<i.count;N++)a[N]=new z,l[N]=new z;const c=new z,d=new z,f=new z,p=new we,m=new we,v=new we,S=new z,y=new z;function g(N,B,R){c.fromBufferAttribute(i,N),d.fromBufferAttribute(i,B),f.fromBufferAttribute(i,R),p.fromBufferAttribute(s,N),m.fromBufferAttribute(s,B),v.fromBufferAttribute(s,R),d.sub(c),f.sub(c),m.sub(p),v.sub(p);const O=1/(m.x*v.y-v.x*m.y);isFinite(O)&&(S.copy(d).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(O),y.copy(f).multiplyScalar(m.x).addScaledVector(d,-v.x).multiplyScalar(O),a[N].add(S),a[B].add(S),a[R].add(S),l[N].add(y),l[B].add(y),l[R].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let N=0,B=x.length;N<B;++N){const R=x[N],O=R.start,Y=R.count;for(let $=O,te=O+Y;$<te;$+=3)g(e.getX($+0),e.getX($+1),e.getX($+2))}const A=new z,M=new z,P=new z,I=new z;function L(N){P.fromBufferAttribute(r,N),I.copy(P);const B=a[N];A.copy(B),A.sub(P.multiplyScalar(P.dot(B))).normalize(),M.crossVectors(I,B);const O=M.dot(l[N])<0?-1:1;o.setXYZW(N,A.x,A.y,A.z,O)}for(let N=0,B=x.length;N<B;++N){const R=x[N],O=R.start,Y=R.count;for(let $=O,te=O+Y;$<te;$+=3)L(e.getX($+0)),L(e.getX($+1)),L(e.getX($+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new z,s=new z,o=new z,a=new z,l=new z,c=new z,d=new z,f=new z;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),S=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,y),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,S),c.fromBufferAttribute(i,y),a.add(d),l.add(d),c.add(d),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),i.setXYZ(p+0,d.x,d.y,d.z),i.setXYZ(p+1,d.x,d.y,d.z),i.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)oi.fromBufferAttribute(e,t),oi.normalize(),e.setXYZ(t,oi.x,oi.y,oi.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,v=0;for(let S=0,y=l.length;S<y;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*d;for(let g=0;g<d;g++)p[v++]=c[m++]}return new Kt(p,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new It,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const p=c[d],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];d.push(m.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cT=new ht,tl=new qu,om=new ui,uT=new z,Bc=new z,Nc=new z,Lc=new z,yy=new z,am=new z,lm=new we,cm=new we,um=new we,hT=new z,dT=new z,fT=new z,hm=new z,dm=new z;class wn extends Ht{constructor(e=new It,t=new rr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){am.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];d!==0&&(yy.fromBufferAttribute(f,e),o?am.addScaledVector(yy,d):am.addScaledVector(yy.sub(t),d))}t.add(am)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),om.copy(i.boundingSphere),om.applyMatrix4(s),tl.copy(e.ray).recast(e.near),!(om.containsPoint(tl.origin)===!1&&(tl.intersectSphere(om,uT)===null||tl.origin.distanceToSquared(uT)>(e.far-e.near)**2))&&(cT.copy(s).invert(),tl.copy(e.ray).applyMatrix4(cT),!(i.boundingBox!==null&&tl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,tl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,S=p.length;v<S;v++){const y=p[v],g=o[y.materialIndex],x=Math.max(y.start,m.start),A=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let M=x,P=A;M<P;M+=3){const I=a.getX(M),L=a.getX(M+1),N=a.getX(M+2);r=fm(this,g,e,i,c,d,f,I,L,N),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),S=Math.min(a.count,m.start+m.count);for(let y=v,g=S;y<g;y+=3){const x=a.getX(y),A=a.getX(y+1),M=a.getX(y+2);r=fm(this,o,e,i,c,d,f,x,A,M),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,S=p.length;v<S;v++){const y=p[v],g=o[y.materialIndex],x=Math.max(y.start,m.start),A=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let M=x,P=A;M<P;M+=3){const I=M,L=M+1,N=M+2;r=fm(this,g,e,i,c,d,f,I,L,N),r&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),S=Math.min(l.count,m.start+m.count);for(let y=v,g=S;y<g;y+=3){const x=y,A=y+1,M=y+2;r=fm(this,o,e,i,c,d,f,x,A,M),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}}function Q8(n,e,t,i,r,s,o,a){let l;if(e.side===Ji?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ws,a),l===null)return null;dm.copy(a),dm.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(dm);return c<t.near||c>t.far?null:{distance:c,point:dm.clone(),object:n}}function fm(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Bc),n.getVertexPosition(l,Nc),n.getVertexPosition(c,Lc);const d=Q8(n,e,t,i,Bc,Nc,Lc,hm);if(d){r&&(lm.fromBufferAttribute(r,a),cm.fromBufferAttribute(r,l),um.fromBufferAttribute(r,c),d.uv=_r.getInterpolation(hm,Bc,Nc,Lc,lm,cm,um,new we)),s&&(lm.fromBufferAttribute(s,a),cm.fromBufferAttribute(s,l),um.fromBufferAttribute(s,c),d.uv1=_r.getInterpolation(hm,Bc,Nc,Lc,lm,cm,um,new we)),o&&(hT.fromBufferAttribute(o,a),dT.fromBufferAttribute(o,l),fT.fromBufferAttribute(o,c),d.normal=_r.getInterpolation(hm,Bc,Nc,Lc,hT,dT,fT,new z),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new z,materialIndex:0};_r.getNormal(Bc,Nc,Lc,f.normal),d.face=f}return d}class ic extends It{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new st(c,3)),this.setAttribute("normal",new st(d,3)),this.setAttribute("uv",new st(f,2));function v(S,y,g,x,A,M,P,I,L,N,B){const R=M/L,O=P/N,Y=M/2,$=P/2,te=I/2,oe=L+1,ee=N+1;let pe=0,U=0;const Z=new z;for(let K=0;K<ee;K++){const ae=K*O-$;for(let ve=0;ve<oe;ve++){const Oe=ve*R-Y;Z[S]=Oe*x,Z[y]=ae*A,Z[g]=te,c.push(Z.x,Z.y,Z.z),Z[S]=0,Z[y]=0,Z[g]=I>0?1:-1,d.push(Z.x,Z.y,Z.z),f.push(ve/L),f.push(1-K/N),pe+=1}}for(let K=0;K<N;K++)for(let ae=0;ae<L;ae++){const ve=p+ae+oe*K,Oe=p+ae+oe*(K+1),le=p+(ae+1)+oe*(K+1),Ae=p+(ae+1)+oe*K;l.push(ve,Oe,Ae),l.push(Oe,le,Ae),U+=6}a.addGroup(m,U,B),m+=U,p+=pe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ic(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Vi(n){const e={};for(let t=0;t<n.length;t++){const i=zu(n[t]);for(const r in i)e[r]=i[r]}return e}function q8(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function pN(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:on.workingColorSpace}const mN={clone:zu,merge:Vi};var $8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,e9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class lr extends Yn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$8,this.fragmentShader=e9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zu(e.uniforms),this.uniformsGroups=q8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Mf extends Ht{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht,this.coordinateSystem=Os}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Vo=new z,pT=new we,mT=new we;class qn extends Mf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Gu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Gu*2*Math.atan(Math.tan(kl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Vo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Vo.x,Vo.y).multiplyScalar(-e/Vo.z),Vo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Vo.x,Vo.y).multiplyScalar(-e/Vo.z)}getViewSize(e,t){return this.getViewBounds(e,pT,mT),t.subVectors(mT,pT)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(kl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Dc=-90,Fc=1;class gN extends Ht{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new qn(Dc,Fc,e,t);r.layers=this.layers,this.add(r);const s=new qn(Dc,Fc,e,t);s.layers=this.layers,this.add(s);const o=new qn(Dc,Fc,e,t);o.layers=this.layers,this.add(o);const a=new qn(Dc,Fc,e,t);a.layers=this.layers,this.add(a);const l=new qn(Dc,Fc,e,t);l.layers=this.layers,this.add(l);const c=new qn(Dc,Fc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Os)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===rf)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(f,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Ef extends sn{constructor(e,t,i,r,s,o,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:Xs,super(e,t,i,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class hw extends Er{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ef(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:rn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ic(5,5,5),s=new lr({name:"CubemapFromEquirect",uniforms:zu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ji,blending:zs});s.uniforms.tEquirect.value=t;const o=new wn(r,s),a=t.minFilter;return t.minFilter===Kr&&(t.minFilter=rn),new gN(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const xy=new z,t9=new z,n9=new Rt;class $o{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=xy.subVectors(i,t).cross(t9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(xy),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||n9.getNormalMatrix(e),r=this.coplanarPoint(xy).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const nl=new ui,pm=new z;class Cf{constructor(e=new $o,t=new $o,i=new $o,r=new $o,s=new $o,o=new $o){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Os){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],f=r[6],p=r[7],m=r[8],v=r[9],S=r[10],y=r[11],g=r[12],x=r[13],A=r[14],M=r[15];if(i[0].setComponents(l-s,p-c,y-m,M-g).normalize(),i[1].setComponents(l+s,p+c,y+m,M+g).normalize(),i[2].setComponents(l+o,p+d,y+v,M+x).normalize(),i[3].setComponents(l-o,p-d,y-v,M-x).normalize(),i[4].setComponents(l-a,p-f,y-S,M-A).normalize(),t===Os)i[5].setComponents(l+a,p+f,y+S,M+A).normalize();else if(t===rf)i[5].setComponents(a,f,S,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),nl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),nl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nl)}intersectsSprite(e){return nl.center.set(0,0,0),nl.radius=.7071067811865476,nl.applyMatrix4(e.matrixWorld),this.intersectsSphere(nl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(pm.x=r.normal.x>0?e.max.x:e.min.x,pm.y=r.normal.y>0?e.max.y:e.min.y,pm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function vN(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function i9(n){const e=new WeakMap;function t(a,l){const c=a.array,d=a.usage,f=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,d),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const d=l.array,f=l._updateRange,p=l.updateRanges;if(n.bindBuffer(c,a),f.count===-1&&p.length===0&&n.bufferSubData(c,0,d),p.length!==0){for(let m=0,v=p.length;m<v;m++){const S=p[m];n.bufferSubData(c,S.start*d.BYTES_PER_ELEMENT,d,S.start,S.count)}l.clearUpdateRanges()}f.count!==-1&&(n.bufferSubData(c,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count),f.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class Ua extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,f=e/a,p=t/l,m=[],v=[],S=[],y=[];for(let g=0;g<d;g++){const x=g*p-o;for(let A=0;A<c;A++){const M=A*f-s;v.push(M,-x,0),S.push(0,0,1),y.push(A/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const A=x+c*g,M=x+c*(g+1),P=x+1+c*(g+1),I=x+1+c*g;m.push(A,M,I),m.push(M,P,I)}this.setIndex(m),this.setAttribute("position",new st(v,3)),this.setAttribute("normal",new st(S,3)),this.setAttribute("uv",new st(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ua(e.width,e.height,e.widthSegments,e.heightSegments)}}var r9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,s9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,o9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,a9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,l9=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,c9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,u9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,h9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,d9=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,f9=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,p9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,m9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,g9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,v9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,_9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,y9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,x9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,S9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,A9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,w9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,M9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,E9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,C9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,T9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,I9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,R9=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,b9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,P9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,B9=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,N9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,L9="gl_FragColor = linearToOutputTexel( gl_FragColor );",D9=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,F9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,O9=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,U9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,k9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,G9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,z9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,H9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,V9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,j9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,W9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,X9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,J9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,K9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Y9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Z9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Q9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,q9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ez=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,tz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,nz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,iz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,rz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,sz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,oz=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,az=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,lz=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cz=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,uz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,hz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,dz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,fz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,mz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,gz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,vz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,_z=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,yz=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,xz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Sz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Az=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,wz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ez=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Cz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Tz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Iz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Rz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,bz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Pz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Bz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Nz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Lz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Dz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Fz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Oz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Uz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,kz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,Gz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,zz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Hz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Vz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,jz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Wz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Xz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Jz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Kz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Yz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Zz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Qz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,qz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,$z=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,eH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,tH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,nH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const iH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,rH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,oH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,uH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,hH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,dH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,fH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,pH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,_H=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,AH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,MH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,EH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,IH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,BH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,DH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,FH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Bt={alphahash_fragment:r9,alphahash_pars_fragment:s9,alphamap_fragment:o9,alphamap_pars_fragment:a9,alphatest_fragment:l9,alphatest_pars_fragment:c9,aomap_fragment:u9,aomap_pars_fragment:h9,batching_pars_vertex:d9,batching_vertex:f9,begin_vertex:p9,beginnormal_vertex:m9,bsdfs:g9,iridescence_fragment:v9,bumpmap_pars_fragment:_9,clipping_planes_fragment:y9,clipping_planes_pars_fragment:x9,clipping_planes_pars_vertex:S9,clipping_planes_vertex:A9,color_fragment:w9,color_pars_fragment:M9,color_pars_vertex:E9,color_vertex:C9,common:T9,cube_uv_reflection_fragment:I9,defaultnormal_vertex:R9,displacementmap_pars_vertex:b9,displacementmap_vertex:P9,emissivemap_fragment:B9,emissivemap_pars_fragment:N9,colorspace_fragment:L9,colorspace_pars_fragment:D9,envmap_fragment:F9,envmap_common_pars_fragment:O9,envmap_pars_fragment:U9,envmap_pars_vertex:k9,envmap_physical_pars_fragment:Z9,envmap_vertex:G9,fog_vertex:z9,fog_pars_vertex:H9,fog_fragment:V9,fog_pars_fragment:j9,gradientmap_pars_fragment:W9,lightmap_pars_fragment:X9,lights_lambert_fragment:J9,lights_lambert_pars_fragment:K9,lights_pars_begin:Y9,lights_toon_fragment:Q9,lights_toon_pars_fragment:q9,lights_phong_fragment:$9,lights_phong_pars_fragment:ez,lights_physical_fragment:tz,lights_physical_pars_fragment:nz,lights_fragment_begin:iz,lights_fragment_maps:rz,lights_fragment_end:sz,logdepthbuf_fragment:oz,logdepthbuf_pars_fragment:az,logdepthbuf_pars_vertex:lz,logdepthbuf_vertex:cz,map_fragment:uz,map_pars_fragment:hz,map_particle_fragment:dz,map_particle_pars_fragment:fz,metalnessmap_fragment:pz,metalnessmap_pars_fragment:mz,morphinstance_vertex:gz,morphcolor_vertex:vz,morphnormal_vertex:_z,morphtarget_pars_vertex:yz,morphtarget_vertex:xz,normal_fragment_begin:Sz,normal_fragment_maps:Az,normal_pars_fragment:wz,normal_pars_vertex:Mz,normal_vertex:Ez,normalmap_pars_fragment:Cz,clearcoat_normal_fragment_begin:Tz,clearcoat_normal_fragment_maps:Iz,clearcoat_pars_fragment:Rz,iridescence_pars_fragment:bz,opaque_fragment:Pz,packing:Bz,premultiplied_alpha_fragment:Nz,project_vertex:Lz,dithering_fragment:Dz,dithering_pars_fragment:Fz,roughnessmap_fragment:Oz,roughnessmap_pars_fragment:Uz,shadowmap_pars_fragment:kz,shadowmap_pars_vertex:Gz,shadowmap_vertex:zz,shadowmask_pars_fragment:Hz,skinbase_vertex:Vz,skinning_pars_vertex:jz,skinning_vertex:Wz,skinnormal_vertex:Xz,specularmap_fragment:Jz,specularmap_pars_fragment:Kz,tonemapping_fragment:Yz,tonemapping_pars_fragment:Zz,transmission_fragment:Qz,transmission_pars_fragment:qz,uv_pars_fragment:$z,uv_pars_vertex:eH,uv_vertex:tH,worldpos_vertex:nH,background_vert:iH,background_frag:rH,backgroundCube_vert:sH,backgroundCube_frag:oH,cube_vert:aH,cube_frag:lH,depth_vert:cH,depth_frag:uH,distanceRGBA_vert:hH,distanceRGBA_frag:dH,equirect_vert:fH,equirect_frag:pH,linedashed_vert:mH,linedashed_frag:gH,meshbasic_vert:vH,meshbasic_frag:_H,meshlambert_vert:yH,meshlambert_frag:xH,meshmatcap_vert:SH,meshmatcap_frag:AH,meshnormal_vert:wH,meshnormal_frag:MH,meshphong_vert:EH,meshphong_frag:CH,meshphysical_vert:TH,meshphysical_frag:IH,meshtoon_vert:RH,meshtoon_frag:bH,points_vert:PH,points_frag:BH,shadow_vert:NH,shadow_frag:LH,sprite_vert:DH,sprite_frag:FH},Xe={common:{diffuse:{value:new je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},envMapRotation:{value:new Rt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new we(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new je(16777215)},opacity:{value:1},center:{value:new we(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},fs={basic:{uniforms:Vi([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:Vi([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new je(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:Vi([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new je(0)},specular:{value:new je(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:Vi([Xe.common,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.roughnessmap,Xe.metalnessmap,Xe.fog,Xe.lights,{emissive:{value:new je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:Vi([Xe.common,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.gradientmap,Xe.fog,Xe.lights,{emissive:{value:new je(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:Vi([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:Vi([Xe.points,Xe.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:Vi([Xe.common,Xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:Vi([Xe.common,Xe.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:Vi([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:Vi([Xe.sprite,Xe.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rt}},vertexShader:Bt.backgroundCube_vert,fragmentShader:Bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:Vi([Xe.common,Xe.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:Vi([Xe.lights,Xe.fog,{color:{value:new je(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};fs.physical={uniforms:Vi([fs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new we(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new we},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new je(0)},specularColor:{value:new je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new we},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};const mm={r:0,b:0,g:0},il=new Cr,OH=new ht;function UH(n,e,t,i,r,s,o){const a=new je(0);let l=s===!0?0:1,c,d,f=null,p=0,m=null;function v(x){let A=x.isScene===!0?x.background:null;return A&&A.isTexture&&(A=(x.backgroundBlurriness>0?t:e).get(A)),A}function S(x){let A=!1;const M=v(x);M===null?g(a,l):M&&M.isColor&&(g(M,1),A=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(x,A){const M=v(A);M&&(M.isCubeTexture||M.mapping===Qu)?(d===void 0&&(d=new wn(new ic(1,1,1),new lr({name:"BackgroundCubeMaterial",uniforms:zu(fs.backgroundCube.uniforms),vertexShader:fs.backgroundCube.vertexShader,fragmentShader:fs.backgroundCube.fragmentShader,side:Ji,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,I,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),il.copy(A.backgroundRotation),il.x*=-1,il.y*=-1,il.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(il.y*=-1,il.z*=-1),d.material.uniforms.envMap.value=M,d.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(OH.makeRotationFromEuler(il)),d.material.toneMapped=on.getTransfer(M.colorSpace)!==mn,(f!==M||p!==M.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,f=M,p=M.version,m=n.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new wn(new Ua(2,2),new lr({name:"BackgroundMaterial",uniforms:zu(fs.background.uniforms),vertexShader:fs.background.vertexShader,fragmentShader:fs.background.fragmentShader,side:Ws,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.toneMapped=on.getTransfer(M.colorSpace)!==mn,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(f!==M||p!==M.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=M,p=M.version,m=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function g(x,A){x.getRGB(mm,pN(n)),i.buffers.color.setClear(mm.r,mm.g,mm.b,A,o)}return{getClearColor:function(){return a},setClearColor:function(x,A=1){a.set(x),l=A,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,g(a,l)},render:S,addToRenderList:y}}function kH(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(R,O,Y,$,te){let oe=!1;const ee=f($,Y,O);s!==ee&&(s=ee,c(s.object)),oe=m(R,$,Y,te),oe&&v(R,$,Y,te),te!==null&&e.update(te,n.ELEMENT_ARRAY_BUFFER),(oe||o)&&(o=!1,M(R,O,Y,$),te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(te).buffer))}function l(){return n.createVertexArray()}function c(R){return n.bindVertexArray(R)}function d(R){return n.deleteVertexArray(R)}function f(R,O,Y){const $=Y.wireframe===!0;let te=i[R.id];te===void 0&&(te={},i[R.id]=te);let oe=te[O.id];oe===void 0&&(oe={},te[O.id]=oe);let ee=oe[$];return ee===void 0&&(ee=p(l()),oe[$]=ee),ee}function p(R){const O=[],Y=[],$=[];for(let te=0;te<t;te++)O[te]=0,Y[te]=0,$[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:Y,attributeDivisors:$,object:R,attributes:{},index:null}}function m(R,O,Y,$){const te=s.attributes,oe=O.attributes;let ee=0;const pe=Y.getAttributes();for(const U in pe)if(pe[U].location>=0){const K=te[U];let ae=oe[U];if(ae===void 0&&(U==="instanceMatrix"&&R.instanceMatrix&&(ae=R.instanceMatrix),U==="instanceColor"&&R.instanceColor&&(ae=R.instanceColor)),K===void 0||K.attribute!==ae||ae&&K.data!==ae.data)return!0;ee++}return s.attributesNum!==ee||s.index!==$}function v(R,O,Y,$){const te={},oe=O.attributes;let ee=0;const pe=Y.getAttributes();for(const U in pe)if(pe[U].location>=0){let K=oe[U];K===void 0&&(U==="instanceMatrix"&&R.instanceMatrix&&(K=R.instanceMatrix),U==="instanceColor"&&R.instanceColor&&(K=R.instanceColor));const ae={};ae.attribute=K,K&&K.data&&(ae.data=K.data),te[U]=ae,ee++}s.attributes=te,s.attributesNum=ee,s.index=$}function S(){const R=s.newAttributes;for(let O=0,Y=R.length;O<Y;O++)R[O]=0}function y(R){g(R,0)}function g(R,O){const Y=s.newAttributes,$=s.enabledAttributes,te=s.attributeDivisors;Y[R]=1,$[R]===0&&(n.enableVertexAttribArray(R),$[R]=1),te[R]!==O&&(n.vertexAttribDivisor(R,O),te[R]=O)}function x(){const R=s.newAttributes,O=s.enabledAttributes;for(let Y=0,$=O.length;Y<$;Y++)O[Y]!==R[Y]&&(n.disableVertexAttribArray(Y),O[Y]=0)}function A(R,O,Y,$,te,oe,ee){ee===!0?n.vertexAttribIPointer(R,O,Y,te,oe):n.vertexAttribPointer(R,O,Y,$,te,oe)}function M(R,O,Y,$){S();const te=$.attributes,oe=Y.getAttributes(),ee=O.defaultAttributeValues;for(const pe in oe){const U=oe[pe];if(U.location>=0){let Z=te[pe];if(Z===void 0&&(pe==="instanceMatrix"&&R.instanceMatrix&&(Z=R.instanceMatrix),pe==="instanceColor"&&R.instanceColor&&(Z=R.instanceColor)),Z!==void 0){const K=Z.normalized,ae=Z.itemSize,ve=e.get(Z);if(ve===void 0)continue;const Oe=ve.buffer,le=ve.type,Ae=ve.bytesPerElement,xe=le===n.INT||le===n.UNSIGNED_INT||Z.gpuType===kg;if(Z.isInterleavedBufferAttribute){const Ie=Z.data,dt=Ie.stride,xt=Z.offset;if(Ie.isInstancedInterleavedBuffer){for(let mt=0;mt<U.locationSize;mt++)g(U.location+mt,Ie.meshPerAttribute);R.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let mt=0;mt<U.locationSize;mt++)y(U.location+mt);n.bindBuffer(n.ARRAY_BUFFER,Oe);for(let mt=0;mt<U.locationSize;mt++)A(U.location+mt,ae/U.locationSize,le,K,dt*Ae,(xt+ae/U.locationSize*mt)*Ae,xe)}else{if(Z.isInstancedBufferAttribute){for(let Ie=0;Ie<U.locationSize;Ie++)g(U.location+Ie,Z.meshPerAttribute);R.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let Ie=0;Ie<U.locationSize;Ie++)y(U.location+Ie);n.bindBuffer(n.ARRAY_BUFFER,Oe);for(let Ie=0;Ie<U.locationSize;Ie++)A(U.location+Ie,ae/U.locationSize,le,K,ae*Ae,ae/U.locationSize*Ie*Ae,xe)}}else if(ee!==void 0){const K=ee[pe];if(K!==void 0)switch(K.length){case 2:n.vertexAttrib2fv(U.location,K);break;case 3:n.vertexAttrib3fv(U.location,K);break;case 4:n.vertexAttrib4fv(U.location,K);break;default:n.vertexAttrib1fv(U.location,K)}}}}x()}function P(){N();for(const R in i){const O=i[R];for(const Y in O){const $=O[Y];for(const te in $)d($[te].object),delete $[te];delete O[Y]}delete i[R]}}function I(R){if(i[R.id]===void 0)return;const O=i[R.id];for(const Y in O){const $=O[Y];for(const te in $)d($[te].object),delete $[te];delete O[Y]}delete i[R.id]}function L(R){for(const O in i){const Y=i[O];if(Y[R.id]===void 0)continue;const $=Y[R.id];for(const te in $)d($[te].object),delete $[te];delete Y[R.id]}}function N(){B(),o=!0,s!==r&&(s=r,c(s.object))}function B(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:N,resetDefaultState:B,dispose:P,releaseStatesOfGeometry:I,releaseStatesOfProgram:L,initAttributes:S,enableAttribute:y,disableUnusedAttributes:x}}function GH(n,e,t){let i;function r(c){i=c}function s(c,d){n.drawArrays(i,c,d),t.update(d,i,1)}function o(c,d,f){f!==0&&(n.drawArraysInstanced(i,c,d,f),t.update(d,i,f))}function a(c,d,f){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<f;m++)this.render(c[m],d[m]);else{p.multiDrawArraysWEBGL(i,c,0,d,0,f);let m=0;for(let v=0;v<f;v++)m+=d[v];t.update(m,i,1)}}function l(c,d,f,p){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],d[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,d,0,p,0,f);let v=0;for(let S=0;S<f;S++)v+=d[S];for(let S=0;S<p.length;S++)t.update(v,i,p[S])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function zH(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(I){return!(I!==Kn&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){const L=I===pi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Mr&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==Fn&&!L)}function l(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const f=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),x=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),M=m>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:S,maxAttributes:y,maxVertexUniforms:g,maxVaryings:x,maxFragmentUniforms:A,vertexTextures:M,maxSamples:P}}function HH(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new $o,a=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=d(f,p,0)},this.setState=function(f,p,m){const v=f.clippingPlanes,S=f.clipIntersection,y=f.clipShadows,g=n.get(f);if(!r||v===null||v.length===0||s&&!y)s?d(null):c();else{const x=s?0:i,A=x*4;let M=g.clippingState||null;l.value=M,M=d(v,p,A,m);for(let P=0;P!==A;++P)M[P]=t[P];g.clippingState=M,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,p,m,v){const S=f!==null?f.length:0;let y=null;if(S!==0){if(y=l.value,v!==!0||y===null){const g=m+S*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(y===null||y.length<g)&&(y=new Float32Array(g));for(let A=0,M=m;A!==S;++A,M+=4)o.copy(f[A]).applyMatrix4(x,a),o.normal.toArray(y,M),y[M+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,y}}function VH(n){let e=new WeakMap;function t(o,a){return a===Fu?o.mapping=Xs:a===Zd&&(o.mapping=Ca),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Fu||a===Zd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new hw(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class rc extends Mf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const mu=4,gT=[.125,.215,.35,.446,.526,.582],Sl=20,Sy=new rc,vT=new je;let Ay=null,wy=0,My=0,Ey=!1;const xl=(1+Math.sqrt(5))/2,Oc=1/xl,_T=[new z(-xl,Oc,0),new z(xl,Oc,0),new z(-Oc,0,xl),new z(Oc,0,xl),new z(0,xl,-Oc),new z(0,xl,Oc),new z(-1,1,-1),new z(1,1,-1),new z(-1,1,1),new z(1,1,1)];class aS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Ay=this._renderer.getRenderTarget(),wy=this._renderer.getActiveCubeFace(),My=this._renderer.getActiveMipmapLevel(),Ey=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ST(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ay,wy,My),this._renderer.xr.enabled=Ey,e.scissorTest=!1,gm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Xs||e.mapping===Ca?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ay=this._renderer.getRenderTarget(),wy=this._renderer.getActiveCubeFace(),My=this._renderer.getActiveMipmapLevel(),Ey=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:rn,minFilter:rn,generateMipmaps:!1,type:pi,format:Kn,colorSpace:qr,depthBuffer:!1},r=yT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yT(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=jH(s)),this._blurMaterial=WH(s,e,t)}return r}_compileMaterial(e){const t=new wn(this._lodPlanes[0],e);this._renderer.compile(t,Sy)}_sceneToCubeUV(e,t,i,r){const a=new qn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(vT),d.toneMapping=Hs,d.autoClear=!1;const m=new rr({name:"PMREM.Background",side:Ji,depthWrite:!1,depthTest:!1}),v=new wn(new ic,m);let S=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,S=!0):(m.color.copy(vT),S=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const A=this._cubeSize;gm(r,x*A,g>2?A:0,A,A),d.setRenderTarget(r),S&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Xs||e.mapping===Ca;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ST()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xT());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new wn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;gm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Sy)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=_T[(r-s-1)%_T.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new wn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Sl-1),S=s/v,y=isFinite(s)?1+Math.floor(d*S):Sl;y>Sl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Sl}`);const g=[];let x=0;for(let L=0;L<Sl;++L){const N=L/S,B=Math.exp(-N*N/2);g.push(B),L===0?x+=B:L<y&&(x+=2*B)}for(let L=0;L<g.length;L++)g[L]=g[L]/x;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:A}=this;p.dTheta.value=v,p.mipInt.value=A-i;const M=this._sizeLods[r],P=3*M*(r>A-mu?r-A+mu:0),I=4*(this._cubeSize-M);gm(t,P,I,3*M,2*M),l.setRenderTarget(t),l.render(f,Sy)}}function jH(n){const e=[],t=[],i=[];let r=n;const s=n-mu+1+gT.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-mu?l=gT[o-n+mu-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,v=6,S=3,y=2,g=1,x=new Float32Array(S*v*m),A=new Float32Array(y*v*m),M=new Float32Array(g*v*m);for(let I=0;I<m;I++){const L=I%3*2/3-1,N=I>2?0:-1,B=[L,N,0,L+2/3,N,0,L+2/3,N+1,0,L,N,0,L+2/3,N+1,0,L,N+1,0];x.set(B,S*v*I),A.set(p,y*v*I);const R=[I,I,I,I,I,I];M.set(R,g*v*I)}const P=new It;P.setAttribute("position",new Kt(x,S)),P.setAttribute("uv",new Kt(A,y)),P.setAttribute("faceIndex",new Kt(M,g)),e.push(P),r>mu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function yT(n,e,t){const i=new Er(n,e,t);return i.texture.mapping=Qu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function gm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function WH(n,e,t){const i=new Float32Array(Sl),r=new z(0,1,0);return new lr({name:"SphericalGaussianBlur",defines:{n:Sl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:dw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zs,depthTest:!1,depthWrite:!1})}function xT(){return new lr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:dw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zs,depthTest:!1,depthWrite:!1})}function ST(){return new lr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:dw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zs,depthTest:!1,depthWrite:!1})}function dw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function XH(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Fu||l===Zd,d=l===Xs||l===Ca;if(c||d){let f=e.get(a);const p=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new aS(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return c&&m&&m.height>0||d&&m&&r(m)?(t===null&&(t=new aS(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function JH(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&aw("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function KH(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const S=p.morphAttributes[v];for(let y=0,g=S.length;y<g;y++)e.remove(S[y])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const S=m[v];for(let y=0,g=S.length;y<g;y++)e.update(S[y],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,v=f.attributes.position;let S=0;if(m!==null){const x=m.array;S=m.version;for(let A=0,M=x.length;A<M;A+=3){const P=x[A+0],I=x[A+1],L=x[A+2];p.push(P,I,I,L,L,P)}}else if(v!==void 0){const x=v.array;S=v.version;for(let A=0,M=x.length/3-1;A<M;A+=3){const P=A+0,I=A+1,L=A+2;p.push(P,I,I,L,L,P)}}else return;const y=new(cN(p)?uw:cw)(p,1);y.version=S;const g=s.get(f);g&&e.remove(g),s.set(f,y)}function d(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:d}}function YH(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function c(p,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}function d(p,m,v){if(v===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let y=0;y<v;y++)this.render(p[y]/o,m[y]);else{S.multiDrawElementsWEBGL(i,m,0,s,p,0,v);let y=0;for(let g=0;g<v;g++)y+=m[g];t.update(y,i,1)}}function f(p,m,v,S){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],S[g]);else{y.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,S,0,v);let g=0;for(let x=0;x<v;x++)g+=m[x];for(let x=0;x<S.length;x++)t.update(g,i,S[x])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function ZH(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function QH(n,e,t){const i=new WeakMap,r=new ln;function s(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=d!==void 0?d.length:0;let p=i.get(a);if(p===void 0||p.count!==f){let R=function(){N.dispose(),i.delete(a),a.removeEventListener("dispose",R)};var m=R;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,S=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let M=0;v===!0&&(M=1),S===!0&&(M=2),y===!0&&(M=3);let P=a.attributes.position.count*M,I=1;P>e.maxTextureSize&&(I=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const L=new Float32Array(P*I*4*f),N=new Vg(L,P,I,f);N.type=Fn,N.needsUpdate=!0;const B=M*4;for(let O=0;O<f;O++){const Y=g[O],$=x[O],te=A[O],oe=P*I*4*O;for(let ee=0;ee<Y.count;ee++){const pe=ee*B;v===!0&&(r.fromBufferAttribute(Y,ee),L[oe+pe+0]=r.x,L[oe+pe+1]=r.y,L[oe+pe+2]=r.z,L[oe+pe+3]=0),S===!0&&(r.fromBufferAttribute($,ee),L[oe+pe+4]=r.x,L[oe+pe+5]=r.y,L[oe+pe+6]=r.z,L[oe+pe+7]=0),y===!0&&(r.fromBufferAttribute(te,ee),L[oe+pe+8]=r.x,L[oe+pe+9]=r.y,L[oe+pe+10]=r.z,L[oe+pe+11]=te.itemSize===4?r.w:1)}}p={count:f,texture:N,size:new we(P,I)},i.set(a,p),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let y=0;y<c.length;y++)v+=c[y];const S=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",S),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function qH(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,d=l.geometry,f=e.get(l,d);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class fw extends sn{constructor(e,t,i,r,s,o,a,l,c,d=Ul){if(d!==Ul&&d!==Kl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Ul&&(i=Ia),i===void 0&&d===Kl&&(i=Jl),super(null,r,s,o,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ei,this.minFilter=l!==void 0?l:ei,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const _N=new sn,yN=new fw(1,1);yN.compareFunction=rw;const xN=new Vg,SN=new lw,AN=new Ef,AT=[],wT=[],MT=new Float32Array(16),ET=new Float32Array(9),CT=new Float32Array(4);function $u(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=AT[r];if(s===void 0&&(s=new Float32Array(r),AT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ti(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ni(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jg(n,e){let t=wT[e];t===void 0&&(t=new Int32Array(e),wT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function $H(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function e7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;n.uniform2fv(this.addr,e),ni(t,e)}}function t7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ti(t,e))return;n.uniform3fv(this.addr,e),ni(t,e)}}function n7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;n.uniform4fv(this.addr,e),ni(t,e)}}function i7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ti(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,i))return;CT.set(i),n.uniformMatrix2fv(this.addr,!1,CT),ni(t,i)}}function r7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ti(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,i))return;ET.set(i),n.uniformMatrix3fv(this.addr,!1,ET),ni(t,i)}}function s7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ti(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,i))return;MT.set(i),n.uniformMatrix4fv(this.addr,!1,MT),ni(t,i)}}function o7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function a7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;n.uniform2iv(this.addr,e),ni(t,e)}}function l7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;n.uniform3iv(this.addr,e),ni(t,e)}}function c7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;n.uniform4iv(this.addr,e),ni(t,e)}}function u7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function h7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;n.uniform2uiv(this.addr,e),ni(t,e)}}function d7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;n.uniform3uiv(this.addr,e),ni(t,e)}}function f7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;n.uniform4uiv(this.addr,e),ni(t,e)}}function p7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?yN:_N;t.setTexture2D(e||s,r)}function m7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||SN,r)}function g7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||AN,r)}function v7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||xN,r)}function _7(n){switch(n){case 5126:return $H;case 35664:return e7;case 35665:return t7;case 35666:return n7;case 35674:return i7;case 35675:return r7;case 35676:return s7;case 5124:case 35670:return o7;case 35667:case 35671:return a7;case 35668:case 35672:return l7;case 35669:case 35673:return c7;case 5125:return u7;case 36294:return h7;case 36295:return d7;case 36296:return f7;case 35678:case 36198:case 36298:case 36306:case 35682:return p7;case 35679:case 36299:case 36307:return m7;case 35680:case 36300:case 36308:case 36293:return g7;case 36289:case 36303:case 36311:case 36292:return v7}}function y7(n,e){n.uniform1fv(this.addr,e)}function x7(n,e){const t=$u(e,this.size,2);n.uniform2fv(this.addr,t)}function S7(n,e){const t=$u(e,this.size,3);n.uniform3fv(this.addr,t)}function A7(n,e){const t=$u(e,this.size,4);n.uniform4fv(this.addr,t)}function w7(n,e){const t=$u(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function M7(n,e){const t=$u(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function E7(n,e){const t=$u(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function C7(n,e){n.uniform1iv(this.addr,e)}function T7(n,e){n.uniform2iv(this.addr,e)}function I7(n,e){n.uniform3iv(this.addr,e)}function R7(n,e){n.uniform4iv(this.addr,e)}function b7(n,e){n.uniform1uiv(this.addr,e)}function P7(n,e){n.uniform2uiv(this.addr,e)}function B7(n,e){n.uniform3uiv(this.addr,e)}function N7(n,e){n.uniform4uiv(this.addr,e)}function L7(n,e,t){const i=this.cache,r=e.length,s=jg(t,r);ti(i,s)||(n.uniform1iv(this.addr,s),ni(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||_N,s[o])}function D7(n,e,t){const i=this.cache,r=e.length,s=jg(t,r);ti(i,s)||(n.uniform1iv(this.addr,s),ni(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||SN,s[o])}function F7(n,e,t){const i=this.cache,r=e.length,s=jg(t,r);ti(i,s)||(n.uniform1iv(this.addr,s),ni(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||AN,s[o])}function O7(n,e,t){const i=this.cache,r=e.length,s=jg(t,r);ti(i,s)||(n.uniform1iv(this.addr,s),ni(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||xN,s[o])}function U7(n){switch(n){case 5126:return y7;case 35664:return x7;case 35665:return S7;case 35666:return A7;case 35674:return w7;case 35675:return M7;case 35676:return E7;case 5124:case 35670:return C7;case 35667:case 35671:return T7;case 35668:case 35672:return I7;case 35669:case 35673:return R7;case 5125:return b7;case 36294:return P7;case 36295:return B7;case 36296:return N7;case 35678:case 36198:case 36298:case 36306:case 35682:return L7;case 35679:case 36299:case 36307:return D7;case 35680:case 36300:case 36308:case 36293:return F7;case 36289:case 36303:case 36311:case 36292:return O7}}class k7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=_7(t.type)}}class G7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=U7(t.type)}}class z7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Cy=/(\w+)(\])?(\[|\.)?/g;function TT(n,e){n.seq.push(e),n.map[e.id]=e}function H7(n,e,t){const i=n.name,r=i.length;for(Cy.lastIndex=0;;){const s=Cy.exec(i),o=Cy.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){TT(t,c===void 0?new k7(a,n,e):new G7(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new z7(a),TT(t,f)),t=f}}}class S0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);H7(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function IT(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const V7=37297;let j7=0;function W7(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function X7(n){const e=on.getPrimaries(on.workingColorSpace),t=on.getPrimaries(n);let i;switch(e===t?i="":e===tf&&t===ef?i="LinearDisplayP3ToLinearSRGB":e===ef&&t===tf&&(i="LinearSRGBToLinearDisplayP3"),n){case qr:case wf:return[i,"LinearTransferOETF"];case vr:case Hg:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function RT(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+W7(n.getShaderSource(e),o)}else return r}function J7(n,e){const t=X7(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function K7(n,e){let t;switch(e){case DB:t="Linear";break;case FB:t="Reinhard";break;case OB:t="OptimizedCineon";break;case KA:t="ACESFilmic";break;case kB:t="AgX";break;case GB:t="Neutral";break;case UB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Y7(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(od).join(`
`)}function Z7(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Q7(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function od(n){return n!==""}function bT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const q7=/^[ \t]*#include +<([\w\d./]+)>/gm;function lS(n){return n.replace(q7,eV)}const $7=new Map;function eV(n,e){let t=Bt[e];if(t===void 0){const i=$7.get(e);if(i!==void 0)t=Bt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return lS(t)}const tV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function BT(n){return n.replace(tV,nV)}function nV(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function NT(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function iV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Og?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===us&&(e="SHADOWMAP_TYPE_VSM"),e}function rV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Xs:case Ca:e="ENVMAP_TYPE_CUBE";break;case Qu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function sV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ca:e="ENVMAP_MODE_REFRACTION";break}return e}function oV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Af:e="ENVMAP_BLENDING_MULTIPLY";break;case NB:e="ENVMAP_BLENDING_MIX";break;case LB:e="ENVMAP_BLENDING_ADD";break}return e}function aV(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function lV(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=iV(t),c=rV(t),d=sV(t),f=oV(t),p=aV(t),m=Y7(t),v=Z7(s),S=r.createProgram();let y,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(od).join(`
`),y.length>0&&(y+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(od).join(`
`),g.length>0&&(g+=`
`)):(y=[NT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(od).join(`
`),g=[NT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Hs?"#define TONE_MAPPING":"",t.toneMapping!==Hs?Bt.tonemapping_pars_fragment:"",t.toneMapping!==Hs?K7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Bt.colorspace_pars_fragment,J7("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(od).join(`
`)),o=lS(o),o=bT(o,t),o=PT(o,t),a=lS(a),a=bT(a,t),a=PT(a,t),o=BT(o),a=BT(a),t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,y=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===oS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===oS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const A=x+y+o,M=x+g+a,P=IT(r,r.VERTEX_SHADER,A),I=IT(r,r.FRAGMENT_SHADER,M);r.attachShader(S,P),r.attachShader(S,I),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function L(O){if(n.debug.checkShaderErrors){const Y=r.getProgramInfoLog(S).trim(),$=r.getShaderInfoLog(P).trim(),te=r.getShaderInfoLog(I).trim();let oe=!0,ee=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(oe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,S,P,I);else{const pe=RT(r,P,"vertex"),U=RT(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+Y+`
`+pe+`
`+U)}else Y!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Y):($===""||te==="")&&(ee=!1);ee&&(O.diagnostics={runnable:oe,programLog:Y,vertexShader:{log:$,prefix:y},fragmentShader:{log:te,prefix:g}})}r.deleteShader(P),r.deleteShader(I),N=new S0(r,S),B=Q7(r,S)}let N;this.getUniforms=function(){return N===void 0&&L(this),N};let B;this.getAttributes=function(){return B===void 0&&L(this),B};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=r.getProgramParameter(S,V7)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=j7++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=P,this.fragmentShader=I,this}let cV=0;class uV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new hV(e),t.set(e,i)),i}}class hV{constructor(e){this.id=cV++,this.code=e,this.usedTimes=0}}function dV(n,e,t,i,r,s,o){const a=new Gl,l=new uV,c=new Set,d=[],f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(B){return c.add(B),B===0?"uv":`uv${B}`}function y(B,R,O,Y,$){const te=Y.fog,oe=$.geometry,ee=B.isMeshStandardMaterial?Y.environment:null,pe=(B.isMeshStandardMaterial?t:e).get(B.envMap||ee),U=pe&&pe.mapping===Qu?pe.image.height:null,Z=v[B.type];B.precision!==null&&(m=r.getMaxPrecision(B.precision),m!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",m,"instead."));const K=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,ae=K!==void 0?K.length:0;let ve=0;oe.morphAttributes.position!==void 0&&(ve=1),oe.morphAttributes.normal!==void 0&&(ve=2),oe.morphAttributes.color!==void 0&&(ve=3);let Oe,le,Ae,xe;if(Z){const Yt=fs[Z];Oe=Yt.vertexShader,le=Yt.fragmentShader}else Oe=B.vertexShader,le=B.fragmentShader,l.update(B),Ae=l.getVertexShaderID(B),xe=l.getFragmentShaderID(B);const Ie=n.getRenderTarget(),dt=$.isInstancedMesh===!0,xt=$.isBatchedMesh===!0,mt=!!B.map,Q=!!B.matcap,Ee=!!pe,Se=!!B.aoMap,De=!!B.lightMap,Be=!!B.bumpMap,Ne=!!B.normalMap,Ye=!!B.displacementMap,Je=!!B.emissiveMap,St=!!B.metalnessMap,W=!!B.roughnessMap,F=B.anisotropy>0,de=B.clearcoat>0,Re=B.dispersion>0,Ce=B.iridescence>0,be=B.sheen>0,ot=B.transmission>0,He=F&&!!B.anisotropyMap,Ve=de&&!!B.clearcoatMap,_t=de&&!!B.clearcoatNormalMap,Fe=de&&!!B.clearcoatRoughnessMap,rt=Ce&&!!B.iridescenceMap,Nt=Ce&&!!B.iridescenceThicknessMap,ft=be&&!!B.sheenColorMap,Ge=be&&!!B.sheenRoughnessMap,Mt=!!B.specularMap,Et=!!B.specularColorMap,Ut=!!B.specularIntensityMap,q=ot&&!!B.transmissionMap,Ze=ot&&!!B.thicknessMap,ie=!!B.gradientMap,Me=!!B.alphaMap,ze=B.alphaTest>0,vt=!!B.alphaHash,zt=!!B.extensions;let dn=Hs;B.toneMapped&&(Ie===null||Ie.isXRRenderTarget===!0)&&(dn=n.toneMapping);const Pn={shaderID:Z,shaderType:B.type,shaderName:B.name,vertexShader:Oe,fragmentShader:le,defines:B.defines,customVertexShaderID:Ae,customFragmentShaderID:xe,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:m,batching:xt,batchingColor:xt&&$._colorsTexture!==null,instancing:dt,instancingColor:dt&&$.instanceColor!==null,instancingMorph:dt&&$.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Ie===null?n.outputColorSpace:Ie.isXRRenderTarget===!0?Ie.texture.colorSpace:qr,alphaToCoverage:!!B.alphaToCoverage,map:mt,matcap:Q,envMap:Ee,envMapMode:Ee&&pe.mapping,envMapCubeUVHeight:U,aoMap:Se,lightMap:De,bumpMap:Be,normalMap:Ne,displacementMap:p&&Ye,emissiveMap:Je,normalMapObjectSpace:Ne&&B.normalMapType===tN,normalMapTangentSpace:Ne&&B.normalMapType===Oa,metalnessMap:St,roughnessMap:W,anisotropy:F,anisotropyMap:He,clearcoat:de,clearcoatMap:Ve,clearcoatNormalMap:_t,clearcoatRoughnessMap:Fe,dispersion:Re,iridescence:Ce,iridescenceMap:rt,iridescenceThicknessMap:Nt,sheen:be,sheenColorMap:ft,sheenRoughnessMap:Ge,specularMap:Mt,specularColorMap:Et,specularIntensityMap:Ut,transmission:ot,transmissionMap:q,thicknessMap:Ze,gradientMap:ie,opaque:B.transparent===!1&&B.blending===Ol&&B.alphaToCoverage===!1,alphaMap:Me,alphaTest:ze,alphaHash:vt,combine:B.combine,mapUv:mt&&S(B.map.channel),aoMapUv:Se&&S(B.aoMap.channel),lightMapUv:De&&S(B.lightMap.channel),bumpMapUv:Be&&S(B.bumpMap.channel),normalMapUv:Ne&&S(B.normalMap.channel),displacementMapUv:Ye&&S(B.displacementMap.channel),emissiveMapUv:Je&&S(B.emissiveMap.channel),metalnessMapUv:St&&S(B.metalnessMap.channel),roughnessMapUv:W&&S(B.roughnessMap.channel),anisotropyMapUv:He&&S(B.anisotropyMap.channel),clearcoatMapUv:Ve&&S(B.clearcoatMap.channel),clearcoatNormalMapUv:_t&&S(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&S(B.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&S(B.iridescenceMap.channel),iridescenceThicknessMapUv:Nt&&S(B.iridescenceThicknessMap.channel),sheenColorMapUv:ft&&S(B.sheenColorMap.channel),sheenRoughnessMapUv:Ge&&S(B.sheenRoughnessMap.channel),specularMapUv:Mt&&S(B.specularMap.channel),specularColorMapUv:Et&&S(B.specularColorMap.channel),specularIntensityMapUv:Ut&&S(B.specularIntensityMap.channel),transmissionMapUv:q&&S(B.transmissionMap.channel),thicknessMapUv:Ze&&S(B.thicknessMap.channel),alphaMapUv:Me&&S(B.alphaMap.channel),vertexTangents:!!oe.attributes.tangent&&(Ne||F),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!oe.attributes.uv&&(mt||Me),fog:!!te,useFog:B.fog===!0,fogExp2:!!te&&te.isFogExp2,flatShading:B.flatShading===!0,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:$.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:ve,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:dn,decodeVideoTexture:mt&&B.map.isVideoTexture===!0&&on.getTransfer(B.map.colorSpace)===mn,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===Wr,flipSided:B.side===Ji,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:zt&&B.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:zt&&B.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return Pn.vertexUv1s=c.has(1),Pn.vertexUv2s=c.has(2),Pn.vertexUv3s=c.has(3),c.clear(),Pn}function g(B){const R=[];if(B.shaderID?R.push(B.shaderID):(R.push(B.customVertexShaderID),R.push(B.customFragmentShaderID)),B.defines!==void 0)for(const O in B.defines)R.push(O),R.push(B.defines[O]);return B.isRawShaderMaterial===!1&&(x(R,B),A(R,B),R.push(n.outputColorSpace)),R.push(B.customProgramCacheKey),R.join()}function x(B,R){B.push(R.precision),B.push(R.outputColorSpace),B.push(R.envMapMode),B.push(R.envMapCubeUVHeight),B.push(R.mapUv),B.push(R.alphaMapUv),B.push(R.lightMapUv),B.push(R.aoMapUv),B.push(R.bumpMapUv),B.push(R.normalMapUv),B.push(R.displacementMapUv),B.push(R.emissiveMapUv),B.push(R.metalnessMapUv),B.push(R.roughnessMapUv),B.push(R.anisotropyMapUv),B.push(R.clearcoatMapUv),B.push(R.clearcoatNormalMapUv),B.push(R.clearcoatRoughnessMapUv),B.push(R.iridescenceMapUv),B.push(R.iridescenceThicknessMapUv),B.push(R.sheenColorMapUv),B.push(R.sheenRoughnessMapUv),B.push(R.specularMapUv),B.push(R.specularColorMapUv),B.push(R.specularIntensityMapUv),B.push(R.transmissionMapUv),B.push(R.thicknessMapUv),B.push(R.combine),B.push(R.fogExp2),B.push(R.sizeAttenuation),B.push(R.morphTargetsCount),B.push(R.morphAttributeCount),B.push(R.numDirLights),B.push(R.numPointLights),B.push(R.numSpotLights),B.push(R.numSpotLightMaps),B.push(R.numHemiLights),B.push(R.numRectAreaLights),B.push(R.numDirLightShadows),B.push(R.numPointLightShadows),B.push(R.numSpotLightShadows),B.push(R.numSpotLightShadowsWithMaps),B.push(R.numLightProbes),B.push(R.shadowMapType),B.push(R.toneMapping),B.push(R.numClippingPlanes),B.push(R.numClipIntersection),B.push(R.depthPacking)}function A(B,R){a.disableAll(),R.supportsVertexTextures&&a.enable(0),R.instancing&&a.enable(1),R.instancingColor&&a.enable(2),R.instancingMorph&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),R.dispersion&&a.enable(20),R.batchingColor&&a.enable(21),B.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.doubleSided&&a.enable(10),R.flipSided&&a.enable(11),R.useDepthPacking&&a.enable(12),R.dithering&&a.enable(13),R.transmission&&a.enable(14),R.sheen&&a.enable(15),R.opaque&&a.enable(16),R.pointsUvs&&a.enable(17),R.decodeVideoTexture&&a.enable(18),R.alphaToCoverage&&a.enable(19),B.push(a.mask)}function M(B){const R=v[B.type];let O;if(R){const Y=fs[R];O=mN.clone(Y.uniforms)}else O=B.uniforms;return O}function P(B,R){let O;for(let Y=0,$=d.length;Y<$;Y++){const te=d[Y];if(te.cacheKey===R){O=te,++O.usedTimes;break}}return O===void 0&&(O=new lV(n,R,B,s),d.push(O)),O}function I(B){if(--B.usedTimes===0){const R=d.indexOf(B);d[R]=d[d.length-1],d.pop(),B.destroy()}}function L(B){l.remove(B)}function N(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:M,acquireProgram:P,releaseProgram:I,releaseShaderCache:L,programs:d,dispose:N}}function fV(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function pV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function LT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DT(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,v,S,y){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:v,renderOrder:f.renderOrder,z:S,group:y},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=f.renderOrder,g.z=S,g.group=y),e++,g}function a(f,p,m,v,S,y){const g=o(f,p,m,v,S,y);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,v,S,y){const g=o(f,p,m,v,S,y);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||pV),i.length>1&&i.sort(p||LT),r.length>1&&r.sort(p||LT)}function d(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:c}}function mV(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new DT,n.set(i,[o])):r>=s.length?(o=new DT,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function gV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new je};break;case"SpotLight":t={position:new z,direction:new z,color:new je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new je,groundColor:new je};break;case"RectAreaLight":t={color:new je,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function vV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let _V=0;function yV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function xV(n){const e=new gV,t=vV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new z);const r=new z,s=new ht,o=new ht;function a(c){let d=0,f=0,p=0;for(let B=0;B<9;B++)i.probe[B].set(0,0,0);let m=0,v=0,S=0,y=0,g=0,x=0,A=0,M=0,P=0,I=0,L=0;c.sort(yV);for(let B=0,R=c.length;B<R;B++){const O=c[B],Y=O.color,$=O.intensity,te=O.distance,oe=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)d+=Y.r*$,f+=Y.g*$,p+=Y.b*$;else if(O.isLightProbe){for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(O.sh.coefficients[ee],$);L++}else if(O.isDirectionalLight){const ee=e.get(O);if(ee.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const pe=O.shadow,U=t.get(O);U.shadowBias=pe.bias,U.shadowNormalBias=pe.normalBias,U.shadowRadius=pe.radius,U.shadowMapSize=pe.mapSize,i.directionalShadow[m]=U,i.directionalShadowMap[m]=oe,i.directionalShadowMatrix[m]=O.shadow.matrix,x++}i.directional[m]=ee,m++}else if(O.isSpotLight){const ee=e.get(O);ee.position.setFromMatrixPosition(O.matrixWorld),ee.color.copy(Y).multiplyScalar($),ee.distance=te,ee.coneCos=Math.cos(O.angle),ee.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),ee.decay=O.decay,i.spot[S]=ee;const pe=O.shadow;if(O.map&&(i.spotLightMap[P]=O.map,P++,pe.updateMatrices(O),O.castShadow&&I++),i.spotLightMatrix[S]=pe.matrix,O.castShadow){const U=t.get(O);U.shadowBias=pe.bias,U.shadowNormalBias=pe.normalBias,U.shadowRadius=pe.radius,U.shadowMapSize=pe.mapSize,i.spotShadow[S]=U,i.spotShadowMap[S]=oe,M++}S++}else if(O.isRectAreaLight){const ee=e.get(O);ee.color.copy(Y).multiplyScalar($),ee.halfWidth.set(O.width*.5,0,0),ee.halfHeight.set(0,O.height*.5,0),i.rectArea[y]=ee,y++}else if(O.isPointLight){const ee=e.get(O);if(ee.color.copy(O.color).multiplyScalar(O.intensity),ee.distance=O.distance,ee.decay=O.decay,O.castShadow){const pe=O.shadow,U=t.get(O);U.shadowBias=pe.bias,U.shadowNormalBias=pe.normalBias,U.shadowRadius=pe.radius,U.shadowMapSize=pe.mapSize,U.shadowCameraNear=pe.camera.near,U.shadowCameraFar=pe.camera.far,i.pointShadow[v]=U,i.pointShadowMap[v]=oe,i.pointShadowMatrix[v]=O.shadow.matrix,A++}i.point[v]=ee,v++}else if(O.isHemisphereLight){const ee=e.get(O);ee.skyColor.copy(O.color).multiplyScalar($),ee.groundColor.copy(O.groundColor).multiplyScalar($),i.hemi[g]=ee,g++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Xe.LTC_FLOAT_1,i.rectAreaLTC2=Xe.LTC_FLOAT_2):(i.rectAreaLTC1=Xe.LTC_HALF_1,i.rectAreaLTC2=Xe.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=p;const N=i.hash;(N.directionalLength!==m||N.pointLength!==v||N.spotLength!==S||N.rectAreaLength!==y||N.hemiLength!==g||N.numDirectionalShadows!==x||N.numPointShadows!==A||N.numSpotShadows!==M||N.numSpotMaps!==P||N.numLightProbes!==L)&&(i.directional.length=m,i.spot.length=S,i.rectArea.length=y,i.point.length=v,i.hemi.length=g,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=M,i.spotShadowMap.length=M,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=M+P-I,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=I,i.numLightProbes=L,N.directionalLength=m,N.pointLength=v,N.spotLength=S,N.rectAreaLength=y,N.hemiLength=g,N.numDirectionalShadows=x,N.numPointShadows=A,N.numSpotShadows=M,N.numSpotMaps=P,N.numLightProbes=L,i.version=_V++)}function l(c,d){let f=0,p=0,m=0,v=0,S=0;const y=d.matrixWorldInverse;for(let g=0,x=c.length;g<x;g++){const A=c[g];if(A.isDirectionalLight){const M=i.directional[f];M.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(y),f++}else if(A.isSpotLight){const M=i.spot[m];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(y),M.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(y),m++}else if(A.isRectAreaLight){const M=i.rectArea[v];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(y),o.identity(),s.copy(A.matrixWorld),s.premultiply(y),o.extractRotation(s),M.halfWidth.set(A.width*.5,0,0),M.halfHeight.set(0,A.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),v++}else if(A.isPointLight){const M=i.point[p];M.position.setFromMatrixPosition(A.matrixWorld),M.position.applyMatrix4(y),p++}else if(A.isHemisphereLight){const M=i.hemi[S];M.direction.setFromMatrixPosition(A.matrixWorld),M.direction.transformDirection(y),S++}}}return{setup:a,setupView:l,state:i}}function FT(n){const e=new xV(n),t=[],i=[];function r(d){c.camera=d,t.length=0,i.length=0}function s(d){t.push(d)}function o(d){i.push(d)}function a(){e.setup(t)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function SV(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new FT(n),e.set(r,[a])):s>=o.length?(a=new FT(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class pw extends Yn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=$B,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mw extends Yn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const AV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function MV(n,e,t){let i=new Cf;const r=new we,s=new we,o=new ln,a=new pw({depthPacking:eN}),l=new mw,c={},d=t.maxTextureSize,f={[Ws]:Ji,[Ji]:Ws,[Wr]:Wr},p=new lr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new we},radius:{value:4}},vertexShader:AV,fragmentShader:wV}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new It;v.setAttribute("position",new Kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new wn(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Og;let g=this.type;this.render=function(I,L,N){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||I.length===0)return;const B=n.getRenderTarget(),R=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),Y=n.state;Y.setBlending(zs),Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const $=g!==us&&this.type===us,te=g===us&&this.type!==us;for(let oe=0,ee=I.length;oe<ee;oe++){const pe=I[oe],U=pe.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",pe,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const Z=U.getFrameExtents();if(r.multiply(Z),s.copy(U.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/Z.x),r.x=s.x*Z.x,U.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/Z.y),r.y=s.y*Z.y,U.mapSize.y=s.y)),U.map===null||$===!0||te===!0){const ae=this.type!==us?{minFilter:ei,magFilter:ei}:{};U.map!==null&&U.map.dispose(),U.map=new Er(r.x,r.y,ae),U.map.texture.name=pe.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const K=U.getViewportCount();for(let ae=0;ae<K;ae++){const ve=U.getViewport(ae);o.set(s.x*ve.x,s.y*ve.y,s.x*ve.z,s.y*ve.w),Y.viewport(o),U.updateMatrices(pe,ae),i=U.getFrustum(),M(L,N,U.camera,pe,this.type)}U.isPointLightShadow!==!0&&this.type===us&&x(U,N),U.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(B,R,O)};function x(I,L){const N=e.update(S);p.defines.VSM_SAMPLES!==I.blurSamples&&(p.defines.VSM_SAMPLES=I.blurSamples,m.defines.VSM_SAMPLES=I.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Er(r.x,r.y)),p.uniforms.shadow_pass.value=I.map.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(L,null,N,p,S,null),m.uniforms.shadow_pass.value=I.mapPass.texture,m.uniforms.resolution.value=I.mapSize,m.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(L,null,N,m,S,null)}function A(I,L,N,B){let R=null;const O=N.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(O!==void 0)R=O;else if(R=N.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const Y=R.uuid,$=L.uuid;let te=c[Y];te===void 0&&(te={},c[Y]=te);let oe=te[$];oe===void 0&&(oe=R.clone(),te[$]=oe,L.addEventListener("dispose",P)),R=oe}if(R.visible=L.visible,R.wireframe=L.wireframe,B===us?R.side=L.shadowSide!==null?L.shadowSide:L.side:R.side=L.shadowSide!==null?L.shadowSide:f[L.side],R.alphaMap=L.alphaMap,R.alphaTest=L.alphaTest,R.map=L.map,R.clipShadows=L.clipShadows,R.clippingPlanes=L.clippingPlanes,R.clipIntersection=L.clipIntersection,R.displacementMap=L.displacementMap,R.displacementScale=L.displacementScale,R.displacementBias=L.displacementBias,R.wireframeLinewidth=L.wireframeLinewidth,R.linewidth=L.linewidth,N.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const Y=n.properties.get(R);Y.light=N}return R}function M(I,L,N,B,R){if(I.visible===!1)return;if(I.layers.test(L.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&R===us)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,I.matrixWorld);const $=e.update(I),te=I.material;if(Array.isArray(te)){const oe=$.groups;for(let ee=0,pe=oe.length;ee<pe;ee++){const U=oe[ee],Z=te[U.materialIndex];if(Z&&Z.visible){const K=A(I,Z,B,R);I.onBeforeShadow(n,I,L,N,$,K,U),n.renderBufferDirect(N,null,$,K,I,U),I.onAfterShadow(n,I,L,N,$,K,U)}}}else if(te.visible){const oe=A(I,te,B,R);I.onBeforeShadow(n,I,L,N,$,oe,null),n.renderBufferDirect(N,null,$,oe,I,null),I.onAfterShadow(n,I,L,N,$,oe,null)}}const Y=I.children;for(let $=0,te=Y.length;$<te;$++)M(Y[$],L,N,B,R)}function P(I){I.target.removeEventListener("dispose",P);for(const N in c){const B=c[N],R=I.target.uuid;R in B&&(B[R].dispose(),delete B[R])}}}function EV(n){function e(){let q=!1;const Ze=new ln;let ie=null;const Me=new ln(0,0,0,0);return{setMask:function(ze){ie!==ze&&!q&&(n.colorMask(ze,ze,ze,ze),ie=ze)},setLocked:function(ze){q=ze},setClear:function(ze,vt,zt,dn,Pn){Pn===!0&&(ze*=dn,vt*=dn,zt*=dn),Ze.set(ze,vt,zt,dn),Me.equals(Ze)===!1&&(n.clearColor(ze,vt,zt,dn),Me.copy(Ze))},reset:function(){q=!1,ie=null,Me.set(-1,0,0,0)}}}function t(){let q=!1,Ze=null,ie=null,Me=null;return{setTest:function(ze){ze?xe(n.DEPTH_TEST):Ie(n.DEPTH_TEST)},setMask:function(ze){Ze!==ze&&!q&&(n.depthMask(ze),Ze=ze)},setFunc:function(ze){if(ie!==ze){switch(ze){case CB:n.depthFunc(n.NEVER);break;case TB:n.depthFunc(n.ALWAYS);break;case IB:n.depthFunc(n.LESS);break;case Yd:n.depthFunc(n.LEQUAL);break;case RB:n.depthFunc(n.EQUAL);break;case bB:n.depthFunc(n.GEQUAL);break;case PB:n.depthFunc(n.GREATER);break;case BB:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ie=ze}},setLocked:function(ze){q=ze},setClear:function(ze){Me!==ze&&(n.clearDepth(ze),Me=ze)},reset:function(){q=!1,Ze=null,ie=null,Me=null}}}function i(){let q=!1,Ze=null,ie=null,Me=null,ze=null,vt=null,zt=null,dn=null,Pn=null;return{setTest:function(Yt){q||(Yt?xe(n.STENCIL_TEST):Ie(n.STENCIL_TEST))},setMask:function(Yt){Ze!==Yt&&!q&&(n.stencilMask(Yt),Ze=Yt)},setFunc:function(Yt,Oi,Ui){(ie!==Yt||Me!==Oi||ze!==Ui)&&(n.stencilFunc(Yt,Oi,Ui),ie=Yt,Me=Oi,ze=Ui)},setOp:function(Yt,Oi,Ui){(vt!==Yt||zt!==Oi||dn!==Ui)&&(n.stencilOp(Yt,Oi,Ui),vt=Yt,zt=Oi,dn=Ui)},setLocked:function(Yt){q=Yt},setClear:function(Yt){Pn!==Yt&&(n.clearStencil(Yt),Pn=Yt)},reset:function(){q=!1,Ze=null,ie=null,Me=null,ze=null,vt=null,zt=null,dn=null,Pn=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let c={},d={},f=new WeakMap,p=[],m=null,v=!1,S=null,y=null,g=null,x=null,A=null,M=null,P=null,I=new je(0,0,0),L=0,N=!1,B=null,R=null,O=null,Y=null,$=null;const te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let oe=!1,ee=0;const pe=n.getParameter(n.VERSION);pe.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(pe)[1]),oe=ee>=1):pe.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(pe)[1]),oe=ee>=2);let U=null,Z={};const K=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),ve=new ln().fromArray(K),Oe=new ln().fromArray(ae);function le(q,Ze,ie,Me){const ze=new Uint8Array(4),vt=n.createTexture();n.bindTexture(q,vt),n.texParameteri(q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<ie;zt++)q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?n.texImage3D(Ze,0,n.RGBA,1,1,Me,0,n.RGBA,n.UNSIGNED_BYTE,ze):n.texImage2D(Ze+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ze);return vt}const Ae={};Ae[n.TEXTURE_2D]=le(n.TEXTURE_2D,n.TEXTURE_2D,1),Ae[n.TEXTURE_CUBE_MAP]=le(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ae[n.TEXTURE_2D_ARRAY]=le(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ae[n.TEXTURE_3D]=le(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),xe(n.DEPTH_TEST),s.setFunc(Yd),Be(!1),Ne(Tx),xe(n.CULL_FACE),Se(zs);function xe(q){c[q]!==!0&&(n.enable(q),c[q]=!0)}function Ie(q){c[q]!==!1&&(n.disable(q),c[q]=!1)}function dt(q,Ze){return d[q]!==Ze?(n.bindFramebuffer(q,Ze),d[q]=Ze,q===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Ze),q===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Ze),!0):!1}function xt(q,Ze){let ie=p,Me=!1;if(q){ie=f.get(Ze),ie===void 0&&(ie=[],f.set(Ze,ie));const ze=q.textures;if(ie.length!==ze.length||ie[0]!==n.COLOR_ATTACHMENT0){for(let vt=0,zt=ze.length;vt<zt;vt++)ie[vt]=n.COLOR_ATTACHMENT0+vt;ie.length=ze.length,Me=!0}}else ie[0]!==n.BACK&&(ie[0]=n.BACK,Me=!0);Me&&n.drawBuffers(ie)}function mt(q){return m!==q?(n.useProgram(q),m=q,!0):!1}const Q={[ia]:n.FUNC_ADD,[cB]:n.FUNC_SUBTRACT,[uB]:n.FUNC_REVERSE_SUBTRACT};Q[hB]=n.MIN,Q[dB]=n.MAX;const Ee={[fB]:n.ZERO,[pB]:n.ONE,[mB]:n.SRC_COLOR,[rg]:n.SRC_ALPHA,[SB]:n.SRC_ALPHA_SATURATE,[yB]:n.DST_COLOR,[vB]:n.DST_ALPHA,[gB]:n.ONE_MINUS_SRC_COLOR,[sg]:n.ONE_MINUS_SRC_ALPHA,[xB]:n.ONE_MINUS_DST_COLOR,[_B]:n.ONE_MINUS_DST_ALPHA,[AB]:n.CONSTANT_COLOR,[wB]:n.ONE_MINUS_CONSTANT_COLOR,[MB]:n.CONSTANT_ALPHA,[EB]:n.ONE_MINUS_CONSTANT_ALPHA};function Se(q,Ze,ie,Me,ze,vt,zt,dn,Pn,Yt){if(q===zs){v===!0&&(Ie(n.BLEND),v=!1);return}if(v===!1&&(xe(n.BLEND),v=!0),q!==lB){if(q!==S||Yt!==N){if((y!==ia||A!==ia)&&(n.blendEquation(n.FUNC_ADD),y=ia,A=ia),Yt)switch(q){case Ol:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Ix:n.blendFunc(n.ONE,n.ONE);break;case Rx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Ol:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Ix:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Rx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}g=null,x=null,M=null,P=null,I.set(0,0,0),L=0,S=q,N=Yt}return}ze=ze||Ze,vt=vt||ie,zt=zt||Me,(Ze!==y||ze!==A)&&(n.blendEquationSeparate(Q[Ze],Q[ze]),y=Ze,A=ze),(ie!==g||Me!==x||vt!==M||zt!==P)&&(n.blendFuncSeparate(Ee[ie],Ee[Me],Ee[vt],Ee[zt]),g=ie,x=Me,M=vt,P=zt),(dn.equals(I)===!1||Pn!==L)&&(n.blendColor(dn.r,dn.g,dn.b,Pn),I.copy(dn),L=Pn),S=q,N=!1}function De(q,Ze){q.side===Wr?Ie(n.CULL_FACE):xe(n.CULL_FACE);let ie=q.side===Ji;Ze&&(ie=!ie),Be(ie),q.blending===Ol&&q.transparent===!1?Se(zs):Se(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.blendColor,q.blendAlpha,q.premultipliedAlpha),s.setFunc(q.depthFunc),s.setTest(q.depthTest),s.setMask(q.depthWrite),r.setMask(q.colorWrite);const Me=q.stencilWrite;o.setTest(Me),Me&&(o.setMask(q.stencilWriteMask),o.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),o.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),Je(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):Ie(n.SAMPLE_ALPHA_TO_COVERAGE)}function Be(q){B!==q&&(q?n.frontFace(n.CW):n.frontFace(n.CCW),B=q)}function Ne(q){q!==sB?(xe(n.CULL_FACE),q!==R&&(q===Tx?n.cullFace(n.BACK):q===oB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ie(n.CULL_FACE),R=q}function Ye(q){q!==O&&(oe&&n.lineWidth(q),O=q)}function Je(q,Ze,ie){q?(xe(n.POLYGON_OFFSET_FILL),(Y!==Ze||$!==ie)&&(n.polygonOffset(Ze,ie),Y=Ze,$=ie)):Ie(n.POLYGON_OFFSET_FILL)}function St(q){q?xe(n.SCISSOR_TEST):Ie(n.SCISSOR_TEST)}function W(q){q===void 0&&(q=n.TEXTURE0+te-1),U!==q&&(n.activeTexture(q),U=q)}function F(q,Ze,ie){ie===void 0&&(U===null?ie=n.TEXTURE0+te-1:ie=U);let Me=Z[ie];Me===void 0&&(Me={type:void 0,texture:void 0},Z[ie]=Me),(Me.type!==q||Me.texture!==Ze)&&(U!==ie&&(n.activeTexture(ie),U=ie),n.bindTexture(q,Ze||Ae[q]),Me.type=q,Me.texture=Ze)}function de(){const q=Z[U];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function Re(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ce(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function be(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ot(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function He(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function _t(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function rt(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Nt(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ft(q){ve.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),ve.copy(q))}function Ge(q){Oe.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),Oe.copy(q))}function Mt(q,Ze){let ie=l.get(Ze);ie===void 0&&(ie=new WeakMap,l.set(Ze,ie));let Me=ie.get(q);Me===void 0&&(Me=n.getUniformBlockIndex(Ze,q.name),ie.set(q,Me))}function Et(q,Ze){const Me=l.get(Ze).get(q);a.get(Ze)!==Me&&(n.uniformBlockBinding(Ze,Me,q.__bindingPointIndex),a.set(Ze,Me))}function Ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},U=null,Z={},d={},f=new WeakMap,p=[],m=null,v=!1,S=null,y=null,g=null,x=null,A=null,M=null,P=null,I=new je(0,0,0),L=0,N=!1,B=null,R=null,O=null,Y=null,$=null,ve.set(0,0,n.canvas.width,n.canvas.height),Oe.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:xe,disable:Ie,bindFramebuffer:dt,drawBuffers:xt,useProgram:mt,setBlending:Se,setMaterial:De,setFlipSided:Be,setCullFace:Ne,setLineWidth:Ye,setPolygonOffset:Je,setScissorTest:St,activeTexture:W,bindTexture:F,unbindTexture:de,compressedTexImage2D:Re,compressedTexImage3D:Ce,texImage2D:rt,texImage3D:Nt,updateUBOMapping:Mt,uniformBlockBinding:Et,texStorage2D:_t,texStorage3D:Fe,texSubImage2D:be,texSubImage3D:ot,compressedTexSubImage2D:He,compressedTexSubImage3D:Ve,scissor:ft,viewport:Ge,reset:Ut}}function CV(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new we,d=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(W,F){return m?new OffscreenCanvas(W,F):sf("canvas")}function S(W,F,de){let Re=1;const Ce=St(W);if((Ce.width>de||Ce.height>de)&&(Re=de/Math.max(Ce.width,Ce.height)),Re<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const be=Math.floor(Re*Ce.width),ot=Math.floor(Re*Ce.height);f===void 0&&(f=v(be,ot));const He=F?v(be,ot):f;return He.width=be,He.height=ot,He.getContext("2d").drawImage(W,0,0,be,ot),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ce.width+"x"+Ce.height+") to ("+be+"x"+ot+")."),He}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ce.width+"x"+Ce.height+")."),W;return W}function y(W){return W.generateMipmaps&&W.minFilter!==ei&&W.minFilter!==rn}function g(W){n.generateMipmap(W)}function x(W,F,de,Re,Ce=!1){if(W!==null){if(n[W]!==void 0)return n[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let be=F;if(F===n.RED&&(de===n.FLOAT&&(be=n.R32F),de===n.HALF_FLOAT&&(be=n.R16F),de===n.UNSIGNED_BYTE&&(be=n.R8)),F===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(be=n.R8UI),de===n.UNSIGNED_SHORT&&(be=n.R16UI),de===n.UNSIGNED_INT&&(be=n.R32UI),de===n.BYTE&&(be=n.R8I),de===n.SHORT&&(be=n.R16I),de===n.INT&&(be=n.R32I)),F===n.RG&&(de===n.FLOAT&&(be=n.RG32F),de===n.HALF_FLOAT&&(be=n.RG16F),de===n.UNSIGNED_BYTE&&(be=n.RG8)),F===n.RG_INTEGER&&(de===n.UNSIGNED_BYTE&&(be=n.RG8UI),de===n.UNSIGNED_SHORT&&(be=n.RG16UI),de===n.UNSIGNED_INT&&(be=n.RG32UI),de===n.BYTE&&(be=n.RG8I),de===n.SHORT&&(be=n.RG16I),de===n.INT&&(be=n.RG32I)),F===n.RGB&&de===n.UNSIGNED_INT_5_9_9_9_REV&&(be=n.RGB9_E5),F===n.RGBA){const ot=Ce?$d:on.getTransfer(Re);de===n.FLOAT&&(be=n.RGBA32F),de===n.HALF_FLOAT&&(be=n.RGBA16F),de===n.UNSIGNED_BYTE&&(be=ot===mn?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(be=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(be=n.RGB5_A1)}return(be===n.R16F||be===n.R32F||be===n.RG16F||be===n.RG32F||be===n.RGBA16F||be===n.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function A(W,F){let de;return W?F===null||F===Ia||F===Jl?de=n.DEPTH24_STENCIL8:F===Fn?de=n.DEPTH32F_STENCIL8:F===Qd&&(de=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===Ia||F===Jl?de=n.DEPTH_COMPONENT24:F===Fn?de=n.DEPTH_COMPONENT32F:F===Qd&&(de=n.DEPTH_COMPONENT16),de}function M(W,F){return y(W)===!0||W.isFramebufferTexture&&W.minFilter!==ei&&W.minFilter!==rn?Math.log2(Math.max(F.width,F.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?F.mipmaps.length:1}function P(W){const F=W.target;F.removeEventListener("dispose",P),L(F),F.isVideoTexture&&d.delete(F)}function I(W){const F=W.target;F.removeEventListener("dispose",I),B(F)}function L(W){const F=i.get(W);if(F.__webglInit===void 0)return;const de=W.source,Re=p.get(de);if(Re){const Ce=Re[F.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&N(W),Object.keys(Re).length===0&&p.delete(de)}i.remove(W)}function N(W){const F=i.get(W);n.deleteTexture(F.__webglTexture);const de=W.source,Re=p.get(de);delete Re[F.__cacheKey],o.memory.textures--}function B(W){const F=i.get(W);if(W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++){if(Array.isArray(F.__webglFramebuffer[Re]))for(let Ce=0;Ce<F.__webglFramebuffer[Re].length;Ce++)n.deleteFramebuffer(F.__webglFramebuffer[Re][Ce]);else n.deleteFramebuffer(F.__webglFramebuffer[Re]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[Re])}else{if(Array.isArray(F.__webglFramebuffer))for(let Re=0;Re<F.__webglFramebuffer.length;Re++)n.deleteFramebuffer(F.__webglFramebuffer[Re]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let Re=0;Re<F.__webglColorRenderbuffer.length;Re++)F.__webglColorRenderbuffer[Re]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[Re]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const de=W.textures;for(let Re=0,Ce=de.length;Re<Ce;Re++){const be=i.get(de[Re]);be.__webglTexture&&(n.deleteTexture(be.__webglTexture),o.memory.textures--),i.remove(de[Re])}i.remove(W)}let R=0;function O(){R=0}function Y(){const W=R;return W>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+r.maxTextures),R+=1,W}function $(W){const F=[];return F.push(W.wrapS),F.push(W.wrapT),F.push(W.wrapR||0),F.push(W.magFilter),F.push(W.minFilter),F.push(W.anisotropy),F.push(W.internalFormat),F.push(W.format),F.push(W.type),F.push(W.generateMipmaps),F.push(W.premultiplyAlpha),F.push(W.flipY),F.push(W.unpackAlignment),F.push(W.colorSpace),F.join()}function te(W,F){const de=i.get(W);if(W.isVideoTexture&&Ye(W),W.isRenderTargetTexture===!1&&W.version>0&&de.__version!==W.version){const Re=W.image;if(Re===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(de,W,F);return}}t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+F)}function oe(W,F){const de=i.get(W);if(W.version>0&&de.__version!==W.version){Oe(de,W,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+F)}function ee(W,F){const de=i.get(W);if(W.version>0&&de.__version!==W.version){Oe(de,W,F);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+F)}function pe(W,F){const de=i.get(W);if(W.version>0&&de.__version!==W.version){le(de,W,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+F)}const U={[Ta]:n.REPEAT,[Hn]:n.CLAMP_TO_EDGE,[Ou]:n.MIRRORED_REPEAT},Z={[ei]:n.NEAREST,[Ug]:n.NEAREST_MIPMAP_NEAREST,[Cl]:n.NEAREST_MIPMAP_LINEAR,[rn]:n.LINEAR,[Mu]:n.LINEAR_MIPMAP_NEAREST,[Kr]:n.LINEAR_MIPMAP_LINEAR},K={[nN]:n.NEVER,[lN]:n.ALWAYS,[iN]:n.LESS,[rw]:n.LEQUAL,[rN]:n.EQUAL,[aN]:n.GEQUAL,[sN]:n.GREATER,[oN]:n.NOTEQUAL};function ae(W,F){if(F.type===Fn&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===rn||F.magFilter===Mu||F.magFilter===Cl||F.magFilter===Kr||F.minFilter===rn||F.minFilter===Mu||F.minFilter===Cl||F.minFilter===Kr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(W,n.TEXTURE_WRAP_S,U[F.wrapS]),n.texParameteri(W,n.TEXTURE_WRAP_T,U[F.wrapT]),(W===n.TEXTURE_3D||W===n.TEXTURE_2D_ARRAY)&&n.texParameteri(W,n.TEXTURE_WRAP_R,U[F.wrapR]),n.texParameteri(W,n.TEXTURE_MAG_FILTER,Z[F.magFilter]),n.texParameteri(W,n.TEXTURE_MIN_FILTER,Z[F.minFilter]),F.compareFunction&&(n.texParameteri(W,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(W,n.TEXTURE_COMPARE_FUNC,K[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===ei||F.minFilter!==Cl&&F.minFilter!==Kr||F.type===Fn&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||i.get(F).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");n.texParameterf(W,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy}}}function ve(W,F){let de=!1;W.__webglInit===void 0&&(W.__webglInit=!0,F.addEventListener("dispose",P));const Re=F.source;let Ce=p.get(Re);Ce===void 0&&(Ce={},p.set(Re,Ce));const be=$(F);if(be!==W.__cacheKey){Ce[be]===void 0&&(Ce[be]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,de=!0),Ce[be].usedTimes++;const ot=Ce[W.__cacheKey];ot!==void 0&&(Ce[W.__cacheKey].usedTimes--,ot.usedTimes===0&&N(F)),W.__cacheKey=be,W.__webglTexture=Ce[be].texture}return de}function Oe(W,F,de){let Re=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Re=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(Re=n.TEXTURE_3D);const Ce=ve(W,F),be=F.source;t.bindTexture(Re,W.__webglTexture,n.TEXTURE0+de);const ot=i.get(be);if(be.version!==ot.__version||Ce===!0){t.activeTexture(n.TEXTURE0+de);const He=on.getPrimaries(on.workingColorSpace),Ve=F.colorSpace===co?null:on.getPrimaries(F.colorSpace),_t=F.colorSpace===co||He===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_t);let Fe=S(F.image,!1,r.maxTextureSize);Fe=Je(F,Fe);const rt=s.convert(F.format,F.colorSpace),Nt=s.convert(F.type);let ft=x(F.internalFormat,rt,Nt,F.colorSpace,F.isVideoTexture);ae(Re,F);let Ge;const Mt=F.mipmaps,Et=F.isVideoTexture!==!0,Ut=ot.__version===void 0||Ce===!0,q=be.dataReady,Ze=M(F,Fe);if(F.isDepthTexture)ft=A(F.format===Kl,F.type),Ut&&(Et?t.texStorage2D(n.TEXTURE_2D,1,ft,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,ft,Fe.width,Fe.height,0,rt,Nt,null));else if(F.isDataTexture)if(Mt.length>0){Et&&Ut&&t.texStorage2D(n.TEXTURE_2D,Ze,ft,Mt[0].width,Mt[0].height);for(let ie=0,Me=Mt.length;ie<Me;ie++)Ge=Mt[ie],Et?q&&t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ge.width,Ge.height,rt,Nt,Ge.data):t.texImage2D(n.TEXTURE_2D,ie,ft,Ge.width,Ge.height,0,rt,Nt,Ge.data);F.generateMipmaps=!1}else Et?(Ut&&t.texStorage2D(n.TEXTURE_2D,Ze,ft,Fe.width,Fe.height),q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,rt,Nt,Fe.data)):t.texImage2D(n.TEXTURE_2D,0,ft,Fe.width,Fe.height,0,rt,Nt,Fe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){Et&&Ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,ft,Mt[0].width,Mt[0].height,Fe.depth);for(let ie=0,Me=Mt.length;ie<Me;ie++)if(Ge=Mt[ie],F.format!==Kn)if(rt!==null)if(Et){if(q)if(F.layerUpdates.size>0){for(const ze of F.layerUpdates){const vt=Ge.width*Ge.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,ze,Ge.width,Ge.height,1,rt,Ge.data.slice(vt*ze,vt*(ze+1)),0,0)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,Ge.width,Ge.height,Fe.depth,rt,Ge.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ie,ft,Ge.width,Ge.height,Fe.depth,0,Ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Et?q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,Ge.width,Ge.height,Fe.depth,rt,Nt,Ge.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ie,ft,Ge.width,Ge.height,Fe.depth,0,rt,Nt,Ge.data)}else{Et&&Ut&&t.texStorage2D(n.TEXTURE_2D,Ze,ft,Mt[0].width,Mt[0].height);for(let ie=0,Me=Mt.length;ie<Me;ie++)Ge=Mt[ie],F.format!==Kn?rt!==null?Et?q&&t.compressedTexSubImage2D(n.TEXTURE_2D,ie,0,0,Ge.width,Ge.height,rt,Ge.data):t.compressedTexImage2D(n.TEXTURE_2D,ie,ft,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Et?q&&t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ge.width,Ge.height,rt,Nt,Ge.data):t.texImage2D(n.TEXTURE_2D,ie,ft,Ge.width,Ge.height,0,rt,Nt,Ge.data)}else if(F.isDataArrayTexture)if(Et){if(Ut&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,ft,Fe.width,Fe.height,Fe.depth),q)if(F.layerUpdates.size>0){let ie;switch(Nt){case n.UNSIGNED_BYTE:switch(rt){case n.ALPHA:ie=1;break;case n.LUMINANCE:ie=1;break;case n.LUMINANCE_ALPHA:ie=2;break;case n.RGB:ie=3;break;case n.RGBA:ie=4;break;default:throw new Error(`Unknown texel size for format ${rt}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:ie=1;break;default:throw new Error(`Unknown texel size for type ${Nt}.`)}const Me=Fe.width*Fe.height*ie;for(const ze of F.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ze,Fe.width,Fe.height,1,rt,Nt,Fe.data.slice(Me*ze,Me*(ze+1)));F.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,rt,Nt,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ft,Fe.width,Fe.height,Fe.depth,0,rt,Nt,Fe.data);else if(F.isData3DTexture)Et?(Ut&&t.texStorage3D(n.TEXTURE_3D,Ze,ft,Fe.width,Fe.height,Fe.depth),q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,rt,Nt,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,ft,Fe.width,Fe.height,Fe.depth,0,rt,Nt,Fe.data);else if(F.isFramebufferTexture){if(Ut)if(Et)t.texStorage2D(n.TEXTURE_2D,Ze,ft,Fe.width,Fe.height);else{let ie=Fe.width,Me=Fe.height;for(let ze=0;ze<Ze;ze++)t.texImage2D(n.TEXTURE_2D,ze,ft,ie,Me,0,rt,Nt,null),ie>>=1,Me>>=1}}else if(Mt.length>0){if(Et&&Ut){const ie=St(Mt[0]);t.texStorage2D(n.TEXTURE_2D,Ze,ft,ie.width,ie.height)}for(let ie=0,Me=Mt.length;ie<Me;ie++)Ge=Mt[ie],Et?q&&t.texSubImage2D(n.TEXTURE_2D,ie,0,0,rt,Nt,Ge):t.texImage2D(n.TEXTURE_2D,ie,ft,rt,Nt,Ge);F.generateMipmaps=!1}else if(Et){if(Ut){const ie=St(Fe);t.texStorage2D(n.TEXTURE_2D,Ze,ft,ie.width,ie.height)}q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,rt,Nt,Fe)}else t.texImage2D(n.TEXTURE_2D,0,ft,rt,Nt,Fe);y(F)&&g(Re),ot.__version=be.version,F.onUpdate&&F.onUpdate(F)}W.__version=F.version}function le(W,F,de){if(F.image.length!==6)return;const Re=ve(W,F),Ce=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+de);const be=i.get(Ce);if(Ce.version!==be.__version||Re===!0){t.activeTexture(n.TEXTURE0+de);const ot=on.getPrimaries(on.workingColorSpace),He=F.colorSpace===co?null:on.getPrimaries(F.colorSpace),Ve=F.colorSpace===co||ot===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ve);const _t=F.isCompressedTexture||F.image[0].isCompressedTexture,Fe=F.image[0]&&F.image[0].isDataTexture,rt=[];for(let Me=0;Me<6;Me++)!_t&&!Fe?rt[Me]=S(F.image[Me],!0,r.maxCubemapSize):rt[Me]=Fe?F.image[Me].image:F.image[Me],rt[Me]=Je(F,rt[Me]);const Nt=rt[0],ft=s.convert(F.format,F.colorSpace),Ge=s.convert(F.type),Mt=x(F.internalFormat,ft,Ge,F.colorSpace),Et=F.isVideoTexture!==!0,Ut=be.__version===void 0||Re===!0,q=Ce.dataReady;let Ze=M(F,Nt);ae(n.TEXTURE_CUBE_MAP,F);let ie;if(_t){Et&&Ut&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,Mt,Nt.width,Nt.height);for(let Me=0;Me<6;Me++){ie=rt[Me].mipmaps;for(let ze=0;ze<ie.length;ze++){const vt=ie[ze];F.format!==Kn?ft!==null?Et?q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze,0,0,vt.width,vt.height,ft,vt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze,Mt,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Et?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze,0,0,vt.width,vt.height,ft,Ge,vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze,Mt,vt.width,vt.height,0,ft,Ge,vt.data)}}}else{if(ie=F.mipmaps,Et&&Ut){ie.length>0&&Ze++;const Me=St(rt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,Mt,Me.width,Me.height)}for(let Me=0;Me<6;Me++)if(Fe){Et?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,rt[Me].width,rt[Me].height,ft,Ge,rt[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,Mt,rt[Me].width,rt[Me].height,0,ft,Ge,rt[Me].data);for(let ze=0;ze<ie.length;ze++){const zt=ie[ze].image[Me].image;Et?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze+1,0,0,zt.width,zt.height,ft,Ge,zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze+1,Mt,zt.width,zt.height,0,ft,Ge,zt.data)}}else{Et?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,ft,Ge,rt[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,Mt,ft,Ge,rt[Me]);for(let ze=0;ze<ie.length;ze++){const vt=ie[ze];Et?q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze+1,0,0,ft,Ge,vt.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ze+1,Mt,ft,Ge,vt.image[Me])}}}y(F)&&g(n.TEXTURE_CUBE_MAP),be.__version=Ce.version,F.onUpdate&&F.onUpdate(F)}W.__version=F.version}function Ae(W,F,de,Re,Ce,be){const ot=s.convert(de.format,de.colorSpace),He=s.convert(de.type),Ve=x(de.internalFormat,ot,He,de.colorSpace);if(!i.get(F).__hasExternalTextures){const Fe=Math.max(1,F.width>>be),rt=Math.max(1,F.height>>be);Ce===n.TEXTURE_3D||Ce===n.TEXTURE_2D_ARRAY?t.texImage3D(Ce,be,Ve,Fe,rt,F.depth,0,ot,He,null):t.texImage2D(Ce,be,Ve,Fe,rt,0,ot,He,null)}t.bindFramebuffer(n.FRAMEBUFFER,W),Ne(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Re,Ce,i.get(de).__webglTexture,0,Be(F)):(Ce===n.TEXTURE_2D||Ce>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ce<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Re,Ce,i.get(de).__webglTexture,be),t.bindFramebuffer(n.FRAMEBUFFER,null)}function xe(W,F,de){if(n.bindRenderbuffer(n.RENDERBUFFER,W),F.depthBuffer){const Re=F.depthTexture,Ce=Re&&Re.isDepthTexture?Re.type:null,be=A(F.stencilBuffer,Ce),ot=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=Be(F);Ne(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,He,be,F.width,F.height):de?n.renderbufferStorageMultisample(n.RENDERBUFFER,He,be,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,be,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ot,n.RENDERBUFFER,W)}else{const Re=F.textures;for(let Ce=0;Ce<Re.length;Ce++){const be=Re[Ce],ot=s.convert(be.format,be.colorSpace),He=s.convert(be.type),Ve=x(be.internalFormat,ot,He,be.colorSpace),_t=Be(F);de&&Ne(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,Ve,F.width,F.height):Ne(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_t,Ve,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,Ve,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ie(W,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,W),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),te(F.depthTexture,0);const Re=i.get(F.depthTexture).__webglTexture,Ce=Be(F);if(F.depthTexture.format===Ul)Ne(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(F.depthTexture.format===Kl)Ne(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function dt(W){const F=i.get(W),de=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!F.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");Ie(F.__webglFramebuffer,W)}else if(de){F.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[Re]),F.__webglDepthbuffer[Re]=n.createRenderbuffer(),xe(F.__webglDepthbuffer[Re],W,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),xe(F.__webglDepthbuffer,W,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function xt(W,F,de){const Re=i.get(W);F!==void 0&&Ae(Re.__webglFramebuffer,W,W.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&dt(W)}function mt(W){const F=W.texture,de=i.get(W),Re=i.get(F);W.addEventListener("dispose",I);const Ce=W.textures,be=W.isWebGLCubeRenderTarget===!0,ot=Ce.length>1;if(ot||(Re.__webglTexture===void 0&&(Re.__webglTexture=n.createTexture()),Re.__version=F.version,o.memory.textures++),be){de.__webglFramebuffer=[];for(let He=0;He<6;He++)if(F.mipmaps&&F.mipmaps.length>0){de.__webglFramebuffer[He]=[];for(let Ve=0;Ve<F.mipmaps.length;Ve++)de.__webglFramebuffer[He][Ve]=n.createFramebuffer()}else de.__webglFramebuffer[He]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){de.__webglFramebuffer=[];for(let He=0;He<F.mipmaps.length;He++)de.__webglFramebuffer[He]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(ot)for(let He=0,Ve=Ce.length;He<Ve;He++){const _t=i.get(Ce[He]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),o.memory.textures++)}if(W.samples>0&&Ne(W)===!1){de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let He=0;He<Ce.length;He++){const Ve=Ce[He];de.__webglColorRenderbuffer[He]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[He]);const _t=s.convert(Ve.format,Ve.colorSpace),Fe=s.convert(Ve.type),rt=x(Ve.internalFormat,_t,Fe,Ve.colorSpace,W.isXRRenderTarget===!0),Nt=Be(W);n.renderbufferStorageMultisample(n.RENDERBUFFER,Nt,rt,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,de.__webglColorRenderbuffer[He])}n.bindRenderbuffer(n.RENDERBUFFER,null),W.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),xe(de.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(be){t.bindTexture(n.TEXTURE_CUBE_MAP,Re.__webglTexture),ae(n.TEXTURE_CUBE_MAP,F);for(let He=0;He<6;He++)if(F.mipmaps&&F.mipmaps.length>0)for(let Ve=0;Ve<F.mipmaps.length;Ve++)Ae(de.__webglFramebuffer[He][Ve],W,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,Ve);else Ae(de.__webglFramebuffer[He],W,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);y(F)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ot){for(let He=0,Ve=Ce.length;He<Ve;He++){const _t=Ce[He],Fe=i.get(_t);t.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),ae(n.TEXTURE_2D,_t),Ae(de.__webglFramebuffer,W,_t,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,0),y(_t)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let He=n.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(He=W.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(He,Re.__webglTexture),ae(He,F),F.mipmaps&&F.mipmaps.length>0)for(let Ve=0;Ve<F.mipmaps.length;Ve++)Ae(de.__webglFramebuffer[Ve],W,F,n.COLOR_ATTACHMENT0,He,Ve);else Ae(de.__webglFramebuffer,W,F,n.COLOR_ATTACHMENT0,He,0);y(F)&&g(He),t.unbindTexture()}W.depthBuffer&&dt(W)}function Q(W){const F=W.textures;for(let de=0,Re=F.length;de<Re;de++){const Ce=F[de];if(y(Ce)){const be=W.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ot=i.get(Ce).__webglTexture;t.bindTexture(be,ot),g(be),t.unbindTexture()}}}const Ee=[],Se=[];function De(W){if(W.samples>0){if(Ne(W)===!1){const F=W.textures,de=W.width,Re=W.height;let Ce=n.COLOR_BUFFER_BIT;const be=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=i.get(W),He=F.length>1;if(He)for(let Ve=0;Ve<F.length;Ve++)t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ot.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer);for(let Ve=0;Ve<F.length;Ve++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Ce|=n.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Ce|=n.STENCIL_BUFFER_BIT)),He){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ot.__webglColorRenderbuffer[Ve]);const _t=i.get(F[Ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_t,0)}n.blitFramebuffer(0,0,de,Re,0,0,de,Re,Ce,n.NEAREST),l===!0&&(Ee.length=0,Se.length=0,Ee.push(n.COLOR_ATTACHMENT0+Ve),W.depthBuffer&&W.resolveDepthBuffer===!1&&(Ee.push(be),Se.push(be),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Se)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ee))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),He)for(let Ve=0;Ve<F.length;Ve++){t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,ot.__webglColorRenderbuffer[Ve]);const _t=i.get(F[Ve]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,_t,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&l){const F=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])}}}function Be(W){return Math.min(r.maxSamples,W.samples)}function Ne(W){const F=i.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Ye(W){const F=o.render.frame;d.get(W)!==F&&(d.set(W,F),W.update())}function Je(W,F){const de=W.colorSpace,Re=W.format,Ce=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||de!==qr&&de!==co&&(on.getTransfer(de)===mn?(Re!==Kn||Ce!==Mr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),F}function St(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(c.width=W.naturalWidth||W.width,c.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(c.width=W.displayWidth,c.height=W.displayHeight):(c.width=W.width,c.height=W.height),c}this.allocateTextureUnit=Y,this.resetTextureUnits=O,this.setTexture2D=te,this.setTexture2DArray=oe,this.setTexture3D=ee,this.setTextureCube=pe,this.rebindTextures=xt,this.setupRenderTarget=mt,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=De,this.setupDepthRenderbuffer=dt,this.setupFrameBufferTexture=Ae,this.useMultisampledRTT=Ne}function wN(n,e){function t(i,r=co){let s;const o=on.getTransfer(r);if(i===Mr)return n.UNSIGNED_BYTE;if(i===QA)return n.UNSIGNED_SHORT_4_4_4_4;if(i===qA)return n.UNSIGNED_SHORT_5_5_5_1;if(i===HB)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===YA)return n.BYTE;if(i===ZA)return n.SHORT;if(i===Qd)return n.UNSIGNED_SHORT;if(i===kg)return n.INT;if(i===Ia)return n.UNSIGNED_INT;if(i===Fn)return n.FLOAT;if(i===pi)return n.HALF_FLOAT;if(i===VB)return n.ALPHA;if(i===jB)return n.RGB;if(i===Kn)return n.RGBA;if(i===WB)return n.LUMINANCE;if(i===XB)return n.LUMINANCE_ALPHA;if(i===Ul)return n.DEPTH_COMPONENT;if(i===Kl)return n.DEPTH_STENCIL;if(i===Gg)return n.RED;if(i===$A)return n.RED_INTEGER;if(i===JB)return n.RG;if(i===ew)return n.RG_INTEGER;if(i===tw)return n.RGBA_INTEGER;if(i===m0||i===g0||i===v0||i===_0)if(o===mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===m0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===g0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===v0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===_0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===m0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===g0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===v0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===_0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Nx||i===Lx||i===Dx||i===Fx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Nx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Lx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Dx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Fx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Ox||i===Ux||i===kx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Ox||i===Ux)return o===mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===kx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Gx||i===zx||i===Hx||i===Vx||i===jx||i===Wx||i===Xx||i===Jx||i===Kx||i===Yx||i===Zx||i===Qx||i===qx||i===$x)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Gx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===zx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Hx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Vx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===jx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Wx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Xx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Jx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Kx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Yx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Zx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Qx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===qx)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===$x)return o===mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===y0||i===eS||i===tS)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===y0)return o===mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===eS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===tS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===KB||i===nS||i===iS||i===rS)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===y0)return s.COMPRESSED_RED_RGTC1_EXT;if(i===nS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===iS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===rS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Jl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class MN extends qn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class mo extends Ht{constructor(){super(),this.isGroup=!0,this.type="Group"}}const TV={type:"move"};class Ty{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const S of e.hand.values()){const y=t.getJointPose(S,i),g=this._getHandJoint(c,S);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const d=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=d.position.distanceTo(f.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(TV)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new mo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const IV=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,RV=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bV{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new sn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new lr({vertexShader:IV,fragmentShader:RV,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new wn(new Ua(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class PV extends Io{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,v=null;const S=new bV,y=t.getContextAttributes();let g=null,x=null;const A=[],M=[],P=new we;let I=null;const L=new qn;L.layers.enable(1),L.viewport=new ln;const N=new qn;N.layers.enable(2),N.viewport=new ln;const B=[L,N],R=new MN;R.layers.enable(1),R.layers.enable(2);let O=null,Y=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let Ae=A[le];return Ae===void 0&&(Ae=new Ty,A[le]=Ae),Ae.getTargetRaySpace()},this.getControllerGrip=function(le){let Ae=A[le];return Ae===void 0&&(Ae=new Ty,A[le]=Ae),Ae.getGripSpace()},this.getHand=function(le){let Ae=A[le];return Ae===void 0&&(Ae=new Ty,A[le]=Ae),Ae.getHandSpace()};function $(le){const Ae=M.indexOf(le.inputSource);if(Ae===-1)return;const xe=A[Ae];xe!==void 0&&(xe.update(le.inputSource,le.frame,c||o),xe.dispatchEvent({type:le.type,data:le.inputSource}))}function te(){r.removeEventListener("select",$),r.removeEventListener("selectstart",$),r.removeEventListener("selectend",$),r.removeEventListener("squeeze",$),r.removeEventListener("squeezestart",$),r.removeEventListener("squeezeend",$),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",oe);for(let le=0;le<A.length;le++){const Ae=M[le];Ae!==null&&(M[le]=null,A[le].disconnect(Ae))}O=null,Y=null,S.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,x=null,Oe.stop(),i.isPresenting=!1,e.setPixelRatio(I),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){s=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(le){c=le},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(le){if(r=le,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",$),r.addEventListener("selectstart",$),r.addEventListener("selectend",$),r.addEventListener("squeeze",$),r.addEventListener("squeezestart",$),r.addEventListener("squeezeend",$),r.addEventListener("end",te),r.addEventListener("inputsourceschange",oe),y.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0){const Ae={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,Ae),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),x=new Er(m.framebufferWidth,m.framebufferHeight,{format:Kn,type:Mr,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let Ae=null,xe=null,Ie=null;y.depth&&(Ie=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ae=y.stencil?Kl:Ul,xe=y.stencil?Jl:Ia);const dt={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(dt),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),x=new Er(p.textureWidth,p.textureHeight,{format:Kn,type:Mr,depthTexture:new fw(p.textureWidth,p.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,Ae),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Oe.setContext(r),Oe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function oe(le){for(let Ae=0;Ae<le.removed.length;Ae++){const xe=le.removed[Ae],Ie=M.indexOf(xe);Ie>=0&&(M[Ie]=null,A[Ie].disconnect(xe))}for(let Ae=0;Ae<le.added.length;Ae++){const xe=le.added[Ae];let Ie=M.indexOf(xe);if(Ie===-1){for(let xt=0;xt<A.length;xt++)if(xt>=M.length){M.push(xe),Ie=xt;break}else if(M[xt]===null){M[xt]=xe,Ie=xt;break}if(Ie===-1)break}const dt=A[Ie];dt&&dt.connect(xe)}}const ee=new z,pe=new z;function U(le,Ae,xe){ee.setFromMatrixPosition(Ae.matrixWorld),pe.setFromMatrixPosition(xe.matrixWorld);const Ie=ee.distanceTo(pe),dt=Ae.projectionMatrix.elements,xt=xe.projectionMatrix.elements,mt=dt[14]/(dt[10]-1),Q=dt[14]/(dt[10]+1),Ee=(dt[9]+1)/dt[5],Se=(dt[9]-1)/dt[5],De=(dt[8]-1)/dt[0],Be=(xt[8]+1)/xt[0],Ne=mt*De,Ye=mt*Be,Je=Ie/(-De+Be),St=Je*-De;Ae.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(St),le.translateZ(Je),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert();const W=mt+Je,F=Q+Je,de=Ne-St,Re=Ye+(Ie-St),Ce=Ee*Q/F*W,be=Se*Q/F*W;le.projectionMatrix.makePerspective(de,Re,Ce,be,W,F),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}function Z(le,Ae){Ae===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(Ae.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(r===null)return;S.texture!==null&&(le.near=S.depthNear,le.far=S.depthFar),R.near=N.near=L.near=le.near,R.far=N.far=L.far=le.far,(O!==R.near||Y!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),O=R.near,Y=R.far,L.near=O,L.far=Y,N.near=O,N.far=Y,L.updateProjectionMatrix(),N.updateProjectionMatrix(),le.updateProjectionMatrix());const Ae=le.parent,xe=R.cameras;Z(R,Ae);for(let Ie=0;Ie<xe.length;Ie++)Z(xe[Ie],Ae);xe.length===2?U(R,L,N):R.projectionMatrix.copy(L.projectionMatrix),K(le,R,Ae)};function K(le,Ae,xe){xe===null?le.matrix.copy(Ae.matrixWorld):(le.matrix.copy(xe.matrixWorld),le.matrix.invert(),le.matrix.multiply(Ae.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(Ae.projectionMatrix),le.projectionMatrixInverse.copy(Ae.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=Gu*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(le){l=le,p!==null&&(p.fixedFoveation=le),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=le)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(R)};let ae=null;function ve(le,Ae){if(d=Ae.getViewerPose(c||o),v=Ae,d!==null){const xe=d.views;m!==null&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));let Ie=!1;xe.length!==R.cameras.length&&(R.cameras.length=0,Ie=!0);for(let xt=0;xt<xe.length;xt++){const mt=xe[xt];let Q=null;if(m!==null)Q=m.getViewport(mt);else{const Se=f.getViewSubImage(p,mt);Q=Se.viewport,xt===0&&(e.setRenderTargetTextures(x,Se.colorTexture,p.ignoreDepthValues?void 0:Se.depthStencilTexture),e.setRenderTarget(x))}let Ee=B[xt];Ee===void 0&&(Ee=new qn,Ee.layers.enable(xt),Ee.viewport=new ln,B[xt]=Ee),Ee.matrix.fromArray(mt.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(mt.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Q.x,Q.y,Q.width,Q.height),xt===0&&(R.matrix.copy(Ee.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Ie===!0&&R.cameras.push(Ee)}const dt=r.enabledFeatures;if(dt&&dt.includes("depth-sensing")){const xt=f.getDepthInformation(xe[0]);xt&&xt.isValid&&xt.texture&&S.init(e,xt,r.renderState)}}for(let xe=0;xe<A.length;xe++){const Ie=M[xe],dt=A[xe];Ie!==null&&dt!==void 0&&dt.update(Ie,Ae,c||o)}ae&&ae(le,Ae),Ae.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ae}),v=null}const Oe=new vN;Oe.setAnimationLoop(ve),this.setAnimationLoop=function(le){ae=le},this.dispose=function(){}}}const rl=new Cr,BV=new ht;function NV(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function i(y,g){g.color.getRGB(y.fogColor.value,pN(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function r(y,g,x,A,M){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),f(y,g)):g.isMeshPhongMaterial?(s(y,g),d(y,g)):g.isMeshStandardMaterial?(s(y,g),p(y,g),g.isMeshPhysicalMaterial&&m(y,g,M)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),S(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,x,A):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===Ji&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===Ji&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const x=e.get(g),A=x.envMap,M=x.envMapRotation;A&&(y.envMap.value=A,rl.copy(M),rl.x*=-1,rl.y*=-1,rl.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(rl.y*=-1,rl.z*=-1),y.envMapRotation.value.setFromMatrix4(BV.makeRotationFromEuler(rl)),y.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap&&(y.lightMap.value=g.lightMap,y.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,y.lightMapTransform)),g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,x,A){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*x,y.scale.value=A*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function d(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function f(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function p(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),g.envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,x){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ji&&y.clearcoatNormalScale.value.negate())),g.dispersion>0&&(y.dispersion.value=g.dispersion),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function S(y,g){const x=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(x.matrixWorld),y.nearDistance.value=x.shadow.camera.near,y.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function LV(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,A){const M=A.program;i.uniformBlockBinding(x,M)}function c(x,A){let M=r[x.id];M===void 0&&(v(x),M=d(x),r[x.id]=M,x.addEventListener("dispose",y));const P=A.program;i.updateUBOMapping(x,P);const I=e.render.frame;s[x.id]!==I&&(p(x),s[x.id]=I)}function d(x){const A=f();x.__bindingPointIndex=A;const M=n.createBuffer(),P=x.__size,I=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,M),n.bufferData(n.UNIFORM_BUFFER,P,I),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,M),M}function f(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const A=r[x.id],M=x.uniforms,P=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let I=0,L=M.length;I<L;I++){const N=Array.isArray(M[I])?M[I]:[M[I]];for(let B=0,R=N.length;B<R;B++){const O=N[B];if(m(O,I,B,P)===!0){const Y=O.__offset,$=Array.isArray(O.value)?O.value:[O.value];let te=0;for(let oe=0;oe<$.length;oe++){const ee=$[oe],pe=S(ee);typeof ee=="number"||typeof ee=="boolean"?(O.__data[0]=ee,n.bufferSubData(n.UNIFORM_BUFFER,Y+te,O.__data)):ee.isMatrix3?(O.__data[0]=ee.elements[0],O.__data[1]=ee.elements[1],O.__data[2]=ee.elements[2],O.__data[3]=0,O.__data[4]=ee.elements[3],O.__data[5]=ee.elements[4],O.__data[6]=ee.elements[5],O.__data[7]=0,O.__data[8]=ee.elements[6],O.__data[9]=ee.elements[7],O.__data[10]=ee.elements[8],O.__data[11]=0):(ee.toArray(O.__data,te),te+=pe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Y,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,A,M,P){const I=x.value,L=A+"_"+M;if(P[L]===void 0)return typeof I=="number"||typeof I=="boolean"?P[L]=I:P[L]=I.clone(),!0;{const N=P[L];if(typeof I=="number"||typeof I=="boolean"){if(N!==I)return P[L]=I,!0}else if(N.equals(I)===!1)return N.copy(I),!0}return!1}function v(x){const A=x.uniforms;let M=0;const P=16;for(let L=0,N=A.length;L<N;L++){const B=Array.isArray(A[L])?A[L]:[A[L]];for(let R=0,O=B.length;R<O;R++){const Y=B[R],$=Array.isArray(Y.value)?Y.value:[Y.value];for(let te=0,oe=$.length;te<oe;te++){const ee=$[te],pe=S(ee),U=M%P;U!==0&&P-U<pe.boundary&&(M+=P-U),Y.__data=new Float32Array(pe.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=M,M+=pe.storage}}}const I=M%P;return I>0&&(M+=P-I),x.__size=M,x.__cache={},this}function S(x){const A={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(A.boundary=4,A.storage=4):x.isVector2?(A.boundary=8,A.storage=8):x.isVector3||x.isColor?(A.boundary=16,A.storage=12):x.isVector4?(A.boundary=16,A.storage=16):x.isMatrix3?(A.boundary=48,A.storage=48):x.isMatrix4?(A.boundary=64,A.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),A}function y(x){const A=x.target;A.removeEventListener("dispose",y);const M=o.indexOf(A.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(r[A.id]),delete r[A.id],delete s[A.id]}function g(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class gw{constructor(e={}){const{canvas:t=uN(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),v=new Int32Array(4);let S=null,y=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=vr,this.toneMapping=Hs,this.toneMappingExposure=1;const A=this;let M=!1,P=0,I=0,L=null,N=-1,B=null;const R=new ln,O=new ln;let Y=null;const $=new je(0);let te=0,oe=t.width,ee=t.height,pe=1,U=null,Z=null;const K=new ln(0,0,oe,ee),ae=new ln(0,0,oe,ee);let ve=!1;const Oe=new Cf;let le=!1,Ae=!1;const xe=new ht,Ie=new z,dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let xt=!1;function mt(){return L===null?pe:1}let Q=i;function Ee(T,k){return t.getContext(T,k)}try{const T={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Zu}`),t.addEventListener("webglcontextlost",Ze,!1),t.addEventListener("webglcontextrestored",ie,!1),t.addEventListener("webglcontextcreationerror",Me,!1),Q===null){const k="webgl2";if(Q=Ee(k,T),Q===null)throw Ee(k)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let Se,De,Be,Ne,Ye,Je,St,W,F,de,Re,Ce,be,ot,He,Ve,_t,Fe,rt,Nt,ft,Ge,Mt,Et;function Ut(){Se=new JH(Q),Se.init(),Ge=new wN(Q,Se),De=new zH(Q,Se,e,Ge),Be=new EV(Q),Ne=new ZH(Q),Ye=new fV,Je=new CV(Q,Se,Be,Ye,De,Ge,Ne),St=new VH(A),W=new XH(A),F=new i9(Q),Mt=new kH(Q,F),de=new KH(Q,F,Ne,Mt),Re=new qH(Q,de,F,Ne),rt=new QH(Q,De,Je),Ve=new HH(Ye),Ce=new dV(A,St,W,Se,De,Mt,Ve),be=new NV(A,Ye),ot=new mV,He=new SV(Se),Fe=new UH(A,St,W,Be,Re,p,l),_t=new MV(A,Re,De),Et=new LV(Q,Ne,De,Be),Nt=new GH(Q,Se,Ne),ft=new YH(Q,Se,Ne),Ne.programs=Ce.programs,A.capabilities=De,A.extensions=Se,A.properties=Ye,A.renderLists=ot,A.shadowMap=_t,A.state=Be,A.info=Ne}Ut();const q=new PV(A,Q);this.xr=q,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const T=Se.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=Se.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(T){T!==void 0&&(pe=T,this.setSize(oe,ee,!1))},this.getSize=function(T){return T.set(oe,ee)},this.setSize=function(T,k,H=!0){if(q.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}oe=T,ee=k,t.width=Math.floor(T*pe),t.height=Math.floor(k*pe),H===!0&&(t.style.width=T+"px",t.style.height=k+"px"),this.setViewport(0,0,T,k)},this.getDrawingBufferSize=function(T){return T.set(oe*pe,ee*pe).floor()},this.setDrawingBufferSize=function(T,k,H){oe=T,ee=k,pe=H,t.width=Math.floor(T*H),t.height=Math.floor(k*H),this.setViewport(0,0,T,k)},this.getCurrentViewport=function(T){return T.copy(R)},this.getViewport=function(T){return T.copy(K)},this.setViewport=function(T,k,H,V){T.isVector4?K.set(T.x,T.y,T.z,T.w):K.set(T,k,H,V),Be.viewport(R.copy(K).multiplyScalar(pe).round())},this.getScissor=function(T){return T.copy(ae)},this.setScissor=function(T,k,H,V){T.isVector4?ae.set(T.x,T.y,T.z,T.w):ae.set(T,k,H,V),Be.scissor(O.copy(ae).multiplyScalar(pe).round())},this.getScissorTest=function(){return ve},this.setScissorTest=function(T){Be.setScissorTest(ve=T)},this.setOpaqueSort=function(T){U=T},this.setTransparentSort=function(T){Z=T},this.getClearColor=function(T){return T.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor.apply(Fe,arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha.apply(Fe,arguments)},this.clear=function(T=!0,k=!0,H=!0){let V=0;if(T){let X=!1;if(L!==null){const re=L.texture.format;X=re===tw||re===ew||re===$A}if(X){const re=L.texture.type,ce=re===Mr||re===Ia||re===Qd||re===Jl||re===QA||re===qA,he=Fe.getClearColor(),fe=Fe.getClearAlpha(),ge=he.r,We=he.g,Te=he.b;ce?(m[0]=ge,m[1]=We,m[2]=Te,m[3]=fe,Q.clearBufferuiv(Q.COLOR,0,m)):(v[0]=ge,v[1]=We,v[2]=Te,v[3]=fe,Q.clearBufferiv(Q.COLOR,0,v))}else V|=Q.COLOR_BUFFER_BIT}k&&(V|=Q.DEPTH_BUFFER_BIT),H&&(V|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(V)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ze,!1),t.removeEventListener("webglcontextrestored",ie,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),ot.dispose(),He.dispose(),Ye.dispose(),St.dispose(),W.dispose(),Re.dispose(),Mt.dispose(),Et.dispose(),Ce.dispose(),q.dispose(),q.removeEventListener("sessionstart",Oi),q.removeEventListener("sessionend",Ui),es.stop()};function Ze(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function ie(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const T=Ne.autoReset,k=_t.enabled,H=_t.autoUpdate,V=_t.needsUpdate,X=_t.type;Ut(),Ne.autoReset=T,_t.enabled=k,_t.autoUpdate=H,_t.needsUpdate=V,_t.type=X}function Me(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function ze(T){const k=T.target;k.removeEventListener("dispose",ze),vt(k)}function vt(T){zt(T),Ye.remove(T)}function zt(T){const k=Ye.get(T).programs;k!==void 0&&(k.forEach(function(H){Ce.releaseProgram(H)}),T.isShaderMaterial&&Ce.releaseShaderCache(T))}this.renderBufferDirect=function(T,k,H,V,X,re){k===null&&(k=dt);const ce=X.isMesh&&X.matrixWorld.determinant()<0,he=ih(T,k,H,V,X);Be.setMaterial(V,ce);let fe=H.index,ge=1;if(V.wireframe===!0){if(fe=de.getWireframeAttribute(H),fe===void 0)return;ge=2}const We=H.drawRange,Te=H.attributes.position;let Ue=We.start*ge,qe=(We.start+We.count)*ge;re!==null&&(Ue=Math.max(Ue,re.start*ge),qe=Math.min(qe,(re.start+re.count)*ge)),fe!==null?(Ue=Math.max(Ue,0),qe=Math.min(qe,fe.count)):Te!=null&&(Ue=Math.max(Ue,0),qe=Math.min(qe,Te.count));const et=qe-Ue;if(et<0||et===1/0)return;Mt.setup(X,V,he,H,fe);let yt,tt=Nt;if(fe!==null&&(yt=F.get(fe),tt=ft,tt.setIndex(yt)),X.isMesh)V.wireframe===!0?(Be.setLineWidth(V.wireframeLinewidth*mt()),tt.setMode(Q.LINES)):tt.setMode(Q.TRIANGLES);else if(X.isLine){let Pe=V.linewidth;Pe===void 0&&(Pe=1),Be.setLineWidth(Pe*mt()),X.isLineSegments?tt.setMode(Q.LINES):X.isLineLoop?tt.setMode(Q.LINE_LOOP):tt.setMode(Q.LINE_STRIP)}else X.isPoints?tt.setMode(Q.POINTS):X.isSprite&&tt.setMode(Q.TRIANGLES);if(X.isBatchedMesh)X._multiDrawInstances!==null?tt.renderMultiDrawInstances(X._multiDrawStarts,X._multiDrawCounts,X._multiDrawCount,X._multiDrawInstances):tt.renderMultiDraw(X._multiDrawStarts,X._multiDrawCounts,X._multiDrawCount);else if(X.isInstancedMesh)tt.renderInstances(Ue,et,X.count);else if(H.isInstancedBufferGeometry){const Pe=H._maxInstanceCount!==void 0?H._maxInstanceCount:1/0,at=Math.min(H.instanceCount,Pe);tt.renderInstances(Ue,et,at)}else tt.render(Ue,et)};function dn(T,k,H){T.transparent===!0&&T.side===Wr&&T.forceSinglePass===!1?(T.side=Ji,T.needsUpdate=!0,Si(T,k,H),T.side=Ws,T.needsUpdate=!0,Si(T,k,H),T.side=Wr):Si(T,k,H)}this.compile=function(T,k,H=null){H===null&&(H=T),y=He.get(H),y.init(k),x.push(y),H.traverseVisible(function(X){X.isLight&&X.layers.test(k.layers)&&(y.pushLight(X),X.castShadow&&y.pushShadow(X))}),T!==H&&T.traverseVisible(function(X){X.isLight&&X.layers.test(k.layers)&&(y.pushLight(X),X.castShadow&&y.pushShadow(X))}),y.setupLights();const V=new Set;return T.traverse(function(X){const re=X.material;if(re)if(Array.isArray(re))for(let ce=0;ce<re.length;ce++){const he=re[ce];dn(he,H,X),V.add(he)}else dn(re,H,X),V.add(re)}),x.pop(),y=null,V},this.compileAsync=function(T,k,H=null){const V=this.compile(T,k,H);return new Promise(X=>{function re(){if(V.forEach(function(ce){Ye.get(ce).currentProgram.isReady()&&V.delete(ce)}),V.size===0){X(T);return}setTimeout(re,10)}Se.get("KHR_parallel_shader_compile")!==null?re():setTimeout(re,10)})};let Pn=null;function Yt(T){Pn&&Pn(T)}function Oi(){es.stop()}function Ui(){es.start()}const es=new vN;es.setAnimationLoop(Yt),typeof self<"u"&&es.setContext(self),this.setAnimationLoop=function(T){Pn=T,q.setAnimationLoop(T),T===null?es.stop():es.start()},q.addEventListener("sessionstart",Oi),q.addEventListener("sessionend",Ui),this.render=function(T,k){if(k!==void 0&&k.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),k.parent===null&&k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),q.enabled===!0&&q.isPresenting===!0&&(q.cameraAutoUpdate===!0&&q.updateCamera(k),k=q.getCamera()),T.isScene===!0&&T.onBeforeRender(A,T,k,L),y=He.get(T,x.length),y.init(k),x.push(y),xe.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),Oe.setFromProjectionMatrix(xe),Ae=this.localClippingEnabled,le=Ve.init(this.clippingPlanes,Ae),S=ot.get(T,g.length),S.init(),g.push(S),q.enabled===!0&&q.isPresenting===!0){const re=A.xr.getDepthSensingMesh();re!==null&&za(re,k,-1/0,A.sortObjects)}za(T,k,0,A.sortObjects),S.finish(),A.sortObjects===!0&&S.sort(U,Z),xt=q.enabled===!1||q.isPresenting===!1||q.hasDepthSensing()===!1,xt&&Fe.addToRenderList(S,T),this.info.render.frame++,le===!0&&Ve.beginShadows();const H=y.state.shadowsArray;_t.render(H,T,k),le===!0&&Ve.endShadows(),this.info.autoReset===!0&&this.info.reset();const V=S.opaque,X=S.transmissive;if(y.setupLights(),k.isArrayCamera){const re=k.cameras;if(X.length>0)for(let ce=0,he=re.length;ce<he;ce++){const fe=re[ce];xs(V,X,T,fe)}xt&&Fe.render(T);for(let ce=0,he=re.length;ce<he;ce++){const fe=re[ce];lc(S,T,fe,fe.viewport)}}else X.length>0&&xs(V,X,T,k),xt&&Fe.render(T),lc(S,T,k);L!==null&&(Je.updateMultisampleRenderTarget(L),Je.updateRenderTargetMipmap(L)),T.isScene===!0&&T.onAfterRender(A,T,k),Mt.resetDefaultState(),N=-1,B=null,x.pop(),x.length>0?(y=x[x.length-1],le===!0&&Ve.setGlobalState(A.clippingPlanes,y.state.camera)):y=null,g.pop(),g.length>0?S=g[g.length-1]:S=null};function za(T,k,H,V){if(T.visible===!1)return;if(T.layers.test(k.layers)){if(T.isGroup)H=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(k);else if(T.isLight)y.pushLight(T),T.castShadow&&y.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||Oe.intersectsSprite(T)){V&&Ie.setFromMatrixPosition(T.matrixWorld).applyMatrix4(xe);const ce=Re.update(T),he=T.material;he.visible&&S.push(T,ce,he,H,Ie.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||Oe.intersectsObject(T))){const ce=Re.update(T),he=T.material;if(V&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),Ie.copy(T.boundingSphere.center)):(ce.boundingSphere===null&&ce.computeBoundingSphere(),Ie.copy(ce.boundingSphere.center)),Ie.applyMatrix4(T.matrixWorld).applyMatrix4(xe)),Array.isArray(he)){const fe=ce.groups;for(let ge=0,We=fe.length;ge<We;ge++){const Te=fe[ge],Ue=he[Te.materialIndex];Ue&&Ue.visible&&S.push(T,ce,Ue,H,Ie.z,Te)}}else he.visible&&S.push(T,ce,he,H,Ie.z,null)}}const re=T.children;for(let ce=0,he=re.length;ce<he;ce++)za(re[ce],k,H,V)}function lc(T,k,H,V){const X=T.opaque,re=T.transmissive,ce=T.transparent;y.setupLightsView(H),le===!0&&Ve.setGlobalState(A.clippingPlanes,H),V&&Be.viewport(R.copy(V)),X.length>0&&Ss(X,k,H),re.length>0&&Ss(re,k,H),ce.length>0&&Ss(ce,k,H),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1)}function xs(T,k,H,V){if((H.isScene===!0?H.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[V.id]===void 0&&(y.state.transmissionRenderTarget[V.id]=new Er(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?pi:Mr,minFilter:Kr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:on.workingColorSpace}));const re=y.state.transmissionRenderTarget[V.id],ce=V.viewport||R;re.setSize(ce.z,ce.w);const he=A.getRenderTarget();A.setRenderTarget(re),A.getClearColor($),te=A.getClearAlpha(),te<1&&A.setClearColor(16777215,.5),xt?Fe.render(H):A.clear();const fe=A.toneMapping;A.toneMapping=Hs;const ge=V.viewport;if(V.viewport!==void 0&&(V.viewport=void 0),y.setupLightsView(V),le===!0&&Ve.setGlobalState(A.clippingPlanes,V),Ss(T,H,V),Je.updateMultisampleRenderTarget(re),Je.updateRenderTargetMipmap(re),Se.has("WEBGL_multisampled_render_to_texture")===!1){let We=!1;for(let Te=0,Ue=k.length;Te<Ue;Te++){const qe=k[Te],et=qe.object,yt=qe.geometry,tt=qe.material,Pe=qe.group;if(tt.side===Wr&&et.layers.test(V.layers)){const at=tt.side;tt.side=Ji,tt.needsUpdate=!0,As(et,H,V,yt,tt,Pe),tt.side=at,tt.needsUpdate=!0,We=!0}}We===!0&&(Je.updateMultisampleRenderTarget(re),Je.updateRenderTargetMipmap(re))}A.setRenderTarget(he),A.setClearColor($,te),ge!==void 0&&(V.viewport=ge),A.toneMapping=fe}function Ss(T,k,H){const V=k.isScene===!0?k.overrideMaterial:null;for(let X=0,re=T.length;X<re;X++){const ce=T[X],he=ce.object,fe=ce.geometry,ge=V===null?ce.material:V,We=ce.group;he.layers.test(H.layers)&&As(he,k,H,fe,ge,We)}}function As(T,k,H,V,X,re){T.onBeforeRender(A,k,H,V,X,re),T.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),X.onBeforeRender(A,k,H,V,T,re),X.transparent===!0&&X.side===Wr&&X.forceSinglePass===!1?(X.side=Ji,X.needsUpdate=!0,A.renderBufferDirect(H,k,V,X,T,re),X.side=Ws,X.needsUpdate=!0,A.renderBufferDirect(H,k,V,X,T,re),X.side=Wr):A.renderBufferDirect(H,k,V,X,T,re),T.onAfterRender(A,k,H,V,X,re)}function Si(T,k,H){k.isScene!==!0&&(k=dt);const V=Ye.get(T),X=y.state.lights,re=y.state.shadowsArray,ce=X.state.version,he=Ce.getParameters(T,X.state,re,k,H),fe=Ce.getProgramCacheKey(he);let ge=V.programs;V.environment=T.isMeshStandardMaterial?k.environment:null,V.fog=k.fog,V.envMap=(T.isMeshStandardMaterial?W:St).get(T.envMap||V.environment),V.envMapRotation=V.environment!==null&&T.envMap===null?k.environmentRotation:T.envMapRotation,ge===void 0&&(T.addEventListener("dispose",ze),ge=new Map,V.programs=ge);let We=ge.get(fe);if(We!==void 0){if(V.currentProgram===We&&V.lightsStateVersion===ce)return Ha(T,he),We}else he.uniforms=Ce.getUniforms(T),T.onBuild(H,he,A),T.onBeforeCompile(he,A),We=Ce.acquireProgram(he,fe),ge.set(fe,We),V.uniforms=he.uniforms;const Te=V.uniforms;return(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(Te.clippingPlanes=Ve.uniform),Ha(T,he),V.needsLights=G(T),V.lightsStateVersion=ce,V.needsLights&&(Te.ambientLightColor.value=X.state.ambient,Te.lightProbe.value=X.state.probe,Te.directionalLights.value=X.state.directional,Te.directionalLightShadows.value=X.state.directionalShadow,Te.spotLights.value=X.state.spot,Te.spotLightShadows.value=X.state.spotShadow,Te.rectAreaLights.value=X.state.rectArea,Te.ltc_1.value=X.state.rectAreaLTC1,Te.ltc_2.value=X.state.rectAreaLTC2,Te.pointLights.value=X.state.point,Te.pointLightShadows.value=X.state.pointShadow,Te.hemisphereLights.value=X.state.hemi,Te.directionalShadowMap.value=X.state.directionalShadowMap,Te.directionalShadowMatrix.value=X.state.directionalShadowMatrix,Te.spotShadowMap.value=X.state.spotShadowMap,Te.spotLightMatrix.value=X.state.spotLightMatrix,Te.spotLightMap.value=X.state.spotLightMap,Te.pointShadowMap.value=X.state.pointShadowMap,Te.pointShadowMatrix.value=X.state.pointShadowMatrix),V.currentProgram=We,V.uniformsList=null,We}function Lt(T){if(T.uniformsList===null){const k=T.currentProgram.getUniforms();T.uniformsList=S0.seqWithValue(k.seq,T.uniforms)}return T.uniformsList}function Ha(T,k){const H=Ye.get(T);H.outputColorSpace=k.outputColorSpace,H.batching=k.batching,H.batchingColor=k.batchingColor,H.instancing=k.instancing,H.instancingColor=k.instancingColor,H.instancingMorph=k.instancingMorph,H.skinning=k.skinning,H.morphTargets=k.morphTargets,H.morphNormals=k.morphNormals,H.morphColors=k.morphColors,H.morphTargetsCount=k.morphTargetsCount,H.numClippingPlanes=k.numClippingPlanes,H.numIntersection=k.numClipIntersection,H.vertexAlphas=k.vertexAlphas,H.vertexTangents=k.vertexTangents,H.toneMapping=k.toneMapping}function ih(T,k,H,V,X){k.isScene!==!0&&(k=dt),Je.resetTextureUnits();const re=k.fog,ce=V.isMeshStandardMaterial?k.environment:null,he=L===null?A.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:qr,fe=(V.isMeshStandardMaterial?W:St).get(V.envMap||ce),ge=V.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,We=!!H.attributes.tangent&&(!!V.normalMap||V.anisotropy>0),Te=!!H.morphAttributes.position,Ue=!!H.morphAttributes.normal,qe=!!H.morphAttributes.color;let et=Hs;V.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(et=A.toneMapping);const yt=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,tt=yt!==void 0?yt.length:0,Pe=Ye.get(V),at=y.state.lights;if(le===!0&&(Ae===!0||T!==B)){const qt=T===B&&V.id===N;Ve.setState(V,T,qt)}let it=!1;V.version===Pe.__version?(Pe.needsLights&&Pe.lightsStateVersion!==at.state.version||Pe.outputColorSpace!==he||X.isBatchedMesh&&Pe.batching===!1||!X.isBatchedMesh&&Pe.batching===!0||X.isBatchedMesh&&Pe.batchingColor===!0&&X.colorTexture===null||X.isBatchedMesh&&Pe.batchingColor===!1&&X.colorTexture!==null||X.isInstancedMesh&&Pe.instancing===!1||!X.isInstancedMesh&&Pe.instancing===!0||X.isSkinnedMesh&&Pe.skinning===!1||!X.isSkinnedMesh&&Pe.skinning===!0||X.isInstancedMesh&&Pe.instancingColor===!0&&X.instanceColor===null||X.isInstancedMesh&&Pe.instancingColor===!1&&X.instanceColor!==null||X.isInstancedMesh&&Pe.instancingMorph===!0&&X.morphTexture===null||X.isInstancedMesh&&Pe.instancingMorph===!1&&X.morphTexture!==null||Pe.envMap!==fe||V.fog===!0&&Pe.fog!==re||Pe.numClippingPlanes!==void 0&&(Pe.numClippingPlanes!==Ve.numPlanes||Pe.numIntersection!==Ve.numIntersection)||Pe.vertexAlphas!==ge||Pe.vertexTangents!==We||Pe.morphTargets!==Te||Pe.morphNormals!==Ue||Pe.morphColors!==qe||Pe.toneMapping!==et||Pe.morphTargetsCount!==tt)&&(it=!0):(it=!0,Pe.__version=V.version);let kt=Pe.currentProgram;it===!0&&(kt=Si(V,k,X));let wt=!1,jt=!1,Vn=!1;const Ft=kt.getUniforms(),fn=Pe.uniforms;if(Be.useProgram(kt.program)&&(wt=!0,jt=!0,Vn=!0),V.id!==N&&(N=V.id,jt=!0),wt||B!==T){Ft.setValue(Q,"projectionMatrix",T.projectionMatrix),Ft.setValue(Q,"viewMatrix",T.matrixWorldInverse);const qt=Ft.map.cameraPosition;qt!==void 0&&qt.setValue(Q,Ie.setFromMatrixPosition(T.matrixWorld)),De.logarithmicDepthBuffer&&Ft.setValue(Q,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial)&&Ft.setValue(Q,"isOrthographic",T.isOrthographicCamera===!0),B!==T&&(B=T,jt=!0,Vn=!0)}if(X.isSkinnedMesh){Ft.setOptional(Q,X,"bindMatrix"),Ft.setOptional(Q,X,"bindMatrixInverse");const qt=X.skeleton;qt&&(qt.boneTexture===null&&qt.computeBoneTexture(),Ft.setValue(Q,"boneTexture",qt.boneTexture,Je))}X.isBatchedMesh&&(Ft.setOptional(Q,X,"batchingTexture"),Ft.setValue(Q,"batchingTexture",X._matricesTexture,Je),Ft.setOptional(Q,X,"batchingColorTexture"),X._colorsTexture!==null&&Ft.setValue(Q,"batchingColorTexture",X._colorsTexture,Je));const Wt=H.morphAttributes;if((Wt.position!==void 0||Wt.normal!==void 0||Wt.color!==void 0)&&rt.update(X,H,kt),(jt||Pe.receiveShadow!==X.receiveShadow)&&(Pe.receiveShadow=X.receiveShadow,Ft.setValue(Q,"receiveShadow",X.receiveShadow)),V.isMeshGouraudMaterial&&V.envMap!==null&&(fn.envMap.value=fe,fn.flipEnvMap.value=fe.isCubeTexture&&fe.isRenderTargetTexture===!1?-1:1),V.isMeshStandardMaterial&&V.envMap===null&&k.environment!==null&&(fn.envMapIntensity.value=k.environmentIntensity),jt&&(Ft.setValue(Q,"toneMappingExposure",A.toneMappingExposure),Pe.needsLights&&D(fn,Vn),re&&V.fog===!0&&be.refreshFogUniforms(fn,re),be.refreshMaterialUniforms(fn,V,pe,ee,y.state.transmissionRenderTarget[T.id]),S0.upload(Q,Lt(Pe),fn,Je)),V.isShaderMaterial&&V.uniformsNeedUpdate===!0&&(S0.upload(Q,Lt(Pe),fn,Je),V.uniformsNeedUpdate=!1),V.isSpriteMaterial&&Ft.setValue(Q,"center",X.center),Ft.setValue(Q,"modelViewMatrix",X.modelViewMatrix),Ft.setValue(Q,"normalMatrix",X.normalMatrix),Ft.setValue(Q,"modelMatrix",X.matrixWorld),V.isShaderMaterial||V.isRawShaderMaterial){const qt=V.uniformsGroups;for(let Zt=0,Xt=qt.length;Zt<Xt;Zt++){const un=qt[Zt];Et.update(un,kt),Et.bind(un,kt)}}return kt}function D(T,k){T.ambientLightColor.needsUpdate=k,T.lightProbe.needsUpdate=k,T.directionalLights.needsUpdate=k,T.directionalLightShadows.needsUpdate=k,T.pointLights.needsUpdate=k,T.pointLightShadows.needsUpdate=k,T.spotLights.needsUpdate=k,T.spotLightShadows.needsUpdate=k,T.rectAreaLights.needsUpdate=k,T.hemisphereLights.needsUpdate=k}function G(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(T,k,H){Ye.get(T.texture).__webglTexture=k,Ye.get(T.depthTexture).__webglTexture=H;const V=Ye.get(T);V.__hasExternalTextures=!0,V.__autoAllocateDepthBuffer=H===void 0,V.__autoAllocateDepthBuffer||Se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),V.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(T,k){const H=Ye.get(T);H.__webglFramebuffer=k,H.__useDefaultFramebuffer=k===void 0},this.setRenderTarget=function(T,k=0,H=0){L=T,P=k,I=H;let V=!0,X=null,re=!1,ce=!1;if(T){const fe=Ye.get(T);fe.__useDefaultFramebuffer!==void 0?(Be.bindFramebuffer(Q.FRAMEBUFFER,null),V=!1):fe.__webglFramebuffer===void 0?Je.setupRenderTarget(T):fe.__hasExternalTextures&&Je.rebindTextures(T,Ye.get(T.texture).__webglTexture,Ye.get(T.depthTexture).__webglTexture);const ge=T.texture;(ge.isData3DTexture||ge.isDataArrayTexture||ge.isCompressedArrayTexture)&&(ce=!0);const We=Ye.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(We[k])?X=We[k][H]:X=We[k],re=!0):T.samples>0&&Je.useMultisampledRTT(T)===!1?X=Ye.get(T).__webglMultisampledFramebuffer:Array.isArray(We)?X=We[H]:X=We,R.copy(T.viewport),O.copy(T.scissor),Y=T.scissorTest}else R.copy(K).multiplyScalar(pe).floor(),O.copy(ae).multiplyScalar(pe).floor(),Y=ve;if(Be.bindFramebuffer(Q.FRAMEBUFFER,X)&&V&&Be.drawBuffers(T,X),Be.viewport(R),Be.scissor(O),Be.setScissorTest(Y),re){const fe=Ye.get(T.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+k,fe.__webglTexture,H)}else if(ce){const fe=Ye.get(T.texture),ge=k||0;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,fe.__webglTexture,H||0,ge)}N=-1},this.readRenderTargetPixels=function(T,k,H,V,X,re,ce){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let he=Ye.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&ce!==void 0&&(he=he[ce]),he){Be.bindFramebuffer(Q.FRAMEBUFFER,he);try{const fe=T.texture,ge=fe.format,We=fe.type;if(!De.textureFormatReadable(ge)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!De.textureTypeReadable(We)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}k>=0&&k<=T.width-V&&H>=0&&H<=T.height-X&&Q.readPixels(k,H,V,X,Ge.convert(ge),Ge.convert(We),re)}finally{const fe=L!==null?Ye.get(L).__webglFramebuffer:null;Be.bindFramebuffer(Q.FRAMEBUFFER,fe)}}},this.readRenderTargetPixelsAsync=async function(T,k,H,V,X,re,ce){if(!(T&&T.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let he=Ye.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&ce!==void 0&&(he=he[ce]),he){Be.bindFramebuffer(Q.FRAMEBUFFER,he);try{const fe=T.texture,ge=fe.format,We=fe.type;if(!De.textureFormatReadable(ge))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!De.textureTypeReadable(We))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(k>=0&&k<=T.width-V&&H>=0&&H<=T.height-X){const Te=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Te),Q.bufferData(Q.PIXEL_PACK_BUFFER,re.byteLength,Q.STREAM_READ),Q.readPixels(k,H,V,X,Ge.convert(ge),Ge.convert(We),0),Q.flush();const Ue=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);await R8(Q,Ue,4);try{Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Te),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,re)}finally{Q.deleteBuffer(Te),Q.deleteSync(Ue)}return re}}finally{const fe=L!==null?Ye.get(L).__webglFramebuffer:null;Be.bindFramebuffer(Q.FRAMEBUFFER,fe)}}},this.copyFramebufferToTexture=function(T,k=null,H=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),k=arguments[0]||null,T=arguments[1]);const V=Math.pow(2,-H),X=Math.floor(T.image.width*V),re=Math.floor(T.image.height*V),ce=k!==null?k.x:0,he=k!==null?k.y:0;Je.setTexture2D(T,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,H,0,0,ce,he,X,re),Be.unbindTexture()},this.copyTextureToTexture=function(T,k,H=null,V=null,X=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),V=arguments[0]||null,T=arguments[1],k=arguments[2],X=arguments[3]||0,H=null);let re,ce,he,fe,ge,We;H!==null?(re=H.max.x-H.min.x,ce=H.max.y-H.min.y,he=H.min.x,fe=H.min.y):(re=T.image.width,ce=T.image.height,he=0,fe=0),V!==null?(ge=V.x,We=V.y):(ge=0,We=0);const Te=Ge.convert(k.format),Ue=Ge.convert(k.type);Je.setTexture2D(k,0),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,k.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,k.unpackAlignment);const qe=Q.getParameter(Q.UNPACK_ROW_LENGTH),et=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),yt=Q.getParameter(Q.UNPACK_SKIP_PIXELS),tt=Q.getParameter(Q.UNPACK_SKIP_ROWS),Pe=Q.getParameter(Q.UNPACK_SKIP_IMAGES),at=T.isCompressedTexture?T.mipmaps[X]:T.image;Q.pixelStorei(Q.UNPACK_ROW_LENGTH,at.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,at.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,he),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,fe),T.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,X,ge,We,re,ce,Te,Ue,at.data):T.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,X,ge,We,at.width,at.height,Te,at.data):Q.texSubImage2D(Q.TEXTURE_2D,X,ge,We,Te,Ue,at),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,qe),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,et),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,yt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,tt),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Pe),X===0&&k.generateMipmaps&&Q.generateMipmap(Q.TEXTURE_2D),Be.unbindTexture()},this.copyTextureToTexture3D=function(T,k,H=null,V=null,X=0){T.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),H=arguments[0]||null,V=arguments[1]||null,T=arguments[2],k=arguments[3],X=arguments[4]||0);let re,ce,he,fe,ge,We,Te,Ue,qe;const et=T.isCompressedTexture?T.mipmaps[X]:T.image;H!==null?(re=H.max.x-H.min.x,ce=H.max.y-H.min.y,he=H.max.z-H.min.z,fe=H.min.x,ge=H.min.y,We=H.min.z):(re=et.width,ce=et.height,he=et.depth,fe=0,ge=0,We=0),V!==null?(Te=V.x,Ue=V.y,qe=V.z):(Te=0,Ue=0,qe=0);const yt=Ge.convert(k.format),tt=Ge.convert(k.type);let Pe;if(k.isData3DTexture)Je.setTexture3D(k,0),Pe=Q.TEXTURE_3D;else if(k.isDataArrayTexture||k.isCompressedArrayTexture)Je.setTexture2DArray(k,0),Pe=Q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,k.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,k.unpackAlignment);const at=Q.getParameter(Q.UNPACK_ROW_LENGTH),it=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),kt=Q.getParameter(Q.UNPACK_SKIP_PIXELS),wt=Q.getParameter(Q.UNPACK_SKIP_ROWS),jt=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,et.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,et.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,fe),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,ge),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,We),T.isDataTexture||T.isData3DTexture?Q.texSubImage3D(Pe,X,Te,Ue,qe,re,ce,he,yt,tt,et.data):k.isCompressedArrayTexture?Q.compressedTexSubImage3D(Pe,X,Te,Ue,qe,re,ce,he,yt,et.data):Q.texSubImage3D(Pe,X,Te,Ue,qe,re,ce,he,yt,tt,et),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,at),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,it),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,kt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,wt),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,jt),X===0&&k.generateMipmaps&&Q.generateMipmap(Pe),Be.unbindTexture()},this.initRenderTarget=function(T){Ye.get(T).__webglFramebuffer===void 0&&Je.setupRenderTarget(T)},this.initTexture=function(T){T.isCubeTexture?Je.setTextureCube(T,0):T.isData3DTexture?Je.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?Je.setTexture2DArray(T,0):Je.setTexture2D(T,0),Be.unbindTexture()},this.resetState=function(){P=0,I=0,L=null,Be.reset(),Mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Os}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Hg?"display-p3":"srgb",t.unpackColorSpace=on.workingColorSpace===wf?"display-p3":"srgb"}}class Wg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new je(e),this.density=t}clone(){return new Wg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Xg{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new je(e),this.near=t,this.far=i}clone(){return new Xg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Hu extends Ht{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Cr,this.environmentIntensity=1,this.environmentRotation=new Cr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Tf{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nf,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Sr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return aw("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Hi=new z;class Ra{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.applyMatrix4(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.applyNormalMatrix(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hi.fromBufferAttribute(this,t),Hi.transformDirection(e),this.setXYZ(t,Hi.x,Hi.y,Hi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Wi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Wi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Wi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Wi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Wi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),r=bt(r,this.array),s=bt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ra(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vw extends Yn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Uc;const Fh=new z,kc=new z,Gc=new z,zc=new we,Oh=new we,EN=new ht,vm=new z,Uh=new z,_m=new z,OT=new we,Iy=new we,UT=new we;class CN extends Ht{constructor(e=new vw){if(super(),this.isSprite=!0,this.type="Sprite",Uc===void 0){Uc=new It;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Tf(t,5);Uc.setIndex([0,1,2,0,2,3]),Uc.setAttribute("position",new Ra(i,3,0,!1)),Uc.setAttribute("uv",new Ra(i,2,3,!1))}this.geometry=Uc,this.material=e,this.center=new we(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kc.setFromMatrixScale(this.matrixWorld),EN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Gc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kc.multiplyScalar(-Gc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;ym(vm.set(-.5,-.5,0),Gc,o,kc,r,s),ym(Uh.set(.5,-.5,0),Gc,o,kc,r,s),ym(_m.set(.5,.5,0),Gc,o,kc,r,s),OT.set(0,0),Iy.set(1,0),UT.set(1,1);let a=e.ray.intersectTriangle(vm,Uh,_m,!1,Fh);if(a===null&&(ym(Uh.set(-.5,.5,0),Gc,o,kc,r,s),Iy.set(0,1),a=e.ray.intersectTriangle(vm,_m,Uh,!1,Fh),a===null))return;const l=e.ray.origin.distanceTo(Fh);l<e.near||l>e.far||t.push({distance:l,point:Fh.clone(),uv:_r.getInterpolation(Fh,vm,Uh,_m,OT,Iy,UT,new we),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ym(n,e,t,i,r,s){zc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Oh.x=s*zc.x-r*zc.y,Oh.y=r*zc.x+s*zc.y):Oh.copy(zc),n.copy(e),n.x+=Oh.x,n.y+=Oh.y,n.applyMatrix4(EN)}const xm=new z,kT=new z;class TN extends Ht{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){xm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(xm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){xm.setFromMatrixPosition(e.matrixWorld),kT.setFromMatrixPosition(this.matrixWorld);const i=xm.distanceTo(kT)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const GT=new z,zT=new ln,HT=new ln,DV=new z,VT=new ht,Sm=new z,Ry=new ui,jT=new ht,by=new qu;class _w extends wn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Px,this.bindMatrix=new ht,this.bindMatrixInverse=new ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Sm),this.boundingBox.expandByPoint(Sm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ui),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Sm),this.boundingSphere.expandByPoint(Sm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ry.copy(this.boundingSphere),Ry.applyMatrix4(r),e.ray.intersectsSphere(Ry)!==!1&&(jT.copy(r).invert(),by.copy(e.ray).applyMatrix4(jT),!(this.boundingBox!==null&&by.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,by)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ln,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Px?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===zB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;zT.fromBufferAttribute(r.attributes.skinIndex,e),HT.fromBufferAttribute(r.attributes.skinWeight,e),GT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=HT.getComponent(s);if(o!==0){const a=zT.getComponent(s);VT.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(DV.copy(GT).applyMatrix4(VT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Jg extends Ht{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Vs extends sn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=ei,d=ei,f,p){super(null,o,a,l,c,d,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const WT=new ht,FV=new ht;class If{constructor(e=[],t=[]){this.uuid=Sr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ht;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:FV;WT.multiplyMatrices(a,t[s]),WT.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new If(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Vs(t,e,e,Kn,Fn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Jg),this.bones.push(o),this.boneInverses.push(new ht().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Yl extends Kt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Hc=new ht,XT=new ht,Am=[],JT=new vi,OV=new ht,kh=new wn,Gh=new ui;class yw extends wn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yl(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,OV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Hc),JT.copy(e.boundingBox).applyMatrix4(Hc),this.boundingBox.union(JT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ui),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Hc),Gh.copy(e.boundingSphere).applyMatrix4(Hc),this.boundingSphere.union(Gh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(kh.geometry=this.geometry,kh.material=this.material,kh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gh.copy(this.boundingSphere),Gh.applyMatrix4(i),e.ray.intersectsSphere(Gh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Hc),XT.multiplyMatrices(i,Hc),kh.matrixWorld=XT,kh.raycast(e,Am);for(let o=0,a=Am.length;o<a;o++){const l=Am[o];l.instanceId=s,l.object=this,t.push(l)}Am.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Yl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Vs(new Float32Array(r*this.count),r,this.count,Gg,Fn));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function UV(n,e){return n.z-e.z}function kV(n,e){return e.z-n.z}class GV{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Vc="batchId",jo=new ht,Py=new ht,zV=new ht,HV=new je(1,1,1),KT=new ht,By=new Cf,wm=new vi,sl=new ui,zh=new z,YT=new z,VV=new z,Ny=new GV,bi=new wn,Mm=[];function jV(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class IN extends wn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new It,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Vs(t,e,e,Kn,Fn);this._matricesTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Vs(t,e,e,Kn,Fn);i.colorSpace=on.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:d,normalized:f}=l,p=new c.constructor(i*d),m=new Kt(p,d,f);t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Kt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Vc,new Kt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Vc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Vc}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Vc)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,jo),this.getBoundingBoxAt(r,wm).applyMatrix4(jo),t.union(wm))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ui);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,jo),this.getBoundingSphereAt(r,sl).applyMatrix4(jo),t.union(sl))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),d=c!==null;if(d&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data,S=this._colorsTexture;f.push(!0),p.push(!0);const y=this._geometryCount;this._geometryCount++,zV.toArray(v,y*16),m.needsUpdate=!0,S!==null&&(HV.toArray(S.image.data,y*4),S.needsUpdate=!0),o.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new vi,sphereInitialized:!1,sphere:new ui});const g=this.geometry.getAttribute(Vc);for(let x=0;x<r.vertexCount;x++)g.setX(r.vertexStart+x,y);return g.needsUpdate=!0,this.setGeometryAt(y,e),y}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){if(m===Vc)continue;const v=t.getAttribute(m),S=i.getAttribute(m);jV(v,S,l);const y=v.itemSize;for(let g=v.count,x=c;g<x;g++){const A=l+g;for(let M=0;M<y;M++)S.setComponent(A,M,0)}S.needsUpdate=!0,S.addUpdateRange(l*y,c*y)}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,S=a.indexCount;v<S;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const d=this._bounds[e];t.boundingBox!==null?(d.box.copy(t.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,t.boundingSphere!==null?(d.sphere.copy(t.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let d=c.start,f=c.start+c.count;d<f;d++){let p=d;a&&(p=a.getX(p)),s.expandByPoint(zh.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,wm),wm.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let d=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),zh.fromBufferAttribute(l,m),d=Math.max(d,s.center.distanceToSquared(zh))}s.radius=Math.sqrt(d),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._active,r=this._colorsTexture,s=this._colorsTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*4),r.needsUpdate=!0,this)}getColorAt(e,t){const i=this._active,r=this._colorsTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*4)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;bi.material=this.material,bi.geometry.index=l.index,bi.geometry.attributes=l.attributes,bi.geometry.boundingBox===null&&(bi.geometry.boundingBox=new vi),bi.geometry.boundingSphere===null&&(bi.geometry.boundingSphere=new ui);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const d=s[c];bi.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(c,bi.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,bi.geometry.boundingBox),this.getBoundingSphereAt(c,bi.geometry.boundingSphere),bi.raycast(e,Mm);for(let f=0,p=Mm.length;f<p;f++){const m=Mm[f];m.object=this,m.batchId=c,t.push(m)}Mm.length=0}bi.material=null,bi.geometry.index=null,bi.geometry.attributes={},bi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,d=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(KT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),By.setFromProjectionMatrix(KT,e.coordinateSystem));let v=0;if(this.sortObjects){Py.copy(this.matrixWorld).invert(),zh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Py),YT.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Py);for(let g=0,x=c.length;g<x;g++)if(c[g]&&l[g]){this.getMatrixAt(g,jo),this.getBoundingSphereAt(g,sl).applyMatrix4(jo);let A=!1;if(m&&(A=!By.intersectsSphere(sl)),!A){const M=VV.subVectors(sl.center,zh).dot(YT);Ny.push(p[g],M)}}const S=Ny.list,y=this.customSort;y===null?S.sort(s.transparent?kV:UV):y.call(this,S,i);for(let g=0,x=S.length;g<x;g++){const A=S[g];d[v]=A.start*a,f[v]=A.count,v++}Ny.reset()}else for(let S=0,y=c.length;S<y;S++)if(c[S]&&l[S]){let g=!1;if(m&&(this.getMatrixAt(S,jo),this.getBoundingSphereAt(S,sl).applyMatrix4(jo),g=!By.intersectsSphere(sl)),!g){const x=p[S];d[v]=x.start*a,f[v]=x.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Fi extends Yn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ag=new z,lg=new z,ZT=new ht,Hh=new qu,Em=new ui,Ly=new z,QT=new z;class Co extends Ht{constructor(e=new It,t=new Fi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)ag.fromBufferAttribute(t,r-1),lg.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=ag.distanceTo(lg);e.setAttribute("lineDistance",new st(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Em.copy(i.boundingSphere),Em.applyMatrix4(r),Em.radius+=s,e.ray.intersectsSphere(Em)===!1)return;ZT.copy(r).invert(),Hh.copy(e.ray).applyMatrix4(ZT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=i.index,p=i.attributes.position;if(d!==null){const m=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let S=m,y=v-1;S<y;S+=c){const g=d.getX(S),x=d.getX(S+1),A=Cm(this,e,Hh,l,g,x);A&&t.push(A)}if(this.isLineLoop){const S=d.getX(v-1),y=d.getX(m),g=Cm(this,e,Hh,l,S,y);g&&t.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let S=m,y=v-1;S<y;S+=c){const g=Cm(this,e,Hh,l,S,S+1);g&&t.push(g)}if(this.isLineLoop){const S=Cm(this,e,Hh,l,v-1,m);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Cm(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(ag.fromBufferAttribute(o,r),lg.fromBufferAttribute(o,s),t.distanceSqToSegment(ag,lg,Ly,QT)>i)return;Ly.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Ly);if(!(l<e.near||l>e.far))return{distance:l,point:QT.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const qT=new z,$T=new z;class vs extends Co{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)qT.fromBufferAttribute(t,r),$T.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+qT.distanceTo($T);e.setAttribute("lineDistance",new st(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xw extends Co{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Kg extends Yn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const e3=new ht,cS=new qu,Tm=new ui,Im=new z;class Sw extends Ht{constructor(e=new It,t=new Kg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Tm.copy(i.boundingSphere),Tm.applyMatrix4(r),Tm.radius+=s,e.ray.intersectsSphere(Tm)===!1)return;e3.copy(r).invert(),cS.copy(e.ray).applyMatrix4(e3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,S=m;v<S;v++){const y=c.getX(v);Im.fromBufferAttribute(f,y),t3(Im,y,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=p,S=m;v<S;v++)Im.fromBufferAttribute(f,v),t3(Im,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function t3(n,e,t,i,r,s,o){const a=cS.distanceSqToPoint(n);if(a<t){const l=new z;cS.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class WV extends sn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:rn,this.magFilter=s!==void 0?s:rn,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class XV extends sn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ei,this.minFilter=ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class Yg extends sn{constructor(e,t,i,r,s,o,a,l,c,d,f,p){super(null,o,a,l,c,d,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class JV extends Yg{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Hn,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class KV extends Yg{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Xs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class YV extends sn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _s{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const d=i[r],p=i[r+1]-d,m=(o-d)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new we:new z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],o=[],a=new z,l=new ht;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new z)}s[0]=new z,o[0]=new z;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Dn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Dn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Zg extends _s{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new we){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class RN extends Zg{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Aw(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Rm=new z,Dy=new Aw,Fy=new Aw,Oy=new Aw;class bN extends _s{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=r[(a-1)%s]:(Rm.subVectors(r[0],r[1]).add(r[0]),c=Rm);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(Rm.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Rm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(f),m),S=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);S<1e-4&&(S=1),v<1e-4&&(v=S),y<1e-4&&(y=S),Dy.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,v,S,y),Fy.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,v,S,y),Oy.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,v,S,y)}else this.curveType==="catmullrom"&&(Dy.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),Fy.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),Oy.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return i.set(Dy.calc(l),Fy.calc(l),Oy.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function n3(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function ZV(n,e){const t=1-n;return t*t*e}function QV(n,e){return 2*(1-n)*n*e}function qV(n,e){return n*n*e}function Ad(n,e,t,i){return ZV(n,e)+QV(n,t)+qV(n,i)}function $V(n,e){const t=1-n;return t*t*t*e}function ej(n,e){const t=1-n;return 3*t*t*n*e}function tj(n,e){return 3*(1-n)*n*n*e}function nj(n,e){return n*n*n*e}function wd(n,e,t,i,r){return $V(n,e)+ej(n,t)+tj(n,i)+nj(n,r)}class ww extends _s{constructor(e=new we,t=new we,i=new we,r=new we){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new we){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(wd(e,r.x,s.x,o.x,a.x),wd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class PN extends _s{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(wd(e,r.x,s.x,o.x,a.x),wd(e,r.y,s.y,o.y,a.y),wd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Mw extends _s{constructor(e=new we,t=new we){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new we){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new we){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BN extends _s{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ew extends _s{constructor(e=new we,t=new we,i=new we){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new we){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ad(e,r.x,s.x,o.x),Ad(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cw extends _s{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ad(e,r.x,s.x,o.x),Ad(e,r.y,s.y,o.y),Ad(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tw extends _s{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new we){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(n3(a,l.x,c.x,d.x,f.x),n3(a,l.y,c.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new we().fromArray(r))}return this}}var cg=Object.freeze({__proto__:null,ArcCurve:RN,CatmullRomCurve3:bN,CubicBezierCurve:ww,CubicBezierCurve3:PN,EllipseCurve:Zg,LineCurve:Mw,LineCurve3:BN,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Cw,SplineCurve:Tw});class NN extends _s{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new cg[r.type]().fromJSON(r))}return this}}class of extends NN{constructor(e){super(),this.type="Path",this.currentPoint=new we,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Mw(this.currentPoint.clone(),new we(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Ew(this.currentPoint.clone(),new we(e,t),new we(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ww(this.currentPoint.clone(),new we(e,t),new we(i,r),new we(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Tw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Zg(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Rf extends It{constructor(e=[new we(0,-.5),new we(.5,0),new we(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Dn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/t,f=new z,p=new we,m=new z,v=new z,S=new z;let y=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:y=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-y,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:y=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(v)}for(let x=0;x<=t;x++){const A=i+x*d*r,M=Math.sin(A),P=Math.cos(A);for(let I=0;I<=e.length-1;I++){f.x=e[I].x*M,f.y=e[I].y,f.z=e[I].x*P,o.push(f.x,f.y,f.z),p.x=x/t,p.y=I/(e.length-1),a.push(p.x,p.y);const L=l[3*I+0]*M,N=l[3*I+1],B=l[3*I+0]*P;c.push(L,N,B)}}for(let x=0;x<t;x++)for(let A=0;A<e.length-1;A++){const M=A+x*e.length,P=M,I=M+e.length,L=M+e.length+1,N=M+1;s.push(P,I,N),s.push(L,N,I)}this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("uv",new st(a,2)),this.setAttribute("normal",new st(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.points,e.segments,e.phiStart,e.phiLength)}}class Qg extends Rf{constructor(e=1,t=1,i=4,r=8){const s=new of;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Qg(e.radius,e.length,e.capSegments,e.radialSegments)}}class qg extends It{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new z,d=new we;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("normal",new st(a,3)),this.setAttribute("uv",new st(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class eh extends It{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],f=[],p=[],m=[];let v=0;const S=[],y=i/2;let g=0;x(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(d),this.setAttribute("position",new st(f,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function x(){const M=new z,P=new z;let I=0;const L=(t-e)/i;for(let N=0;N<=s;N++){const B=[],R=N/s,O=R*(t-e)+e;for(let Y=0;Y<=r;Y++){const $=Y/r,te=$*l+a,oe=Math.sin(te),ee=Math.cos(te);P.x=O*oe,P.y=-R*i+y,P.z=O*ee,f.push(P.x,P.y,P.z),M.set(oe,L,ee).normalize(),p.push(M.x,M.y,M.z),m.push($,1-R),B.push(v++)}S.push(B)}for(let N=0;N<r;N++)for(let B=0;B<s;B++){const R=S[B][N],O=S[B+1][N],Y=S[B+1][N+1],$=S[B][N+1];d.push(R,O,$),d.push(O,Y,$),I+=6}c.addGroup(g,I,0),g+=I}function A(M){const P=v,I=new we,L=new z;let N=0;const B=M===!0?e:t,R=M===!0?1:-1;for(let Y=1;Y<=r;Y++)f.push(0,y*R,0),p.push(0,R,0),m.push(.5,.5),v++;const O=v;for(let Y=0;Y<=r;Y++){const te=Y/r*l+a,oe=Math.cos(te),ee=Math.sin(te);L.x=B*ee,L.y=y*R,L.z=B*oe,f.push(L.x,L.y,L.z),p.push(0,R,0),I.x=oe*.5+.5,I.y=ee*.5*R+.5,m.push(I.x,I.y),v++}for(let Y=0;Y<r;Y++){const $=P+Y,te=O+Y;M===!0?d.push(te,te+1,$):d.push(te+1,te,$),N+=3}c.addGroup(g,N,M===!0?1:2),g+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $g extends eh{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new $g(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ka extends It{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),d(),this.setAttribute("position",new st(s,3)),this.setAttribute("normal",new st(s.slice(),3)),this.setAttribute("uv",new st(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const A=new z,M=new z,P=new z;for(let I=0;I<t.length;I+=3)m(t[I+0],A),m(t[I+1],M),m(t[I+2],P),l(A,M,P,x)}function l(x,A,M,P){const I=P+1,L=[];for(let N=0;N<=I;N++){L[N]=[];const B=x.clone().lerp(M,N/I),R=A.clone().lerp(M,N/I),O=I-N;for(let Y=0;Y<=O;Y++)Y===0&&N===I?L[N][Y]=B:L[N][Y]=B.clone().lerp(R,Y/O)}for(let N=0;N<I;N++)for(let B=0;B<2*(I-N)-1;B++){const R=Math.floor(B/2);B%2===0?(p(L[N][R+1]),p(L[N+1][R]),p(L[N][R])):(p(L[N][R+1]),p(L[N+1][R+1]),p(L[N+1][R]))}}function c(x){const A=new z;for(let M=0;M<s.length;M+=3)A.x=s[M+0],A.y=s[M+1],A.z=s[M+2],A.normalize().multiplyScalar(x),s[M+0]=A.x,s[M+1]=A.y,s[M+2]=A.z}function d(){const x=new z;for(let A=0;A<s.length;A+=3){x.x=s[A+0],x.y=s[A+1],x.z=s[A+2];const M=y(x)/2/Math.PI+.5,P=g(x)/Math.PI+.5;o.push(M,1-P)}v(),f()}function f(){for(let x=0;x<o.length;x+=6){const A=o[x+0],M=o[x+2],P=o[x+4],I=Math.max(A,M,P),L=Math.min(A,M,P);I>.9&&L<.1&&(A<.2&&(o[x+0]+=1),M<.2&&(o[x+2]+=1),P<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,A){const M=x*3;A.x=e[M+0],A.y=e[M+1],A.z=e[M+2]}function v(){const x=new z,A=new z,M=new z,P=new z,I=new we,L=new we,N=new we;for(let B=0,R=0;B<s.length;B+=9,R+=6){x.set(s[B+0],s[B+1],s[B+2]),A.set(s[B+3],s[B+4],s[B+5]),M.set(s[B+6],s[B+7],s[B+8]),I.set(o[R+0],o[R+1]),L.set(o[R+2],o[R+3]),N.set(o[R+4],o[R+5]),P.copy(x).add(A).add(M).divideScalar(3);const O=y(P);S(I,R+0,x,O),S(L,R+2,A,O),S(N,R+4,M,O)}}function S(x,A,M,P){P<0&&x.x===1&&(o[A]=x.x-1),M.x===0&&M.z===0&&(o[A]=P/2/Math.PI+.5)}function y(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ka(e.vertices,e.indices,e.radius,e.details)}}class ev extends ka{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ev(e.radius,e.detail)}}const bm=new z,Pm=new z,Uy=new z,Bm=new _r;class LN extends It{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(kl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],f=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:S,b:y,c:g}=Bm;if(S.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Bm.getNormal(Uy),f[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,f[1]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const A=(x+1)%3,M=f[x],P=f[A],I=Bm[d[x]],L=Bm[d[A]],N=`${M}_${P}`,B=`${P}_${M}`;B in p&&p[B]?(Uy.dot(p[B].normal)<=s&&(m.push(I.x,I.y,I.z),m.push(L.x,L.y,L.z)),p[B]=null):N in p||(p[N]={index0:c[x],index1:c[A],normal:Uy.clone()})}}for(const v in p)if(p[v]){const{index0:S,index1:y}=p[v];bm.fromBufferAttribute(a,S),Pm.fromBufferAttribute(a,y),m.push(bm.x,bm.y,bm.z),m.push(Pm.x,Pm.y,Pm.z)}this.setAttribute("position",new st(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zl extends of{constructor(e){super(e),this.uuid=Sr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new of().fromJSON(r))}return this}}const ij={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=DN(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,f,p,m;if(i&&(s=lj(n,e,s,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let v=t;v<r;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>d&&(d=p);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return af(s,o,t,a,l,m,0),o}};function DN(n,e,t,i,r){let s,o;if(r===yj(n,e,t,i)>0)for(s=e;s<t;s+=i)o=i3(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=i3(s,n[s],n[s+1],o);return o&&tv(o,o.next)&&(cf(o),o=o.next),o}function Zl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(tv(t,t.next)||In(t.prev,t,t.next)===0)){if(cf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function af(n,e,t,i,r,s,o){if(!n)return;!o&&s&&fj(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?sj(n,i,r,s):rj(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),cf(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=oj(Zl(n),e,t),af(n,e,t,i,r,s,2)):o===2&&aj(n,e,t,i,r,s):af(Zl(n),e,t,i,r,s,1);break}}}function rj(n){const e=n.prev,t=n,i=n.next;if(In(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,d=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=f&&v.y<=m&&gu(r,a,s,l,o,c,v.x,v.y)&&In(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function sj(n,e,t,i){const r=n.prev,s=n,o=n.next;if(In(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,d=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=d<f?d<p?d:p:f<p?f:p,S=a>l?a>c?a:c:l>c?l:c,y=d>f?d>p?d:p:f>p?f:p,g=uS(m,v,e,t,i),x=uS(S,y,e,t,i);let A=n.prevZ,M=n.nextZ;for(;A&&A.z>=g&&M&&M.z<=x;){if(A.x>=m&&A.x<=S&&A.y>=v&&A.y<=y&&A!==r&&A!==o&&gu(a,d,l,f,c,p,A.x,A.y)&&In(A.prev,A,A.next)>=0||(A=A.prevZ,M.x>=m&&M.x<=S&&M.y>=v&&M.y<=y&&M!==r&&M!==o&&gu(a,d,l,f,c,p,M.x,M.y)&&In(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;A&&A.z>=g;){if(A.x>=m&&A.x<=S&&A.y>=v&&A.y<=y&&A!==r&&A!==o&&gu(a,d,l,f,c,p,A.x,A.y)&&In(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;M&&M.z<=x;){if(M.x>=m&&M.x<=S&&M.y>=v&&M.y<=y&&M!==r&&M!==o&&gu(a,d,l,f,c,p,M.x,M.y)&&In(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function oj(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!tv(r,s)&&FN(r,i,i.next,s)&&lf(r,s)&&lf(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),cf(i),cf(i.next),i=n=s),i=i.next}while(i!==n);return Zl(i)}function aj(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&gj(o,a)){let l=ON(o,a);o=Zl(o,o.next),l=Zl(l,l.next),af(o,e,t,i,r,s,0),af(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function lj(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=DN(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(mj(c));for(r.sort(cj),s=0;s<r.length;s++)t=uj(r[s],t);return t}function cj(n,e){return n.x-e.x}function uj(n,e){const t=hj(n,e);if(!t)return e;const i=ON(t,n);return Zl(i,i.next),Zl(t,t.next)}function hj(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let d=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&gu(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),lf(t,n)&&(f<d||f===d&&(t.x>r.x||t.x===r.x&&dj(r,t)))&&(r=t,d=f)),t=t.next;while(t!==a);return r}function dj(n,e){return In(n.prev,n,e.prev)<0&&In(e.next,n,n.next)<0}function fj(n,e,t,i){let r=n;do r.z===0&&(r.z=uS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,pj(r)}function pj(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function uS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function mj(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function gu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function gj(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!vj(n,e)&&(lf(n,e)&&lf(e,n)&&_j(n,e)&&(In(n.prev,n,e.prev)||In(n,e.prev,e))||tv(n,e)&&In(n.prev,n,n.next)>0&&In(e.prev,e,e.next)>0)}function In(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function tv(n,e){return n.x===e.x&&n.y===e.y}function FN(n,e,t,i){const r=Lm(In(n,e,t)),s=Lm(In(n,e,i)),o=Lm(In(t,i,n)),a=Lm(In(t,i,e));return!!(r!==s&&o!==a||r===0&&Nm(n,t,e)||s===0&&Nm(n,i,e)||o===0&&Nm(t,n,i)||a===0&&Nm(t,e,i))}function Nm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Lm(n){return n>0?1:n<0?-1:0}function vj(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function lf(n,e){return In(n.prev,n,n.next)<0?In(n,e,n.next)>=0&&In(n,n.prev,e)>=0:In(n,e,n.prev)<0||In(n,n.next,e)<0}function _j(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function ON(n,e){const t=new hS(n.i,n.x,n.y),i=new hS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function i3(n,e,t,i){const r=new hS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function cf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function hS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yj(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class js{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return js.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];r3(e),s3(i,e);let o=e.length;t.forEach(r3);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,s3(i,t[l]);const a=ij.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function r3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function s3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class nv extends It{constructor(e=new zl([new we(.5,.5),new we(-.5,.5),new we(-.5,-.5),new we(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new st(r,3)),this.setAttribute("uv",new st(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:xj;let A,M=!1,P,I,L,N;g&&(A=g.getSpacedPoints(d),M=!0,p=!1,P=g.computeFrenetFrames(d,!1),I=new z,L=new z,N=new z),p||(y=0,m=0,v=0,S=0);const B=a.extractPoints(c);let R=B.shape;const O=B.holes;if(!js.isClockWise(R)){R=R.reverse();for(let Ee=0,Se=O.length;Ee<Se;Ee++){const De=O[Ee];js.isClockWise(De)&&(O[Ee]=De.reverse())}}const $=js.triangulateShape(R,O),te=R;for(let Ee=0,Se=O.length;Ee<Se;Ee++){const De=O[Ee];R=R.concat(De)}function oe(Ee,Se,De){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ee.clone().addScaledVector(Se,De)}const ee=R.length,pe=$.length;function U(Ee,Se,De){let Be,Ne,Ye;const Je=Ee.x-Se.x,St=Ee.y-Se.y,W=De.x-Ee.x,F=De.y-Ee.y,de=Je*Je+St*St,Re=Je*F-St*W;if(Math.abs(Re)>Number.EPSILON){const Ce=Math.sqrt(de),be=Math.sqrt(W*W+F*F),ot=Se.x-St/Ce,He=Se.y+Je/Ce,Ve=De.x-F/be,_t=De.y+W/be,Fe=((Ve-ot)*F-(_t-He)*W)/(Je*F-St*W);Be=ot+Je*Fe-Ee.x,Ne=He+St*Fe-Ee.y;const rt=Be*Be+Ne*Ne;if(rt<=2)return new we(Be,Ne);Ye=Math.sqrt(rt/2)}else{let Ce=!1;Je>Number.EPSILON?W>Number.EPSILON&&(Ce=!0):Je<-Number.EPSILON?W<-Number.EPSILON&&(Ce=!0):Math.sign(St)===Math.sign(F)&&(Ce=!0),Ce?(Be=-St,Ne=Je,Ye=Math.sqrt(de)):(Be=Je,Ne=St,Ye=Math.sqrt(de/2))}return new we(Be/Ye,Ne/Ye)}const Z=[];for(let Ee=0,Se=te.length,De=Se-1,Be=Ee+1;Ee<Se;Ee++,De++,Be++)De===Se&&(De=0),Be===Se&&(Be=0),Z[Ee]=U(te[Ee],te[De],te[Be]);const K=[];let ae,ve=Z.concat();for(let Ee=0,Se=O.length;Ee<Se;Ee++){const De=O[Ee];ae=[];for(let Be=0,Ne=De.length,Ye=Ne-1,Je=Be+1;Be<Ne;Be++,Ye++,Je++)Ye===Ne&&(Ye=0),Je===Ne&&(Je=0),ae[Be]=U(De[Be],De[Ye],De[Je]);K.push(ae),ve=ve.concat(ae)}for(let Ee=0;Ee<y;Ee++){const Se=Ee/y,De=m*Math.cos(Se*Math.PI/2),Be=v*Math.sin(Se*Math.PI/2)+S;for(let Ne=0,Ye=te.length;Ne<Ye;Ne++){const Je=oe(te[Ne],Z[Ne],Be);Ie(Je.x,Je.y,-De)}for(let Ne=0,Ye=O.length;Ne<Ye;Ne++){const Je=O[Ne];ae=K[Ne];for(let St=0,W=Je.length;St<W;St++){const F=oe(Je[St],ae[St],Be);Ie(F.x,F.y,-De)}}}const Oe=v+S;for(let Ee=0;Ee<ee;Ee++){const Se=p?oe(R[Ee],ve[Ee],Oe):R[Ee];M?(L.copy(P.normals[0]).multiplyScalar(Se.x),I.copy(P.binormals[0]).multiplyScalar(Se.y),N.copy(A[0]).add(L).add(I),Ie(N.x,N.y,N.z)):Ie(Se.x,Se.y,0)}for(let Ee=1;Ee<=d;Ee++)for(let Se=0;Se<ee;Se++){const De=p?oe(R[Se],ve[Se],Oe):R[Se];M?(L.copy(P.normals[Ee]).multiplyScalar(De.x),I.copy(P.binormals[Ee]).multiplyScalar(De.y),N.copy(A[Ee]).add(L).add(I),Ie(N.x,N.y,N.z)):Ie(De.x,De.y,f/d*Ee)}for(let Ee=y-1;Ee>=0;Ee--){const Se=Ee/y,De=m*Math.cos(Se*Math.PI/2),Be=v*Math.sin(Se*Math.PI/2)+S;for(let Ne=0,Ye=te.length;Ne<Ye;Ne++){const Je=oe(te[Ne],Z[Ne],Be);Ie(Je.x,Je.y,f+De)}for(let Ne=0,Ye=O.length;Ne<Ye;Ne++){const Je=O[Ne];ae=K[Ne];for(let St=0,W=Je.length;St<W;St++){const F=oe(Je[St],ae[St],Be);M?Ie(F.x,F.y+A[d-1].y,A[d-1].x+De):Ie(F.x,F.y,f+De)}}}le(),Ae();function le(){const Ee=r.length/3;if(p){let Se=0,De=ee*Se;for(let Be=0;Be<pe;Be++){const Ne=$[Be];dt(Ne[2]+De,Ne[1]+De,Ne[0]+De)}Se=d+y*2,De=ee*Se;for(let Be=0;Be<pe;Be++){const Ne=$[Be];dt(Ne[0]+De,Ne[1]+De,Ne[2]+De)}}else{for(let Se=0;Se<pe;Se++){const De=$[Se];dt(De[2],De[1],De[0])}for(let Se=0;Se<pe;Se++){const De=$[Se];dt(De[0]+ee*d,De[1]+ee*d,De[2]+ee*d)}}i.addGroup(Ee,r.length/3-Ee,0)}function Ae(){const Ee=r.length/3;let Se=0;xe(te,Se),Se+=te.length;for(let De=0,Be=O.length;De<Be;De++){const Ne=O[De];xe(Ne,Se),Se+=Ne.length}i.addGroup(Ee,r.length/3-Ee,1)}function xe(Ee,Se){let De=Ee.length;for(;--De>=0;){const Be=De;let Ne=De-1;Ne<0&&(Ne=Ee.length-1);for(let Ye=0,Je=d+y*2;Ye<Je;Ye++){const St=ee*Ye,W=ee*(Ye+1),F=Se+Be+St,de=Se+Ne+St,Re=Se+Ne+W,Ce=Se+Be+W;xt(F,de,Re,Ce)}}}function Ie(Ee,Se,De){l.push(Ee),l.push(Se),l.push(De)}function dt(Ee,Se,De){mt(Ee),mt(Se),mt(De);const Be=r.length/3,Ne=x.generateTopUV(i,r,Be-3,Be-2,Be-1);Q(Ne[0]),Q(Ne[1]),Q(Ne[2])}function xt(Ee,Se,De,Be){mt(Ee),mt(Se),mt(Be),mt(Se),mt(De),mt(Be);const Ne=r.length/3,Ye=x.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Q(Ye[0]),Q(Ye[1]),Q(Ye[3]),Q(Ye[1]),Q(Ye[2]),Q(Ye[3])}function mt(Ee){r.push(l[Ee*3+0]),r.push(l[Ee*3+1]),r.push(l[Ee*3+2])}function Q(Ee){s.push(Ee.x),s.push(Ee.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Sj(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new cg[r.type]().fromJSON(r)),new nv(i,e.options)}}const xj={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new we(s,o),new we(a,l),new we(c,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],d=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],S=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new we(o,1-l),new we(c,1-f),new we(p,1-v),new we(S,1-g)]:[new we(a,1-l),new we(d,1-f),new we(m,1-v),new we(y,1-g)]}};function Sj(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bf extends ka{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bf(e.radius,e.detail)}}class Pf extends ka{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pf(e.radius,e.detail)}}class iv extends It{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],d=[];let f=e;const p=(t-e)/r,m=new z,v=new we;for(let S=0;S<=r;S++){for(let y=0;y<=i;y++){const g=s+y/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y)}f+=p}for(let S=0;S<r;S++){const y=S*(i+1);for(let g=0;g<i;g++){const x=g+y,A=x,M=x+i+1,P=x+i+2,I=x+1;a.push(A,M,I),a.push(M,P,I)}}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(c,3)),this.setAttribute("uv",new st(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class rv extends It{constructor(e=new zl([new we(0,.5),new we(-.5,-.5),new we(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new st(r,3)),this.setAttribute("normal",new st(s,3)),this.setAttribute("uv",new st(o,2));function c(d){const f=r.length/3,p=d.extractPoints(t);let m=p.shape;const v=p.holes;js.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const x=v[y];js.isClockWise(x)===!0&&(v[y]=x.reverse())}const S=js.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const x=v[y];m=m.concat(x)}for(let y=0,g=m.length;y<g;y++){const x=m[y];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let y=0,g=S.length;y<g;y++){const x=S[y],A=x[0]+f,M=x[1]+f,P=x[2]+f;i.push(A,M,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Aj(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new rv(i,e.curveSegments)}}function Aj(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Bf extends It{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new z,p=new z,m=[],v=[],S=[],y=[];for(let g=0;g<=i;g++){const x=[],A=g/i;let M=0;g===0&&o===0?M=.5/t:g===i&&l===Math.PI&&(M=-.5/t);for(let P=0;P<=t;P++){const I=P/t;f.x=-e*Math.cos(r+I*s)*Math.sin(o+A*a),f.y=e*Math.cos(o+A*a),f.z=e*Math.sin(r+I*s)*Math.sin(o+A*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),S.push(p.x,p.y,p.z),y.push(I+M,1-A),x.push(c++)}d.push(x)}for(let g=0;g<i;g++)for(let x=0;x<t;x++){const A=d[g][x+1],M=d[g][x],P=d[g+1][x],I=d[g+1][x+1];(g!==0||o>0)&&m.push(A,M,I),(g!==i-1||l<Math.PI)&&m.push(M,P,I)}this.setIndex(m),this.setAttribute("position",new st(v,3)),this.setAttribute("normal",new st(S,3)),this.setAttribute("uv",new st(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sv extends ka{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sv(e.radius,e.detail)}}class ov extends It{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],d=new z,f=new z,p=new z;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const S=v/r*s,y=m/i*Math.PI*2;f.x=(e+t*Math.cos(y))*Math.cos(S),f.y=(e+t*Math.cos(y))*Math.sin(S),f.z=t*Math.sin(y),a.push(f.x,f.y,f.z),d.x=e*Math.cos(S),d.y=e*Math.sin(S),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const S=(r+1)*m+v-1,y=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,x=(r+1)*m+v;o.push(S,y,x),o.push(y,g,x)}this.setIndex(o),this.setAttribute("position",new st(a,3)),this.setAttribute("normal",new st(l,3)),this.setAttribute("uv",new st(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class av extends It{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],d=[],f=new z,p=new z,m=new z,v=new z,S=new z,y=new z,g=new z;for(let A=0;A<=i;++A){const M=A/i*s*Math.PI*2;x(M,s,o,e,m),x(M+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),S.crossVectors(y,g),g.crossVectors(S,y),S.normalize(),g.normalize();for(let P=0;P<=r;++P){const I=P/r*Math.PI*2,L=-t*Math.cos(I),N=t*Math.sin(I);f.x=m.x+(L*g.x+N*S.x),f.y=m.y+(L*g.y+N*S.y),f.z=m.z+(L*g.z+N*S.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),d.push(A/i),d.push(P/r)}}for(let A=1;A<=i;A++)for(let M=1;M<=r;M++){const P=(r+1)*(A-1)+(M-1),I=(r+1)*A+(M-1),L=(r+1)*A+M,N=(r+1)*(A-1)+M;a.push(P,I,N),a.push(I,L,N)}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(c,3)),this.setAttribute("uv",new st(d,2));function x(A,M,P,I,L){const N=Math.cos(A),B=Math.sin(A),R=P/M*A,O=Math.cos(R);L.x=I*(2+O)*.5*N,L.y=I*(2+O)*B*.5,L.z=I*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new av(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lv extends It{constructor(e=new Cw(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new z,l=new z,c=new we;let d=new z;const f=[],p=[],m=[],v=[];S(),this.setIndex(v),this.setAttribute("position",new st(f,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function S(){for(let A=0;A<t;A++)y(A);y(s===!1?t:0),x(),g()}function y(A){d=e.getPointAt(A/t,d);const M=o.normals[A],P=o.binormals[A];for(let I=0;I<=r;I++){const L=I/r*Math.PI*2,N=Math.sin(L),B=-Math.cos(L);l.x=B*M.x+N*P.x,l.y=B*M.y+N*P.y,l.z=B*M.z+N*P.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let A=1;A<=t;A++)for(let M=1;M<=r;M++){const P=(r+1)*(A-1)+(M-1),I=(r+1)*A+(M-1),L=(r+1)*A+M,N=(r+1)*(A-1)+M;v.push(P,I,N),v.push(I,L,N)}}function x(){for(let A=0;A<=t;A++)for(let M=0;M<=r;M++)c.x=A/t,c.y=M/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lv(new cg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class UN extends It{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new z,s=new z;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const f=l[c],p=f.start,m=f.count;for(let v=p,S=p+m;v<S;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),x=a.getX(v+(y+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),o3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,f),o3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new st(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function o3(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var a3=Object.freeze({__proto__:null,BoxGeometry:ic,CapsuleGeometry:Qg,CircleGeometry:qg,ConeGeometry:$g,CylinderGeometry:eh,DodecahedronGeometry:ev,EdgesGeometry:LN,ExtrudeGeometry:nv,IcosahedronGeometry:bf,LatheGeometry:Rf,OctahedronGeometry:Pf,PlaneGeometry:Ua,PolyhedronGeometry:ka,RingGeometry:iv,ShapeGeometry:rv,SphereGeometry:Bf,TetrahedronGeometry:sv,TorusGeometry:ov,TorusKnotGeometry:av,TubeGeometry:lv,WireframeGeometry:UN});class kN extends Yn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class GN extends lr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Nf extends Yn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $r extends Nf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new we(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new je(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zN extends Yn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new je(16777215),this.specular=new je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=Af,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HN extends Yn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class VN extends Yn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class jN extends Yn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=Af,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WN extends Yn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oa,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class XN extends Fi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Pl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function JN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function KN(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function dS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function Iw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function wj(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){f.push(c.times[m]);for(let S=0;S<d;++S)p.push(c.values[m*d+S])}}f.length!==0&&(c.times=Pl(f,c.times.constructor),c.values=Pl(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Mj(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let S;if(s<=a.times[0]){const g=d,x=f-d;S=a.values.slice(g,x)}else if(s>=a.times[v]){const g=v*f+d,x=g+f-d;S=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=d,A=f-d;g.evaluate(s),S=g.resultBuffer.slice(x,A)}l==="quaternion"&&new gi().fromArray(S).normalize().conjugate().toArray(S);const y=c.times.length;for(let g=0;g<y;++g){const x=g*m+p;if(l==="quaternion")gi.multiplyQuaternionsFlat(c.values,x,S,0,c.values,x);else{const A=m-p*2;for(let M=0;M<A;++M)c.values[x+M]-=S[M]}}}return n.blendMode=nw,n}const Ej={convertArray:Pl,isTypedArray:JN,getKeyframeOrder:KN,sortedArray:dS,flattenJSON:Iw,subclip:wj,makeClipAdditive:Mj};class th{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class YN extends th{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Tl,endingEnd:Tl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Il:s=e,a=2*t-i;break;case qd:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Il:o=e,l=2*i-t;break;case qd:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),S=v*v,y=S*v,g=-p*y+2*p*S-p*v,x=(1+p)*y+(-1.5-2*p)*S+(-.5+p)*v+1,A=(-1-m)*y+(1.5+m)*S+.5*v,M=m*y-m*S;for(let P=0;P!==a;++P)s[P]=g*o[d+P]+x*o[c+P]+A*o[l+P]+M*o[f+P];return s}}class Rw extends th{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-t)/(r-t),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class ZN extends th{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ys{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pl(t,this.TimeBufferType),this.values=Pl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Pl(e.times,Array),values:Pl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new ZN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Rw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new YN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Uu:t=this.InterpolantFactoryMethodDiscrete;break;case ku:t=this.InterpolantFactoryMethodLinear;break;case x0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Uu;case this.InterpolantFactoryMethodLinear:return ku;case this.InterpolantFactoryMethodSmooth:return x0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&JN(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===x0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let v=0;v!==i;++v){const S=t[f+v];if(S!==t[p+v]||S!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ys.prototype.TimeBufferType=Float32Array;ys.prototype.ValueBufferType=Float32Array;ys.prototype.DefaultInterpolation=ku;class sc extends ys{constructor(e,t,i){super(e,t,i)}}sc.prototype.ValueTypeName="bool";sc.prototype.ValueBufferType=Array;sc.prototype.DefaultInterpolation=Uu;sc.prototype.InterpolantFactoryMethodLinear=void 0;sc.prototype.InterpolantFactoryMethodSmooth=void 0;class bw extends ys{}bw.prototype.ValueTypeName="color";class Ql extends ys{}Ql.prototype.ValueTypeName="number";class QN extends th{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)gi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ql extends ys{InterpolantFactoryMethodLinear(e){return new QN(this.times,this.values,this.getValueSize(),e)}}ql.prototype.ValueTypeName="quaternion";ql.prototype.InterpolantFactoryMethodSmooth=void 0;class oc extends ys{constructor(e,t,i){super(e,t,i)}}oc.prototype.ValueTypeName="string";oc.prototype.ValueBufferType=Array;oc.prototype.DefaultInterpolation=Uu;oc.prototype.InterpolantFactoryMethodLinear=void 0;oc.prototype.InterpolantFactoryMethodSmooth=void 0;class $l extends ys{}$l.prototype.ValueTypeName="vector";class Vu{constructor(e="",t=-1,i=[],r=zg){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Sr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Tj(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(ys.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=KN(l);l=dS(l,1,d),c=dS(c,1,d),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Ql(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const f=d[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,v,S){if(m.length!==0){const y=[],g=[];Iw(m,y,g,v),y.length!==0&&S.push(new f(p,y,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let S=0;S<p[v].morphTargets.length;S++)m[p[v].morphTargets[S]]=-1;for(const S in m){const y=[],g=[];for(let x=0;x!==p[v].morphTargets.length;++x){const A=p[v];y.push(A.time),g.push(A.morphTarget===S?1:0)}r.push(new Ql(".morphTargetInfluence["+S+"]",y,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i($l,m+".position",p,"pos",r),i(ql,m+".quaternion",p,"rot",r),i($l,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Cj(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ql;case"vector":case"vector2":case"vector3":case"vector4":return $l;case"color":return bw;case"quaternion":return ql;case"bool":case"boolean":return sc;case"string":return oc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Tj(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Cj(n.type);if(n.times===void 0){const t=[],i=[];Iw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const go={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class cv{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return f!==-1&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],v=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return v}return null}}}const qN=new cv;class xi{constructor(e){this.manager=e!==void 0?e:qN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}xi.DEFAULT_MATERIAL_NAME="__DEFAULT";const so={};class Ij extends Error{constructor(e,t){super(e),this.response=t}}class _i extends xi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=go.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(so[e]!==void 0){so[e].push({onLoad:t,onProgress:i,onError:r});return}so[e]=[],so[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=so[e],f=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let S=0;const y=new ReadableStream({start(g){x();function x(){f.read().then(({done:A,value:M})=>{if(A)g.close();else{S+=M.byteLength;const P=new ProgressEvent("progress",{lengthComputable:v,loaded:S,total:m});for(let I=0,L=d.length;I<L;I++){const N=d[I];N.onProgress&&N.onProgress(P)}g.enqueue(M),x()}},A=>{g.error(A)})}}});return new Response(y)}else throw new Ij(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{go.add(e,c);const d=so[e];delete so[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=so[e];if(d===void 0)throw this.manager.itemError(e),c;delete so[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Rj extends xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new _i(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Vu.parse(e[i]);t.push(r)}return t}}class bj extends xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Yg,l=new _i(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=rn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)d(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+S]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=rn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class uf extends xi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=go.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=sf("img");function l(){d(),go.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){d(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class $N extends xi{constructor(e){super(e)}load(e,t,i,r){const s=new Ef;s.colorSpace=vr;const o=new uf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Pw extends xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Vs,a=new _i(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Hn,o.wrapT=c.wrapT!==void 0?c.wrapT:Hn,o.magFilter=c.magFilter!==void 0?c.magFilter:rn,o.minFilter=c.minFilter!==void 0?c.minFilter:rn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Kr),c.mipmapCount===1&&(o.minFilter=rn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class eL extends xi{constructor(e){super(e)}load(e,t,i,r){const s=new sn,o=new uf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ga extends Ht{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class tL extends Ga{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.groundColor=new je(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ky=new ht,l3=new z,c3=new z;class Bw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new we(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cf,this._frameExtents=new we(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;l3.setFromMatrixPosition(e.matrixWorld),t.position.copy(l3),c3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(c3),t.updateMatrixWorld(),ky.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ky),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(ky)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Pj extends Bw{constructor(){super(new qn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Gu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Nw extends Ga{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.target=new Ht,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Pj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const u3=new ht,Vh=new z,Gy=new z;class Bj extends Bw{constructor(){super(new qn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new we(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Vh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Vh),Gy.copy(i.position),Gy.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Gy),i.updateMatrixWorld(),r.makeTranslation(-Vh.x,-Vh.y,-Vh.z),u3.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u3)}}class Lw extends Ga{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Bj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Nj extends Bw{constructor(){super(new rc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Dw extends Ga{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ht.DEFAULT_UP),this.updateMatrix(),this.target=new Ht,this.shadow=new Nj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class nL extends Ga{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class iL extends Ga{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class rL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class sL extends Ga{constructor(e=new rL,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class uv extends xi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new _i(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=uv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new je().setHex(o.value);break;case"v2":r.uniforms[s].value=new we().fromArray(o.value);break;case"v3":r.uniforms[s].value=new z().fromArray(o.value);break;case"v4":r.uniforms[s].value=new ln().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Rt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ht().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new we().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new we().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:kN,SpriteMaterial:vw,RawShaderMaterial:GN,ShaderMaterial:lr,PointsMaterial:Kg,MeshPhysicalMaterial:$r,MeshStandardMaterial:Nf,MeshPhongMaterial:zN,MeshToonMaterial:HN,MeshNormalMaterial:VN,MeshLambertMaterial:jN,MeshDepthMaterial:pw,MeshDistanceMaterial:mw,MeshBasicMaterial:rr,MeshMatcapMaterial:WN,LineDashedMaterial:XN,LineBasicMaterial:Fi,Material:Yn};return new t[e]}}class ya{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class oL extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class aL extends xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new _i(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),x=pu(y.type,g),A=new Tf(x,y.stride);return A.uuid=y.uuid,t[v]=A,A}function s(m,v){if(i[v]!==void 0)return i[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new oL:new It,a=e.data.index;if(a!==void 0){const m=pu(a.type,a.array);o.setIndex(new Kt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let S;if(v.isInterleavedBufferAttribute){const y=r(e.data,v.data);S=new Ra(y,v.itemSize,v.offset,v.normalized)}else{const y=pu(v.type,v.array),g=v.isInstancedBufferAttribute?Yl:Kt;S=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(S.name=v.name),v.usage!==void 0&&S.setUsage(v.usage),o.setAttribute(m,S)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],S=[];for(let y=0,g=v.length;y<g;y++){const x=v[y];let A;if(x.isInterleavedBufferAttribute){const M=r(e.data,x.data);A=new Ra(M,x.itemSize,x.offset,x.normalized)}else{const M=pu(x.type,x.array);A=new Kt(M,x.itemSize,x.normalized)}x.name!==void 0&&(A.name=x.name),S.push(A)}o.morphAttributes[m]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const S=f[m];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new z;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ui(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Lj extends xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?ya.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new _i(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ya.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new _i(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new zl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new If().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new aL;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in a3?a=a3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new uv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Vu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(d)}else return l.data?{data:pu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new cv(t);s=new uf(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const y=p[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Vs(g.data,g.width,g.height)))}r[f.uuid]=new Rl(m)}else{const m=a(f.url);r[f.uuid]=new Rl(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:pu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new uf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Vs(v.data,v.width,v.height)))}i[l.uuid]=new Rl(d)}else{const d=await s(l.url);i[l.uuid]=new Rl(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let d;Array.isArray(c)?(d=new Ef,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Vs:d=new sn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,Dj)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],h3),d.wrapT=i(a.wrap[1],h3)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,d3)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,d3)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const y=p[v];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(i[y])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let d,f;switch(e.type){case"Scene":o=new Hu,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new je(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Xg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Wg(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new qn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new rc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new nL(e.color,e.intensity);break;case"DirectionalLight":o=new Dw(e.color,e.intensity);break;case"PointLight":o=new Lw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new iL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Nw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new tL(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new sL().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),f=l(e.material),o=new _w(d,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),f=l(e.material),o=new wn(d,f);break;case"InstancedMesh":d=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new yw(d,f,p),o.instanceMatrix=new Yl(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Yl(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":d=a(e.geometry),f=l(e.material),o=new IN(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(S=>{const y=new vi;y.min.fromArray(S.boxMin),y.max.fromArray(S.boxMax);const g=new ui;return g.radius=S.sphereRadius,g.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:y,sphereInitialized:S.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new TN;break;case"Line":o=new Co(a(e.geometry),l(e.material));break;case"LineLoop":o=new xw(a(e.geometry),l(e.material));break;case"LineSegments":o=new vs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Sw(a(e.geometry),l(e.material));break;case"Sprite":o=new CN(l(e.material));break;case"Group":o=new mo;break;case"Bone":o=new Jg;break;default:o=new Ht}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],S=o.getObjectByProperty("uuid",v.object);S!==void 0&&o.addLevel(S,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Dj={UVMapping:Ea,CubeReflectionMapping:Xs,CubeRefractionMapping:Ca,EquirectangularReflectionMapping:Fu,EquirectangularRefractionMapping:Zd,CubeUVReflectionMapping:Qu},h3={RepeatWrapping:Ta,ClampToEdgeWrapping:Hn,MirroredRepeatWrapping:Ou},d3={NearestFilter:ei,NearestMipmapNearestFilter:Ug,NearestMipmapLinearFilter:Cl,LinearFilter:rn,LinearMipmapNearestFilter:Mu,LinearMipmapLinearFilter:Kr};class lL extends xi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=go.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return go.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),go.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});go.add(e,l),s.manager.itemStart(e)}}let Dm;class Fw{static getContext(){return Dm===void 0&&(Dm=new(window.AudioContext||window.webkitAudioContext)),Dm}static setContext(e){Dm=e}}class Fj extends xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new _i(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);Fw.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const f3=new ht,p3=new ht,ol=new ht;class Oj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ol.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(kl*t.fov*.5)/t.zoom;let a,l;p3.elements[12]=-r,f3.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,ol.elements[0]=2*t.near/(l-a),ol.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ol),a=-o*t.aspect-s,l=o*t.aspect-s,ol.elements[0]=2*t.near/(l-a),ol.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ol)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(p3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(f3)}}class Ow{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=m3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=m3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function m3(){return(typeof performance>"u"?Date:performance).now()}const al=new z,g3=new gi,Uj=new z,ll=new z;class kj extends Ht{constructor(){super(),this.type="AudioListener",this.context=Fw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ow}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(al,g3,Uj),ll.set(0,0,-1).applyQuaternion(g3),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(al.x,r),t.positionY.linearRampToValueAtTime(al.y,r),t.positionZ.linearRampToValueAtTime(al.z,r),t.forwardX.linearRampToValueAtTime(ll.x,r),t.forwardY.linearRampToValueAtTime(ll.y,r),t.forwardZ.linearRampToValueAtTime(ll.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(al.x,al.y,al.z),t.setOrientation(ll.x,ll.y,ll.z,i.x,i.y,i.z)}}class cL extends Ht{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const cl=new z,v3=new gi,Gj=new z,ul=new z;class zj extends cL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(cl,v3,Gj),ul.set(0,0,1).applyQuaternion(v3);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(cl.x,i),t.positionY.linearRampToValueAtTime(cl.y,i),t.positionZ.linearRampToValueAtTime(cl.z,i),t.orientationX.linearRampToValueAtTime(ul.x,i),t.orientationY.linearRampToValueAtTime(ul.y,i),t.orientationZ.linearRampToValueAtTime(ul.z,i)}else t.setPosition(cl.x,cl.y,cl.z),t.setOrientation(ul.x,ul.y,ul.z)}}class Hj{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class uL{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){gi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;gi.multiplyQuaternionsFlat(e,o,e,t,e,i),gi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Uw="\\[\\]\\.:\\/",Vj=new RegExp("["+Uw+"]","g"),kw="[^"+Uw+"]",jj="[^"+Uw.replace("\\.","")+"]",Wj=/((?:WC+[\/:])*)/.source.replace("WC",kw),Xj=/(WCOD+)?/.source.replace("WCOD",jj),Jj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kw),Kj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kw),Yj=new RegExp("^"+Wj+Xj+Jj+Kj+"$"),Zj=["material","materials","bones","map"];class Qj{constructor(e,t,i){const r=i||Jt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Jt{constructor(e,t,i){this.path=t,this.parsedPath=i||Jt.parseTrackName(t),this.node=Jt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Jt.Composite(e,t,i):new Jt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Vj,"")}static parseTrackName(e){const t=Yj.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Zj.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Jt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Jt.Composite=Qj;Jt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Jt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Jt.prototype.GetterByBindingType=[Jt.prototype._getValue_direct,Jt.prototype._getValue_array,Jt.prototype._getValue_arrayElement,Jt.prototype._getValue_toArray];Jt.prototype.SetterByBindingTypeAndVersioning=[[Jt.prototype._setValue_direct,Jt.prototype._setValue_direct_setNeedsUpdate,Jt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_array,Jt.prototype._setValue_array_setNeedsUpdate,Jt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_arrayElement,Jt.prototype._setValue_arrayElement_setNeedsUpdate,Jt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Jt.prototype._setValue_fromArray,Jt.prototype._setValue_fromArray_setNeedsUpdate,Jt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Sr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const p=arguments[d],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let S=0,y=o;S!==y;++S)s[S].push(new Jt(p,i[S],r[S]))}else if(v<c){a=e[v];const S=--c,y=e[S];t[y.uuid]=v,e[v]=y,t[m]=S,e[S]=p;for(let g=0,x=o;g!==x;++g){const A=s[g],M=A[S];let P=A[v];A[v]=M,P===void 0&&(P=new Jt(p,i[g],r[g])),A[S]=P}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=t[c];if(d!==void 0&&d>=s){const f=s++,p=e[f];t[p.uuid]=d,e[d]=p,t[c]=f,e[f]=l;for(let m=0,v=r;m!==v;++m){const S=i[m],y=S[f],g=S[d];S[d]=y,S[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,f=t[d];if(f!==void 0)if(delete t[d],f<s){const p=--s,m=e[p],v=--o,S=e[v];t[m.uuid]=f,e[f]=m,t[S.uuid]=p,e[p]=S,e.pop();for(let y=0,g=r;y!==g;++y){const x=i[y],A=x[p],M=x[v];x[f]=A,x[p]=M,x.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,S=r;v!==S;++v){const y=i[v];y[f]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=d,m=l.length;p!==m;++p){const v=l[p];f[p]=new Jt(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class hL{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Tl,endingEnd:Tl};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ZB,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case nw:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case zg:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===QB;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===YB){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Il,r.endingEnd=Il):(e?r.endingStart=this.zeroSlopeAtStart?Il:Tl:r.endingStart=qd,t?r.endingEnd=this.zeroSlopeAtEnd?Il:Tl:r.endingEnd=qd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const $j=new Float32Array(1);class dL extends Io{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let v=d[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const S=t&&t._propertyBindings[f].binding.parsedPath;v=new uL(Jt.create(i,m,S),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Rw(new Float32Array(2),new Float32Array(2),1,$j),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Vu.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=zg),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new hL(this,o,t,i);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Vu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=d,t[d]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Gw{constructor(e){this.value=e}clone(){return new Gw(this.value.clone===void 0?this.value:this.value.clone())}}let eW=0;class tW extends Io{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:eW++}),this.name="",this.usage=nf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class nW extends Tf{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class iW{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const _3=new ht;class hv{constructor(e,t,i=0,r=1/0){this.ray=new qu(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Gl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return _3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_3),this}intersectObject(e,t=!0,i=[]){return fS(e,this,i,t),i.sort(y3),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)fS(e[r],this,i,t);return i.sort(y3),i}}function y3(n,e){return n.distance-e.distance}function fS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)fS(s[o],e,t,!0)}}class fL{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Dn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class rW{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const x3=new we;class sW{constructor(e=new we(1/0,1/0),t=new we(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=x3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,x3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const S3=new z,Fm=new z;class oW{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){S3.subVectors(e,this.start),Fm.subVectors(this.end,this.start);const i=Fm.dot(Fm);let s=Fm.dot(S3)/i;return t&&(s=Dn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const A3=new z;class aW extends Ht{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new It,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new st(r,3));const s=new Fi({fog:!1,toneMapped:!1});this.cone=new vs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),A3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(A3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Wo=new z,Om=new ht,zy=new ht;class lW extends vs{constructor(e){const t=pL(e),i=new It,r=[],s=[],o=new je(0,0,1),a=new je(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new st(r,3)),i.setAttribute("color",new st(s,3));const l=new Fi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");zy.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Om.multiplyMatrices(zy,a.matrixWorld),Wo.setFromMatrixPosition(Om),r.setXYZ(o,Wo.x,Wo.y,Wo.z),Om.multiplyMatrices(zy,a.parent.matrixWorld),Wo.setFromMatrixPosition(Om),r.setXYZ(o+1,Wo.x,Wo.y,Wo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function pL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,pL(n.children[t]));return e}class cW extends wn{constructor(e,t,i){const r=new Bf(t,4,2),s=new rr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const uW=new z,w3=new je,M3=new je;class hW extends Ht{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Pf(t);r.rotateY(Math.PI*.5),this.material=new rr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Kt(o,3)),this.add(new wn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");w3.copy(this.light.color),M3.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?w3:M3;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(uW.setFromMatrixPosition(this.light.matrixWorld).negate())}}class dW extends vs{constructor(e=10,t=10,i=4473924,r=8947848){i=new je(i),r=new je(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const S=p===s?i:r;S.toArray(c,m),m+=3,S.toArray(c,m),m+=3,S.toArray(c,m),m+=3,S.toArray(c,m),m+=3}const d=new It;d.setAttribute("position",new st(l,3)),d.setAttribute("color",new st(c,3));const f=new Fi({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class fW extends vs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new je(s),o=new je(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const S=f&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let v=0;v<r;v++){let S=v/r*(Math.PI*2),y=Math.sin(S)*m,g=Math.cos(S)*m;a.push(y,0,g),l.push(p.r,p.g,p.b),S=(v+1)/r*(Math.PI*2),y=Math.sin(S)*m,g=Math.cos(S)*m,a.push(y,0,g),l.push(p.r,p.g,p.b)}}const c=new It;c.setAttribute("position",new st(a,3)),c.setAttribute("color",new st(l,3));const d=new Fi({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const E3=new z,Um=new z,C3=new z;class pW extends Ht{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new It;r.setAttribute("position",new st([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Fi({fog:!1,toneMapped:!1});this.lightPlane=new Co(r,s),this.add(this.lightPlane),r=new It,r.setAttribute("position",new st([0,0,0,0,0,1],3)),this.targetLine=new Co(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),E3.setFromMatrixPosition(this.light.matrixWorld),Um.setFromMatrixPosition(this.light.target.matrixWorld),C3.subVectors(Um,E3),this.lightPlane.lookAt(Um),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Um),this.targetLine.scale.z=C3.length()}}const km=new z,Nn=new Mf;class mW extends vs{constructor(e){const t=new It,i=new Fi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,S){l(v),l(S)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new st(r,3)),t.setAttribute("color",new st(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new je(16755200),d=new je(16711680),f=new je(43775),p=new je(16777215),m=new je(3355443);this.setColors(c,d,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Nn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kn("c",t,e,Nn,0,0,-1),kn("t",t,e,Nn,0,0,1),kn("n1",t,e,Nn,-i,-r,-1),kn("n2",t,e,Nn,i,-r,-1),kn("n3",t,e,Nn,-i,r,-1),kn("n4",t,e,Nn,i,r,-1),kn("f1",t,e,Nn,-i,-r,1),kn("f2",t,e,Nn,i,-r,1),kn("f3",t,e,Nn,-i,r,1),kn("f4",t,e,Nn,i,r,1),kn("u1",t,e,Nn,i*.7,r*1.1,-1),kn("u2",t,e,Nn,-i*.7,r*1.1,-1),kn("u3",t,e,Nn,0,r*2,-1),kn("cf1",t,e,Nn,-i,0,1),kn("cf2",t,e,Nn,i,0,1),kn("cf3",t,e,Nn,0,-r,1),kn("cf4",t,e,Nn,0,r,1),kn("cn1",t,e,Nn,-i,0,-1),kn("cn2",t,e,Nn,i,0,-1),kn("cn3",t,e,Nn,0,-r,-1),kn("cn4",t,e,Nn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function kn(n,e,t,i,r,s,o){km.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],km.x,km.y,km.z)}}const Gm=new vi;class gW extends vs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new It;s.setIndex(new Kt(i,1)),s.setAttribute("position",new Kt(r,3)),super(s,new Fi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Gm.setFromObject(this.object),Gm.isEmpty())return;const t=Gm.min,i=Gm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vW extends vs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new It;s.setIndex(new Kt(i,1)),s.setAttribute("position",new st(r,3)),super(s,new Fi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class _W extends Co{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new It;o.setAttribute("position",new st(s,3)),o.computeBoundingSphere(),super(o,new Fi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new It;l.setAttribute("position",new st(a,3)),l.computeBoundingSphere(),this.add(new wn(l,new rr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const T3=new z;let zm,Hy;class yW extends Ht{constructor(e=new z(0,0,1),t=new z(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",zm===void 0&&(zm=new It,zm.setAttribute("position",new st([0,0,0,0,1,0],3)),Hy=new eh(0,.5,1,5,1),Hy.translate(0,-.5,0)),this.position.copy(t),this.line=new Co(zm,new Fi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wn(Hy,new rr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{T3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(T3,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class xW extends vs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new It;r.setAttribute("position",new st(t,3)),r.setAttribute("color",new st(i,3));const s=new Fi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new je,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class SW{constructor(){this.type="ShapePath",this.color=new je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new of,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let A=0,M=g.length;A<M;A++){const P=g[A],I=new zl;I.curves=P.curves,x.push(I)}return x}function i(g,x){const A=x.length;let M=!1;for(let P=A-1,I=0;I<A;P=I++){let L=x[P],N=x[I],B=N.x-L.x,R=N.y-L.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(L=x[I],B=-B,N=x[P],R=-R),g.y<L.y||g.y>N.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const O=R*(g.x-L.x)-B*(g.y-L.y);if(O===0)return!0;if(O<0)continue;M=!M}}else{if(g.y!==L.y)continue;if(N.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=N.x)return!0}}return M}const r=js.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new zl,l.curves=a.curves,c.push(l),c;let d=!r(s[0].getPoints());d=e?!d:d;const f=[],p=[];let m=[],v=0,S;p[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],S=a.getPoints(),o=r(S),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new zl,p:S},p[v].s.curves=a.curves,d&&v++,m[v]=[]):m[v].push({h:a,p:S[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,x=0;for(let A=0,M=p.length;A<M;A++)f[A]=[];for(let A=0,M=p.length;A<M;A++){const P=m[A];for(let I=0;I<P.length;I++){const L=P[I];let N=!0;for(let B=0;B<p.length;B++)i(L.p,p[B].p)&&(A!==B&&x++,N?(N=!1,f[B].push(L)):g=!0);N&&f[A].push(L)}}x>0&&g===!1&&(m=f)}let y;for(let g=0,x=p.length;g<x;g++){l=p[g].s,c.push(l),y=m[g];for(let A=0,M=y.length;A<M;A++)l.holes.push(y[A].h)}return c}}class AW extends Er{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Zu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Zu);const wW=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:KA,AddEquation:ia,AddOperation:LB,AdditiveAnimationBlendMode:nw,AdditiveBlending:Ix,AgXToneMapping:kB,AlphaFormat:VB,AlwaysCompare:lN,AlwaysDepth:TB,AlwaysStencilFunc:sS,AmbientLight:nL,AnimationAction:hL,AnimationClip:Vu,AnimationLoader:Rj,AnimationMixer:dL,AnimationObjectGroup:qj,AnimationUtils:Ej,ArcCurve:RN,ArrayCamera:MN,ArrowHelper:yW,AttachedBindMode:Px,Audio:cL,AudioAnalyser:Hj,AudioContext:Fw,AudioListener:kj,AudioLoader:Fj,AxesHelper:xW,BackSide:Ji,BasicDepthPacking:$B,BasicShadowMap:aB,BatchedMesh:IN,Bone:Jg,BooleanKeyframeTrack:sc,Box2:sW,Box3:vi,Box3Helper:vW,BoxGeometry:ic,BoxHelper:gW,BufferAttribute:Kt,BufferGeometry:It,BufferGeometryLoader:aL,ByteType:YA,Cache:go,Camera:Mf,CameraHelper:mW,CanvasTexture:YV,CapsuleGeometry:Qg,CatmullRomCurve3:bN,CineonToneMapping:OB,CircleGeometry:qg,ClampToEdgeWrapping:Hn,Clock:Ow,Color:je,ColorKeyframeTrack:bw,ColorManagement:on,CompressedArrayTexture:JV,CompressedCubeTexture:KV,CompressedTexture:Yg,CompressedTextureLoader:bj,ConeGeometry:$g,ConstantAlphaFactor:MB,ConstantColorFactor:AB,CubeCamera:gN,CubeReflectionMapping:Xs,CubeRefractionMapping:Ca,CubeTexture:Ef,CubeTextureLoader:$N,CubeUVReflectionMapping:Qu,CubicBezierCurve:ww,CubicBezierCurve3:PN,CubicInterpolant:YN,CullFaceBack:Tx,CullFaceFront:oB,CullFaceFrontBack:k6,CullFaceNone:sB,Curve:_s,CurvePath:NN,CustomBlending:lB,CustomToneMapping:UB,CylinderGeometry:eh,Cylindrical:rW,Data3DTexture:lw,DataArrayTexture:Vg,DataTexture:Vs,DataTextureLoader:Pw,DataUtils:bl,DecrementStencilOp:X6,DecrementWrapStencilOp:K6,DefaultLoadingManager:qN,DepthFormat:Ul,DepthStencilFormat:Kl,DepthTexture:fw,DetachedBindMode:zB,DirectionalLight:Dw,DirectionalLightHelper:pW,DiscreteInterpolant:ZN,DisplayP3ColorSpace:Hg,DodecahedronGeometry:ev,DoubleSide:Wr,DstAlphaFactor:vB,DstColorFactor:yB,DynamicCopyUsage:c8,DynamicDrawUsage:i8,DynamicReadUsage:o8,EdgesGeometry:LN,EllipseCurve:Zg,EqualCompare:rN,EqualDepth:RB,EqualStencilFunc:q6,EquirectangularReflectionMapping:Fu,EquirectangularRefractionMapping:Zd,Euler:Cr,EventDispatcher:Io,ExtrudeGeometry:nv,FileLoader:_i,Float16BufferAttribute:Y8,Float32BufferAttribute:st,FloatType:Fn,Fog:Xg,FogExp2:Wg,FramebufferTexture:XV,FrontSide:Ws,Frustum:Cf,GLBufferAttribute:iW,GLSL1:h8,GLSL3:oS,GreaterCompare:sN,GreaterDepth:PB,GreaterEqualCompare:aN,GreaterEqualDepth:bB,GreaterEqualStencilFunc:n8,GreaterStencilFunc:e8,GridHelper:dW,Group:mo,HalfFloatType:pi,HemisphereLight:tL,HemisphereLightHelper:hW,IcosahedronGeometry:bf,ImageBitmapLoader:lL,ImageLoader:uf,ImageUtils:hN,IncrementStencilOp:W6,IncrementWrapStencilOp:J6,InstancedBufferAttribute:Yl,InstancedBufferGeometry:oL,InstancedInterleavedBuffer:nW,InstancedMesh:yw,Int16BufferAttribute:J8,Int32BufferAttribute:K8,Int8BufferAttribute:j8,IntType:kg,InterleavedBuffer:Tf,InterleavedBufferAttribute:Ra,Interpolant:th,InterpolateDiscrete:Uu,InterpolateLinear:ku,InterpolateSmooth:x0,InvertStencilOp:Y6,KeepStencilOp:yl,KeyframeTrack:ys,LOD:TN,LatheGeometry:Rf,Layers:Gl,LessCompare:iN,LessDepth:IB,LessEqualCompare:rw,LessEqualDepth:Yd,LessEqualStencilFunc:$6,LessStencilFunc:Q6,Light:Ga,LightProbe:sL,Line:Co,Line3:oW,LineBasicMaterial:Fi,LineCurve:Mw,LineCurve3:BN,LineDashedMaterial:XN,LineLoop:xw,LineSegments:vs,LinearDisplayP3ColorSpace:wf,LinearFilter:rn,LinearInterpolant:Rw,LinearMipMapLinearFilter:Bx,LinearMipMapNearestFilter:H6,LinearMipmapLinearFilter:Kr,LinearMipmapNearestFilter:Mu,LinearSRGBColorSpace:qr,LinearToneMapping:DB,LinearTransfer:$d,Loader:xi,LoaderUtils:ya,LoadingManager:cv,LoopOnce:YB,LoopPingPong:QB,LoopRepeat:ZB,LuminanceAlphaFormat:XB,LuminanceFormat:WB,MOUSE:O6,Material:Yn,MaterialLoader:uv,MathUtils:ow,Matrix3:Rt,Matrix4:ht,MaxEquation:dB,Mesh:wn,MeshBasicMaterial:rr,MeshDepthMaterial:pw,MeshDistanceMaterial:mw,MeshLambertMaterial:jN,MeshMatcapMaterial:WN,MeshNormalMaterial:VN,MeshPhongMaterial:zN,MeshPhysicalMaterial:$r,MeshStandardMaterial:Nf,MeshToonMaterial:HN,MinEquation:hB,MirroredRepeatWrapping:Ou,MixOperation:NB,MultiplyBlending:bx,MultiplyOperation:Af,NearestFilter:ei,NearestMipMapLinearFilter:z6,NearestMipMapNearestFilter:G6,NearestMipmapLinearFilter:Cl,NearestMipmapNearestFilter:Ug,NeutralToneMapping:GB,NeverCompare:nN,NeverDepth:CB,NeverStencilFunc:Z6,NoBlending:zs,NoColorSpace:co,NoToneMapping:Hs,NormalAnimationBlendMode:zg,NormalBlending:Ol,NotEqualCompare:oN,NotEqualDepth:BB,NotEqualStencilFunc:t8,NumberKeyframeTrack:Ql,Object3D:Ht,ObjectLoader:Lj,ObjectSpaceNormalMap:tN,OctahedronGeometry:Pf,OneFactor:pB,OneMinusConstantAlphaFactor:EB,OneMinusConstantColorFactor:wB,OneMinusDstAlphaFactor:_B,OneMinusDstColorFactor:xB,OneMinusSrcAlphaFactor:sg,OneMinusSrcColorFactor:gB,OrthographicCamera:rc,P3Primaries:tf,PCFShadowMap:Og,PCFSoftShadowMap:xd,PMREMGenerator:aS,Path:of,PerspectiveCamera:qn,Plane:$o,PlaneGeometry:Ua,PlaneHelper:_W,PointLight:Lw,PointLightHelper:cW,Points:Sw,PointsMaterial:Kg,PolarGridHelper:fW,PolyhedronGeometry:ka,PositionalAudio:zj,PropertyBinding:Jt,PropertyMixer:uL,QuadraticBezierCurve:Ew,QuadraticBezierCurve3:Cw,Quaternion:gi,QuaternionKeyframeTrack:ql,QuaternionLinearInterpolant:QN,RED_GREEN_RGTC2_Format:iS,RED_RGTC1_Format:KB,REVISION:Zu,RGBADepthPacking:eN,RGBAFormat:Kn,RGBAIntegerFormat:tw,RGBA_ASTC_10x10_Format:Qx,RGBA_ASTC_10x5_Format:Kx,RGBA_ASTC_10x6_Format:Yx,RGBA_ASTC_10x8_Format:Zx,RGBA_ASTC_12x10_Format:qx,RGBA_ASTC_12x12_Format:$x,RGBA_ASTC_4x4_Format:Gx,RGBA_ASTC_5x4_Format:zx,RGBA_ASTC_5x5_Format:Hx,RGBA_ASTC_6x5_Format:Vx,RGBA_ASTC_6x6_Format:jx,RGBA_ASTC_8x5_Format:Wx,RGBA_ASTC_8x6_Format:Xx,RGBA_ASTC_8x8_Format:Jx,RGBA_BPTC_Format:y0,RGBA_ETC2_EAC_Format:kx,RGBA_PVRTC_2BPPV1_Format:Fx,RGBA_PVRTC_4BPPV1_Format:Dx,RGBA_S3TC_DXT1_Format:g0,RGBA_S3TC_DXT3_Format:v0,RGBA_S3TC_DXT5_Format:_0,RGBFormat:jB,RGB_BPTC_SIGNED_Format:eS,RGB_BPTC_UNSIGNED_Format:tS,RGB_ETC1_Format:Ox,RGB_ETC2_Format:Ux,RGB_PVRTC_2BPPV1_Format:Lx,RGB_PVRTC_4BPPV1_Format:Nx,RGB_S3TC_DXT1_Format:m0,RGFormat:JB,RGIntegerFormat:ew,RawShaderMaterial:GN,Ray:qu,Raycaster:hv,Rec709Primaries:ef,RectAreaLight:iL,RedFormat:Gg,RedIntegerFormat:$A,ReinhardToneMapping:FB,RenderTarget:dN,RepeatWrapping:Ta,ReplaceStencilOp:j6,ReverseSubtractEquation:uB,RingGeometry:iv,SIGNED_RED_GREEN_RGTC2_Format:rS,SIGNED_RED_RGTC1_Format:nS,SRGBColorSpace:vr,SRGBTransfer:mn,Scene:Hu,ShaderChunk:Bt,ShaderLib:fs,ShaderMaterial:lr,ShadowMaterial:kN,Shape:zl,ShapeGeometry:rv,ShapePath:SW,ShapeUtils:js,ShortType:ZA,Skeleton:If,SkeletonHelper:lW,SkinnedMesh:_w,Source:Rl,Sphere:ui,SphereGeometry:Bf,Spherical:fL,SphericalHarmonics3:rL,SplineCurve:Tw,SpotLight:Nw,SpotLightHelper:aW,Sprite:CN,SpriteMaterial:vw,SrcAlphaFactor:rg,SrcAlphaSaturateFactor:SB,SrcColorFactor:mB,StaticCopyUsage:l8,StaticDrawUsage:nf,StaticReadUsage:s8,StereoCamera:Oj,StreamCopyUsage:u8,StreamDrawUsage:r8,StreamReadUsage:a8,StringKeyframeTrack:oc,SubtractEquation:cB,SubtractiveBlending:Rx,TOUCH:U6,TangentSpaceNormalMap:Oa,TetrahedronGeometry:sv,Texture:sn,TextureLoader:eL,TorusGeometry:ov,TorusKnotGeometry:av,Triangle:_r,TriangleFanDrawMode:og,TriangleStripDrawMode:iw,TrianglesDrawMode:qB,TubeGeometry:lv,UVMapping:Ea,Uint16BufferAttribute:cw,Uint32BufferAttribute:uw,Uint8BufferAttribute:W8,Uint8ClampedBufferAttribute:X8,Uniform:Gw,UniformsGroup:tW,UniformsLib:Xe,UniformsUtils:mN,UnsignedByteType:Mr,UnsignedInt248Type:Jl,UnsignedInt5999Type:HB,UnsignedIntType:Ia,UnsignedShort4444Type:QA,UnsignedShort5551Type:qA,UnsignedShortType:Qd,VSMShadowMap:us,Vector2:we,Vector3:z,Vector4:ln,VectorKeyframeTrack:$l,VideoTexture:WV,WebGL3DRenderTarget:L8,WebGLArrayRenderTarget:N8,WebGLCoordinateSystem:Os,WebGLCubeRenderTarget:hw,WebGLMultipleRenderTargets:AW,WebGLRenderTarget:Er,WebGLRenderer:gw,WebGLUtils:wN,WebGPUCoordinateSystem:rf,WireframeGeometry:UN,WrapAroundEnding:qd,ZeroCurvatureEnding:Tl,ZeroFactor:fB,ZeroSlopeEnding:Il,ZeroStencilOp:V6,createCanvasElement:uN},Symbol.toStringTag,{value:"Module"}));var mL={exports:{}},ac={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ac.ConcurrentRoot=1;ac.ContinuousEventPriority=4;ac.DefaultEventPriority=16;ac.DiscreteEventPriority=1;ac.IdleEventPriority=536870912;ac.LegacyRoot=0;mL.exports=ac;var vu=mL.exports;function MW(n){let e;const t=new Set,i=(c,d)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,d=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!f(p,v)){const S=p;c(p=v,S)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,d,f)=>d||f?s(c,d,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const EW=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),I3=EW?J.useEffect:J.useLayoutEffect;function gL(n){const e=typeof n=="function"?MW(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=J.useReducer(y=>y+1,0),o=e.getState(),a=J.useRef(o),l=J.useRef(i),c=J.useRef(r),d=J.useRef(!1),f=J.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||d.current)&&(p=i(o),m=!r(f.current,p)),I3(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,d.current=!1});const v=J.useRef(o);I3(()=>{const y=()=>{try{const x=e.getState(),A=l.current(x);c.current(f.current,A)||(a.current=x,f.current=A,s())}catch{d.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const S=m?p:f.current;return J.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var vL={exports:{}},Vy={exports:{}},jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R3;function CW(){return R3||(R3=1,function(n){function e(U,Z){var K=U.length;U.push(Z);e:for(;0<K;){var ae=K-1>>>1,ve=U[ae];if(0<r(ve,Z))U[ae]=Z,U[K]=ve,K=ae;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],K=U.pop();if(K!==Z){U[0]=K;e:for(var ae=0,ve=U.length,Oe=ve>>>1;ae<Oe;){var le=2*(ae+1)-1,Ae=U[le],xe=le+1,Ie=U[xe];if(0>r(Ae,K))xe<ve&&0>r(Ie,Ae)?(U[ae]=Ie,U[xe]=K,ae=xe):(U[ae]=Ae,U[le]=K,ae=le);else if(xe<ve&&0>r(Ie,K))U[ae]=Ie,U[xe]=K,ae=xe;else break e}}return Z}function r(U,Z){var K=U.sortIndex-Z.sortIndex;return K!==0?K:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,S=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=U)i(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(c)}}function M(U){if(S=!1,A(U),!v)if(t(l)!==null)v=!0,ee(P);else{var Z=t(c);Z!==null&&pe(M,Z.startTime-U)}}function P(U,Z){v=!1,S&&(S=!1,g(N),N=-1),m=!0;var K=p;try{for(A(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||U&&!O());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var ve=ae(f.expirationTime<=Z);Z=n.unstable_now(),typeof ve=="function"?f.callback=ve:f===t(l)&&i(l),A(Z)}else i(l);f=t(l)}if(f!==null)var Oe=!0;else{var le=t(c);le!==null&&pe(M,le.startTime-Z),Oe=!1}return Oe}finally{f=null,p=K,m=!1}}var I=!1,L=null,N=-1,B=5,R=-1;function O(){return!(n.unstable_now()-R<B)}function Y(){if(L!==null){var U=n.unstable_now();R=U;var Z=!0;try{Z=L(!0,U)}finally{Z?$():(I=!1,L=null)}}else I=!1}var $;if(typeof x=="function")$=function(){x(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,oe=te.port2;te.port1.onmessage=Y,$=function(){oe.postMessage(null)}}else $=function(){y(Y,0)};function ee(U){L=U,I||(I=!0,$())}function pe(U,Z){N=y(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(P))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var K=p;p=Z;try{return U()}finally{p=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=p;p=U;try{return Z()}finally{p=K}},n.unstable_scheduleCallback=function(U,Z,K){var ae=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ae+K:ae):K=ae,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=K+ve,U={id:d++,callback:Z,priorityLevel:U,startTime:K,expirationTime:ve,sortIndex:-1},K>ae?(U.sortIndex=K,e(c,U),t(l)===null&&U===t(c)&&(S?(g(N),N=-1):S=!0,pe(M,K-ae))):(U.sortIndex=ve,e(l,U),v||m||(v=!0,ee(P))),U},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(U){var Z=p;return function(){var K=p;p=Z;try{return U.apply(this,arguments)}finally{p=K}}}}(jy)),jy}var b3;function TW(){return b3||(b3=1,Vy.exports=CW()),Vy.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IW=function(e){var t={},i=J,r=TW(),s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,_=1;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),P=Symbol.iterator;function I(u){return u===null||typeof u!="object"?null:(u=P&&u[P]||u["@@iterator"],typeof u=="function"?u:null)}function L(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case d:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case S:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case x:return h=u.displayName||null,h!==null?h:L(u.type)||"Memo";case A:h=u._payload,u=u._init;try{return L(u(h))}catch{}}return null}function N(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function B(u){var h=u,_=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(_=h.return),u=h.return;while(u)}return h.tag===3?_:null}function R(u){if(B(u)!==u)throw Error(o(188))}function O(u){var h=u.alternate;if(!h){if(h=B(u),h===null)throw Error(o(188));return h!==u?null:u}for(var _=u,w=h;;){var E=_.return;if(E===null)break;var b=E.alternate;if(b===null){if(w=E.return,w!==null){_=w;continue}break}if(E.child===b.child){for(b=E.child;b;){if(b===_)return R(E),u;if(b===w)return R(E),h;b=b.sibling}throw Error(o(188))}if(_.return!==w.return)_=E,w=b;else{for(var j=!1,ne=E.child;ne;){if(ne===_){j=!0,_=E,w=b;break}if(ne===w){j=!0,w=E,_=b;break}ne=ne.sibling}if(!j){for(ne=b.child;ne;){if(ne===_){j=!0,_=b,w=E;break}if(ne===w){j=!0,w=b,_=E;break}ne=ne.sibling}if(!j)throw Error(o(189))}}if(_.alternate!==w)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?u:h}function Y(u){return u=O(u),u!==null?$(u):null}function $(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=$(u);if(h!==null)return h;u=u.sibling}return null}function te(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=te(u);if(h!==null)return h}u=u.sibling}return null}var oe=Array.isArray,ee=e.getPublicInstance,pe=e.getRootHostContext,U=e.getChildHostContext,Z=e.prepareForCommit,K=e.resetAfterCommit,ae=e.createInstance,ve=e.appendInitialChild,Oe=e.finalizeInitialChildren,le=e.prepareUpdate,Ae=e.shouldSetTextContent,xe=e.createTextInstance,Ie=e.scheduleTimeout,dt=e.cancelTimeout,xt=e.noTimeout,mt=e.isPrimaryRenderer,Q=e.supportsMutation,Ee=e.supportsPersistence,Se=e.supportsHydration,De=e.getInstanceFromNode,Be=e.preparePortalMount,Ne=e.getCurrentEventPriority,Ye=e.detachDeletedInstance,Je=e.supportsMicrotasks,St=e.scheduleMicrotask,W=e.supportsTestSelectors,F=e.findFiberRoot,de=e.getBoundingRect,Re=e.getTextContent,Ce=e.isHiddenSubtree,be=e.matchAccessibilityRole,ot=e.setFocusIfFocusable,He=e.setupIntersectionObserver,Ve=e.appendChild,_t=e.appendChildToContainer,Fe=e.commitTextUpdate,rt=e.commitMount,Nt=e.commitUpdate,ft=e.insertBefore,Ge=e.insertInContainerBefore,Mt=e.removeChild,Et=e.removeChildFromContainer,Ut=e.resetTextContent,q=e.hideInstance,Ze=e.hideTextInstance,ie=e.unhideInstance,Me=e.unhideTextInstance,ze=e.clearContainer,vt=e.cloneInstance,zt=e.createContainerChildSet,dn=e.appendChildToContainerChildSet,Pn=e.finalizeContainerChildren,Yt=e.replaceContainerChildren,Oi=e.cloneHiddenInstance,Ui=e.cloneHiddenTextInstance,es=e.canHydrateInstance,za=e.canHydrateTextInstance,lc=e.canHydrateSuspenseInstance,xs=e.isSuspenseInstancePending,Ss=e.isSuspenseInstanceFallback,As=e.registerSuspenseInstanceRetry,Si=e.getNextHydratableSibling,Lt=e.getFirstHydratableChild,Ha=e.getFirstHydratableChildWithinContainer,ih=e.getFirstHydratableChildWithinSuspenseInstance,D=e.hydrateInstance,G=e.hydrateTextInstance,T=e.hydrateSuspenseInstance,k=e.getNextHydratableInstanceAfterSuspenseInstance,H=e.commitHydratedContainer,V=e.commitHydratedSuspenseInstance,X=e.clearSuspenseBoundary,re=e.clearSuspenseBoundaryFromContainer,ce=e.shouldDeleteUnhydratedTailInstances,he=e.didNotMatchHydratedContainerTextInstance,fe=e.didNotMatchHydratedTextInstance,ge;function We(u){if(ge===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);ge=h&&h[1]||""}return`
`+ge+u}var Te=!1;function Ue(u,h){if(!u||Te)return"";Te=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ke){var w=ke}Reflect.construct(u,[],h)}else{try{h.call()}catch(ke){w=ke}u.call(h.prototype)}else{try{throw Error()}catch(ke){w=ke}u()}}catch(ke){if(ke&&w&&typeof ke.stack=="string"){for(var E=ke.stack.split(`
`),b=w.stack.split(`
`),j=E.length-1,ne=b.length-1;1<=j&&0<=ne&&E[j]!==b[ne];)ne--;for(;1<=j&&0<=ne;j--,ne--)if(E[j]!==b[ne]){if(j!==1||ne!==1)do if(j--,ne--,0>ne||E[j]!==b[ne]){var _e=`
`+E[j].replace(" at new "," at ");return u.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",u.displayName)),_e}while(1<=j&&0<=ne);break}}}finally{Te=!1,Error.prepareStackTrace=_}return(u=u?u.displayName||u.name:"")?We(u):""}var qe=Object.prototype.hasOwnProperty,et=[],yt=-1;function tt(u){return{current:u}}function Pe(u){0>yt||(u.current=et[yt],et[yt]=null,yt--)}function at(u,h){yt++,et[yt]=u.current,u.current=h}var it={},kt=tt(it),wt=tt(!1),jt=it;function Vn(u,h){var _=u.type.contextTypes;if(!_)return it;var w=u.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===h)return w.__reactInternalMemoizedMaskedChildContext;var E={},b;for(b in _)E[b]=h[b];return w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=E),E}function Ft(u){return u=u.childContextTypes,u!=null}function fn(){Pe(wt),Pe(kt)}function Wt(u,h,_){if(kt.current!==it)throw Error(o(168));at(kt,h),at(wt,_)}function qt(u,h,_){var w=u.stateNode;if(h=h.childContextTypes,typeof w.getChildContext!="function")return _;w=w.getChildContext();for(var E in w)if(!(E in h))throw Error(o(108,N(u)||"Unknown",E));return s({},_,w)}function Zt(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||it,jt=kt.current,at(kt,u),at(wt,wt.current),!0}function Xt(u,h,_){var w=u.stateNode;if(!w)throw Error(o(169));_?(u=qt(u,h,jt),w.__reactInternalMemoizedMergedChildContext=u,Pe(wt),Pe(kt),at(kt,u)):Pe(wt),at(wt,_)}var un=Math.clz32?Math.clz32:ws,Js=Math.log,ki=Math.LN2;function ws(u){return u>>>=0,u===0?32:31-(Js(u)/ki|0)|0}var Of=64,Uf=4194304;function rh(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function kf(u,h){var _=u.pendingLanes;if(_===0)return 0;var w=0,E=u.suspendedLanes,b=u.pingedLanes,j=_&268435455;if(j!==0){var ne=j&~E;ne!==0?w=rh(ne):(b&=j,b!==0&&(w=rh(b)))}else j=_&~E,j!==0?w=rh(j):b!==0&&(w=rh(b));if(w===0)return 0;if(h!==0&&h!==w&&!(h&E)&&(E=w&-w,b=h&-h,E>=b||E===16&&(b&4194240)!==0))return h;if(w&4&&(w|=_&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=w;0<h;)_=31-un(h),E=1<<_,w|=u[_],h&=~E;return w}function nD(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iD(u,h){for(var _=u.suspendedLanes,w=u.pingedLanes,E=u.expirationTimes,b=u.pendingLanes;0<b;){var j=31-un(b),ne=1<<j,_e=E[j];_e===-1?(!(ne&_)||ne&w)&&(E[j]=nD(ne,h)):_e<=h&&(u.expiredLanes|=ne),b&=~ne}}function dv(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function fv(u){for(var h=[],_=0;31>_;_++)h.push(u);return h}function sh(u,h,_){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-un(h),u[h]=_}function rD(u,h){var _=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var w=u.eventTimes;for(u=u.expirationTimes;0<_;){var E=31-un(_),b=1<<E;h[E]=0,w[E]=-1,u[E]=-1,_&=~b}}function pv(u,h){var _=u.entangledLanes|=h;for(u=u.entanglements;_;){var w=31-un(_),E=1<<w;E&h|u[w]&h&&(u[w]|=h),_&=~E}}var $t=0;function Qw(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var mv=r.unstable_scheduleCallback,qw=r.unstable_cancelCallback,sD=r.unstable_shouldYield,oD=r.unstable_requestPaint,ii=r.unstable_now,gv=r.unstable_ImmediatePriority,aD=r.unstable_UserBlockingPriority,vv=r.unstable_NormalPriority,lD=r.unstable_IdlePriority,Gf=null,Ms=null;function cD(u){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(Gf,u,void 0,(u.current.flags&128)===128)}catch{}}function uD(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Es=typeof Object.is=="function"?Object.is:uD,Ks=null,zf=!1,_v=!1;function $w(u){Ks===null?Ks=[u]:Ks.push(u)}function hD(u){zf=!0,$w(u)}function Cs(){if(!_v&&Ks!==null){_v=!0;var u=0,h=$t;try{var _=Ks;for($t=1;u<_.length;u++){var w=_[u];do w=w(!0);while(w!==null)}Ks=null,zf=!1}catch(E){throw Ks!==null&&(Ks=Ks.slice(u+1)),mv(gv,Cs),E}finally{$t=h,_v=!1}}return null}var dD=a.ReactCurrentBatchConfig;function Hf(u,h){if(Es(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var _=Object.keys(u),w=Object.keys(h);if(_.length!==w.length)return!1;for(w=0;w<_.length;w++){var E=_[w];if(!qe.call(h,E)||!Es(u[E],h[E]))return!1}return!0}function fD(u){switch(u.tag){case 5:return We(u.type);case 16:return We("Lazy");case 13:return We("Suspense");case 19:return We("SuspenseList");case 0:case 2:case 15:return u=Ue(u.type,!1),u;case 11:return u=Ue(u.type.render,!1),u;case 1:return u=Ue(u.type,!0),u;default:return""}}function ts(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var _ in u)h[_]===void 0&&(h[_]=u[_]);return h}return h}var Vf=tt(null),jf=null,cc=null,yv=null;function xv(){yv=cc=jf=null}function eM(u,h,_){mt?(at(Vf,h._currentValue),h._currentValue=_):(at(Vf,h._currentValue2),h._currentValue2=_)}function Sv(u){var h=Vf.current;Pe(Vf),mt?u._currentValue=h:u._currentValue2=h}function Av(u,h,_){for(;u!==null;){var w=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),u===_)break;u=u.return}}function uc(u,h){jf=u,yv=cc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(hr=!0),u.firstContext=null)}function Rr(u){var h=mt?u._currentValue:u._currentValue2;if(yv!==u)if(u={context:u,memoizedValue:h,next:null},cc===null){if(jf===null)throw Error(o(308));cc=u,jf.dependencies={lanes:0,firstContext:u}}else cc=cc.next=u;return h}var Ts=null,Ro=!1;function wv(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tM(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Ys(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function bo(u,h){var _=u.updateQueue;_!==null&&(_=_.shared,jn!==null&&u.mode&1&&!(Ot&2)?(u=_.interleaved,u===null?(h.next=h,Ts===null?Ts=[_]:Ts.push(_)):(h.next=u.next,u.next=h),_.interleaved=h):(u=_.pending,u===null?h.next=h:(h.next=u.next,u.next=h),_.pending=h))}function Wf(u,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194240)!==0)){var w=h.lanes;w&=u.pendingLanes,_|=w,h.lanes=_,pv(u,_)}}function nM(u,h){var _=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,_===w)){var E=null,b=null;if(_=_.firstBaseUpdate,_!==null){do{var j={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};b===null?E=b=j:b=b.next=j,_=_.next}while(_!==null);b===null?E=b=h:b=b.next=h}else E=b=h;_={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:b,shared:w.shared,effects:w.effects},u.updateQueue=_;return}u=_.lastBaseUpdate,u===null?_.firstBaseUpdate=h:u.next=h,_.lastBaseUpdate=h}function Xf(u,h,_,w){var E=u.updateQueue;Ro=!1;var b=E.firstBaseUpdate,j=E.lastBaseUpdate,ne=E.shared.pending;if(ne!==null){E.shared.pending=null;var _e=ne,ke=_e.next;_e.next=null,j===null?b=ke:j.next=ke,j=_e;var nt=u.alternate;nt!==null&&(nt=nt.updateQueue,ne=nt.lastBaseUpdate,ne!==j&&(ne===null?nt.firstBaseUpdate=ke:ne.next=ke,nt.lastBaseUpdate=_e))}if(b!==null){var Ct=E.baseState;j=0,nt=ke=_e=null,ne=b;do{var pt=ne.lane,hn=ne.eventTime;if((w&pt)===pt){nt!==null&&(nt=nt.next={eventTime:hn,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var ct=u,Ei=ne;switch(pt=h,hn=_,Ei.tag){case 1:if(ct=Ei.payload,typeof ct=="function"){Ct=ct.call(hn,Ct,pt);break e}Ct=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Ei.payload,pt=typeof ct=="function"?ct.call(hn,Ct,pt):ct,pt==null)break e;Ct=s({},Ct,pt);break e;case 2:Ro=!0}}ne.callback!==null&&ne.lane!==0&&(u.flags|=64,pt=E.effects,pt===null?E.effects=[ne]:pt.push(ne))}else hn={eventTime:hn,lane:pt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},nt===null?(ke=nt=hn,_e=Ct):nt=nt.next=hn,j|=pt;if(ne=ne.next,ne===null){if(ne=E.shared.pending,ne===null)break;pt=ne,ne=pt.next,pt.next=null,E.lastBaseUpdate=pt,E.shared.pending=null}}while(!0);if(nt===null&&(_e=Ct),E.baseState=_e,E.firstBaseUpdate=ke,E.lastBaseUpdate=nt,h=E.shared.interleaved,h!==null){E=h;do j|=E.lane,E=E.next;while(E!==h)}else b===null&&(E.shared.lanes=0);yc|=j,u.lanes=j,u.memoizedState=Ct}}function iM(u,h,_){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var w=u[h],E=w.callback;if(E!==null){if(w.callback=null,w=_,typeof E!="function")throw Error(o(191,E));E.call(w)}}}var rM=new i.Component().refs;function Mv(u,h,_,w){h=u.memoizedState,_=_(w,h),_=_==null?h:s({},h,_),u.memoizedState=_,u.lanes===0&&(u.updateQueue.baseState=_)}var Jf={isMounted:function(u){return(u=u._reactInternals)?B(u)===u:!1},enqueueSetState:function(u,h,_){u=u._reactInternals;var w=zi(),E=No(u),b=Ys(w,E);b.payload=h,_!=null&&(b.callback=_),bo(u,b),h=Lr(u,E,w),h!==null&&Wf(h,u,E)},enqueueReplaceState:function(u,h,_){u=u._reactInternals;var w=zi(),E=No(u),b=Ys(w,E);b.tag=1,b.payload=h,_!=null&&(b.callback=_),bo(u,b),h=Lr(u,E,w),h!==null&&Wf(h,u,E)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var _=zi(),w=No(u),E=Ys(_,w);E.tag=2,h!=null&&(E.callback=h),bo(u,E),h=Lr(u,w,_),h!==null&&Wf(h,u,w)}};function sM(u,h,_,w,E,b,j){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,b,j):h.prototype&&h.prototype.isPureReactComponent?!Hf(_,w)||!Hf(E,b):!0}function oM(u,h,_){var w=!1,E=it,b=h.contextType;return typeof b=="object"&&b!==null?b=Rr(b):(E=Ft(h)?jt:kt.current,w=h.contextTypes,b=(w=w!=null)?Vn(u,E):it),h=new h(_,b),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Jf,u.stateNode=h,h._reactInternals=u,w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=b),h}function aM(u,h,_,w){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,w),h.state!==u&&Jf.enqueueReplaceState(h,h.state,null)}function Ev(u,h,_,w){var E=u.stateNode;E.props=_,E.state=u.memoizedState,E.refs=rM,wv(u);var b=h.contextType;typeof b=="object"&&b!==null?E.context=Rr(b):(b=Ft(h)?jt:kt.current,E.context=Vn(u,b)),E.state=u.memoizedState,b=h.getDerivedStateFromProps,typeof b=="function"&&(Mv(u,h,b,_),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&Jf.enqueueReplaceState(E,E.state,null),Xf(u,_,E,w),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var hc=[],dc=0,Kf=null,Yf=0,br=[],Pr=0,Va=null,Zs=1,Qs="";function ja(u,h){hc[dc++]=Yf,hc[dc++]=Kf,Kf=u,Yf=h}function lM(u,h,_){br[Pr++]=Zs,br[Pr++]=Qs,br[Pr++]=Va,Va=u;var w=Zs;u=Qs;var E=32-un(w)-1;w&=~(1<<E),_+=1;var b=32-un(h)+E;if(30<b){var j=E-E%5;b=(w&(1<<j)-1).toString(32),w>>=j,E-=j,Zs=1<<32-un(h)+E|_<<E|w,Qs=b+u}else Zs=1<<b|_<<E|w,Qs=u}function Cv(u){u.return!==null&&(ja(u,1),lM(u,1,0))}function Tv(u){for(;u===Kf;)Kf=hc[--dc],hc[dc]=null,Yf=hc[--dc],hc[dc]=null;for(;u===Va;)Va=br[--Pr],br[Pr]=null,Qs=br[--Pr],br[Pr]=null,Zs=br[--Pr],br[Pr]=null}var cr=null,ur=null,Sn=!1,oh=!1,ns=null;function cM(u,h){var _=Dr(5,null,null,0);_.elementType="DELETED",_.stateNode=h,_.return=u,h=u.deletions,h===null?(u.deletions=[_],u.flags|=16):h.push(_)}function uM(u,h){switch(u.tag){case 5:return h=es(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,cr=u,ur=Lt(h),!0):!1;case 6:return h=za(h,u.pendingProps),h!==null?(u.stateNode=h,cr=u,ur=null,!0):!1;case 13:if(h=lc(h),h!==null){var _=Va!==null?{id:Zs,overflow:Qs}:null;return u.memoizedState={dehydrated:h,treeContext:_,retryLane:1073741824},_=Dr(18,null,null,0),_.stateNode=h,_.return=u,u.child=_,cr=u,ur=null,!0}return!1;default:return!1}}function Iv(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Rv(u){if(Sn){var h=ur;if(h){var _=h;if(!uM(u,h)){if(Iv(u))throw Error(o(418));h=Si(_);var w=cr;h&&uM(u,h)?cM(w,_):(u.flags=u.flags&-4097|2,Sn=!1,cr=u)}}else{if(Iv(u))throw Error(o(418));u.flags=u.flags&-4097|2,Sn=!1,cr=u}}}function hM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;cr=u}function ah(u){if(!Se||u!==cr)return!1;if(!Sn)return hM(u),Sn=!0,!1;if(u.tag!==3&&(u.tag!==5||ce(u.type)&&!Ae(u.type,u.memoizedProps))){var h=ur;if(h){if(Iv(u)){for(u=ur;u;)u=Si(u);throw Error(o(418))}for(;h;)cM(u,h),h=Si(h)}}if(hM(u),u.tag===13){if(!Se)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));ur=k(u)}else ur=cr?Si(u.stateNode):null;return!0}function fc(){Se&&(ur=cr=null,oh=Sn=!1)}function bv(u){ns===null?ns=[u]:ns.push(u)}function lh(u,h,_){if(u=_.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var w=_.stateNode}if(!w)throw Error(o(147,u));var E=w,b=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===b?h.ref:(h=function(j){var ne=E.refs;ne===rM&&(ne=E.refs={}),j===null?delete ne[b]:ne[b]=j},h._stringRef=b,h)}if(typeof u!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,u))}return u}function Zf(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function dM(u){var h=u._init;return h(u._payload)}function fM(u){function h(ue,se){if(u){var me=ue.deletions;me===null?(ue.deletions=[se],ue.flags|=16):me.push(se)}}function _(ue,se){if(!u)return null;for(;se!==null;)h(ue,se),se=se.sibling;return null}function w(ue,se){for(ue=new Map;se!==null;)se.key!==null?ue.set(se.key,se):ue.set(se.index,se),se=se.sibling;return ue}function E(ue,se){return ue=Do(ue,se),ue.index=0,ue.sibling=null,ue}function b(ue,se,me){return ue.index=me,u?(me=ue.alternate,me!==null?(me=me.index,me<se?(ue.flags|=2,se):me):(ue.flags|=2,se)):(ue.flags|=1048576,se)}function j(ue){return u&&ue.alternate===null&&(ue.flags|=2),ue}function ne(ue,se,me,Qe){return se===null||se.tag!==6?(se=f_(me,ue.mode,Qe),se.return=ue,se):(se=E(se,me),se.return=ue,se)}function _e(ue,se,me,Qe){var lt=me.type;return lt===d?nt(ue,se,me.props.children,Qe,me.key):se!==null&&(se.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===A&&dM(lt)===se.type)?(Qe=E(se,me.props),Qe.ref=lh(ue,se,me),Qe.return=ue,Qe):(Qe=Tp(me.type,me.key,me.props,null,ue.mode,Qe),Qe.ref=lh(ue,se,me),Qe.return=ue,Qe)}function ke(ue,se,me,Qe){return se===null||se.tag!==4||se.stateNode.containerInfo!==me.containerInfo||se.stateNode.implementation!==me.implementation?(se=p_(me,ue.mode,Qe),se.return=ue,se):(se=E(se,me.children||[]),se.return=ue,se)}function nt(ue,se,me,Qe,lt){return se===null||se.tag!==7?(se=Qa(me,ue.mode,Qe,lt),se.return=ue,se):(se=E(se,me),se.return=ue,se)}function Ct(ue,se,me){if(typeof se=="string"&&se!==""||typeof se=="number")return se=f_(""+se,ue.mode,me),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return me=Tp(se.type,se.key,se.props,null,ue.mode,me),me.ref=lh(ue,null,se),me.return=ue,me;case c:return se=p_(se,ue.mode,me),se.return=ue,se;case A:var Qe=se._init;return Ct(ue,Qe(se._payload),me)}if(oe(se)||I(se))return se=Qa(se,ue.mode,me,null),se.return=ue,se;Zf(ue,se)}return null}function pt(ue,se,me,Qe){var lt=se!==null?se.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return lt!==null?null:ne(ue,se,""+me,Qe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return me.key===lt?_e(ue,se,me,Qe):null;case c:return me.key===lt?ke(ue,se,me,Qe):null;case A:return lt=me._init,pt(ue,se,lt(me._payload),Qe)}if(oe(me)||I(me))return lt!==null?null:nt(ue,se,me,Qe,null);Zf(ue,me)}return null}function hn(ue,se,me,Qe,lt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return ue=ue.get(me)||null,ne(se,ue,""+Qe,lt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case l:return ue=ue.get(Qe.key===null?me:Qe.key)||null,_e(se,ue,Qe,lt);case c:return ue=ue.get(Qe.key===null?me:Qe.key)||null,ke(se,ue,Qe,lt);case A:var Dt=Qe._init;return hn(ue,se,me,Dt(Qe._payload),lt)}if(oe(Qe)||I(Qe))return ue=ue.get(me)||null,nt(se,ue,Qe,lt,null);Zf(se,Qe)}return null}function ct(ue,se,me,Qe){for(var lt=null,Dt=null,Tt=se,en=se=0,si=null;Tt!==null&&en<me.length;en++){Tt.index>en?(si=Tt,Tt=null):si=Tt.sibling;var tn=pt(ue,Tt,me[en],Qe);if(tn===null){Tt===null&&(Tt=si);break}u&&Tt&&tn.alternate===null&&h(ue,Tt),se=b(tn,se,en),Dt===null?lt=tn:Dt.sibling=tn,Dt=tn,Tt=si}if(en===me.length)return _(ue,Tt),Sn&&ja(ue,en),lt;if(Tt===null){for(;en<me.length;en++)Tt=Ct(ue,me[en],Qe),Tt!==null&&(se=b(Tt,se,en),Dt===null?lt=Tt:Dt.sibling=Tt,Dt=Tt);return Sn&&ja(ue,en),lt}for(Tt=w(ue,Tt);en<me.length;en++)si=hn(Tt,ue,en,me[en],Qe),si!==null&&(u&&si.alternate!==null&&Tt.delete(si.key===null?en:si.key),se=b(si,se,en),Dt===null?lt=si:Dt.sibling=si,Dt=si);return u&&Tt.forEach(function(Fo){return h(ue,Fo)}),Sn&&ja(ue,en),lt}function Ei(ue,se,me,Qe){var lt=I(me);if(typeof lt!="function")throw Error(o(150));if(me=lt.call(me),me==null)throw Error(o(151));for(var Dt=lt=null,Tt=se,en=se=0,si=null,tn=me.next();Tt!==null&&!tn.done;en++,tn=me.next()){Tt.index>en?(si=Tt,Tt=null):si=Tt.sibling;var Fo=pt(ue,Tt,tn.value,Qe);if(Fo===null){Tt===null&&(Tt=si);break}u&&Tt&&Fo.alternate===null&&h(ue,Tt),se=b(Fo,se,en),Dt===null?lt=Fo:Dt.sibling=Fo,Dt=Fo,Tt=si}if(tn.done)return _(ue,Tt),Sn&&ja(ue,en),lt;if(Tt===null){for(;!tn.done;en++,tn=me.next())tn=Ct(ue,tn.value,Qe),tn!==null&&(se=b(tn,se,en),Dt===null?lt=tn:Dt.sibling=tn,Dt=tn);return Sn&&ja(ue,en),lt}for(Tt=w(ue,Tt);!tn.done;en++,tn=me.next())tn=hn(Tt,ue,en,tn.value,Qe),tn!==null&&(u&&tn.alternate!==null&&Tt.delete(tn.key===null?en:tn.key),se=b(tn,se,en),Dt===null?lt=tn:Dt.sibling=tn,Dt=tn);return u&&Tt.forEach(function(VD){return h(ue,VD)}),Sn&&ja(ue,en),lt}function Fr(ue,se,me,Qe){if(typeof me=="object"&&me!==null&&me.type===d&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case l:e:{for(var lt=me.key,Dt=se;Dt!==null;){if(Dt.key===lt){if(lt=me.type,lt===d){if(Dt.tag===7){_(ue,Dt.sibling),se=E(Dt,me.props.children),se.return=ue,ue=se;break e}}else if(Dt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===A&&dM(lt)===Dt.type){_(ue,Dt.sibling),se=E(Dt,me.props),se.ref=lh(ue,Dt,me),se.return=ue,ue=se;break e}_(ue,Dt);break}else h(ue,Dt);Dt=Dt.sibling}me.type===d?(se=Qa(me.props.children,ue.mode,Qe,me.key),se.return=ue,ue=se):(Qe=Tp(me.type,me.key,me.props,null,ue.mode,Qe),Qe.ref=lh(ue,se,me),Qe.return=ue,ue=Qe)}return j(ue);case c:e:{for(Dt=me.key;se!==null;){if(se.key===Dt)if(se.tag===4&&se.stateNode.containerInfo===me.containerInfo&&se.stateNode.implementation===me.implementation){_(ue,se.sibling),se=E(se,me.children||[]),se.return=ue,ue=se;break e}else{_(ue,se);break}else h(ue,se);se=se.sibling}se=p_(me,ue.mode,Qe),se.return=ue,ue=se}return j(ue);case A:return Dt=me._init,Fr(ue,se,Dt(me._payload),Qe)}if(oe(me))return ct(ue,se,me,Qe);if(I(me))return Ei(ue,se,me,Qe);Zf(ue,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,se!==null&&se.tag===6?(_(ue,se.sibling),se=E(se,me),se.return=ue,ue=se):(_(ue,se),se=f_(me,ue.mode,Qe),se.return=ue,ue=se),j(ue)):_(ue,se)}return Fr}var pc=fM(!0),pM=fM(!1),ch={},Br=tt(ch),uh=tt(ch),mc=tt(ch);function Is(u){if(u===ch)throw Error(o(174));return u}function Pv(u,h){at(mc,h),at(uh,u),at(Br,ch),u=pe(h),Pe(Br),at(Br,u)}function gc(){Pe(Br),Pe(uh),Pe(mc)}function mM(u){var h=Is(mc.current),_=Is(Br.current);h=U(_,u.type,h),_!==h&&(at(uh,u),at(Br,h))}function Bv(u){uh.current===u&&(Pe(Br),Pe(uh))}var Mn=tt(0);function Qf(u){for(var h=u;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||xs(_)||Ss(_)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Nv=[];function Lv(){for(var u=0;u<Nv.length;u++){var h=Nv[u];mt?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Nv.length=0}var qf=a.ReactCurrentDispatcher,Nr=a.ReactCurrentBatchConfig,vc=0,Bn=null,Ai=null,ri=null,$f=!1,hh=!1,dh=0,pD=0;function wi(){throw Error(o(321))}function Dv(u,h){if(h===null)return!1;for(var _=0;_<h.length&&_<u.length;_++)if(!Es(u[_],h[_]))return!1;return!0}function Fv(u,h,_,w,E,b){if(vc=b,Bn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,qf.current=u===null||u.memoizedState===null?_D:yD,u=_(w,E),hh){b=0;do{if(hh=!1,dh=0,25<=b)throw Error(o(301));b+=1,ri=Ai=null,h.updateQueue=null,qf.current=xD,u=_(w,E)}while(hh)}if(qf.current=rp,h=Ai!==null&&Ai.next!==null,vc=0,ri=Ai=Bn=null,$f=!1,h)throw Error(o(300));return u}function Ov(){var u=dh!==0;return dh=0,u}function qs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?Bn.memoizedState=ri=u:ri=ri.next=u,ri}function Rs(){if(Ai===null){var u=Bn.alternate;u=u!==null?u.memoizedState:null}else u=Ai.next;var h=ri===null?Bn.memoizedState:ri.next;if(h!==null)ri=h,Ai=u;else{if(u===null)throw Error(o(310));Ai=u,u={memoizedState:Ai.memoizedState,baseState:Ai.baseState,baseQueue:Ai.baseQueue,queue:Ai.queue,next:null},ri===null?Bn.memoizedState=ri=u:ri=ri.next=u}return ri}function Wa(u,h){return typeof h=="function"?h(u):h}function ep(u){var h=Rs(),_=h.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=u;var w=Ai,E=w.baseQueue,b=_.pending;if(b!==null){if(E!==null){var j=E.next;E.next=b.next,b.next=j}w.baseQueue=E=b,_.pending=null}if(E!==null){b=E.next,w=w.baseState;var ne=j=null,_e=null,ke=b;do{var nt=ke.lane;if((vc&nt)===nt)_e!==null&&(_e=_e.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),w=ke.hasEagerState?ke.eagerState:u(w,ke.action);else{var Ct={lane:nt,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};_e===null?(ne=_e=Ct,j=w):_e=_e.next=Ct,Bn.lanes|=nt,yc|=nt}ke=ke.next}while(ke!==null&&ke!==b);_e===null?j=w:_e.next=ne,Es(w,h.memoizedState)||(hr=!0),h.memoizedState=w,h.baseState=j,h.baseQueue=_e,_.lastRenderedState=w}if(u=_.interleaved,u!==null){E=u;do b=E.lane,Bn.lanes|=b,yc|=b,E=E.next;while(E!==u)}else E===null&&(_.lanes=0);return[h.memoizedState,_.dispatch]}function tp(u){var h=Rs(),_=h.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=u;var w=_.dispatch,E=_.pending,b=h.memoizedState;if(E!==null){_.pending=null;var j=E=E.next;do b=u(b,j.action),j=j.next;while(j!==E);Es(b,h.memoizedState)||(hr=!0),h.memoizedState=b,h.baseQueue===null&&(h.baseState=b),_.lastRenderedState=b}return[b,w]}function gM(){}function vM(u,h){var _=Bn,w=Rs(),E=h(),b=!Es(w.memoizedState,E);if(b&&(w.memoizedState=E,hr=!0),w=w.queue,ph(xM.bind(null,_,w,u),[u]),w.getSnapshot!==h||b||ri!==null&&ri.memoizedState.tag&1){if(_.flags|=2048,fh(9,yM.bind(null,_,w,E,h),void 0,null),jn===null)throw Error(o(349));vc&30||_M(_,h,E)}return E}function _M(u,h,_){u.flags|=16384,u={getSnapshot:h,value:_},h=Bn.updateQueue,h===null?(h={lastEffect:null,stores:null},Bn.updateQueue=h,h.stores=[u]):(_=h.stores,_===null?h.stores=[u]:_.push(u))}function yM(u,h,_,w){h.value=_,h.getSnapshot=w,SM(h)&&Lr(u,1,-1)}function xM(u,h,_){return _(function(){SM(h)&&Lr(u,1,-1)})}function SM(u){var h=u.getSnapshot;u=u.value;try{var _=h();return!Es(u,_)}catch{return!0}}function Uv(u){var h=qs();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:u},h.queue=u,u=u.dispatch=vD.bind(null,Bn,u),[h.memoizedState,u]}function fh(u,h,_,w){return u={tag:u,create:h,destroy:_,deps:w,next:null},h=Bn.updateQueue,h===null?(h={lastEffect:null,stores:null},Bn.updateQueue=h,h.lastEffect=u.next=u):(_=h.lastEffect,_===null?h.lastEffect=u.next=u:(w=_.next,_.next=u,u.next=w,h.lastEffect=u)),u}function AM(){return Rs().memoizedState}function np(u,h,_,w){var E=qs();Bn.flags|=u,E.memoizedState=fh(1|h,_,void 0,w===void 0?null:w)}function ip(u,h,_,w){var E=Rs();w=w===void 0?null:w;var b=void 0;if(Ai!==null){var j=Ai.memoizedState;if(b=j.destroy,w!==null&&Dv(w,j.deps)){E.memoizedState=fh(h,_,b,w);return}}Bn.flags|=u,E.memoizedState=fh(1|h,_,b,w)}function kv(u,h){return np(8390656,8,u,h)}function ph(u,h){return ip(2048,8,u,h)}function wM(u,h){return ip(4,2,u,h)}function MM(u,h){return ip(4,4,u,h)}function EM(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function CM(u,h,_){return _=_!=null?_.concat([u]):null,ip(4,4,EM.bind(null,h,u),_)}function Gv(){}function TM(u,h){var _=Rs();h=h===void 0?null:h;var w=_.memoizedState;return w!==null&&h!==null&&Dv(h,w[1])?w[0]:(_.memoizedState=[u,h],u)}function IM(u,h){var _=Rs();h=h===void 0?null:h;var w=_.memoizedState;return w!==null&&h!==null&&Dv(h,w[1])?w[0]:(u=u(),_.memoizedState=[u,h],u)}function mD(u,h){var _=$t;$t=_!==0&&4>_?_:4,u(!0);var w=Nr.transition;Nr.transition={};try{u(!1),h()}finally{$t=_,Nr.transition=w}}function RM(){return Rs().memoizedState}function gD(u,h,_){var w=No(u);_={lane:w,action:_,hasEagerState:!1,eagerState:null,next:null},bM(u)?PM(h,_):(BM(u,h,_),_=zi(),u=Lr(u,w,_),u!==null&&NM(u,h,w))}function vD(u,h,_){var w=No(u),E={lane:w,action:_,hasEagerState:!1,eagerState:null,next:null};if(bM(u))PM(h,E);else{BM(u,h,E);var b=u.alternate;if(u.lanes===0&&(b===null||b.lanes===0)&&(b=h.lastRenderedReducer,b!==null))try{var j=h.lastRenderedState,ne=b(j,_);if(E.hasEagerState=!0,E.eagerState=ne,Es(ne,j))return}catch{}finally{}_=zi(),u=Lr(u,w,_),u!==null&&NM(u,h,w)}}function bM(u){var h=u.alternate;return u===Bn||h!==null&&h===Bn}function PM(u,h){hh=$f=!0;var _=u.pending;_===null?h.next=h:(h.next=_.next,_.next=h),u.pending=h}function BM(u,h,_){jn!==null&&u.mode&1&&!(Ot&2)?(u=h.interleaved,u===null?(_.next=_,Ts===null?Ts=[h]:Ts.push(h)):(_.next=u.next,u.next=_),h.interleaved=_):(u=h.pending,u===null?_.next=_:(_.next=u.next,u.next=_),h.pending=_)}function NM(u,h,_){if(_&4194240){var w=h.lanes;w&=u.pendingLanes,_|=w,h.lanes=_,pv(u,_)}}var rp={readContext:Rr,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},_D={readContext:Rr,useCallback:function(u,h){return qs().memoizedState=[u,h===void 0?null:h],u},useContext:Rr,useEffect:kv,useImperativeHandle:function(u,h,_){return _=_!=null?_.concat([u]):null,np(4194308,4,EM.bind(null,h,u),_)},useLayoutEffect:function(u,h){return np(4194308,4,u,h)},useInsertionEffect:function(u,h){return np(4,2,u,h)},useMemo:function(u,h){var _=qs();return h=h===void 0?null:h,u=u(),_.memoizedState=[u,h],u},useReducer:function(u,h,_){var w=qs();return h=_!==void 0?_(h):h,w.memoizedState=w.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},w.queue=u,u=u.dispatch=gD.bind(null,Bn,u),[w.memoizedState,u]},useRef:function(u){var h=qs();return u={current:u},h.memoizedState=u},useState:Uv,useDebugValue:Gv,useDeferredValue:function(u){var h=Uv(u),_=h[0],w=h[1];return kv(function(){var E=Nr.transition;Nr.transition={};try{w(u)}finally{Nr.transition=E}},[u]),_},useTransition:function(){var u=Uv(!1),h=u[0];return u=mD.bind(null,u[1]),qs().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,_){var w=Bn,E=qs();if(Sn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=h(),jn===null)throw Error(o(349));vc&30||_M(w,h,_)}E.memoizedState=_;var b={value:_,getSnapshot:h};return E.queue=b,kv(xM.bind(null,w,b,u),[u]),w.flags|=2048,fh(9,yM.bind(null,w,b,_,h),void 0,null),_},useId:function(){var u=qs(),h=jn.identifierPrefix;if(Sn){var _=Qs,w=Zs;_=(w&~(1<<32-un(w)-1)).toString(32)+_,h=":"+h+"R"+_,_=dh++,0<_&&(h+="H"+_.toString(32)),h+=":"}else _=pD++,h=":"+h+"r"+_.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},yD={readContext:Rr,useCallback:TM,useContext:Rr,useEffect:ph,useImperativeHandle:CM,useInsertionEffect:wM,useLayoutEffect:MM,useMemo:IM,useReducer:ep,useRef:AM,useState:function(){return ep(Wa)},useDebugValue:Gv,useDeferredValue:function(u){var h=ep(Wa),_=h[0],w=h[1];return ph(function(){var E=Nr.transition;Nr.transition={};try{w(u)}finally{Nr.transition=E}},[u]),_},useTransition:function(){var u=ep(Wa)[0],h=Rs().memoizedState;return[u,h]},useMutableSource:gM,useSyncExternalStore:vM,useId:RM,unstable_isNewReconciler:!1},xD={readContext:Rr,useCallback:TM,useContext:Rr,useEffect:ph,useImperativeHandle:CM,useInsertionEffect:wM,useLayoutEffect:MM,useMemo:IM,useReducer:tp,useRef:AM,useState:function(){return tp(Wa)},useDebugValue:Gv,useDeferredValue:function(u){var h=tp(Wa),_=h[0],w=h[1];return ph(function(){var E=Nr.transition;Nr.transition={};try{w(u)}finally{Nr.transition=E}},[u]),_},useTransition:function(){var u=tp(Wa)[0],h=Rs().memoizedState;return[u,h]},useMutableSource:gM,useSyncExternalStore:vM,useId:RM,unstable_isNewReconciler:!1};function zv(u,h){try{var _="",w=h;do _+=fD(w),w=w.return;while(w);var E=_}catch(b){E=`
Error generating stack: `+b.message+`
`+b.stack}return{value:u,source:h,stack:E}}function Hv(u,h){try{console.error(h.value)}catch(_){setTimeout(function(){throw _})}}var SD=typeof WeakMap=="function"?WeakMap:Map;function LM(u,h,_){_=Ys(-1,_),_.tag=3,_.payload={element:null};var w=h.value;return _.callback=function(){xp||(xp=!0,o_=w),Hv(u,h)},_}function DM(u,h,_){_=Ys(-1,_),_.tag=3;var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var E=h.value;_.payload=function(){return w(E)},_.callback=function(){Hv(u,h)}}var b=u.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(_.callback=function(){Hv(u,h),typeof w!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})}),_}function FM(u,h,_){var w=u.pingCache;if(w===null){w=u.pingCache=new SD;var E=new Set;w.set(h,E)}else E=w.get(h),E===void 0&&(E=new Set,w.set(h,E));E.has(_)||(E.add(_),u=DD.bind(null,u,h,_),h.then(u,u))}function OM(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function UM(u,h,_,w,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===h?u.flags|=65536:(u.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(h=Ys(-1,1),h.tag=2,bo(_,h))),_.lanes|=1),u)}function bs(u){u.flags|=4}function kM(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var mh,gh,sp,op;if(Q)mh=function(u,h){for(var _=h.child;_!==null;){if(_.tag===5||_.tag===6)ve(u,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},gh=function(){},sp=function(u,h,_,w,E){if(u=u.memoizedProps,u!==w){var b=h.stateNode,j=Is(Br.current);_=le(b,_,u,w,E,j),(h.updateQueue=_)&&bs(h)}},op=function(u,h,_,w){_!==w&&bs(h)};else if(Ee){mh=function(u,h,_,w){for(var E=h.child;E!==null;){if(E.tag===5){var b=E.stateNode;_&&w&&(b=Oi(b,E.type,E.memoizedProps,E)),ve(u,b)}else if(E.tag===6)b=E.stateNode,_&&w&&(b=Ui(b,E.memoizedProps,E)),ve(u,b);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)b=E.child,b!==null&&(b.return=E),mh(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var GM=function(u,h,_,w){for(var E=h.child;E!==null;){if(E.tag===5){var b=E.stateNode;_&&w&&(b=Oi(b,E.type,E.memoizedProps,E)),dn(u,b)}else if(E.tag===6)b=E.stateNode,_&&w&&(b=Ui(b,E.memoizedProps,E)),dn(u,b);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)b=E.child,b!==null&&(b.return=E),GM(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};gh=function(u,h){var _=h.stateNode;if(!kM(u,h)){u=_.containerInfo;var w=zt(u);GM(w,h,!1,!1),_.pendingChildren=w,bs(h),Pn(u,w)}},sp=function(u,h,_,w,E){var b=u.stateNode,j=u.memoizedProps;if((u=kM(u,h))&&j===w)h.stateNode=b;else{var ne=h.stateNode,_e=Is(Br.current),ke=null;j!==w&&(ke=le(ne,_,j,w,E,_e)),u&&ke===null?h.stateNode=b:(b=vt(b,ke,_,j,w,h,u,ne),Oe(b,_,w,E,_e)&&bs(h),h.stateNode=b,u?bs(h):mh(b,h,!1,!1))}},op=function(u,h,_,w){_!==w?(u=Is(mc.current),_=Is(Br.current),h.stateNode=xe(w,u,_,h),bs(h)):h.stateNode=u.stateNode}}else gh=function(){},sp=function(){},op=function(){};function vh(u,h){if(!Sn)switch(u.tailMode){case"hidden":h=u.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?u.tail=null:_.sibling=null;break;case"collapsed":_=u.tail;for(var w=null;_!==null;)_.alternate!==null&&(w=_),_=_.sibling;w===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function Mi(u){var h=u.alternate!==null&&u.alternate.child===u.child,_=0,w=0;if(h)for(var E=u.child;E!==null;)_|=E.lanes|E.childLanes,w|=E.subtreeFlags&14680064,w|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)_|=E.lanes|E.childLanes,w|=E.subtreeFlags,w|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=w,u.childLanes=_,h}function AD(u,h,_){var w=h.pendingProps;switch(Tv(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(h),null;case 1:return Ft(h.type)&&fn(),Mi(h),null;case 3:return w=h.stateNode,gc(),Pe(wt),Pe(kt),Lv(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(u===null||u.child===null)&&(ah(h)?bs(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ns!==null&&(c_(ns),ns=null))),gh(u,h),Mi(h),null;case 5:Bv(h),_=Is(mc.current);var E=h.type;if(u!==null&&h.stateNode!=null)sp(u,h,E,w,_),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!w){if(h.stateNode===null)throw Error(o(166));return Mi(h),null}if(u=Is(Br.current),ah(h)){if(!Se)throw Error(o(175));u=D(h.stateNode,h.type,h.memoizedProps,_,u,h,!oh),h.updateQueue=u,u!==null&&bs(h)}else{var b=ae(E,w,_,u,h);mh(b,h,!1,!1),h.stateNode=b,Oe(b,E,w,_,u)&&bs(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Mi(h),null;case 6:if(u&&h.stateNode!=null)op(u,h,u.memoizedProps,w);else{if(typeof w!="string"&&h.stateNode===null)throw Error(o(166));if(u=Is(mc.current),_=Is(Br.current),ah(h)){if(!Se)throw Error(o(176));if(u=h.stateNode,w=h.memoizedProps,(_=G(u,w,h,!oh))&&(E=cr,E!==null))switch(b=(E.mode&1)!==0,E.tag){case 3:he(E.stateNode.containerInfo,u,w,b);break;case 5:fe(E.type,E.memoizedProps,E.stateNode,u,w,b)}_&&bs(h)}else h.stateNode=xe(w,u,_,h)}return Mi(h),null;case 13:if(Pe(Mn),w=h.memoizedState,Sn&&ur!==null&&h.mode&1&&!(h.flags&128)){for(u=ur;u;)u=Si(u);return fc(),h.flags|=98560,h}if(w!==null&&w.dehydrated!==null){if(w=ah(h),u===null){if(!w)throw Error(o(318));if(!Se)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));T(u,h)}else fc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Mi(h),null}return ns!==null&&(c_(ns),ns=null),h.flags&128?(h.lanes=_,h):(w=w!==null,_=!1,u===null?ah(h):_=u.memoizedState!==null,w&&!_&&(h.child.flags|=8192,h.mode&1&&(u===null||Mn.current&1?Zn===0&&(Zn=3):h_())),h.updateQueue!==null&&(h.flags|=4),Mi(h),null);case 4:return gc(),gh(u,h),u===null&&Be(h.stateNode.containerInfo),Mi(h),null;case 10:return Sv(h.type._context),Mi(h),null;case 17:return Ft(h.type)&&fn(),Mi(h),null;case 19:if(Pe(Mn),E=h.memoizedState,E===null)return Mi(h),null;if(w=(h.flags&128)!==0,b=E.rendering,b===null)if(w)vh(E,!1);else{if(Zn!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(b=Qf(u),b!==null){for(h.flags|=128,vh(E,!1),u=b.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=_,w=h.child;w!==null;)_=w,E=u,_.flags&=14680066,b=_.alternate,b===null?(_.childLanes=0,_.lanes=E,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=b.childLanes,_.lanes=b.lanes,_.child=b.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=b.memoizedProps,_.memoizedState=b.memoizedState,_.updateQueue=b.updateQueue,_.type=b.type,E=b.dependencies,_.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),w=w.sibling;return at(Mn,Mn.current&1|2),h.child}u=u.sibling}E.tail!==null&&ii()>s_&&(h.flags|=128,w=!0,vh(E,!1),h.lanes=4194304)}else{if(!w)if(u=Qf(b),u!==null){if(h.flags|=128,w=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),vh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!b.alternate&&!Sn)return Mi(h),null}else 2*ii()-E.renderingStartTime>s_&&_!==1073741824&&(h.flags|=128,w=!0,vh(E,!1),h.lanes=4194304);E.isBackwards?(b.sibling=h.child,h.child=b):(u=E.last,u!==null?u.sibling=b:h.child=b,E.last=b)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=ii(),h.sibling=null,u=Mn.current,at(Mn,w?u&1|2:u&1),h):(Mi(h),null);case 22:case 23:return u_(),w=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==w&&(h.flags|=8192),w&&h.mode&1?dr&1073741824&&(Mi(h),Q&&h.subtreeFlags&6&&(h.flags|=8192)):Mi(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var wD=a.ReactCurrentOwner,hr=!1;function Gi(u,h,_,w){h.child=u===null?pM(h,null,_,w):pc(h,u.child,_,w)}function zM(u,h,_,w,E){_=_.render;var b=h.ref;return uc(h,E),w=Fv(u,h,_,w,b,E),_=Ov(),u!==null&&!hr?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~E,$s(u,h,E)):(Sn&&_&&Cv(h),h.flags|=1,Gi(u,h,w,E),h.child)}function HM(u,h,_,w,E){if(u===null){var b=_.type;return typeof b=="function"&&!d_(b)&&b.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(h.tag=15,h.type=b,VM(u,h,b,w,E)):(u=Tp(_.type,null,w,h,h.mode,E),u.ref=h.ref,u.return=h,h.child=u)}if(b=u.child,!(u.lanes&E)){var j=b.memoizedProps;if(_=_.compare,_=_!==null?_:Hf,_(j,w)&&u.ref===h.ref)return $s(u,h,E)}return h.flags|=1,u=Do(b,w),u.ref=h.ref,u.return=h,h.child=u}function VM(u,h,_,w,E){if(u!==null&&Hf(u.memoizedProps,w)&&u.ref===h.ref)if(hr=!1,(u.lanes&E)!==0)u.flags&131072&&(hr=!0);else return h.lanes=u.lanes,$s(u,h,E);return Vv(u,h,_,w,E)}function jM(u,h,_){var w=h.pendingProps,E=w.children,b=u!==null?u.memoizedState:null;if(w.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},at(_c,dr),dr|=_;else if(_&1073741824)h.memoizedState={baseLanes:0,cachePool:null},w=b!==null?b.baseLanes:_,at(_c,dr),dr|=w;else return u=b!==null?b.baseLanes|_:_,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,at(_c,dr),dr|=u,null;else b!==null?(w=b.baseLanes|_,h.memoizedState=null):w=_,at(_c,dr),dr|=w;return Gi(u,h,E,_),h.child}function WM(u,h){var _=h.ref;(u===null&&_!==null||u!==null&&u.ref!==_)&&(h.flags|=512,h.flags|=2097152)}function Vv(u,h,_,w,E){var b=Ft(_)?jt:kt.current;return b=Vn(h,b),uc(h,E),_=Fv(u,h,_,w,b,E),w=Ov(),u!==null&&!hr?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~E,$s(u,h,E)):(Sn&&w&&Cv(h),h.flags|=1,Gi(u,h,_,E),h.child)}function XM(u,h,_,w,E){if(Ft(_)){var b=!0;Zt(h)}else b=!1;if(uc(h,E),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),oM(h,_,w),Ev(h,_,w,E),w=!0;else if(u===null){var j=h.stateNode,ne=h.memoizedProps;j.props=ne;var _e=j.context,ke=_.contextType;typeof ke=="object"&&ke!==null?ke=Rr(ke):(ke=Ft(_)?jt:kt.current,ke=Vn(h,ke));var nt=_.getDerivedStateFromProps,Ct=typeof nt=="function"||typeof j.getSnapshotBeforeUpdate=="function";Ct||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ne!==w||_e!==ke)&&aM(h,j,w,ke),Ro=!1;var pt=h.memoizedState;j.state=pt,Xf(h,w,j,E),_e=h.memoizedState,ne!==w||pt!==_e||wt.current||Ro?(typeof nt=="function"&&(Mv(h,_,nt,w),_e=h.memoizedState),(ne=Ro||sM(h,_,ne,w,pt,_e,ke))?(Ct||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=_e),j.props=w,j.state=_e,j.context=ke,w=ne):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{j=h.stateNode,tM(u,h),ne=h.memoizedProps,ke=h.type===h.elementType?ne:ts(h.type,ne),j.props=ke,Ct=h.pendingProps,pt=j.context,_e=_.contextType,typeof _e=="object"&&_e!==null?_e=Rr(_e):(_e=Ft(_)?jt:kt.current,_e=Vn(h,_e));var hn=_.getDerivedStateFromProps;(nt=typeof hn=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ne!==Ct||pt!==_e)&&aM(h,j,w,_e),Ro=!1,pt=h.memoizedState,j.state=pt,Xf(h,w,j,E);var ct=h.memoizedState;ne!==Ct||pt!==ct||wt.current||Ro?(typeof hn=="function"&&(Mv(h,_,hn,w),ct=h.memoizedState),(ke=Ro||sM(h,_,ke,w,pt,ct,_e)||!1)?(nt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(w,ct,_e),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(w,ct,_e)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||ne===u.memoizedProps&&pt===u.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ne===u.memoizedProps&&pt===u.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=ct),j.props=w,j.state=ct,j.context=_e,w=ke):(typeof j.componentDidUpdate!="function"||ne===u.memoizedProps&&pt===u.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ne===u.memoizedProps&&pt===u.memoizedState||(h.flags|=1024),w=!1)}return jv(u,h,_,w,b,E)}function jv(u,h,_,w,E,b){WM(u,h);var j=(h.flags&128)!==0;if(!w&&!j)return E&&Xt(h,_,!1),$s(u,h,b);w=h.stateNode,wD.current=h;var ne=j&&typeof _.getDerivedStateFromError!="function"?null:w.render();return h.flags|=1,u!==null&&j?(h.child=pc(h,u.child,null,b),h.child=pc(h,null,ne,b)):Gi(u,h,ne,b),h.memoizedState=w.state,E&&Xt(h,_,!0),h.child}function JM(u){var h=u.stateNode;h.pendingContext?Wt(u,h.pendingContext,h.pendingContext!==h.context):h.context&&Wt(u,h.context,!1),Pv(u,h.containerInfo)}function KM(u,h,_,w,E){return fc(),bv(E),h.flags|=256,Gi(u,h,_,w),h.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(u){return{baseLanes:u,cachePool:null}}function YM(u,h,_){var w=h.pendingProps,E=Mn.current,b=!1,j=(h.flags&128)!==0,ne;if((ne=j)||(ne=u!==null&&u.memoizedState===null?!1:(E&2)!==0),ne?(b=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),at(Mn,E&1),u===null)return Rv(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?Ss(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(E=w.children,u=w.fallback,b?(w=h.mode,b=h.child,E={mode:"hidden",children:E},!(w&1)&&b!==null?(b.childLanes=0,b.pendingProps=E):b=Ip(E,w,0,null),u=Qa(u,w,_,null),b.return=h,u.return=h,b.sibling=u,h.child=b,h.child.memoizedState=lp(_),h.memoizedState=ap,u):Wv(h,E));if(E=u.memoizedState,E!==null){if(ne=E.dehydrated,ne!==null){if(j)return h.flags&256?(h.flags&=-257,cp(u,h,_,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(b=w.fallback,E=h.mode,w=Ip({mode:"visible",children:w.children},E,0,null),b=Qa(b,E,_,null),b.flags|=2,w.return=h,b.return=h,w.sibling=b,h.child=w,h.mode&1&&pc(h,u.child,null,_),h.child.memoizedState=lp(_),h.memoizedState=ap,b);if(!(h.mode&1))h=cp(u,h,_,null);else if(Ss(ne))h=cp(u,h,_,Error(o(419)));else if(w=(_&u.childLanes)!==0,hr||w){if(w=jn,w!==null){switch(_&-_){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}w=b&(w.suspendedLanes|_)?0:b,w!==0&&w!==E.retryLane&&(E.retryLane=w,Lr(u,w,-1))}h_(),h=cp(u,h,_,Error(o(421)))}else xs(ne)?(h.flags|=128,h.child=u.child,h=FD.bind(null,u),As(ne,h),h=null):(_=E.treeContext,Se&&(ur=ih(ne),cr=h,Sn=!0,ns=null,oh=!1,_!==null&&(br[Pr++]=Zs,br[Pr++]=Qs,br[Pr++]=Va,Zs=_.id,Qs=_.overflow,Va=h)),h=Wv(h,h.pendingProps.children),h.flags|=4096);return h}return b?(w=QM(u,h,w.children,w.fallback,_),b=h.child,E=u.child.memoizedState,b.memoizedState=E===null?lp(_):{baseLanes:E.baseLanes|_,cachePool:null},b.childLanes=u.childLanes&~_,h.memoizedState=ap,w):(_=ZM(u,h,w.children,_),h.memoizedState=null,_)}return b?(w=QM(u,h,w.children,w.fallback,_),b=h.child,E=u.child.memoizedState,b.memoizedState=E===null?lp(_):{baseLanes:E.baseLanes|_,cachePool:null},b.childLanes=u.childLanes&~_,h.memoizedState=ap,w):(_=ZM(u,h,w.children,_),h.memoizedState=null,_)}function Wv(u,h){return h=Ip({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function ZM(u,h,_,w){var E=u.child;return u=E.sibling,_=Do(E,{mode:"visible",children:_}),!(h.mode&1)&&(_.lanes=w),_.return=h,_.sibling=null,u!==null&&(w=h.deletions,w===null?(h.deletions=[u],h.flags|=16):w.push(u)),h.child=_}function QM(u,h,_,w,E){var b=h.mode;u=u.child;var j=u.sibling,ne={mode:"hidden",children:_};return!(b&1)&&h.child!==u?(_=h.child,_.childLanes=0,_.pendingProps=ne,h.deletions=null):(_=Do(u,ne),_.subtreeFlags=u.subtreeFlags&14680064),j!==null?w=Do(j,w):(w=Qa(w,b,E,null),w.flags|=2),w.return=h,_.return=h,_.sibling=w,h.child=_,w}function cp(u,h,_,w){return w!==null&&bv(w),pc(h,u.child,null,_),u=Wv(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function qM(u,h,_){u.lanes|=h;var w=u.alternate;w!==null&&(w.lanes|=h),Av(u.return,h,_)}function Xv(u,h,_,w,E){var b=u.memoizedState;b===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:_,tailMode:E}:(b.isBackwards=h,b.rendering=null,b.renderingStartTime=0,b.last=w,b.tail=_,b.tailMode=E)}function $M(u,h,_){var w=h.pendingProps,E=w.revealOrder,b=w.tail;if(Gi(u,h,w.children,_),w=Mn.current,w&2)w=w&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&qM(u,_,h);else if(u.tag===19)qM(u,_,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}if(at(Mn,w),!(h.mode&1))h.memoizedState=null;else switch(E){case"forwards":for(_=h.child,E=null;_!==null;)u=_.alternate,u!==null&&Qf(u)===null&&(E=_),_=_.sibling;_=E,_===null?(E=h.child,h.child=null):(E=_.sibling,_.sibling=null),Xv(h,!1,E,_,b);break;case"backwards":for(_=null,E=h.child,h.child=null;E!==null;){if(u=E.alternate,u!==null&&Qf(u)===null){h.child=E;break}u=E.sibling,E.sibling=_,_=E,E=u}Xv(h,!0,_,null,b);break;case"together":Xv(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function $s(u,h,_){if(u!==null&&(h.dependencies=u.dependencies),yc|=h.lanes,!(_&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,_=Do(u,u.pendingProps),h.child=_,_.return=h;u.sibling!==null;)u=u.sibling,_=_.sibling=Do(u,u.pendingProps),_.return=h;_.sibling=null}return h.child}function MD(u,h,_){switch(h.tag){case 3:JM(h),fc();break;case 5:mM(h);break;case 1:Ft(h.type)&&Zt(h);break;case 4:Pv(h,h.stateNode.containerInfo);break;case 10:eM(h,h.type._context,h.memoizedProps.value);break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(at(Mn,Mn.current&1),h.flags|=128,null):_&h.child.childLanes?YM(u,h,_):(at(Mn,Mn.current&1),u=$s(u,h,_),u!==null?u.sibling:null);at(Mn,Mn.current&1);break;case 19:if(w=(_&h.childLanes)!==0,u.flags&128){if(w)return $M(u,h,_);h.flags|=128}var E=h.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),at(Mn,Mn.current),w)break;return null;case 22:case 23:return h.lanes=0,jM(u,h,_)}return $s(u,h,_)}function ED(u,h){switch(Tv(h),h.tag){case 1:return Ft(h.type)&&fn(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return gc(),Pe(wt),Pe(kt),Lv(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return Bv(h),null;case 13:if(Pe(Mn),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));fc()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return Pe(Mn),null;case 4:return gc(),null;case 10:return Sv(h.type._context),null;case 22:case 23:return u_(),null;case 24:return null;default:return null}}var up=!1,Xa=!1,CD=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function hp(u,h){var _=u.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(w){qi(u,h,w)}else _.current=null}function Jv(u,h,_){try{_()}catch(w){qi(u,h,w)}}var e2=!1;function TD(u,h){for(Z(u.containerInfo),Ke=h;Ke!==null;)if(u=Ke,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,Ke=h;else for(;Ke!==null;){u=Ke;try{var _=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,E=_.memoizedState,b=u.stateNode,j=b.getSnapshotBeforeUpdate(u.elementType===u.type?w:ts(u.type,w),E);b.__reactInternalSnapshotBeforeUpdate=j}break;case 3:Q&&ze(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ne){qi(u,u.return,ne)}if(h=u.sibling,h!==null){h.return=u.return,Ke=h;break}Ke=u.return}return _=e2,e2=!1,_}function Ja(u,h,_){var w=h.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var E=w=w.next;do{if((E.tag&u)===u){var b=E.destroy;E.destroy=void 0,b!==void 0&&Jv(h,_,b)}E=E.next}while(E!==w)}}function _h(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var _=h=h.next;do{if((_.tag&u)===u){var w=_.create;_.destroy=w()}_=_.next}while(_!==h)}}function Kv(u){var h=u.ref;if(h!==null){var _=u.stateNode;switch(u.tag){case 5:u=ee(_);break;default:u=_}typeof h=="function"?h(u):h.current=u}}function t2(u,h,_){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(Gf,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var w=u=u.next;do{var E=w,b=E.destroy;E=E.tag,b!==void 0&&(E&2||E&4)&&Jv(h,_,b),w=w.next}while(w!==u)}break;case 1:if(hp(h,_),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(j){qi(h,_,j)}break;case 5:hp(h,_);break;case 4:Q?a2(u,h,_):Ee&&Ee&&(h=h.stateNode.containerInfo,_=zt(h),Yt(h,_))}}function n2(u,h,_){for(var w=h;;)if(t2(u,w,_),w.child===null||Q&&w.tag===4){if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function i2(u){var h=u.alternate;h!==null&&(u.alternate=null,i2(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Ye(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function r2(u){return u.tag===5||u.tag===3||u.tag===4}function s2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||r2(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function o2(u){if(Q){e:{for(var h=u.return;h!==null;){if(r2(h))break e;h=h.return}throw Error(o(160))}var _=h;switch(_.tag){case 5:h=_.stateNode,_.flags&32&&(Ut(h),_.flags&=-33),_=s2(u),Zv(u,_,h);break;case 3:case 4:h=_.stateNode.containerInfo,_=s2(u),Yv(u,_,h);break;default:throw Error(o(161))}}}function Yv(u,h,_){var w=u.tag;if(w===5||w===6)u=u.stateNode,h?Ge(_,u,h):_t(_,u);else if(w!==4&&(u=u.child,u!==null))for(Yv(u,h,_),u=u.sibling;u!==null;)Yv(u,h,_),u=u.sibling}function Zv(u,h,_){var w=u.tag;if(w===5||w===6)u=u.stateNode,h?ft(_,u,h):Ve(_,u);else if(w!==4&&(u=u.child,u!==null))for(Zv(u,h,_),u=u.sibling;u!==null;)Zv(u,h,_),u=u.sibling}function a2(u,h,_){for(var w=h,E=!1,b,j;;){if(!E){E=w.return;e:for(;;){if(E===null)throw Error(o(160));switch(b=E.stateNode,E.tag){case 5:j=!1;break e;case 3:b=b.containerInfo,j=!0;break e;case 4:b=b.containerInfo,j=!0;break e}E=E.return}E=!0}if(w.tag===5||w.tag===6)n2(u,w,_),j?Et(b,w.stateNode):Mt(b,w.stateNode);else if(w.tag===18)j?re(b,w.stateNode):X(b,w.stateNode);else if(w.tag===4){if(w.child!==null){b=w.stateNode.containerInfo,j=!0,w.child.return=w,w=w.child;continue}}else if(t2(u,w,_),w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return,w.tag===4&&(E=!1)}w.sibling.return=w.return,w=w.sibling}}function Qv(u,h){if(Q){switch(h.tag){case 0:case 11:case 14:case 15:Ja(3,h,h.return),_h(3,h),Ja(5,h,h.return);return;case 1:return;case 5:var _=h.stateNode;if(_!=null){var w=h.memoizedProps;u=u!==null?u.memoizedProps:w;var E=h.type,b=h.updateQueue;h.updateQueue=null,b!==null&&Nt(_,b,E,u,w,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));_=h.memoizedProps,Fe(h.stateNode,u!==null?u.memoizedProps:_,_);return;case 3:Se&&u!==null&&u.memoizedState.isDehydrated&&H(h.stateNode.containerInfo);return;case 12:return;case 13:dp(h);return;case 19:dp(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ja(3,h,h.return),_h(3,h),Ja(5,h,h.return);return;case 12:return;case 13:dp(h);return;case 19:dp(h);return;case 3:Se&&u!==null&&u.memoizedState.isDehydrated&&H(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ee){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Yt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function dp(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var _=u.stateNode;_===null&&(_=u.stateNode=new CD),h.forEach(function(w){var E=OD.bind(null,u,w);_.has(w)||(_.add(w),w.then(E,E))})}}function ID(u,h){for(Ke=h;Ke!==null;){h=Ke;var _=h.deletions;if(_!==null)for(var w=0;w<_.length;w++){var E=_[w];try{var b=u;Q?a2(b,E,h):n2(b,E,h);var j=E.alternate;j!==null&&(j.return=null),E.return=null}catch(lt){qi(E,h,lt)}}if(_=h.child,h.subtreeFlags&12854&&_!==null)_.return=h,Ke=_;else for(;Ke!==null;){h=Ke;try{var ne=h.flags;if(ne&32&&Q&&Ut(h.stateNode),ne&512){var _e=h.alternate;if(_e!==null){var ke=_e.ref;ke!==null&&(typeof ke=="function"?ke(null):ke.current=null)}}if(ne&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var nt=h.alternate;(nt===null||nt.memoizedState===null)&&(r_=ii())}break;case 22:var Ct=h.memoizedState!==null,pt=h.alternate,hn=pt!==null&&pt.memoizedState!==null;if(_=h,Q){e:if(w=_,E=Ct,b=null,Q)for(var ct=w;;){if(ct.tag===5){if(b===null){b=ct;var Ei=ct.stateNode;E?q(Ei):ie(ct.stateNode,ct.memoizedProps)}}else if(ct.tag===6){if(b===null){var Fr=ct.stateNode;E?Ze(Fr):Me(Fr,ct.memoizedProps)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===w)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===w)break;for(;ct.sibling===null;){if(ct.return===null||ct.return===w)break e;b===ct&&(b=null),ct=ct.return}b===ct&&(b=null),ct.sibling.return=ct.return,ct=ct.sibling}}if(Ct&&!hn&&_.mode&1){Ke=_;for(var ue=_.child;ue!==null;){for(_=Ke=ue;Ke!==null;){w=Ke;var se=w.child;switch(w.tag){case 0:case 11:case 14:case 15:Ja(4,w,w.return);break;case 1:hp(w,w.return);var me=w.stateNode;if(typeof me.componentWillUnmount=="function"){var Qe=w.return;try{me.props=w.memoizedProps,me.state=w.memoizedState,me.componentWillUnmount()}catch(lt){qi(w,Qe,lt)}}break;case 5:hp(w,w.return);break;case 22:if(w.memoizedState!==null){u2(_);continue}}se!==null?(se.return=w,Ke=se):u2(_)}ue=ue.sibling}}}switch(ne&4102){case 2:o2(h),h.flags&=-3;break;case 6:o2(h),h.flags&=-3,Qv(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Qv(h.alternate,h);break;case 4:Qv(h.alternate,h)}}catch(lt){qi(h,h.return,lt)}if(_=h.sibling,_!==null){_.return=h.return,Ke=_;break}Ke=h.return}}}function RD(u,h,_){Ke=u,l2(u)}function l2(u,h,_){for(var w=(u.mode&1)!==0;Ke!==null;){var E=Ke,b=E.child;if(E.tag===22&&w){var j=E.memoizedState!==null||up;if(!j){var ne=E.alternate,_e=ne!==null&&ne.memoizedState!==null||Xa;ne=up;var ke=Xa;if(up=j,(Xa=_e)&&!ke)for(Ke=E;Ke!==null;)j=Ke,_e=j.child,j.tag===22&&j.memoizedState!==null?h2(E):_e!==null?(_e.return=j,Ke=_e):h2(E);for(;b!==null;)Ke=b,l2(b),b=b.sibling;Ke=E,up=ne,Xa=ke}c2(u)}else E.subtreeFlags&8772&&b!==null?(b.return=E,Ke=b):c2(u)}}function c2(u){for(;Ke!==null;){var h=Ke;if(h.flags&8772){var _=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Xa||_h(5,h);break;case 1:var w=h.stateNode;if(h.flags&4&&!Xa)if(_===null)w.componentDidMount();else{var E=h.elementType===h.type?_.memoizedProps:ts(h.type,_.memoizedProps);w.componentDidUpdate(E,_.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var b=h.updateQueue;b!==null&&iM(h,b,w);break;case 3:var j=h.updateQueue;if(j!==null){if(_=null,h.child!==null)switch(h.child.tag){case 5:_=ee(h.child.stateNode);break;case 1:_=h.child.stateNode}iM(h,j,_)}break;case 5:var ne=h.stateNode;_===null&&h.flags&4&&rt(ne,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&h.memoizedState===null){var _e=h.alternate;if(_e!==null){var ke=_e.memoizedState;if(ke!==null){var nt=ke.dehydrated;nt!==null&&V(nt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Xa||h.flags&512&&Kv(h)}catch(Ct){qi(h,h.return,Ct)}}if(h===u){Ke=null;break}if(_=h.sibling,_!==null){_.return=h.return,Ke=_;break}Ke=h.return}}function u2(u){for(;Ke!==null;){var h=Ke;if(h===u){Ke=null;break}var _=h.sibling;if(_!==null){_.return=h.return,Ke=_;break}Ke=h.return}}function h2(u){for(;Ke!==null;){var h=Ke;try{switch(h.tag){case 0:case 11:case 15:var _=h.return;try{_h(4,h)}catch(_e){qi(h,_,_e)}break;case 1:var w=h.stateNode;if(typeof w.componentDidMount=="function"){var E=h.return;try{w.componentDidMount()}catch(_e){qi(h,E,_e)}}var b=h.return;try{Kv(h)}catch(_e){qi(h,b,_e)}break;case 5:var j=h.return;try{Kv(h)}catch(_e){qi(h,j,_e)}}}catch(_e){qi(h,h.return,_e)}if(h===u){Ke=null;break}var ne=h.sibling;if(ne!==null){ne.return=h.return,Ke=ne;break}Ke=h.return}}var fp=0,pp=1,mp=2,gp=3,vp=4;if(typeof Symbol=="function"&&Symbol.for){var yh=Symbol.for;fp=yh("selector.component"),pp=yh("selector.has_pseudo_class"),mp=yh("selector.role"),gp=yh("selector.test_id"),vp=yh("selector.text")}function qv(u){var h=De(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=F(u),u===null)throw Error(o(362));return u.stateNode.current}function $v(u,h){switch(h.$$typeof){case fp:if(u.type===h.value)return!0;break;case pp:e:{h=h.value,u=[u,0];for(var _=0;_<u.length;){var w=u[_++],E=u[_++],b=h[E];if(w.tag!==5||!Ce(w)){for(;b!=null&&$v(w,b);)E++,b=h[E];if(E===h.length){h=!0;break e}else for(w=w.child;w!==null;)u.push(w,E),w=w.sibling}}h=!1}return h;case mp:if(u.tag===5&&be(u.stateNode,h.value))return!0;break;case vp:if((u.tag===5||u.tag===6)&&(u=Re(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case gp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function e_(u){switch(u.$$typeof){case fp:return"<"+(L(u.value)||"Unknown")+">";case pp:return":has("+(e_(u)||"")+")";case mp:return'[role="'+u.value+'"]';case vp:return'"'+u.value+'"';case gp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function d2(u,h){var _=[];u=[u,0];for(var w=0;w<u.length;){var E=u[w++],b=u[w++],j=h[b];if(E.tag!==5||!Ce(E)){for(;j!=null&&$v(E,j);)b++,j=h[b];if(b===h.length)_.push(E);else for(E=E.child;E!==null;)u.push(E,b),E=E.sibling}}return _}function t_(u,h){if(!W)throw Error(o(363));u=qv(u),u=d2(u,h),h=[],u=Array.from(u);for(var _=0;_<u.length;){var w=u[_++];if(w.tag===5)Ce(w)||h.push(w.stateNode);else for(w=w.child;w!==null;)u.push(w),w=w.sibling}return h}var bD=Math.ceil,_p=a.ReactCurrentDispatcher,n_=a.ReactCurrentOwner,Un=a.ReactCurrentBatchConfig,Ot=0,jn=null,Wn=null,hi=0,dr=0,_c=tt(0),Zn=0,xh=null,yc=0,yp=0,i_=0,Sh=null,Zi=null,r_=0,s_=1/0;function xc(){s_=ii()+500}var xp=!1,o_=null,Po=null,Sp=!1,Bo=null,Ap=0,Ah=0,a_=null,wp=-1,Mp=0;function zi(){return Ot&6?ii():wp!==-1?wp:wp=ii()}function No(u){return u.mode&1?Ot&2&&hi!==0?hi&-hi:dD.transition!==null?(Mp===0&&(u=Of,Of<<=1,!(Of&4194240)&&(Of=64),Mp=u),Mp):(u=$t,u!==0?u:Ne()):1}function Lr(u,h,_){if(50<Ah)throw Ah=0,a_=null,Error(o(185));var w=Ep(u,h);return w===null?null:(sh(w,h,_),(!(Ot&2)||w!==jn)&&(w===jn&&(!(Ot&2)&&(yp|=h),Zn===4&&Lo(w,hi)),Qi(w,_),h===1&&Ot===0&&!(u.mode&1)&&(xc(),zf&&Cs())),w)}function Ep(u,h){u.lanes|=h;var _=u.alternate;for(_!==null&&(_.lanes|=h),_=u,u=u.return;u!==null;)u.childLanes|=h,_=u.alternate,_!==null&&(_.childLanes|=h),_=u,u=u.return;return _.tag===3?_.stateNode:null}function Qi(u,h){var _=u.callbackNode;iD(u,h);var w=kf(u,u===jn?hi:0);if(w===0)_!==null&&qw(_),u.callbackNode=null,u.callbackPriority=0;else if(h=w&-w,u.callbackPriority!==h){if(_!=null&&qw(_),h===1)u.tag===0?hD(p2.bind(null,u)):$w(p2.bind(null,u)),Je?St(function(){Ot===0&&Cs()}):mv(gv,Cs),_=null;else{switch(Qw(w)){case 1:_=gv;break;case 4:_=aD;break;case 16:_=vv;break;case 536870912:_=lD;break;default:_=vv}_=w2(_,f2.bind(null,u))}u.callbackPriority=h,u.callbackNode=_}}function f2(u,h){if(wp=-1,Mp=0,Ot&6)throw Error(o(327));var _=u.callbackNode;if(Za()&&u.callbackNode!==_)return null;var w=kf(u,u===jn?hi:0);if(w===0)return null;if(w&30||w&u.expiredLanes||h)h=Cp(u,w);else{h=w;var E=Ot;Ot|=2;var b=v2();(jn!==u||hi!==h)&&(xc(),Ka(u,h));do try{ND();break}catch(ne){g2(u,ne)}while(!0);xv(),_p.current=b,Ot=E,Wn!==null?h=0:(jn=null,hi=0,h=Zn)}if(h!==0){if(h===2&&(E=dv(u),E!==0&&(w=E,h=l_(u,E))),h===1)throw _=xh,Ka(u,0),Lo(u,w),Qi(u,ii()),_;if(h===6)Lo(u,w);else{if(E=u.current.alternate,!(w&30)&&!PD(E)&&(h=Cp(u,w),h===2&&(b=dv(u),b!==0&&(w=b,h=l_(u,b))),h===1))throw _=xh,Ka(u,0),Lo(u,w),Qi(u,ii()),_;switch(u.finishedWork=E,u.finishedLanes=w,h){case 0:case 1:throw Error(o(345));case 2:Ya(u,Zi);break;case 3:if(Lo(u,w),(w&130023424)===w&&(h=r_+500-ii(),10<h)){if(kf(u,0)!==0)break;if(E=u.suspendedLanes,(E&w)!==w){zi(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=Ie(Ya.bind(null,u,Zi),h);break}Ya(u,Zi);break;case 4:if(Lo(u,w),(w&4194240)===w)break;for(h=u.eventTimes,E=-1;0<w;){var j=31-un(w);b=1<<j,j=h[j],j>E&&(E=j),w&=~b}if(w=E,w=ii()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*bD(w/1960))-w,10<w){u.timeoutHandle=Ie(Ya.bind(null,u,Zi),w);break}Ya(u,Zi);break;case 5:Ya(u,Zi);break;default:throw Error(o(329))}}}return Qi(u,ii()),u.callbackNode===_?f2.bind(null,u):null}function l_(u,h){var _=Sh;return u.current.memoizedState.isDehydrated&&(Ka(u,h).flags|=256),u=Cp(u,h),u!==2&&(h=Zi,Zi=_,h!==null&&c_(h)),u}function c_(u){Zi===null?Zi=u:Zi.push.apply(Zi,u)}function PD(u){for(var h=u;;){if(h.flags&16384){var _=h.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var w=0;w<_.length;w++){var E=_[w],b=E.getSnapshot;E=E.value;try{if(!Es(b(),E))return!1}catch{return!1}}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Lo(u,h){for(h&=~i_,h&=~yp,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var _=31-un(h),w=1<<_;u[_]=-1,h&=~w}}function p2(u){if(Ot&6)throw Error(o(327));Za();var h=kf(u,0);if(!(h&1))return Qi(u,ii()),null;var _=Cp(u,h);if(u.tag!==0&&_===2){var w=dv(u);w!==0&&(h=w,_=l_(u,w))}if(_===1)throw _=xh,Ka(u,0),Lo(u,h),Qi(u,ii()),_;if(_===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Ya(u,Zi),Qi(u,ii()),null}function m2(u){Bo!==null&&Bo.tag===0&&!(Ot&6)&&Za();var h=Ot;Ot|=1;var _=Un.transition,w=$t;try{if(Un.transition=null,$t=1,u)return u()}finally{$t=w,Un.transition=_,Ot=h,!(Ot&6)&&Cs()}}function u_(){dr=_c.current,Pe(_c)}function Ka(u,h){u.finishedWork=null,u.finishedLanes=0;var _=u.timeoutHandle;if(_!==xt&&(u.timeoutHandle=xt,dt(_)),Wn!==null)for(_=Wn.return;_!==null;){var w=_;switch(Tv(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&fn();break;case 3:gc(),Pe(wt),Pe(kt),Lv();break;case 5:Bv(w);break;case 4:gc();break;case 13:Pe(Mn);break;case 19:Pe(Mn);break;case 10:Sv(w.type._context);break;case 22:case 23:u_()}_=_.return}if(jn=u,Wn=u=Do(u.current,null),hi=dr=h,Zn=0,xh=null,i_=yp=yc=0,Zi=Sh=null,Ts!==null){for(h=0;h<Ts.length;h++)if(_=Ts[h],w=_.interleaved,w!==null){_.interleaved=null;var E=w.next,b=_.pending;if(b!==null){var j=b.next;b.next=E,w.next=j}_.pending=w}Ts=null}return u}function g2(u,h){do{var _=Wn;try{if(xv(),qf.current=rp,$f){for(var w=Bn.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}$f=!1}if(vc=0,ri=Ai=Bn=null,hh=!1,dh=0,n_.current=null,_===null||_.return===null){Zn=1,xh=h,Wn=null;break}e:{var b=u,j=_.return,ne=_,_e=h;if(h=hi,ne.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var ke=_e,nt=ne,Ct=nt.tag;if(!(nt.mode&1)&&(Ct===0||Ct===11||Ct===15)){var pt=nt.alternate;pt?(nt.updateQueue=pt.updateQueue,nt.memoizedState=pt.memoizedState,nt.lanes=pt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var hn=OM(j);if(hn!==null){hn.flags&=-257,UM(hn,j,ne,b,h),hn.mode&1&&FM(b,ke,h),h=hn,_e=ke;var ct=h.updateQueue;if(ct===null){var Ei=new Set;Ei.add(_e),h.updateQueue=Ei}else ct.add(_e);break e}else{if(!(h&1)){FM(b,ke,h),h_();break e}_e=Error(o(426))}}else if(Sn&&ne.mode&1){var Fr=OM(j);if(Fr!==null){!(Fr.flags&65536)&&(Fr.flags|=256),UM(Fr,j,ne,b,h),bv(_e);break e}}b=_e,Zn!==4&&(Zn=2),Sh===null?Sh=[b]:Sh.push(b),_e=zv(_e,ne),ne=j;do{switch(ne.tag){case 3:ne.flags|=65536,h&=-h,ne.lanes|=h;var ue=LM(ne,_e,h);nM(ne,ue);break e;case 1:b=_e;var se=ne.type,me=ne.stateNode;if(!(ne.flags&128)&&(typeof se.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(Po===null||!Po.has(me)))){ne.flags|=65536,h&=-h,ne.lanes|=h;var Qe=DM(ne,b,h);nM(ne,Qe);break e}}ne=ne.return}while(ne!==null)}y2(_)}catch(lt){h=lt,Wn===_&&_!==null&&(Wn=_=_.return);continue}break}while(!0)}function v2(){var u=_p.current;return _p.current=rp,u===null?rp:u}function h_(){(Zn===0||Zn===3||Zn===2)&&(Zn=4),jn===null||!(yc&268435455)&&!(yp&268435455)||Lo(jn,hi)}function Cp(u,h){var _=Ot;Ot|=2;var w=v2();jn===u&&hi===h||Ka(u,h);do try{BD();break}catch(E){g2(u,E)}while(!0);if(xv(),Ot=_,_p.current=w,Wn!==null)throw Error(o(261));return jn=null,hi=0,Zn}function BD(){for(;Wn!==null;)_2(Wn)}function ND(){for(;Wn!==null&&!sD();)_2(Wn)}function _2(u){var h=A2(u.alternate,u,dr);u.memoizedProps=u.pendingProps,h===null?y2(u):Wn=h,n_.current=null}function y2(u){var h=u;do{var _=h.alternate;if(u=h.return,h.flags&32768){if(_=ED(_,h),_!==null){_.flags&=32767,Wn=_;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Zn=6,Wn=null;return}}else if(_=AD(_,h,dr),_!==null){Wn=_;return}if(h=h.sibling,h!==null){Wn=h;return}Wn=h=u}while(h!==null);Zn===0&&(Zn=5)}function Ya(u,h){var _=$t,w=Un.transition;try{Un.transition=null,$t=1,LD(u,h,_)}finally{Un.transition=w,$t=_}return null}function LD(u,h,_){do Za();while(Bo!==null);if(Ot&6)throw Error(o(327));var w=u.finishedWork,E=u.finishedLanes;if(w===null)return null;if(u.finishedWork=null,u.finishedLanes=0,w===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var b=w.lanes|w.childLanes;if(rD(u,b),u===jn&&(Wn=jn=null,hi=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||Sp||(Sp=!0,w2(vv,function(){return Za(),null})),b=(w.flags&15990)!==0,w.subtreeFlags&15990||b){b=Un.transition,Un.transition=null;var j=$t;$t=1;var ne=Ot;Ot|=4,n_.current=null,TD(u,w),ID(u,w),K(u.containerInfo),u.current=w,RD(w),oD(),Ot=ne,$t=j,Un.transition=b}else u.current=w;if(Sp&&(Sp=!1,Bo=u,Ap=E),b=u.pendingLanes,b===0&&(Po=null),cD(w.stateNode),Qi(u,ii()),h!==null)for(_=u.onRecoverableError,w=0;w<h.length;w++)_(h[w]);if(xp)throw xp=!1,u=o_,o_=null,u;return Ap&1&&u.tag!==0&&Za(),b=u.pendingLanes,b&1?u===a_?Ah++:(Ah=0,a_=u):Ah=0,Cs(),null}function Za(){if(Bo!==null){var u=Qw(Ap),h=Un.transition,_=$t;try{if(Un.transition=null,$t=16>u?16:u,Bo===null)var w=!1;else{if(u=Bo,Bo=null,Ap=0,Ot&6)throw Error(o(331));var E=Ot;for(Ot|=4,Ke=u.current;Ke!==null;){var b=Ke,j=b.child;if(Ke.flags&16){var ne=b.deletions;if(ne!==null){for(var _e=0;_e<ne.length;_e++){var ke=ne[_e];for(Ke=ke;Ke!==null;){var nt=Ke;switch(nt.tag){case 0:case 11:case 15:Ja(8,nt,b)}var Ct=nt.child;if(Ct!==null)Ct.return=nt,Ke=Ct;else for(;Ke!==null;){nt=Ke;var pt=nt.sibling,hn=nt.return;if(i2(nt),nt===ke){Ke=null;break}if(pt!==null){pt.return=hn,Ke=pt;break}Ke=hn}}}var ct=b.alternate;if(ct!==null){var Ei=ct.child;if(Ei!==null){ct.child=null;do{var Fr=Ei.sibling;Ei.sibling=null,Ei=Fr}while(Ei!==null)}}Ke=b}}if(b.subtreeFlags&2064&&j!==null)j.return=b,Ke=j;else e:for(;Ke!==null;){if(b=Ke,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Ja(9,b,b.return)}var ue=b.sibling;if(ue!==null){ue.return=b.return,Ke=ue;break e}Ke=b.return}}var se=u.current;for(Ke=se;Ke!==null;){j=Ke;var me=j.child;if(j.subtreeFlags&2064&&me!==null)me.return=j,Ke=me;else e:for(j=se;Ke!==null;){if(ne=Ke,ne.flags&2048)try{switch(ne.tag){case 0:case 11:case 15:_h(9,ne)}}catch(lt){qi(ne,ne.return,lt)}if(ne===j){Ke=null;break e}var Qe=ne.sibling;if(Qe!==null){Qe.return=ne.return,Ke=Qe;break e}Ke=ne.return}}if(Ot=E,Cs(),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(Gf,u)}catch{}w=!0}return w}finally{$t=_,Un.transition=h}}return!1}function x2(u,h,_){h=zv(_,h),h=LM(u,h,1),bo(u,h),h=zi(),u=Ep(u,1),u!==null&&(sh(u,1,h),Qi(u,h))}function qi(u,h,_){if(u.tag===3)x2(u,u,_);else for(;h!==null;){if(h.tag===3){x2(h,u,_);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Po===null||!Po.has(w))){u=zv(_,u),u=DM(h,u,1),bo(h,u),u=zi(),h=Ep(h,1),h!==null&&(sh(h,1,u),Qi(h,u));break}}h=h.return}}function DD(u,h,_){var w=u.pingCache;w!==null&&w.delete(h),h=zi(),u.pingedLanes|=u.suspendedLanes&_,jn===u&&(hi&_)===_&&(Zn===4||Zn===3&&(hi&130023424)===hi&&500>ii()-r_?Ka(u,0):i_|=_),Qi(u,h)}function S2(u,h){h===0&&(u.mode&1?(h=Uf,Uf<<=1,!(Uf&130023424)&&(Uf=4194304)):h=1);var _=zi();u=Ep(u,h),u!==null&&(sh(u,h,_),Qi(u,_))}function FD(u){var h=u.memoizedState,_=0;h!==null&&(_=h.retryLane),S2(u,_)}function OD(u,h){var _=0;switch(u.tag){case 13:var w=u.stateNode,E=u.memoizedState;E!==null&&(_=E.retryLane);break;case 19:w=u.stateNode;break;default:throw Error(o(314))}w!==null&&w.delete(h),S2(u,_)}var A2;A2=function(u,h,_){if(u!==null)if(u.memoizedProps!==h.pendingProps||wt.current)hr=!0;else{if(!(u.lanes&_)&&!(h.flags&128))return hr=!1,MD(u,h,_);hr=!!(u.flags&131072)}else hr=!1,Sn&&h.flags&1048576&&lM(h,Yf,h.index);switch(h.lanes=0,h.tag){case 2:var w=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var E=Vn(h,kt.current);uc(h,_),E=Fv(null,h,w,u,E,_);var b=Ov();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Ft(w)?(b=!0,Zt(h)):b=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,wv(h),E.updater=Jf,h.stateNode=E,E._reactInternals=h,Ev(h,w,u,_),h=jv(null,h,w,!0,b,_)):(h.tag=0,Sn&&b&&Cv(h),Gi(null,h,E,_),h=h.child),h;case 16:w=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,E=w._init,w=E(w._payload),h.type=w,E=h.tag=kD(w),u=ts(w,u),E){case 0:h=Vv(null,h,w,u,_);break e;case 1:h=XM(null,h,w,u,_);break e;case 11:h=zM(null,h,w,u,_);break e;case 14:h=HM(null,h,w,ts(w.type,u),_);break e}throw Error(o(306,w,""))}return h;case 0:return w=h.type,E=h.pendingProps,E=h.elementType===w?E:ts(w,E),Vv(u,h,w,E,_);case 1:return w=h.type,E=h.pendingProps,E=h.elementType===w?E:ts(w,E),XM(u,h,w,E,_);case 3:e:{if(JM(h),u===null)throw Error(o(387));w=h.pendingProps,b=h.memoizedState,E=b.element,tM(u,h),Xf(h,w,null,_);var j=h.memoizedState;if(w=j.element,Se&&b.isDehydrated)if(b={element:w,isDehydrated:!1,cache:j.cache,transitions:j.transitions},h.updateQueue.baseState=b,h.memoizedState=b,h.flags&256){E=Error(o(423)),h=KM(u,h,w,_,E);break e}else if(w!==E){E=Error(o(424)),h=KM(u,h,w,_,E);break e}else for(Se&&(ur=Ha(h.stateNode.containerInfo),cr=h,Sn=!0,ns=null,oh=!1),_=pM(h,null,w,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(fc(),w===E){h=$s(u,h,_);break e}Gi(u,h,w,_)}h=h.child}return h;case 5:return mM(h),u===null&&Rv(h),w=h.type,E=h.pendingProps,b=u!==null?u.memoizedProps:null,j=E.children,Ae(w,E)?j=null:b!==null&&Ae(w,b)&&(h.flags|=32),WM(u,h),Gi(u,h,j,_),h.child;case 6:return u===null&&Rv(h),null;case 13:return YM(u,h,_);case 4:return Pv(h,h.stateNode.containerInfo),w=h.pendingProps,u===null?h.child=pc(h,null,w,_):Gi(u,h,w,_),h.child;case 11:return w=h.type,E=h.pendingProps,E=h.elementType===w?E:ts(w,E),zM(u,h,w,E,_);case 7:return Gi(u,h,h.pendingProps,_),h.child;case 8:return Gi(u,h,h.pendingProps.children,_),h.child;case 12:return Gi(u,h,h.pendingProps.children,_),h.child;case 10:e:{if(w=h.type._context,E=h.pendingProps,b=h.memoizedProps,j=E.value,eM(h,w,j),b!==null)if(Es(b.value,j)){if(b.children===E.children&&!wt.current){h=$s(u,h,_);break e}}else for(b=h.child,b!==null&&(b.return=h);b!==null;){var ne=b.dependencies;if(ne!==null){j=b.child;for(var _e=ne.firstContext;_e!==null;){if(_e.context===w){if(b.tag===1){_e=Ys(-1,_&-_),_e.tag=2;var ke=b.updateQueue;if(ke!==null){ke=ke.shared;var nt=ke.pending;nt===null?_e.next=_e:(_e.next=nt.next,nt.next=_e),ke.pending=_e}}b.lanes|=_,_e=b.alternate,_e!==null&&(_e.lanes|=_),Av(b.return,_,h),ne.lanes|=_;break}_e=_e.next}}else if(b.tag===10)j=b.type===h.type?null:b.child;else if(b.tag===18){if(j=b.return,j===null)throw Error(o(341));j.lanes|=_,ne=j.alternate,ne!==null&&(ne.lanes|=_),Av(j,_,h),j=b.sibling}else j=b.child;if(j!==null)j.return=b;else for(j=b;j!==null;){if(j===h){j=null;break}if(b=j.sibling,b!==null){b.return=j.return,j=b;break}j=j.return}b=j}Gi(u,h,E.children,_),h=h.child}return h;case 9:return E=h.type,w=h.pendingProps.children,uc(h,_),E=Rr(E),w=w(E),h.flags|=1,Gi(u,h,w,_),h.child;case 14:return w=h.type,E=ts(w,h.pendingProps),E=ts(w.type,E),HM(u,h,w,E,_);case 15:return VM(u,h,h.type,h.pendingProps,_);case 17:return w=h.type,E=h.pendingProps,E=h.elementType===w?E:ts(w,E),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Ft(w)?(u=!0,Zt(h)):u=!1,uc(h,_),oM(h,w,E),Ev(h,w,E,_),jv(null,h,w,!0,u,_);case 19:return $M(u,h,_);case 22:return jM(u,h,_)}throw Error(o(156,h.tag))};function w2(u,h){return mv(u,h)}function UD(u,h,_,w){this.tag=u,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(u,h,_,w){return new UD(u,h,_,w)}function d_(u){return u=u.prototype,!(!u||!u.isReactComponent)}function kD(u){if(typeof u=="function")return d_(u)?1:0;if(u!=null){if(u=u.$$typeof,u===S)return 11;if(u===x)return 14}return 2}function Do(u,h){var _=u.alternate;return _===null?(_=Dr(u.tag,h,u.key,u.mode),_.elementType=u.elementType,_.type=u.type,_.stateNode=u.stateNode,_.alternate=u,u.alternate=_):(_.pendingProps=h,_.type=u.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=u.flags&14680064,_.childLanes=u.childLanes,_.lanes=u.lanes,_.child=u.child,_.memoizedProps=u.memoizedProps,_.memoizedState=u.memoizedState,_.updateQueue=u.updateQueue,h=u.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=u.sibling,_.index=u.index,_.ref=u.ref,_}function Tp(u,h,_,w,E,b){var j=2;if(w=u,typeof u=="function")d_(u)&&(j=1);else if(typeof u=="string")j=5;else e:switch(u){case d:return Qa(_.children,E,b,h);case f:j=8,E|=8;break;case p:return u=Dr(12,_,h,E|2),u.elementType=p,u.lanes=b,u;case y:return u=Dr(13,_,h,E),u.elementType=y,u.lanes=b,u;case g:return u=Dr(19,_,h,E),u.elementType=g,u.lanes=b,u;case M:return Ip(_,E,b,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:j=10;break e;case v:j=9;break e;case S:j=11;break e;case x:j=14;break e;case A:j=16,w=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=Dr(j,_,h,E),h.elementType=u,h.type=w,h.lanes=b,h}function Qa(u,h,_,w){return u=Dr(7,u,w,h),u.lanes=_,u}function Ip(u,h,_,w){return u=Dr(22,u,w,h),u.elementType=M,u.lanes=_,u.stateNode={},u}function f_(u,h,_){return u=Dr(6,u,null,h),u.lanes=_,u}function p_(u,h,_){return h=Dr(4,u.children!==null?u.children:[],u.key,h),h.lanes=_,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function GD(u,h,_,w,E){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fv(0),this.expirationTimes=fv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fv(0),this.identifierPrefix=w,this.onRecoverableError=E,Se&&(this.mutableSourceEagerHydrationData=null)}function M2(u,h,_,w,E,b,j,ne,_e){return u=new GD(u,h,_,ne,_e),h===1?(h=1,b===!0&&(h|=8)):h=0,b=Dr(3,null,null,h),u.current=b,b.stateNode=u,b.memoizedState={element:w,isDehydrated:_,cache:null,transitions:null},wv(b),u}function E2(u){if(!u)return it;u=u._reactInternals;e:{if(B(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Ft(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var _=u.type;if(Ft(_))return qt(u,_,h)}return h}function C2(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=Y(h),u===null?null:u.stateNode}function T2(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var _=u.retryLane;u.retryLane=_!==0&&_<h?_:h}}function m_(u,h){T2(u,h),(u=u.alternate)&&T2(u,h)}function zD(u){return u=Y(u),u===null?null:u.stateNode}function HD(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var h=zi();Lr(u,134217728,h),m_(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=zi(),_=No(u);Lr(u,_,h),m_(u,_)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var _=rh(h.pendingLanes);_!==0&&(pv(h,_|1),Qi(h,ii()),!(Ot&6)&&(xc(),Cs()))}break;case 13:var w=zi();m2(function(){return Lr(u,1,w)}),m_(u,1)}},t.batchedUpdates=function(u,h){var _=Ot;Ot|=1;try{return u(h)}finally{Ot=_,Ot===0&&(xc(),zf&&Cs())}},t.createComponentSelector=function(u){return{$$typeof:fp,value:u}},t.createContainer=function(u,h,_,w,E,b,j){return M2(u,h,!1,null,_,w,E,b,j)},t.createHasPseudoClassSelector=function(u){return{$$typeof:pp,value:u}},t.createHydrationContainer=function(u,h,_,w,E,b,j,ne,_e){return u=M2(_,w,!0,u,E,b,j,ne,_e),u.context=E2(null),_=u.current,w=zi(),E=No(_),b=Ys(w,E),b.callback=h??null,bo(_,b),u.current.lanes=E,sh(u,E,w),Qi(u,w),u},t.createPortal=function(u,h,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:u,containerInfo:h,implementation:_}},t.createRoleSelector=function(u){return{$$typeof:mp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:gp,value:u}},t.createTextSelector=function(u){return{$$typeof:vp,value:u}},t.deferredUpdates=function(u){var h=$t,_=Un.transition;try{return Un.transition=null,$t=16,u()}finally{$t=h,Un.transition=_}},t.discreteUpdates=function(u,h,_,w,E){var b=$t,j=Un.transition;try{return Un.transition=null,$t=1,u(h,_,w,E)}finally{$t=b,Un.transition=j,Ot===0&&xc()}},t.findAllNodes=t_,t.findBoundingRects=function(u,h){if(!W)throw Error(o(363));h=t_(u,h),u=[];for(var _=0;_<h.length;_++)u.push(de(h[_]));for(h=u.length-1;0<h;h--){_=u[h];for(var w=_.x,E=w+_.width,b=_.y,j=b+_.height,ne=h-1;0<=ne;ne--)if(h!==ne){var _e=u[ne],ke=_e.x,nt=ke+_e.width,Ct=_e.y,pt=Ct+_e.height;if(w>=ke&&b>=Ct&&E<=nt&&j<=pt){u.splice(h,1);break}else if(w!==ke||_.width!==_e.width||pt<b||Ct>j){if(!(b!==Ct||_.height!==_e.height||nt<w||ke>E)){ke>w&&(_e.width+=ke-w,_e.x=w),nt<E&&(_e.width=E-ke),u.splice(h,1);break}}else{Ct>b&&(_e.height+=Ct-b,_e.y=b),pt<j&&(_e.height=j-Ct),u.splice(h,1);break}}}return u},t.findHostInstance=C2,t.findHostInstanceWithNoPortals=function(u){return u=O(u),u=u!==null?te(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return C2(u)},t.flushControlled=function(u){var h=Ot;Ot|=1;var _=Un.transition,w=$t;try{Un.transition=null,$t=1,u()}finally{$t=w,Un.transition=_,Ot=h,Ot===0&&(xc(),Cs())}},t.flushPassiveEffects=Za,t.flushSync=m2,t.focusWithin=function(u,h){if(!W)throw Error(o(363));for(u=qv(u),h=d2(u,h),h=Array.from(h),u=0;u<h.length;){var _=h[u++];if(!Ce(_)){if(_.tag===5&&ot(_.stateNode))return!0;for(_=_.child;_!==null;)h.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return $t},t.getFindAllNodesFailureDescription=function(u,h){if(!W)throw Error(o(363));var _=0,w=[];u=[qv(u),0];for(var E=0;E<u.length;){var b=u[E++],j=u[E++],ne=h[j];if((b.tag!==5||!Ce(b))&&($v(b,ne)&&(w.push(e_(ne)),j++,j>_&&(_=j)),j<h.length))for(b=b.child;b!==null;)u.push(b,j),b=b.sibling}if(_<h.length){for(u=[];_<h.length;_++)u.push(e_(h[_]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ee(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:zD,findFiberByHostInstance:u.findFiberByHostInstance||HD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Gf=h.inject(u),Ms=h}catch{}u=!!h.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,h,_,w){if(!W)throw Error(o(363));u=t_(u,h);var E=He(u,_,w).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,h){var _=h._getVersion;_=_(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,_]:u.mutableSourceEagerHydrationData.push(h,_)},t.runWithPriority=function(u,h){var _=$t;try{return $t=u,h()}finally{$t=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,h,_,w){var E=h.current,b=zi(),j=No(E);return _=E2(_),h.context===null?h.context=_:h.pendingContext=_,h=Ys(b,j),h.payload={element:u},w=w===void 0?null:w,w!==null&&(h.callback=w),bo(E,h),u=Lr(E,j,b),u!==null&&Wf(u,E,j),j},t};vL.exports=IW;var RW=vL.exports;const bW=wS(RW);var _L={exports:{}},yL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,Z){var K=U.length;U.push(Z);e:for(;0<K;){var ae=K-1>>>1,ve=U[ae];if(0<r(ve,Z))U[ae]=Z,U[K]=ve,K=ae;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Z=U[0],K=U.pop();if(K!==Z){U[0]=K;e:for(var ae=0,ve=U.length,Oe=ve>>>1;ae<Oe;){var le=2*(ae+1)-1,Ae=U[le],xe=le+1,Ie=U[xe];if(0>r(Ae,K))xe<ve&&0>r(Ie,Ae)?(U[ae]=Ie,U[xe]=K,ae=xe):(U[ae]=Ae,U[le]=K,ae=le);else if(xe<ve&&0>r(Ie,K))U[ae]=Ie,U[xe]=K,ae=xe;else break e}}return Z}function r(U,Z){var K=U.sortIndex-Z.sortIndex;return K!==0?K:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,v=!1,S=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=U)i(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(c)}}function M(U){if(S=!1,A(U),!v)if(t(l)!==null)v=!0,ee(P);else{var Z=t(c);Z!==null&&pe(M,Z.startTime-U)}}function P(U,Z){v=!1,S&&(S=!1,g(N),N=-1),m=!0;var K=p;try{for(A(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||U&&!O());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var ve=ae(f.expirationTime<=Z);Z=n.unstable_now(),typeof ve=="function"?f.callback=ve:f===t(l)&&i(l),A(Z)}else i(l);f=t(l)}if(f!==null)var Oe=!0;else{var le=t(c);le!==null&&pe(M,le.startTime-Z),Oe=!1}return Oe}finally{f=null,p=K,m=!1}}var I=!1,L=null,N=-1,B=5,R=-1;function O(){return!(n.unstable_now()-R<B)}function Y(){if(L!==null){var U=n.unstable_now();R=U;var Z=!0;try{Z=L(!0,U)}finally{Z?$():(I=!1,L=null)}}else I=!1}var $;if(typeof x=="function")$=function(){x(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,oe=te.port2;te.port1.onmessage=Y,$=function(){oe.postMessage(null)}}else $=function(){y(Y,0)};function ee(U){L=U,I||(I=!0,$())}function pe(U,Z){N=y(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ee(P))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var K=p;p=Z;try{return U()}finally{p=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=p;p=U;try{return Z()}finally{p=K}},n.unstable_scheduleCallback=function(U,Z,K){var ae=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ae+K:ae):K=ae,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=K+ve,U={id:d++,callback:Z,priorityLevel:U,startTime:K,expirationTime:ve,sortIndex:-1},K>ae?(U.sortIndex=K,e(c,U),t(l)===null&&U===t(c)&&(S?(g(N),N=-1):S=!0,pe(M,K-ae))):(U.sortIndex=ve,e(l,U),v||m||(v=!0,ee(P))),U},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(U){var Z=p;return function(){var K=p;p=Z;try{return U.apply(this,arguments)}finally{p=K}}}})(yL);_L.exports=yL;var P3=_L.exports;const PW=n=>typeof n=="object"&&typeof n.then=="function",Bl=[];function xL(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function SL(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Bl)if(xL(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Bl.indexOf(r);s!==-1&&Bl.splice(s,1)},promise:(PW(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Bl.push(r),!t)throw r.promise}const BW=(n,e,t)=>SL(n,e,!1,t),NW=(n,e,t)=>void SL(n,e,!0,t),LW=n=>{if(n===void 0||n.length===0)Bl.splice(0,Bl.length);else{const e=Bl.find(t=>xL(n,t.keys,t.equal));e&&e.remove()}},zw={},Hw=n=>void Object.assign(zw,n);function DW(n,e){function t(d,{args:f=[],attach:p,...m},v){let S=`${d[0].toUpperCase()}${d.slice(1)}`,y;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=Zc(g,{type:d,root:v,attach:p,primitive:!0})}else{const g=zw[S];if(!g)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=Zc(new g(...f),{type:d,root:v,attach:p,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof It?y.__r3f.attach="geometry":y instanceof Yn&&(y.__r3f.attach="material")),S!=="inject"&&Jy(y,m),y}function i(d,f){let p=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?Xy(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),p=!0),p||(v=d.__r3f)==null||v.objects.push(f),f.__r3f||Zc(f,{}),f.__r3f.parent=d,mS(f),Qc(f)}}function r(d,f,p){let m=!1;if(f){var v,S;if((v=f.__r3f)!=null&&v.attach)Xy(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:f});const y=d.children.filter(x=>x!==f),g=y.indexOf(p);d.children=[...y.slice(0,g),f,...y.slice(g)],m=!0}m||(S=d.__r3f)==null||S.objects.push(f),f.__r3f||Zc(f,{}),f.__r3f.parent=d,mS(f),Qc(f)}}function s(d,f,p=!1){d&&[...d].forEach(m=>o(f,m,p))}function o(d,f,p){if(f){var m,v,S;if(f.__r3f&&(f.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(M=>M!==f)),(v=f.__r3f)!=null&&v.attach)F3(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var y;d.remove(f),(y=f.__r3f)!=null&&y.root&&VW(A0(f),f)}const x=(S=f.__r3f)==null?void 0:S.primitive,A=!x&&(p===void 0?f.dispose!==null:p);if(!x){var g;s((g=f.__r3f)==null?void 0:g.objects,f,A),s(f.children,f,A)}if(delete f.__r3f,A&&f.dispose&&f.type!=="Scene"){const M=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?P3.unstable_scheduleCallback(P3.unstable_IdlePriority,M):M()}Qc(d)}}function a(d,f,p,m){var v;const S=(v=d.__r3f)==null?void 0:v.parent;if(!S)return;const y=t(f,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&i(y,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>i(y,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(S,d),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),i(S,y),y.raycast&&y.__r3f.eventCount&&A0(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:bW({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,i(p,f))},removeChildFromContainer:(d,f)=>{f&&o(d.getState().scene,f)},insertInContainerBefore:(d,f,p)=>{if(!f||!p)return;const m=d.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d==null?void 0:d.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,p,m){var v;if(((v=d==null?void 0:d.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:y=[],children:g,...x}=m,{args:A=[],children:M,...P}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((L,N)=>L!==A[N]))return[!0];const I=IL(d,x,P,!0);return I.changes.length?[!1,I]:null}},commitUpdate(d,[f,p],m,v,S,y){f?a(d,m,S,y):Jy(d,p)},commitMount(d,f,p,m){var v;const S=(v=d.__r3f)!=null?v:{};d.raycast&&S.handlers&&S.eventCount&&A0(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Zc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:p,parent:m}=(f=d.__r3f)!=null?f:{};p&&m&&F3(m,d,p),d.isObject3D&&(d.visible=!1),Qc(d)},unhideInstance(d,f){var p;const{attach:m,parent:v}=(p=d.__r3f)!=null?p:{};m&&v&&Xy(v,d,m),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),Qc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():vu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gn.fun(performance.now)?performance.now:gn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Jy}}var B3,N3;const Wy=n=>"colorSpace"in n||"outputColorSpace"in n,AL=()=>{var n;return(n=zw.ColorManagement)!=null?n:null},wL=n=>n&&n.isOrthographicCamera,FW=n=>n&&n.hasOwnProperty("current"),Lf=typeof window<"u"&&((B3=window.document)!=null&&B3.createElement||((N3=window.navigator)==null?void 0:N3.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function ML(n){const e=J.useRef(n);return Lf(()=>void(e.current=n),[n]),e}function OW({set:n}){return Lf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class EL extends J.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}EL.getDerivedStateFromError=()=>({error:!0});const CL="__default",L3=new Map,UW=n=>n&&!!n.memoized&&!!n.changes;function TL(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const jh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function A0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const gn={obj:n=>n===Object(n)&&!gn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(gn.str(n)||gn.num(n)||gn.boo(n))return n===e;const s=gn.obj(n);if(s&&i==="reference")return n===e;const o=gn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!gn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(gn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function kW(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function GW(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Zc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function pS(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const D3=/-\d+$/;function Xy(n,e,t){if(gn.str(t)){if(D3.test(t)){const s=t.replace(D3,""),{target:o,key:a}=pS(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=pS(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function F3(n,e,t){var i,r;if(gn.str(t)){const{target:s,key:o}=pS(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function IL(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const d=n.__r3f,f=Object.entries(r),p=[];if(c){const v=Object.keys(l);for(let S=0;S<v.length;S++)r.hasOwnProperty(v[S])||f.unshift([v[S],CL+"remove"])}f.forEach(([v,S])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&v==="object"||gn.equ(S,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,S,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,S,!1,g]);for(const x in r){const A=r[x];x.startsWith(`${v}-`)&&p.push([x,A,!1,x.split("-")])}});const m={...r};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(m.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(m.attach=d.memoizedProps.attach),{memoized:m,changes:p}}const zW=typeof process<"u"&&!1;function Jy(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=UW(e)?e:IL(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let d=0;d<a.length;d++){let[f,p,m,v]=a[d];if(Wy(n)){const x="srgb",A="srgb-linear";f==="encoding"?(f="colorSpace",p=p===3001?x:A):f==="outputEncoding"&&(f="outputColorSpace",p=p===3001?x:A)}let S=n,y=S[f];if(v.length&&(y=v.reduce((g,x)=>g[x],n),!(y&&y.set))){const[g,...x]=v.reverse();S=x.reverse().reduce((A,M)=>A[M],n),f=g}if(p===CL+"remove")if(S.constructor){let g=L3.get(S.constructor);g||(g=new S.constructor,L3.set(S.constructor,g)),p=g[f]}else p=0;if(m&&i)p?i.handlers[f]=p:delete i.handlers[f],i.eventCount=Object.keys(i.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Gl)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&(zW?y.constructor.name===p.constructor.name:y.constructor===p.constructor))y.copy(p);else if(p!==void 0){const g=y instanceof je;!g&&y.setScalar?y.setScalar(p):y instanceof Gl&&p instanceof Gl?y.mask=p.mask:y.set(p),!AL()&&s&&!s.linear&&g&&y.convertSRGBToLinear()}}else if(S[f]=p,S[f]instanceof sn&&S[f].format===Kn&&S[f].type===Mr&&s){const g=S[f];Wy(g)&&Wy(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}Qc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const d=A0(n).getState().internal,f=d.interaction.indexOf(n);f>-1&&d.interaction.splice(f,1),i.eventCount&&d.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&mS(n),n}function Qc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function mS(n){n.onUpdate==null||n.onUpdate(n)}function RL(n,e){n.manual||(wL(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Hm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function HW(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return vu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vu.ContinuousEventPriority;default:return vu.DefaultEventPriority}}function bL(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function VW(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{bL(t.capturedMap,e,i,r)})}function jW(n){function e(l){const{internal:c}=n.getState(),d=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function i(l,c){const d=n.getState(),f=new Set,p=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const x=jh(m[g]);x&&(x.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(g){const x=jh(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var A;x.events.compute==null||x.events.compute(l,x,(A=x.previousRoot)==null?void 0:A.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(v).sort((g,x)=>{const A=jh(g.object),M=jh(x.object);return!A||!M?g.distance-x.distance:M.events.priority-A.events.priority||g.distance-x.distance}).filter(g=>{const x=Hm(g);return f.has(x)?!1:(f.add(x),!0)});d.events.filter&&(S=d.events.filter(S,d));for(const g of S){let x=g.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())f.has(Hm(g.intersection))||p.push(g.intersection);return p}function r(l,c,d,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const S=jh(v.object)||p,{raycaster:y,pointer:g,camera:x,internal:A}=S,M=new z(g.x,g.y,0).unproject(x),P=R=>{var O,Y;return(O=(Y=A.capturedMap.get(R))==null?void 0:Y.has(v.eventObject))!=null?O:!1},I=R=>{const O={intersection:v,target:c.target};A.capturedMap.has(R)?A.capturedMap.get(R).set(v.eventObject,O):A.capturedMap.set(R,new Map([[v.eventObject,O]])),c.target.setPointerCapture(R)},L=R=>{const O=A.capturedMap.get(R);O&&bL(A.capturedMap,v.eventObject,O,R)};let N={};for(let R in c){let O=c[R];typeof O!="function"&&(N[R]=O)}let B={...v,...N,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:M,ray:y.ray,camera:x,stopPropagation(){const R="pointerId"in c&&A.capturedMap.get(c.pointerId);if((!R||R.has(v.eventObject))&&(B.stopped=m.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:P,setPointerCapture:I,releasePointerCapture:L},currentTarget:{hasPointerCapture:P,setPointerCapture:I,releasePointerCapture:L},nativeEvent:c};if(f(B),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const d of c.hovered.values())if(!l.length||!l.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Hm(d)),p!=null&&p.eventCount){const v={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let d=0;d<c.length;d++){const f=c[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=n.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=i(d,m?t:void 0),g=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=y.map(A=>A.eventObject)),v&&!y.length&&g<=2&&(o(d,p.interaction),f&&f(d)),m&&s(y);function x(A){const M=A.eventObject,P=M.__r3f,I=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const L=Hm(A),N=p.hovered.get(L);N?N.stopped&&A.stopPropagation():(p.hovered.set(L,A),I.onPointerOver==null||I.onPointerOver(A),I.onPointerEnter==null||I.onPointerEnter(A))}I.onPointerMove==null||I.onPointerMove(A)}else{const L=I[l];L?(!v||p.initialHits.includes(M))&&(o(d,p.interaction.filter(N=>!p.initialHits.includes(N))),L(A)):v&&p.initialHits.includes(M)&&o(d,p.interaction.filter(N=>!p.initialHits.includes(N)))}}r(y,d,g,x)}}return{handlePointer:a}}const WW=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],PL=n=>!!(n!=null&&n.render),Vw=J.createContext(null),XW=(n,e)=>{const t=gL((a,l)=>{const c=new z,d=new z,f=new z;function p(g=l().camera,x=d,A=l().size){const{width:M,height:P,top:I,left:L}=A,N=M/P;x instanceof z?f.copy(x):f.set(...x);const B=g.getWorldPosition(c).distanceTo(f);if(wL(g))return{width:M/g.zoom,height:P/g.zoom,top:I,left:L,factor:1,distance:B,aspect:N};{const R=g.fov*Math.PI/180,O=2*Math.tan(R/2)*B,Y=O*(M/P);return{width:Y,height:O,top:I,left:L,factor:M/Y,distance:B,aspect:N}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),S=new we;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Ow,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,A,M,P)=>{const I=l().camera,L={width:g,height:x,top:M||0,left:P||0,updateStyle:A};a(N=>({size:L,viewport:{...N.viewport,...p(I,d,L)}}))},setDpr:g=>a(x=>{const A=TL(g);return{viewport:{...x.viewport,dpr:A,initialDpr:x.viewport.initialDpr||A}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:J.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,A)=>{const M=l().internal;return M.priority=M.priority+(x>0?1:0),M.subscribers.push({ref:g,priority:x,store:A}),M.subscribers=M.subscribers.sort((P,I)=>P.priority-I.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(x>0?1:0),P.subscribers=P.subscribers.filter(I=>I.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,RL(a,l),d.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Vm,JW=new Set,KW=new Set,YW=new Set;function Ky(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Wh(n,e){switch(n){case"before":return Ky(JW,e);case"after":return Ky(KW,e);case"tail":return Ky(YW,e)}}let Yy,Zy;function Qy(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Yy=e.internal.subscribers,Vm=0;Vm<Yy.length;Vm++)Zy=Yy[Vm],Zy.ref.current(Zy.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function ZW(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Wh("before",c),t=!0;for(const f of n.values()){var d;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(i+=Qy(c,s))}if(t=!1,Wh("after",c),i===0)return Wh("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,d=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),d));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(d>1?c.internal.frames=Math.min(60,c.internal.frames+d):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,d=!0,f,p){if(d&&Wh("before",c),f)Qy(c,f,p);else for(const m of n.values())Qy(c,m.store.getState());d&&Wh("after",c)}return{loop:o,invalidate:a,advance:l}}function jw(){const n=J.useContext(Vw);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function gr(n=t=>t,e){return jw()(n,e)}function Ww(n,e=0){const t=jw(),i=t.getState().internal.subscribe,r=ML(n);return Lf(()=>i(r,e,t),[e,i,t]),null}const O3=new WeakMap;function BL(n,e){return function(t,...i){let r=O3.get(t);return r||(r=new t,O3.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,kW(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function nh(n,e,t,i){const r=Array.isArray(e)?e:[e],s=BW(BL(t,i),[n,...r],{equal:gn.equ});return Array.isArray(e)?s:s[0]}nh.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return NW(BL(t),[n,...i])};nh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return LW([n,...t])};const ju=new Map,{invalidate:U3,advance:k3}=ZW(ju),{reconciler:hf,applyProps:ea}=DW(ju,HW),jc={objects:"shallow",strict:!1},QW=(n,e)=>{const t=typeof n=="function"?n(e):n;return PL(t)?t:new gw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function qW(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function $W(n){const e=ju.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||XW(U3,k3),o=t||hf.createContainer(s,vu.ConcurrentRoot,null,!1,null,"",r,null);e||ju.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:f,size:p,scene:m,events:v,onCreated:S,shadows:y=!1,linear:g=!1,flat:x=!1,legacy:A=!1,orthographic:M=!1,frameloop:P="always",dpr:I=[1,2],performance:L,raycaster:N,camera:B,onPointerMissed:R}=d,O=s.getState(),Y=O.gl;O.gl||O.set({gl:Y=QW(f,n)});let $=O.raycaster;$||O.set({raycaster:$=new hv});const{params:te,...oe}=N||{};if(gn.equ(oe,$,jc)||ea($,{...oe}),gn.equ(te,$.params,jc)||ea($,{params:{...$.params,...te}}),!O.camera||O.camera===c&&!gn.equ(c,B,jc)){c=B;const K=B instanceof Mf,ae=K?B:M?new rc(0,0,0,0,.1,1e3):new qn(75,0,.1,1e3);K||(ae.position.z=5,B&&(ea(ae,B),("aspect"in B||"left"in B||"right"in B||"bottom"in B||"top"in B)&&(ae.manual=!0,ae.updateProjectionMatrix())),!O.camera&&!(B!=null&&B.rotation)&&ae.lookAt(0,0,0)),O.set({camera:ae}),$.camera=ae}if(!O.scene){let K;m instanceof Hu?K=m:(K=new Hu,m&&ea(K,m)),O.set({scene:Zc(K)})}if(!O.xr){var ee;const K=(Oe,le)=>{const Ae=s.getState();Ae.frameloop!=="never"&&k3(Oe,!0,Ae,le)},ae=()=>{const Oe=s.getState();Oe.gl.xr.enabled=Oe.gl.xr.isPresenting,Oe.gl.xr.setAnimationLoop(Oe.gl.xr.isPresenting?K:null),Oe.gl.xr.isPresenting||U3(Oe)},ve={connect(){const Oe=s.getState().gl;Oe.xr.addEventListener("sessionstart",ae),Oe.xr.addEventListener("sessionend",ae)},disconnect(){const Oe=s.getState().gl;Oe.xr.removeEventListener("sessionstart",ae),Oe.xr.removeEventListener("sessionend",ae)}};typeof((ee=Y.xr)==null?void 0:ee.addEventListener)=="function"&&ve.connect(),O.set({xr:ve})}if(Y.shadowMap){const K=Y.shadowMap.enabled,ae=Y.shadowMap.type;if(Y.shadowMap.enabled=!!y,gn.boo(y))Y.shadowMap.type=xd;else if(gn.str(y)){var pe;const ve={basic:aB,percentage:Og,soft:xd,variance:us};Y.shadowMap.type=(pe=ve[y])!=null?pe:xd}else gn.obj(y)&&Object.assign(Y.shadowMap,y);(K!==Y.shadowMap.enabled||ae!==Y.shadowMap.type)&&(Y.shadowMap.needsUpdate=!0)}const U=AL();U&&("enabled"in U?U.enabled=!A:"legacyMode"in U&&(U.legacyMode=A)),l||ea(Y,{outputEncoding:g?3e3:3001,toneMapping:x?Hs:KA}),O.legacy!==A&&O.set(()=>({legacy:A})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==x&&O.set(()=>({flat:x})),f&&!gn.fun(f)&&!PL(f)&&!gn.equ(f,Y,jc)&&ea(Y,f),v&&!O.events.handlers&&O.set({events:v(s)});const Z=qW(n,p);return gn.equ(Z,O.size,jc)||O.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),I&&O.viewport.dpr!==TL(I)&&O.setDpr(I),O.frameloop!==P&&O.setFrameloop(P),O.onPointerMissed||O.set({onPointerMissed:R}),L&&!gn.equ(L,O.performance,jc)&&O.set(K=>({performance:{...K.performance,...L}})),a=S,l=!0,this},render(d){return l||this.configure(),hf.updateContainer(C.jsx(eX,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){NL(n)}}}function eX({store:n,children:e,onCreated:t,rootElement:i}){return Lf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),C.jsx(Vw.Provider,{value:n,children:e})}function NL(n,e){const t=ju.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),hf.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),GW(r),ju.delete(n),e&&e(n)}catch{}},500)})}}function tX(n,e,t){return C.jsx(nX,{children:n,container:e,state:t},e.uuid)}function nX({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=jw(),[a]=J.useState(()=>new hv),[l]=J.useState(()=>new we),c=J.useCallback((f,p)=>{const m={...f};Object.keys(f).forEach(S=>{(WW.includes(S)||f[S]!==p[S]&&p[S])&&delete m[S]});let v;if(p&&r){const S=p.camera;v=f.viewport.getCurrentViewport(S,new z,r),S!==f.camera&&RL(S,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...p==null?void 0:p.events,...i},size:{...f.size,...r},viewport:{...f.viewport,...v},...s}},[n]),[d]=J.useState(()=>{const f=o.getState();return gL((m,v)=>({...f,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...i},size:{...f.size,...r},...s,set:m,get:v,setEvents:S=>m(y=>({...y,events:{...y.events,...S}}))}))});return J.useEffect(()=>{const f=o.subscribe(p=>d.setState(m=>c(p,m)));return()=>{f()}},[c]),J.useEffect(()=>{d.setState(f=>c(o.getState(),f))},[c]),J.useEffect(()=>()=>{d.destroy()},[]),C.jsx(C.Fragment,{children:hf.createPortal(C.jsx(Vw.Provider,{value:d,children:e}),d,null)})}hf.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:J.version});function gS(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?i=setTimeout(l,e-d):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var d=t&&!i;return i||(i=setTimeout(l,e)),d&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}gS.debounce=gS;var iX=gS;const G3=wS(iX);function rX(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=J.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=J.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,f=J.useRef(!1);J.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,v]=J.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:A,top:M,width:P,height:I,bottom:L,right:N,x:B,y:R}=l.current.element.getBoundingClientRect(),O={left:A,top:M,width:P,height:I,bottom:L,right:N,x:B,y:R};l.current.element instanceof HTMLElement&&r&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),f.current&&!lX(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[x,d?G3(x,d):x,c?G3(x,c):x]},[a,r,c,d]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(S(),l.current.element=x,l.current.scrollContainers=LL(x),y())};return oX(v,!!t),sX(m),J.useEffect(()=>{S(),y()},[t,v,m]),J.useEffect(()=>S,[]),[g,o,p]}function sX(n){J.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function oX(n,e){J.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function LL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...LL(n.parentElement)]}const aX=["x","y","top","bottom","left","right","width","height"],lX=(n,e)=>aX.every(t=>n[t]===e[t]);var cX=Object.defineProperty,uX=Object.defineProperties,hX=Object.getOwnPropertyDescriptors,z3=Object.getOwnPropertySymbols,dX=Object.prototype.hasOwnProperty,fX=Object.prototype.propertyIsEnumerable,H3=(n,e,t)=>e in n?cX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V3=(n,e)=>{for(var t in e||(e={}))dX.call(e,t)&&H3(n,t,e[t]);if(z3)for(var t of z3(e))fX.call(e,t)&&H3(n,t,e[t]);return n},pX=(n,e)=>uX(n,hX(e)),j3,W3;typeof window<"u"&&((j3=window.document)!=null&&j3.createElement||((W3=window.navigator)==null?void 0:W3.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function DL(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=DL(i,e,t);if(r)return r;i=e?null:i.sibling}}function FL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const X3=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=X3;return}return X3.apply(this,arguments)};const Xw=FL(J.createContext(null));class OL extends J.Component{render(){return J.createElement(Xw.Provider,{value:this._reactInternals},this.props.children)}}function mX(){const n=J.useContext(Xw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=J.useId();return J.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=DL(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function gX(){const n=mX(),[e]=J.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Xw&&!e.has(r)&&e.set(r,J.useContext(FL(r)))}t=t.return}return e}function vX(){const n=gX();return J.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>J.createElement(e,null,J.createElement(t.Provider,pX(V3({},i),{value:n.get(t)}))),e=>J.createElement(OL,V3({},e))),[n])}const qy={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _X(n){const{handlePointer:e}=jW(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(qy).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=qy[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=qy[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const yX=J.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=_X,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:S,performance:y,raycaster:g,camera:x,scene:A,onPointerMissed:M,onCreated:P,...I},L){J.useMemo(()=>Hw(wW),[]);const N=vX(),[B,R]=rX({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=J.useRef(null),Y=J.useRef(null);J.useImperativeHandle(L,()=>O.current);const $=ML(M),[te,oe]=J.useState(!1),[ee,pe]=J.useState(!1);if(te)throw te;if(ee)throw ee;const U=J.useRef(null);Lf(()=>{const K=O.current;R.width>0&&R.height>0&&K&&(U.current||(U.current=$W(K)),U.current.configure({gl:s,events:o,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:v,dpr:S,performance:y,raycaster:g,camera:x,scene:A,size:R,onPointerMissed:(...ae)=>$.current==null?void 0:$.current(...ae),onCreated:ae=>{ae.events.connect==null||ae.events.connect(a?FW(a)?a.current:a:Y.current),l&&ae.setEvents({compute:(ve,Oe)=>{const le=ve[l+"X"],Ae=ve[l+"Y"];Oe.pointer.set(le/Oe.size.width*2-1,-(Ae/Oe.size.height)*2+1),Oe.raycaster.setFromCamera(Oe.pointer,Oe.camera)}}),P==null||P(ae)}}),U.current.render(C.jsx(N,{children:C.jsx(EL,{set:pe,children:C.jsx(J.Suspense,{fallback:C.jsx(OW,{set:oe}),children:e})})})))}),J.useEffect(()=>{const K=O.current;if(K)return()=>NL(K)},[]);const Z=a?"none":"auto";return C.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...r},...I,children:C.jsx("div",{ref:B,style:{width:"100%",height:"100%"},children:C.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}),J3=J.forwardRef(function(e,t){return C.jsx(OL,{children:C.jsx(yX,{...e,ref:t})})});function K3(n,e){if(e===qB)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===og||e===iw){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===og)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const xX=parseInt(Zu.replace(/\D+/g,""));var Xr=Uint8Array,aa=Uint16Array,vS=Uint32Array,UL=new Xr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kL=new Xr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),SX=new Xr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GL=function(n,e){for(var t=new aa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new vS(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},zL=GL(UL,2),HL=zL[0],AX=zL[1];HL[28]=258,AX[258]=28;var wX=GL(kL,0),MX=wX[0],_S=new aa(32768);for(var yn=0;yn<32768;++yn){var Xo=(yn&43690)>>>1|(yn&21845)<<1;Xo=(Xo&52428)>>>2|(Xo&13107)<<2,Xo=(Xo&61680)>>>4|(Xo&3855)<<4,_S[yn]=((Xo&65280)>>>8|(Xo&255)<<8)>>>1}var Md=function(n,e,t){for(var i=n.length,r=0,s=new aa(e);r<i;++r)++s[n[r]-1];var o=new aa(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new aa(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],d=e-n[r],f=o[n[r]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)a[_S[f]>>>l]=c}else for(a=new aa(i),r=0;r<i;++r)n[r]&&(a[r]=_S[o[n[r]-1]++]>>>15-n[r]);return a},Df=new Xr(288);for(var yn=0;yn<144;++yn)Df[yn]=8;for(var yn=144;yn<256;++yn)Df[yn]=9;for(var yn=256;yn<280;++yn)Df[yn]=7;for(var yn=280;yn<288;++yn)Df[yn]=8;var VL=new Xr(32);for(var yn=0;yn<32;++yn)VL[yn]=5;var EX=Md(Df,9,1),CX=Md(VL,5,1),$y=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},as=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},e1=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},TX=function(n){return(n/8|0)+(n&7&&1)},IX=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof aa?aa:n instanceof vS?vS:Xr)(t-e);return i.set(n.subarray(e,t)),i},RX=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Xr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Xr(i*3));var o=function(xe){var Ie=e.length;if(xe>Ie){var dt=new Xr(Math.max(Ie*2,xe));dt.set(e),e=dt}},a=t.f||0,l=t.p||0,c=t.b||0,d=t.l,f=t.d,p=t.m,m=t.n,v=i*8;do{if(!d){t.f=a=as(n,l,1);var S=as(n,l+1,3);if(l+=3,S)if(S==1)d=EX,f=CX,p=9,m=5;else if(S==2){var A=as(n,l,31)+257,M=as(n,l+10,15)+4,P=A+as(n,l+5,31)+1;l+=14;for(var I=new Xr(P),L=new Xr(19),N=0;N<M;++N)L[SX[N]]=as(n,l+N*3,7);l+=M*3;for(var B=$y(L),R=(1<<B)-1,O=Md(L,B,1),N=0;N<P;){var Y=O[as(n,l,R)];l+=Y&15;var y=Y>>>4;if(y<16)I[N++]=y;else{var $=0,te=0;for(y==16?(te=3+as(n,l,3),l+=2,$=I[N-1]):y==17?(te=3+as(n,l,7),l+=3):y==18&&(te=11+as(n,l,127),l+=7);te--;)I[N++]=$}}var oe=I.subarray(0,A),ee=I.subarray(A);p=$y(oe),m=$y(ee),d=Md(oe,p,1),f=Md(ee,m,1)}else throw"invalid block type";else{var y=TX(l)+4,g=n[y-4]|n[y-3]<<8,x=y+g;if(x>i){if(s)throw"unexpected EOF";break}r&&o(c+g),e.set(n.subarray(y,x),c),t.b=c+=g,t.p=l=x*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var pe=(1<<p)-1,U=(1<<m)-1,Z=l;;Z=l){var $=d[e1(n,l)&pe],K=$>>>4;if(l+=$&15,l>v){if(s)throw"unexpected EOF";break}if(!$)throw"invalid length/literal";if(K<256)e[c++]=K;else if(K==256){Z=l,d=null;break}else{var ae=K-254;if(K>264){var N=K-257,ve=UL[N];ae=as(n,l,(1<<ve)-1)+HL[N],l+=ve}var Oe=f[e1(n,l)&U],le=Oe>>>4;if(!Oe)throw"invalid distance";l+=Oe&15;var ee=MX[le];if(le>3){var ve=kL[le];ee+=e1(n,l)&(1<<ve)-1,l+=ve}if(l>v){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Ae=c+ae;c<Ae;c+=4)e[c]=e[c-ee],e[c+1]=e[c+1-ee],e[c+2]=e[c+2-ee],e[c+3]=e[c+3-ee];c=Ae}}t.l=d,t.p=Z,t.b=c,d&&(a=1,t.m=p,t.d=f,t.n=m)}while(!a);return c==e.length?e:IX(e,0,c)},bX=new Xr(0),PX=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function jm(n,e){return RX((PX(n),n.subarray(2,-4)),e)}var BX=typeof TextDecoder<"u"&&new TextDecoder,NX=0;try{BX.decode(bX,{stream:!0}),NX=1}catch{}const LX=n=>n&&n.isCubeTexture;class DX extends wn{constructor(e,t){var i,r;const s=LX(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),d=3*Math.max(c,16*7),f=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Zu.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,S={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new bf(1,16),g=new lr({uniforms:S,fragmentShader:v,vertexShader:m,side:Wr});super(y,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function ug(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Nl="srgb",So="srgb-linear",Y3=3001,FX=3e3;class Jw extends xi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new zX(t)}),this.register(function(t){return new HX(t)}),this.register(function(t){return new QX(t)}),this.register(function(t){return new qX(t)}),this.register(function(t){return new $X(t)}),this.register(function(t){return new jX(t)}),this.register(function(t){return new WX(t)}),this.register(function(t){return new XX(t)}),this.register(function(t){return new JX(t)}),this.register(function(t){return new GX(t)}),this.register(function(t){return new KX(t)}),this.register(function(t){return new VX(t)}),this.register(function(t){return new ZX(t)}),this.register(function(t){return new YX(t)}),this.register(function(t){return new UX(t)}),this.register(function(t){return new eJ(t)}),this.register(function(t){return new tJ(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=ya.extractUrlBase(e);o=ya.resolveURL(c,this.path)}else o=ya.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new _i(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ug(new Uint8Array(e.slice(0,4)))===jL){try{o[Gt.KHR_BINARY_GLTF]=new nJ(e)}catch(d){r&&r(d);return}s=JSON.parse(o[Gt.KHR_BINARY_GLTF].content)}else s=JSON.parse(ug(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new mJ(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const d=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(d){case Gt.KHR_MATERIALS_UNLIT:o[d]=new kX;break;case Gt.KHR_DRACO_MESH_COMPRESSION:o[d]=new iJ(s,this.dracoLoader);break;case Gt.KHR_TEXTURE_TRANSFORM:o[d]=new rJ;break;case Gt.KHR_MESH_QUANTIZATION:o[d]=new sJ;break;default:f.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function OX(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Gt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class UX{constructor(e){this.parser=e,this.name=Gt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new je(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],So);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Dw(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Lw(d),c.distance=f;break;case"spot":c=new Nw(d),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,ao(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class kX{constructor(){this.name=Gt.KHR_MATERIALS_UNLIT}getMaterialType(){return rr}extendParams(e,t,i){const r=[];e.color=new je(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],So),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Nl))}return Promise.all(r)}}class GX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class zX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new we(a,a)}return Promise.all(s)}}class HX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class VX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class jX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new je(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],So)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Nl)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class WX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class XX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new je().setRGB(a[0],a[1],a[2],So),Promise.all(s)}}class JX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class KX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new je().setRGB(a[0],a[1],a[2],So),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Nl)),Promise.all(s)}}class YX{constructor(e){this.parser=e,this.name=Gt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class ZX{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:$r}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class QX{constructor(e){this.parser=e,this.name=Gt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class qX{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class $X{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class eJ{constructor(e){this.name=Gt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,d=r.count,f=r.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,f,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(d*f);return o.decodeGltfBuffer(new Uint8Array(m),d,f,p,r.mode,r.filter),m})})}else return null}}class tJ{constructor(e){this.name=Gt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==zr.TRIANGLES&&c.mode!==zr.TRIANGLE_STRIP&&c.mode!==zr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),f=d.isGroup?d.children:[d],p=c[0].count,m=[];for(const v of f){const S=new ht,y=new z,g=new gi,x=new z(1,1,1),A=new yw(v.geometry,v.material,p);for(let M=0;M<p;M++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,M),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,M),l.SCALE&&x.fromBufferAttribute(l.SCALE,M),A.setMatrixAt(M,S.compose(y,g,x));for(const M in l)if(M==="_COLOR_0"){const P=l[M];A.instanceColor=new Yl(P.array,P.itemSize,P.normalized)}else M!=="TRANSLATION"&&M!=="ROTATION"&&M!=="SCALE"&&v.geometry.setAttribute(M,l[M]);Ht.prototype.copy.call(A,v),this.parser.assignFinalMaterial(A),m.push(A)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]}))}}const jL="glTF",Xh=12,Z3={JSON:1313821514,BIN:5130562};class nJ{constructor(e){this.name=Gt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Xh);if(this.header={magic:ug(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==jL)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Xh,r=new DataView(e,Xh);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===Z3.JSON){const l=new Uint8Array(e,Xh+s,o);this.content=ug(l)}else if(a===Z3.BIN){const l=Xh+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class iJ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const f=yS[d]||d.toLowerCase();a[f]=o[d]}for(const d in e.attributes){const f=yS[d]||d.toLowerCase();if(o[d]!==void 0){const p=i.accessors[e.attributes[d]],m=Cu[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(f,p){r.decodeDracoFile(d,function(m){for(const v in m.attributes){const S=m.attributes[v],y=l[v];y!==void 0&&(S.normalized=y)}f(m)},a,c,So,p)})})}}class rJ{constructor(){this.name=Gt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class sJ{constructor(){this.name=Gt.KHR_MESH_QUANTIZATION}}class WL extends th{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=r-t,f=(i-t)/d,p=f*f,m=p*f,v=e*c,S=v-c,y=-2*m+3*p,g=m-p,x=1-y,A=g-p+f;for(let M=0;M!==a;M++){const P=o[S+M+a],I=o[S+M+l]*d,L=o[v+M+a],N=o[v+M]*d;s[M]=x*P+A*I+y*L+g*N}return s}}const oJ=new gi;class aJ extends WL{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return oJ.fromArray(s).normalize().toArray(s),s}}const zr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Cu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Q3={9728:ei,9729:rn,9984:Ug,9985:Mu,9986:Cl,9987:Kr},q3={33071:Hn,33648:Ou,10497:Ta},t1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...xX>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},lJ={CUBICSPLINE:void 0,LINEAR:ku,STEP:Uu},n1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function cJ(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Nf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ws})),n.DefaultMaterial}function hl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ao(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function uJ(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const f=e[c];if(f.POSITION!==void 0&&(i=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const f=e[c];if(i){const p=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],f=c[1],p=c[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function hJ(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dJ(n){let e;const t=n.extensions&&n.extensions[Gt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+i1(t.attributes):e=n.indices+":"+i1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+i1(n.targets[i]);return e}function i1(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function xS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fJ(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const pJ=new ht;class mJ{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new OX,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new eL(this.options.manager):this.textureLoader=new lL(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new _i(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return hl(s,a,r),ao(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(ya.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=t1[r.type],a=Cu[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new Kt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=t1[r.type],c=Cu[r.componentType],d=c.BYTES_PER_ELEMENT,f=d*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let S,y;if(m&&m!==f){const g=Math.floor(p/m),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let A=t.cache.get(x);A||(S=new c(a,g*m,r.count*m/d),A=new Tf(S,m/d),t.cache.add(x,A)),y=new Ra(A,l,p%m/d,v)}else a===null?S=new c(r.count*l):S=new c(a,p,r.count*l),y=new Kt(S,l,v);if(r.sparse!==void 0){const g=t1.SCALAR,x=Cu[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,M=r.sparse.values.byteOffset||0,P=new x(o[1],A,r.sparse.count*g),I=new c(o[2],M,r.sparse.count*l);a!==null&&(y=new Kt(y.array.slice(),y.itemSize,y.normalized));for(let L=0,N=P.length;L<N;L++){const B=P[L];if(y.setX(B,I[L*l]),l>=2&&y.setY(B,I[L*l+1]),l>=3&&y.setZ(B,I[L*l+2]),l>=4&&y.setW(B,I[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=Q3[p.magFilter]||rn,d.minFilter=Q3[p.minFilter]||Kr,d.wrapS=q3[p.wrapS]||Ta,d.wrapT=q3[p.wrapT]||Ta,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(S){const y=new sn(S);y.needsUpdate=!0,p(y)}),t.load(ya.resolveURL(f,s.path),v,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),ao(f,o),f.userData.mimeType=o.mimeType||fJ(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Gt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Gt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Gt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===Y3?Nl:So),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Nl?Y3:FX),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Kg,Yn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Fi,Yn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Nf}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Gt.KHR_MATERIALS_UNLIT]){const f=r[Gt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new je(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],So),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,Nl)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Wr);const d=s.alphaMode||n1.OPAQUE;if(d===n1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===n1.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==rr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new we(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==rr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==rr){const f=s.emissiveFactor;a.emissive=new je().setRGB(f[0],f[1],f[2],So)}return s.emissiveTexture!==void 0&&o!==rr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Nl)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),ao(f,s),t.associations.set(f,{materials:e}),s.extensions&&hl(r,f,s),f})}createUniqueName(e){const t=Jt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Gt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return $3(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=dJ(c),f=r[d];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Gt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=$3(new It,c,t),r[d]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=o[l].material===void 0?cJ(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],f=[];for(let m=0,v=d.length;m<v;m++){const S=d[m],y=o[m];let g;const x=c[m];if(y.mode===zr.TRIANGLES||y.mode===zr.TRIANGLE_STRIP||y.mode===zr.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new _w(S,x):new wn(S,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),y.mode===zr.TRIANGLE_STRIP?g.geometry=K3(g.geometry,iw):y.mode===zr.TRIANGLE_FAN&&(g.geometry=K3(g.geometry,og));else if(y.mode===zr.LINES)g=new vs(S,x);else if(y.mode===zr.LINE_STRIP)g=new Co(S,x);else if(y.mode===zr.LINE_LOOP)g=new xw(S,x);else if(y.mode===zr.POINTS)g=new Sw(S,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&hJ(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),ao(g,s),y.extensions&&hl(r,g,y),t.assignFinalMaterial(g),f.push(g)}for(let m=0,v=f.length;m<v;m++)t.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&hl(r,f[0],s),f[0];const p=new mo;s.extensions&&hl(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=f.length;m<v;m++)p.add(f[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new qn(ow.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new rc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),ao(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const f=o[c];if(f){a.push(f);const p=new ht;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new If(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],d=[];for(let f=0,p=r.channels.length;f<p;f++){const m=r.channels[f],v=r.samplers[m.sampler],S=m.target,y=S.node,g=r.parameters!==void 0?r.parameters[v.input]:v.input,x=r.parameters!==void 0?r.parameters[v.output]:v.output;S.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",x)),c.push(v),d.push(S))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(f){const p=f[0],m=f[1],v=f[2],S=f[3],y=f[4],g=[];for(let x=0,A=p.length;x<A;x++){const M=p[x],P=m[x],I=v[x],L=S[x],N=y[x];if(M===void 0)continue;M.updateMatrix&&M.updateMatrix();const B=i._createAnimationTracks(M,P,I,L,N);if(B)for(let R=0;R<B.length;R++)g.push(B[R])}return new Vu(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],f=c[1],p=c[2];p!==null&&d.traverse(function(m){m.isSkinnedMesh&&m.bind(p,pJ)});for(let m=0,v=f.length;m<v;m++)d.add(f[m]);return d})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(s.isBone===!0?d=new Jg:c.length>1?d=new mo:c.length===1?d=c[0]:d=new Ht,d!==c[0])for(let f=0,p=c.length;f<p;f++)d.add(c[f]);if(s.name&&(d.userData.name=s.name,d.name=o),ao(d,s),s.extensions&&hl(i,d,s),s.matrix!==void 0){const f=new ht;f.fromArray(s.matrix),d.applyMatrix4(f)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new mo;i.name&&(s.name=r.createUniqueName(i.name)),ao(s,i),i.extensions&&hl(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,f=l.length;d<f;d++)s.add(l[d]);const c=d=>{const f=new Map;for(const[p,m]of r.associations)(p instanceof Yn||p instanceof sn)&&f.set(p,m);return d.traverse(p=>{const m=r.associations.get(p);m!=null&&f.set(p,m)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Jo[s.path]===Jo.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(Jo[s.path]){case Jo.weights:c=Ql;break;case Jo.rotation:c=ql;break;case Jo.position:case Jo.scale:c=$l;break;default:switch(i.itemSize){case 1:c=Ql;break;case 2:case 3:default:c=$l;break}break}const d=r.interpolation!==void 0?lJ[r.interpolation]:ku,f=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const v=new c(l[p]+"."+Jo[s.path],t.array,f,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=xS(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof ql?aJ:WL;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function gJ(n,e,t){const i=e.attributes,r=new vi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new z(l[0],l[1],l[2]),new z(c[0],c[1],c[2])),a.normalized){const d=xS(Cu[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new z,l=new z;for(let c=0,d=s.length;c<d;c++){const f=s[c];if(f.POSITION!==void 0){const p=t.json.accessors[f.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const S=xS(Cu[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new ui;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function $3(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=yS[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return ao(n,e),gJ(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?uJ(n,e.targets,t):n})}class vJ extends Pw{constructor(e){super(e),this.type=pi}parse(e){const o=function(N,B){switch(N){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(B||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(B||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(B||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(B||""))}},d=`
`,f=function(N,B,R){B=B||1024;let Y=N.pos,$=-1,te=0,oe="",ee=String.fromCharCode.apply(null,new Uint16Array(N.subarray(Y,Y+128)));for(;0>($=ee.indexOf(d))&&te<B&&Y<N.byteLength;)oe+=ee,te+=ee.length,Y+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(N.subarray(Y,Y+128)));return-1<$?(R!==!1&&(N.pos+=te+$+1),oe+ee.slice(0,$)):!1},p=function(N){const B=/^#\?(\S+)/,R=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*FORMAT=(\S+)\s*$/,$=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,te={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let oe,ee;for((N.pos>=N.byteLength||!(oe=f(N)))&&o(1,"no header found"),(ee=oe.match(B))||o(3,"bad initial token"),te.valid|=1,te.programtype=ee[1],te.string+=oe+`
`;oe=f(N),oe!==!1;){if(te.string+=oe+`
`,oe.charAt(0)==="#"){te.comments+=oe+`
`;continue}if((ee=oe.match(R))&&(te.gamma=parseFloat(ee[1])),(ee=oe.match(O))&&(te.exposure=parseFloat(ee[1])),(ee=oe.match(Y))&&(te.valid|=2,te.format=ee[1]),(ee=oe.match($))&&(te.valid|=4,te.height=parseInt(ee[1],10),te.width=parseInt(ee[2],10)),te.valid&2&&te.valid&4)break}return te.valid&2||o(3,"missing format specifier"),te.valid&4||o(3,"missing image size specifier"),te},m=function(N,B,R){const O=B;if(O<8||O>32767||N[0]!==2||N[1]!==2||N[2]&128)return new Uint8Array(N);O!==(N[2]<<8|N[3])&&o(3,"wrong scanline width");const Y=new Uint8Array(4*B*R);Y.length||o(4,"unable to allocate buffer space");let $=0,te=0;const oe=4*O,ee=new Uint8Array(4),pe=new Uint8Array(oe);let U=R;for(;U>0&&te<N.byteLength;){te+4>N.byteLength&&o(1),ee[0]=N[te++],ee[1]=N[te++],ee[2]=N[te++],ee[3]=N[te++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=O)&&o(3,"bad rgbe scanline format");let Z=0,K;for(;Z<oe&&te<N.byteLength;){K=N[te++];const ve=K>128;if(ve&&(K-=128),(K===0||Z+K>oe)&&o(3,"bad scanline data"),ve){const Oe=N[te++];for(let le=0;le<K;le++)pe[Z++]=Oe}else pe.set(N.subarray(te,te+K),Z),Z+=K,te+=K}const ae=O;for(let ve=0;ve<ae;ve++){let Oe=0;Y[$]=pe[ve+Oe],Oe+=O,Y[$+1]=pe[ve+Oe],Oe+=O,Y[$+2]=pe[ve+Oe],Oe+=O,Y[$+3]=pe[ve+Oe],$+=4}U--}return Y},v=function(N,B,R,O){const Y=N[B+3],$=Math.pow(2,Y-128)/255;R[O+0]=N[B+0]*$,R[O+1]=N[B+1]*$,R[O+2]=N[B+2]*$,R[O+3]=1},S=function(N,B,R,O){const Y=N[B+3],$=Math.pow(2,Y-128)/255;R[O+0]=bl.toHalfFloat(Math.min(N[B+0]*$,65504)),R[O+1]=bl.toHalfFloat(Math.min(N[B+1]*$,65504)),R[O+2]=bl.toHalfFloat(Math.min(N[B+2]*$,65504)),R[O+3]=bl.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const g=p(y),x=g.width,A=g.height,M=m(y.subarray(y.pos),x,A);let P,I,L;switch(this.type){case Fn:L=M.length/4;const N=new Float32Array(L*4);for(let R=0;R<L;R++)v(M,R*4,N,R*4);P=N,I=Fn;break;case pi:L=M.length/4;const B=new Uint16Array(L*4);for(let R=0;R<L;R++)S(M,R*4,B,R*4);P=B,I=pi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:A,data:P,header:g.string,gamma:g.gamma,exposure:g.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Fn:case pi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=rn,o.magFilter=rn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const Jh="colorSpace"in new sn;class _J extends Pw{constructor(e){super(e),this.type=pi}parse(e){const B=Math.pow(2.7182818,2.2);function R(D,G){for(var T=0,k=0;k<65536;++k)(k==0||D[k>>3]&1<<(k&7))&&(G[T++]=k);for(var H=T-1;T<65536;)G[T++]=0;return H}function O(D){for(var G=0;G<16384;G++)D[G]={},D[G].len=0,D[G].lit=0,D[G].p=null}const Y={l:0,c:0,lc:0};function $(D,G,T,k,H){for(;T<D;)G=G<<8|Mt(k,H),T+=8;T-=D,Y.l=G>>T&(1<<D)-1,Y.c=G,Y.lc=T}const te=new Array(59);function oe(D){for(var G=0;G<=58;++G)te[G]=0;for(var G=0;G<65537;++G)te[D[G]]+=1;for(var T=0,G=58;G>0;--G){var k=T+te[G]>>1;te[G]=T,T=k}for(var G=0;G<65537;++G){var H=D[G];H>0&&(D[G]=H|te[H]++<<6)}}function ee(D,G,T,k,H,V,X){for(var re=T,ce=0,he=0;H<=V;H++){if(re.value-T.value>k)return!1;$(6,ce,he,D,re);var fe=Y.l;if(ce=Y.c,he=Y.lc,X[H]=fe,fe==63){if(re.value-T.value>k)throw"Something wrong with hufUnpackEncTable";$(8,ce,he,D,re);var ge=Y.l+6;if(ce=Y.c,he=Y.lc,H+ge>V+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)X[H++]=0;H--}else if(fe>=59){var ge=fe-59+2;if(H+ge>V+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)X[H++]=0;H--}}oe(X)}function pe(D){return D&63}function U(D){return D>>6}function Z(D,G,T,k){for(;G<=T;G++){var H=U(D[G]),V=pe(D[G]);if(H>>V)throw"Invalid table entry";if(V>14){var X=k[H>>V-14];if(X.len)throw"Invalid table entry";if(X.lit++,X.p){var re=X.p;X.p=new Array(X.lit);for(var ce=0;ce<X.lit-1;++ce)X.p[ce]=re[ce]}else X.p=new Array(1);X.p[X.lit-1]=G}else if(V)for(var he=0,ce=1<<14-V;ce>0;ce--){var X=k[(H<<14-V)+he];if(X.len||X.p)throw"Invalid table entry";X.len=V,X.lit=G,he++}}return!0}const K={c:0,lc:0};function ae(D,G,T,k){D=D<<8|Mt(T,k),G+=8,K.c=D,K.lc=G}const ve={c:0,lc:0};function Oe(D,G,T,k,H,V,X,re,ce,he){if(D==G){k<8&&(ae(T,k,H,X),T=K.c,k=K.lc),k-=8;var fe=T>>k,fe=new Uint8Array([fe])[0];if(ce.value+fe>he)return!1;for(var ge=re[ce.value-1];fe-- >0;)re[ce.value++]=ge}else if(ce.value<he)re[ce.value++]=D;else return!1;ve.c=T,ve.lc=k}function le(D){return D&65535}function Ae(D){var G=le(D);return G>32767?G-65536:G}const xe={a:0,b:0};function Ie(D,G){var T=Ae(D),k=Ae(G),H=k,V=T+(H&1)+(H>>1),X=V,re=V-H;xe.a=X,xe.b=re}function dt(D,G){var T=le(D),k=le(G),H=T-(k>>1)&65535,V=k+H-32768&65535;xe.a=V,xe.b=H}function xt(D,G,T,k,H,V,X){for(var re=X<16384,ce=T>H?H:T,he=1,fe;he<=ce;)he<<=1;for(he>>=1,fe=he,he>>=1;he>=1;){for(var ge=0,We=ge+V*(H-fe),Te=V*he,Ue=V*fe,qe=k*he,et=k*fe,yt,tt,Pe,at;ge<=We;ge+=Ue){for(var it=ge,kt=ge+k*(T-fe);it<=kt;it+=et){var wt=it+qe,jt=it+Te,Vn=jt+qe;re?(Ie(D[it+G],D[jt+G]),yt=xe.a,Pe=xe.b,Ie(D[wt+G],D[Vn+G]),tt=xe.a,at=xe.b,Ie(yt,tt),D[it+G]=xe.a,D[wt+G]=xe.b,Ie(Pe,at),D[jt+G]=xe.a,D[Vn+G]=xe.b):(dt(D[it+G],D[jt+G]),yt=xe.a,Pe=xe.b,dt(D[wt+G],D[Vn+G]),tt=xe.a,at=xe.b,dt(yt,tt),D[it+G]=xe.a,D[wt+G]=xe.b,dt(Pe,at),D[jt+G]=xe.a,D[Vn+G]=xe.b)}if(T&he){var jt=it+Te;re?Ie(D[it+G],D[jt+G]):dt(D[it+G],D[jt+G]),yt=xe.a,D[jt+G]=xe.b,D[it+G]=yt}}if(H&he)for(var it=ge,kt=ge+k*(T-fe);it<=kt;it+=et){var wt=it+qe;re?Ie(D[it+G],D[wt+G]):dt(D[it+G],D[wt+G]),yt=xe.a,D[wt+G]=xe.b,D[it+G]=yt}fe=he,he>>=1}return ge}function mt(D,G,T,k,H,V,X,re,ce,he){for(var fe=0,ge=0,We=re,Te=Math.trunc(H.value+(V+7)/8);H.value<Te;)for(ae(fe,ge,T,H),fe=K.c,ge=K.lc;ge>=14;){var Ue=fe>>ge-14&16383,qe=G[Ue];if(qe.len)ge-=qe.len,Oe(qe.lit,X,fe,ge,T,k,H,ce,he,We),fe=ve.c,ge=ve.lc;else{if(!qe.p)throw"hufDecode issues";var et;for(et=0;et<qe.lit;et++){for(var yt=pe(D[qe.p[et]]);ge<yt&&H.value<Te;)ae(fe,ge,T,H),fe=K.c,ge=K.lc;if(ge>=yt&&U(D[qe.p[et]])==(fe>>ge-yt&(1<<yt)-1)){ge-=yt,Oe(qe.p[et],X,fe,ge,T,k,H,ce,he,We),fe=ve.c,ge=ve.lc;break}}if(et==qe.lit)throw"hufDecode issues"}}var tt=8-V&7;for(fe>>=tt,ge-=tt;ge>0;){var qe=G[fe<<14-ge&16383];if(qe.len)ge-=qe.len,Oe(qe.lit,X,fe,ge,T,k,H,ce,he,We),fe=ve.c,ge=ve.lc;else throw"hufDecode issues"}return!0}function Q(D,G,T,k,H,V){var X={value:0},re=T.value,ce=Ge(G,T),he=Ge(G,T);T.value+=4;var fe=Ge(G,T);if(T.value+=4,ce<0||ce>=65537||he<0||he>=65537)throw"Something wrong with HUF_ENCSIZE";var ge=new Array(65537),We=new Array(16384);O(We);var Te=k-(T.value-re);if(ee(D,G,T,Te,ce,he,ge),fe>8*(k-(T.value-re)))throw"Something wrong with hufUncompress";Z(ge,ce,he,We),mt(ge,We,D,G,T,fe,he,V,H,X)}function Ee(D,G,T){for(var k=0;k<T;++k)G[k]=D[G[k]]}function Se(D){for(var G=1;G<D.length;G++){var T=D[G-1]+D[G]-128;D[G]=T}}function De(D,G){for(var T=0,k=Math.floor((D.length+1)/2),H=0,V=D.length-1;!(H>V||(G[H++]=D[T++],H>V));)G[H++]=D[k++]}function Be(D){for(var G=D.byteLength,T=new Array,k=0,H=new DataView(D);G>0;){var V=H.getInt8(k++);if(V<0){var X=-V;G-=X+1;for(var re=0;re<X;re++)T.push(H.getUint8(k++))}else{var X=V;G-=2;for(var ce=H.getUint8(k++),re=0;re<X+1;re++)T.push(ce)}}return T}function Ne(D,G,T,k,H,V){var wt=new DataView(V.buffer),X=T[D.idx[0]].width,re=T[D.idx[0]].height,ce=3,he=Math.floor(X/8),fe=Math.ceil(X/8),ge=Math.ceil(re/8),We=X-(fe-1)*8,Te=re-(ge-1)*8,Ue={value:0},qe=new Array(ce),et=new Array(ce),yt=new Array(ce),tt=new Array(ce),Pe=new Array(ce);for(let Wt=0;Wt<ce;++Wt)Pe[Wt]=G[D.idx[Wt]],qe[Wt]=Wt<1?0:qe[Wt-1]+fe*ge,et[Wt]=new Float32Array(64),yt[Wt]=new Uint16Array(64),tt[Wt]=new Uint16Array(fe*64);for(let Wt=0;Wt<ge;++Wt){var at=8;Wt==ge-1&&(at=Te);var it=8;for(let Zt=0;Zt<fe;++Zt){Zt==fe-1&&(it=We);for(let Xt=0;Xt<ce;++Xt)yt[Xt].fill(0),yt[Xt][0]=H[qe[Xt]++],Ye(Ue,k,yt[Xt]),Je(yt[Xt],et[Xt]),St(et[Xt]);W(et);for(let Xt=0;Xt<ce;++Xt)F(et[Xt],tt[Xt],Zt*64)}let qt=0;for(let Zt=0;Zt<ce;++Zt){const Xt=T[D.idx[Zt]].type;for(let un=8*Wt;un<8*Wt+at;++un){qt=Pe[Zt][un];for(let Js=0;Js<he;++Js){const ki=Js*64+(un&7)*8;wt.setUint16(qt+0*2*Xt,tt[Zt][ki+0],!0),wt.setUint16(qt+1*2*Xt,tt[Zt][ki+1],!0),wt.setUint16(qt+2*2*Xt,tt[Zt][ki+2],!0),wt.setUint16(qt+3*2*Xt,tt[Zt][ki+3],!0),wt.setUint16(qt+4*2*Xt,tt[Zt][ki+4],!0),wt.setUint16(qt+5*2*Xt,tt[Zt][ki+5],!0),wt.setUint16(qt+6*2*Xt,tt[Zt][ki+6],!0),wt.setUint16(qt+7*2*Xt,tt[Zt][ki+7],!0),qt+=8*2*Xt}}if(he!=fe)for(let un=8*Wt;un<8*Wt+at;++un){const Js=Pe[Zt][un]+8*he*2*Xt,ki=he*64+(un&7)*8;for(let ws=0;ws<it;++ws)wt.setUint16(Js+ws*2*Xt,tt[Zt][ki+ws],!0)}}}for(var kt=new Uint16Array(X),wt=new DataView(V.buffer),jt=0;jt<ce;++jt){T[D.idx[jt]].decoded=!0;var Vn=T[D.idx[jt]].type;if(T[jt].type==2)for(var Ft=0;Ft<re;++Ft){const Wt=Pe[jt][Ft];for(var fn=0;fn<X;++fn)kt[fn]=wt.getUint16(Wt+fn*2*Vn,!0);for(var fn=0;fn<X;++fn)wt.setFloat32(Wt+fn*2*Vn,ie(kt[fn]),!0)}}}function Ye(D,G,T){for(var k,H=1;H<64;)k=G[D.value],k==65280?H=64:k>>8==255?H+=k&255:(T[H]=k,H++),D.value++}function Je(D,G){G[0]=ie(D[0]),G[1]=ie(D[1]),G[2]=ie(D[5]),G[3]=ie(D[6]),G[4]=ie(D[14]),G[5]=ie(D[15]),G[6]=ie(D[27]),G[7]=ie(D[28]),G[8]=ie(D[2]),G[9]=ie(D[4]),G[10]=ie(D[7]),G[11]=ie(D[13]),G[12]=ie(D[16]),G[13]=ie(D[26]),G[14]=ie(D[29]),G[15]=ie(D[42]),G[16]=ie(D[3]),G[17]=ie(D[8]),G[18]=ie(D[12]),G[19]=ie(D[17]),G[20]=ie(D[25]),G[21]=ie(D[30]),G[22]=ie(D[41]),G[23]=ie(D[43]),G[24]=ie(D[9]),G[25]=ie(D[11]),G[26]=ie(D[18]),G[27]=ie(D[24]),G[28]=ie(D[31]),G[29]=ie(D[40]),G[30]=ie(D[44]),G[31]=ie(D[53]),G[32]=ie(D[10]),G[33]=ie(D[19]),G[34]=ie(D[23]),G[35]=ie(D[32]),G[36]=ie(D[39]),G[37]=ie(D[45]),G[38]=ie(D[52]),G[39]=ie(D[54]),G[40]=ie(D[20]),G[41]=ie(D[22]),G[42]=ie(D[33]),G[43]=ie(D[38]),G[44]=ie(D[46]),G[45]=ie(D[51]),G[46]=ie(D[55]),G[47]=ie(D[60]),G[48]=ie(D[21]),G[49]=ie(D[34]),G[50]=ie(D[37]),G[51]=ie(D[47]),G[52]=ie(D[50]),G[53]=ie(D[56]),G[54]=ie(D[59]),G[55]=ie(D[61]),G[56]=ie(D[35]),G[57]=ie(D[36]),G[58]=ie(D[48]),G[59]=ie(D[49]),G[60]=ie(D[57]),G[61]=ie(D[58]),G[62]=ie(D[62]),G[63]=ie(D[63])}function St(D){const G=.5*Math.cos(.7853975),T=.5*Math.cos(3.14159/16),k=.5*Math.cos(3.14159/8),H=.5*Math.cos(3*3.14159/16),V=.5*Math.cos(5*3.14159/16),X=.5*Math.cos(3*3.14159/8),re=.5*Math.cos(7*3.14159/16);for(var ce=new Array(4),he=new Array(4),fe=new Array(4),ge=new Array(4),We=0;We<8;++We){var Te=We*8;ce[0]=k*D[Te+2],ce[1]=X*D[Te+2],ce[2]=k*D[Te+6],ce[3]=X*D[Te+6],he[0]=T*D[Te+1]+H*D[Te+3]+V*D[Te+5]+re*D[Te+7],he[1]=H*D[Te+1]-re*D[Te+3]-T*D[Te+5]-V*D[Te+7],he[2]=V*D[Te+1]-T*D[Te+3]+re*D[Te+5]+H*D[Te+7],he[3]=re*D[Te+1]-V*D[Te+3]+H*D[Te+5]-T*D[Te+7],fe[0]=G*(D[Te+0]+D[Te+4]),fe[3]=G*(D[Te+0]-D[Te+4]),fe[1]=ce[0]+ce[3],fe[2]=ce[1]-ce[2],ge[0]=fe[0]+fe[1],ge[1]=fe[3]+fe[2],ge[2]=fe[3]-fe[2],ge[3]=fe[0]-fe[1],D[Te+0]=ge[0]+he[0],D[Te+1]=ge[1]+he[1],D[Te+2]=ge[2]+he[2],D[Te+3]=ge[3]+he[3],D[Te+4]=ge[3]-he[3],D[Te+5]=ge[2]-he[2],D[Te+6]=ge[1]-he[1],D[Te+7]=ge[0]-he[0]}for(var Ue=0;Ue<8;++Ue)ce[0]=k*D[16+Ue],ce[1]=X*D[16+Ue],ce[2]=k*D[48+Ue],ce[3]=X*D[48+Ue],he[0]=T*D[8+Ue]+H*D[24+Ue]+V*D[40+Ue]+re*D[56+Ue],he[1]=H*D[8+Ue]-re*D[24+Ue]-T*D[40+Ue]-V*D[56+Ue],he[2]=V*D[8+Ue]-T*D[24+Ue]+re*D[40+Ue]+H*D[56+Ue],he[3]=re*D[8+Ue]-V*D[24+Ue]+H*D[40+Ue]-T*D[56+Ue],fe[0]=G*(D[Ue]+D[32+Ue]),fe[3]=G*(D[Ue]-D[32+Ue]),fe[1]=ce[0]+ce[3],fe[2]=ce[1]-ce[2],ge[0]=fe[0]+fe[1],ge[1]=fe[3]+fe[2],ge[2]=fe[3]-fe[2],ge[3]=fe[0]-fe[1],D[0+Ue]=ge[0]+he[0],D[8+Ue]=ge[1]+he[1],D[16+Ue]=ge[2]+he[2],D[24+Ue]=ge[3]+he[3],D[32+Ue]=ge[3]-he[3],D[40+Ue]=ge[2]-he[2],D[48+Ue]=ge[1]-he[1],D[56+Ue]=ge[0]-he[0]}function W(D){for(var G=0;G<64;++G){var T=D[0][G],k=D[1][G],H=D[2][G];D[0][G]=T+1.5747*H,D[1][G]=T-.1873*k-.4682*H,D[2][G]=T+1.8556*k}}function F(D,G,T){for(var k=0;k<64;++k)G[T+k]=bl.toHalfFloat(de(D[k]))}function de(D){return D<=1?Math.sign(D)*Math.pow(Math.abs(D),2.2):Math.sign(D)*Math.pow(B,Math.abs(D)-1)}function Re(D){return new DataView(D.array.buffer,D.offset.value,D.size)}function Ce(D){var G=D.viewer.buffer.slice(D.offset.value,D.offset.value+D.size),T=new Uint8Array(Be(G)),k=new Uint8Array(T.length);return Se(T),De(T,k),new DataView(k.buffer)}function be(D){var G=D.array.slice(D.offset.value,D.offset.value+D.size),T=jm(G),k=new Uint8Array(T.length);return Se(T),De(T,k),new DataView(k.buffer)}function ot(D){for(var G=D.viewer,T={value:D.offset.value},k=new Uint16Array(D.width*D.scanlineBlockSize*(D.channels*D.type)),H=new Uint8Array(8192),V=0,X=new Array(D.channels),re=0;re<D.channels;re++)X[re]={},X[re].start=V,X[re].end=X[re].start,X[re].nx=D.width,X[re].ny=D.lines,X[re].size=D.type,V+=X[re].nx*X[re].ny*X[re].size;var ce=Me(G,T),he=Me(G,T);if(he>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ce<=he)for(var re=0;re<he-ce+1;re++)H[re+ce]=Et(G,T);var fe=new Uint16Array(65536),ge=R(H,fe),We=Ge(G,T);Q(D.array,G,T,We,k,V);for(var re=0;re<D.channels;++re)for(var Te=X[re],Ue=0;Ue<X[re].size;++Ue)xt(k,Te.start+Ue,Te.nx,Te.size,Te.ny,Te.nx*Te.size,ge);Ee(fe,k,V);for(var qe=0,et=new Uint8Array(k.buffer.byteLength),yt=0;yt<D.lines;yt++)for(var tt=0;tt<D.channels;tt++){var Te=X[tt],Pe=Te.nx*Te.size,at=new Uint8Array(k.buffer,Te.end*2,Pe*2);et.set(at,qe),qe+=Pe*2,Te.end+=Pe}return new DataView(et.buffer)}function He(D){var G=D.array.slice(D.offset.value,D.offset.value+D.size),T=jm(G);const k=D.lines*D.channels*D.width,H=D.type==1?new Uint16Array(k):new Uint32Array(k);let V=0,X=0;const re=new Array(4);for(let ce=0;ce<D.lines;ce++)for(let he=0;he<D.channels;he++){let fe=0;switch(D.type){case 1:re[0]=V,re[1]=re[0]+D.width,V=re[1]+D.width;for(let ge=0;ge<D.width;++ge){const We=T[re[0]++]<<8|T[re[1]++];fe+=We,H[X]=fe,X++}break;case 2:re[0]=V,re[1]=re[0]+D.width,re[2]=re[1]+D.width,V=re[2]+D.width;for(let ge=0;ge<D.width;++ge){const We=T[re[0]++]<<24|T[re[1]++]<<16|T[re[2]++]<<8;fe+=We,H[X]=fe,X++}break}}return new DataView(H.buffer)}function Ve(D){var G=D.viewer,T={value:D.offset.value},k=new Uint8Array(D.width*D.lines*(D.channels*D.type*2)),H={version:Ut(G,T),unknownUncompressedSize:Ut(G,T),unknownCompressedSize:Ut(G,T),acCompressedSize:Ut(G,T),dcCompressedSize:Ut(G,T),rleCompressedSize:Ut(G,T),rleUncompressedSize:Ut(G,T),rleRawSize:Ut(G,T),totalAcUncompressedCount:Ut(G,T),totalDcUncompressedCount:Ut(G,T),acCompression:Ut(G,T)};if(H.version<2)throw"EXRLoader.parse: "+Si.compression+" version "+H.version+" is unsupported";for(var V=new Array,X=Me(G,T)-2;X>0;){var re=_t(G.buffer,T),ce=Et(G,T),he=ce>>2&3,fe=(ce>>4)-1,ge=new Int8Array([fe])[0],We=Et(G,T);V.push({name:re,index:ge,type:We,compression:he}),X-=re.length+3}for(var Te=Si.channels,Ue=new Array(D.channels),qe=0;qe<D.channels;++qe){var et=Ue[qe]={},yt=Te[qe];et.name=yt.name,et.compression=0,et.decoded=!1,et.type=yt.pixelType,et.pLinear=yt.pLinear,et.width=D.width,et.height=D.lines}for(var tt={idx:new Array(3)},Pe=0;Pe<D.channels;++Pe)for(var et=Ue[Pe],qe=0;qe<V.length;++qe){var at=V[qe];et.name==at.name&&(et.compression=at.compression,at.index>=0&&(tt.idx[at.index]=Pe),et.offset=Pe)}if(H.acCompressedSize>0)switch(H.acCompression){case 0:var wt=new Uint16Array(H.totalAcUncompressedCount);Q(D.array,G,T,H.acCompressedSize,wt,H.totalAcUncompressedCount);break;case 1:var it=D.array.slice(T.value,T.value+H.totalAcUncompressedCount),kt=jm(it),wt=new Uint16Array(kt.buffer);T.value+=H.totalAcUncompressedCount;break}if(H.dcCompressedSize>0){var jt={array:D.array,offset:T,size:H.dcCompressedSize},Vn=new Uint16Array(be(jt).buffer);T.value+=H.dcCompressedSize}if(H.rleRawSize>0){var it=D.array.slice(T.value,T.value+H.rleCompressedSize),kt=jm(it),Ft=Be(kt.buffer);T.value+=H.rleCompressedSize}for(var fn=0,Wt=new Array(Ue.length),qe=0;qe<Wt.length;++qe)Wt[qe]=new Array;for(var qt=0;qt<D.lines;++qt)for(var Zt=0;Zt<Ue.length;++Zt)Wt[Zt].push(fn),fn+=Ue[Zt].width*D.type*2;Ne(tt,Wt,Ue,wt,Vn,k);for(var qe=0;qe<Ue.length;++qe){var et=Ue[qe];if(!et.decoded)switch(et.compression){case 2:for(var Xt=0,un=0,qt=0;qt<D.lines;++qt){for(var Js=Wt[qe][Xt],ki=0;ki<et.width;++ki){for(var ws=0;ws<2*et.type;++ws)k[Js++]=Ft[un+ws*et.width*et.height];un++}Xt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(k.buffer)}function _t(D,G){for(var T=new Uint8Array(D),k=0;T[G.value+k]!=0;)k+=1;var H=new TextDecoder().decode(T.slice(G.value,G.value+k));return G.value=G.value+k+1,H}function Fe(D,G,T){var k=new TextDecoder().decode(new Uint8Array(D).slice(G.value,G.value+T));return G.value=G.value+T,k}function rt(D,G){var T=ft(D,G),k=Ge(D,G);return[T,k]}function Nt(D,G){var T=Ge(D,G),k=Ge(D,G);return[T,k]}function ft(D,G){var T=D.getInt32(G.value,!0);return G.value=G.value+4,T}function Ge(D,G){var T=D.getUint32(G.value,!0);return G.value=G.value+4,T}function Mt(D,G){var T=D[G.value];return G.value=G.value+1,T}function Et(D,G){var T=D.getUint8(G.value);return G.value=G.value+1,T}const Ut=function(D,G){let T;return"getBigInt64"in DataView.prototype?T=Number(D.getBigInt64(G.value,!0)):T=D.getUint32(G.value+4,!0)+Number(D.getUint32(G.value,!0)<<32),G.value+=8,T};function q(D,G){var T=D.getFloat32(G.value,!0);return G.value+=4,T}function Ze(D,G){return bl.toHalfFloat(q(D,G))}function ie(D){var G=(D&31744)>>10,T=D&1023;return(D>>15?-1:1)*(G?G===31?T?NaN:1/0:Math.pow(2,G-15)*(1+T/1024):6103515625e-14*(T/1024))}function Me(D,G){var T=D.getUint16(G.value,!0);return G.value+=2,T}function ze(D,G){return ie(Me(D,G))}function vt(D,G,T,k){for(var H=T.value,V=[];T.value<H+k-1;){var X=_t(G,T),re=ft(D,T),ce=Et(D,T);T.value+=3;var he=ft(D,T),fe=ft(D,T);V.push({name:X,pixelType:re,pLinear:ce,xSampling:he,ySampling:fe})}return T.value+=1,V}function zt(D,G){var T=q(D,G),k=q(D,G),H=q(D,G),V=q(D,G),X=q(D,G),re=q(D,G),ce=q(D,G),he=q(D,G);return{redX:T,redY:k,greenX:H,greenY:V,blueX:X,blueY:re,whiteX:ce,whiteY:he}}function dn(D,G){var T=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],k=Et(D,G);return T[k]}function Pn(D,G){var T=Ge(D,G),k=Ge(D,G),H=Ge(D,G),V=Ge(D,G);return{xMin:T,yMin:k,xMax:H,yMax:V}}function Yt(D,G){var T=["INCREASING_Y"],k=Et(D,G);return T[k]}function Oi(D,G){var T=q(D,G),k=q(D,G);return[T,k]}function Ui(D,G){var T=q(D,G),k=q(D,G),H=q(D,G);return[T,k,H]}function es(D,G,T,k,H){if(k==="string"||k==="stringvector"||k==="iccProfile")return Fe(G,T,H);if(k==="chlist")return vt(D,G,T,H);if(k==="chromaticities")return zt(D,T);if(k==="compression")return dn(D,T);if(k==="box2i")return Pn(D,T);if(k==="lineOrder")return Yt(D,T);if(k==="float")return q(D,T);if(k==="v2f")return Oi(D,T);if(k==="v3f")return Ui(D,T);if(k==="int")return ft(D,T);if(k==="rational")return rt(D,T);if(k==="timecode")return Nt(D,T);if(k==="preview")return T.value+=H,"skipped";T.value+=H}function za(D,G,T){const k={};if(D.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";k.version=D.getUint8(4);const H=D.getUint8(5);k.spec={singleTile:!!(H&2),longName:!!(H&4),deepFormat:!!(H&8),multiPart:!!(H&16)},T.value=8;for(var V=!0;V;){var X=_t(G,T);if(X==0)V=!1;else{var re=_t(G,T),ce=Ge(D,T),he=es(D,G,T,re,ce);he===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${re}'.`):k[X]=he}}if(H&-5)throw console.error("EXRHeader:",k),"THREE.EXRLoader: provided file is currently unsupported.";return k}function lc(D,G,T,k,H){const V={size:0,viewer:G,array:T,offset:k,width:D.dataWindow.xMax-D.dataWindow.xMin+1,height:D.dataWindow.yMax-D.dataWindow.yMin+1,channels:D.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:D.channels[0].pixelType,uncompress:null,getter:null,format:null,[Jh?"colorSpace":"encoding"]:null};switch(D.compression){case"NO_COMPRESSION":V.lines=1,V.uncompress=Re;break;case"RLE_COMPRESSION":V.lines=1,V.uncompress=Ce;break;case"ZIPS_COMPRESSION":V.lines=1,V.uncompress=be;break;case"ZIP_COMPRESSION":V.lines=16,V.uncompress=be;break;case"PIZ_COMPRESSION":V.lines=32,V.uncompress=ot;break;case"PXR24_COMPRESSION":V.lines=16,V.uncompress=He;break;case"DWAA_COMPRESSION":V.lines=32,V.uncompress=Ve;break;case"DWAB_COMPRESSION":V.lines=256,V.uncompress=Ve;break;default:throw"EXRLoader.parse: "+D.compression+" is unsupported"}if(V.scanlineBlockSize=V.lines,V.type==1)switch(H){case Fn:V.getter=ze,V.inputSize=2;break;case pi:V.getter=Me,V.inputSize=2;break}else if(V.type==2)switch(H){case Fn:V.getter=q,V.inputSize=4;break;case pi:V.getter=Ze,V.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+V.type+" for "+D.compression+".";V.blockCount=(D.dataWindow.yMax+1)/V.scanlineBlockSize;for(var X=0;X<V.blockCount;X++)Ut(G,k);V.outputChannels=V.channels==3?4:V.channels;const re=V.width*V.height*V.outputChannels;switch(H){case Fn:V.byteArray=new Float32Array(re),V.channels<V.outputChannels&&V.byteArray.fill(1,0,re);break;case pi:V.byteArray=new Uint16Array(re),V.channels<V.outputChannels&&V.byteArray.fill(15360,0,re);break;default:console.error("THREE.EXRLoader: unsupported type: ",H);break}return V.bytesPerLine=V.width*V.inputSize*V.channels,V.outputChannels==4?V.format=Kn:V.format=Gg,Jh?V.colorSpace="srgb-linear":V.encoding=3e3,V}const xs=new DataView(e),Ss=new Uint8Array(e),As={value:0},Si=za(xs,e,As),Lt=lc(Si,xs,Ss,As,this.type),Ha={value:0},ih={R:0,G:1,B:2,A:3,Y:0};for(let D=0;D<Lt.height/Lt.scanlineBlockSize;D++){const G=Ge(xs,As);Lt.size=Ge(xs,As),Lt.lines=G+Lt.scanlineBlockSize>Lt.height?Lt.height-G:Lt.scanlineBlockSize;const k=Lt.size<Lt.lines*Lt.bytesPerLine?Lt.uncompress(Lt):Re(Lt);As.value+=Lt.size;for(let H=0;H<Lt.scanlineBlockSize;H++){const V=H+D*Lt.scanlineBlockSize;if(V>=Lt.height)break;for(let X=0;X<Lt.channels;X++){const re=ih[Si.channels[X].name];for(let ce=0;ce<Lt.width;ce++){Ha.value=(H*(Lt.channels*Lt.width)+X*Lt.width+ce)*Lt.inputSize;const he=(Lt.height-1-V)*(Lt.width*Lt.outputChannels)+ce*Lt.outputChannels+re;Lt.byteArray[he]=Lt.getter(k,Ha)}}}}return{header:Si,width:Lt.width,height:Lt.height,data:Lt.byteArray,format:Lt.format,[Jh?"colorSpace":"encoding"]:Lt[Jh?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){Jh?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=rn,o.magFilter=rn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const r1=new WeakMap;class yJ extends xi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new _i(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(r1.has(e)){const l=r1.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,d)=>{r._callbacks[s]={resolve:c,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),r1.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new It;e.index&&t.setIndex(new Kt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Kt(o,a))}return t}_loadLibrary(e,t){const i=new _i(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=xJ.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function xJ(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(f){d({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const f=d.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(f,p,m,c),S=v.attributes.map(y=>y.array.buffer);v.index&&S.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},S)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{f.destroy(m),f.destroy(p)}});break}};function t(o,a,l,c){const d=c.attributeIDs,f=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const S={index:null,attributes:[]};for(const y in d){const g=self[f[y]];let x,A;if(c.useUniqueIDs)A=d[y],x=a.GetAttributeByUniqueId(p,A);else{if(A=a.GetAttributeId(p,o[d[y]]),A===-1)continue;x=a.GetAttribute(p,A)}S.attributes.push(r(o,a,p,y,g,x))}return v===o.TRIANGULAR_MESH&&(S.index=i(o,a,p)),o.destroy(p),S}function i(o,a,l){const d=l.num_faces()*3,f=d*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,d).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,c,d,f){const p=f.num_components(),v=l.num_points()*p,S=v*d.BYTES_PER_ELEMENT,y=s(o,d),g=o._malloc(S);a.GetAttributeDataArrayForAllPoints(l,f,y,S,g);const x=new d(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:x,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Wm;const s1=()=>{if(Wm)return Wm;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const S=f.charCodeAt(v);p[v]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let m=0;for(let v=0;v<f.length;++v)p[m++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(f,p,m,v,S,y){const g=s.exports.sbrk,x=m+3&-4,A=g(x*v),M=g(S.length),P=new Uint8Array(s.exports.memory.buffer);P.set(S,M);const I=f(A,m,v,M,S.length);if(I===0&&y&&y(A,x,v),p.set(P.subarray(A,A+m*v)),g(A-g(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Wm={ready:o,supported:!0,decodeVertexBuffer(f,p,m,v,S){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,v,s.exports[c[S]])},decodeIndexBuffer(f,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,v)},decodeIndexSequence(f,p,m,v){l(s.exports.meshopt_decodeIndexSequence,f,p,m,v)},decodeGltfBuffer(f,p,m,v,S,y){l(s.exports[d[S]],f,p,m,v,s.exports[c[y]])}},Wm};let Xm=null,XL="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function JL(n,e,t){return i=>{t&&t(i),n&&(Xm||(Xm=new yJ),Xm.setDecoderPath(typeof n=="string"?n:XL),i.setDRACOLoader(Xm)),e&&i.setMeshoptDecoder(typeof s1=="function"?s1():s1)}}function Ff(n,e=!0,t=!0,i){return nh(Jw,n,JL(e,t,i))}Ff.preload=(n,e=!0,t=!0,i)=>nh.preload(Jw,n,JL(e,t,i));Ff.clear=n=>nh.clear(Jw,n);Ff.setDecoderPath=n=>{XL=n};/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const En={LEFT:1,RIGHT:2,MIDDLE:4},ye=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Wc={NONE:0,IN:1,OUT:-1};function dl(n){return n.isPerspectiveCamera}function Yo(n){return n.isOrthographicCamera}const Xc=Math.PI*2,eI=Math.PI/2,KL=1e-5,Kh=Math.PI/180;function ls(n,e,t){return Math.max(e,Math.min(t,n))}function pn(n,e=KL){return Math.abs(n)<e}function an(n,e,t=KL){return pn(n-e,t)}function tI(n,e){return Math.round(n/e)*e}function Yh(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Zh(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function Jm(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const d=e,f=r*i;c=ls(c,-f,f),e=n-c;const p=(t.value+o*c)*s;t.value=(t.value-o*p)*l;let m=e+(c+p)*l;return d-n>0==m>d&&(m=d,t.value=(m-d)/s),m}function nI(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let d=e.x,f=e.y,p=e.z,m=n.x-d,v=n.y-f,S=n.z-p;const y=d,g=f,x=p,A=r*i,M=A*A,P=m*m+v*v+S*S;if(P>M){const oe=Math.sqrt(P);m=m/oe*A,v=v/oe*A,S=S/oe*A}d=n.x-m,f=n.y-v,p=n.z-S;const I=(t.x+a*m)*s,L=(t.y+a*v)*s,N=(t.z+a*S)*s;t.x=(t.x-a*I)*c,t.y=(t.y-a*L)*c,t.z=(t.z-a*N)*c,o.x=d+(m+I)*c,o.y=f+(v+L)*c,o.z=p+(S+N)*c;const B=y-n.x,R=g-n.y,O=x-n.z,Y=o.x-y,$=o.y-g,te=o.z-x;return B*Y+R*$+O*te>0&&(o.x=y,o.y=g,o.z=x,t.x=(o.x-y)/s,t.y=(o.y-g)/s,t.z=(o.z-x)/s),o}function o1(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function a1(n,e){return Yo(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class SJ{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}var l1;const AJ="2.8.4",Km=1/8,wJ=/Mac/.test((l1=globalThis==null?void 0:globalThis.navigator)===null||l1===void 0?void 0:l1.platform);let At,iI,Ym,c1,$i,Pt,nn,Jc,Qh,Bs,Ns,fl,rI,sI,kr,qh,Kc,oI,u1,aI,h1,d1,Zm,f1=class SS extends SJ{static install(e){At=e.THREE,iI=Object.freeze(new At.Vector3(0,0,0)),Ym=Object.freeze(new At.Vector3(0,1,0)),c1=Object.freeze(new At.Vector3(0,0,1)),$i=new At.Vector2,Pt=new At.Vector3,nn=new At.Vector3,Jc=new At.Vector3,Qh=new At.Vector3,Bs=new At.Vector3,Ns=new At.Vector3,fl=new At.Vector3,rI=new At.Vector3,sI=new At.Vector3,kr=new At.Spherical,qh=new At.Spherical,Kc=new At.Box3,oI=new At.Box3,u1=new At.Sphere,aI=new At.Quaternion,h1=new At.Quaternion,d1=new At.Matrix4,Zm=new At.Raycaster}static get ACTION(){return ye}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ye.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Wc.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new At.Vector3,this._focalOffsetVelocity=new At.Vector3,this._zoomVelocity={value:0},this._truckInternal=(g,x,A)=>{let M,P;if(dl(this._camera)){const I=Pt.copy(this._camera.position).sub(this._target),L=this._camera.getEffectiveFOV()*Kh,N=I.length()*Math.tan(L*.5);M=this.truckSpeed*g*N/this._elementRect.height,P=this.truckSpeed*x*N/this._elementRect.height}else if(Yo(this._camera)){const I=this._camera;M=g*(I.right-I.left)/I.zoom/this._elementRect.width,P=x*(I.top-I.bottom)/I.zoom/this._elementRect.height}else return;this.verticalDragToForward?(A?this.setFocalOffset(this._focalOffsetEnd.x+M,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(M,0,!0),this.forward(-P,!0)):A?this.setFocalOffset(this._focalOffsetEnd.x+M,this._focalOffsetEnd.y+P,this._focalOffsetEnd.z,!0):this.truck(M,P,!0)},this._rotateInternal=(g,x)=>{const A=Xc*this.azimuthRotateSpeed*g/this._elementRect.height,M=Xc*this.polarRotateSpeed*x/this._elementRect.height;this.rotate(A,M,!0)},this._dollyInternal=(g,x,A)=>{const M=Math.pow(.95,-g*this.dollySpeed),P=this._sphericalEnd.radius,I=this._sphericalEnd.radius*M,L=ls(I,this.minDistance,this.maxDistance),N=L-I;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(I,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(N,!0),this._dollyToNoClamp(L,!0)):this._dollyToNoClamp(L,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?I:L)-P,this._dollyControlCoord.set(x,A)),this._lastDollyDirection=Math.sign(-g)},this._zoomInternal=(g,x,A)=>{const M=Math.pow(.95,g*this.dollySpeed),P=this._zoom,I=this._zoom*M;this.zoomTo(I,!0),this.dollyToCursor&&(this._changedZoom+=I-P,this._dollyControlCoord.set(x,A))},typeof At>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new At.Quaternion().setFromUnitVectors(this._camera.up,Ym),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ye.NONE,this._target=new At.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new At.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new At.Spherical().setFromVector3(Pt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new At.Vector3,new At.Vector3,new At.Vector3,new At.Vector3],this._updateNearPlaneCorners(),this._boundary=new At.Box3(new At.Vector3(-1/0,-1/0,-1/0),new At.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new At.Vector2,this.mouseButtons={left:ye.ROTATE,middle:ye.DOLLY,right:ye.TRUCK,wheel:dl(this._camera)?ye.DOLLY:Yo(this._camera)?ye.ZOOM:ye.NONE},this.touches={one:ye.TOUCH_ROTATE,two:dl(this._camera)?ye.TOUCH_DOLLY_TRUCK:Yo(this._camera)?ye.TOUCH_ZOOM_TRUCK:ye.NONE,three:ye.TOUCH_TRUCK};const i=new At.Vector2,r=new At.Vector2,s=new At.Vector2,o=g=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),P=g.clientX/M.width,I=g.clientY/M.height;if(P<this._interactiveArea.left||P>this._interactiveArea.right||I<this._interactiveArea.top||I>this._interactiveArea.bottom)return}const x=g.pointerType!=="mouse"?null:(g.buttons&En.LEFT)===En.LEFT?En.LEFT:(g.buttons&En.MIDDLE)===En.MIDDLE?En.MIDDLE:(g.buttons&En.RIGHT)===En.RIGHT?En.RIGHT:null;if(x!==null){const M=this._findPointerByMouseButton(x);M&&this._disposePointer(M)}if((g.buttons&En.LEFT)===En.LEFT&&this._lockedPointer)return;const A={pointerId:g.pointerId,clientX:g.clientX,clientY:g.clientY,deltaX:0,deltaY:0,mouseButton:x};this._activePointers.push(A),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,p(g)},a=g=>{g.cancelable&&g.preventDefault();const x=g.pointerId,A=this._lockedPointer||this._findPointerById(x);if(A){if(A.clientX=g.clientX,A.clientY=g.clientY,A.deltaX=g.movementX,A.deltaY=g.movementY,this._state=0,g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(g.buttons&En.LEFT)===En.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(g.buttons&En.MIDDLE)===En.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(g.buttons&En.RIGHT)===En.RIGHT&&(this._state=this._state|this.mouseButtons.right);m()}},l=g=>{const x=this._findPointerById(g.pointerId);if(!(x&&x===this._lockedPointer)){if(x&&this._disposePointer(x),g.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ye.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ye.NONE;v()}};let c=-1;const d=g=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ye.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const I=this._domElement.getBoundingClientRect(),L=g.clientX/I.width,N=g.clientY/I.height;if(L<this._interactiveArea.left||L>this._interactiveArea.right||N<this._interactiveArea.top||N>this._interactiveArea.bottom)return}if(g.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ye.ROTATE||this.mouseButtons.wheel===ye.TRUCK){const I=performance.now();c-I<1e3&&this._getClientRect(this._elementRect),c=I}const x=wJ?-1:-3,A=g.deltaMode===1?g.deltaY/x:g.deltaY/(x*10),M=this.dollyToCursor?(g.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,P=this.dollyToCursor?(g.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ye.ROTATE:{this._rotateInternal(g.deltaX,g.deltaY),this._isUserControllingRotate=!0;break}case ye.TRUCK:{this._truckInternal(g.deltaX,g.deltaY,!1),this._isUserControllingTruck=!0;break}case ye.OFFSET:{this._truckInternal(g.deltaX,g.deltaY,!0),this._isUserControllingOffset=!0;break}case ye.DOLLY:{this._dollyInternal(-A,M,P),this._isUserControllingDolly=!0;break}case ye.ZOOM:{this._zoomInternal(-A,M,P),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},f=g=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===SS.ACTION.NONE){const x=g instanceof PointerEvent?g.pointerId:0,A=this._findPointerById(x);A&&this._disposePointer(A),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}g.preventDefault()}},p=g=>{if(!this._enabled)return;if(o1(this._activePointers,$i),this._getClientRect(this._elementRect),i.copy($i),r.copy($i),this._activePointers.length>=2){const A=$i.x-this._activePointers[1].clientX,M=$i.y-this._activePointers[1].clientY,P=Math.sqrt(A*A+M*M);s.set(0,P);const I=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,L=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(I,L)}if(this._state=0,!g)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in g&&g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(g.buttons&En.LEFT)===En.LEFT&&(this._state=this._state|this.mouseButtons.left),(g.buttons&En.MIDDLE)===En.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(g.buttons&En.RIGHT)===En.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ye.ROTATE)===ye.ROTATE||(this._state&ye.TOUCH_ROTATE)===ye.TOUCH_ROTATE||(this._state&ye.TOUCH_DOLLY_ROTATE)===ye.TOUCH_DOLLY_ROTATE||(this._state&ye.TOUCH_ZOOM_ROTATE)===ye.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ye.TRUCK)===ye.TRUCK||(this._state&ye.TOUCH_TRUCK)===ye.TOUCH_TRUCK||(this._state&ye.TOUCH_DOLLY_TRUCK)===ye.TOUCH_DOLLY_TRUCK||(this._state&ye.TOUCH_ZOOM_TRUCK)===ye.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ye.DOLLY)===ye.DOLLY||(this._state&ye.TOUCH_DOLLY)===ye.TOUCH_DOLLY||(this._state&ye.TOUCH_DOLLY_TRUCK)===ye.TOUCH_DOLLY_TRUCK||(this._state&ye.TOUCH_DOLLY_OFFSET)===ye.TOUCH_DOLLY_OFFSET||(this._state&ye.TOUCH_DOLLY_ROTATE)===ye.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ye.ZOOM)===ye.ZOOM||(this._state&ye.TOUCH_ZOOM)===ye.TOUCH_ZOOM||(this._state&ye.TOUCH_ZOOM_TRUCK)===ye.TOUCH_ZOOM_TRUCK||(this._state&ye.TOUCH_ZOOM_OFFSET)===ye.TOUCH_ZOOM_OFFSET||(this._state&ye.TOUCH_ZOOM_ROTATE)===ye.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ye.OFFSET)===ye.OFFSET||(this._state&ye.TOUCH_OFFSET)===ye.TOUCH_OFFSET||(this._state&ye.TOUCH_DOLLY_OFFSET)===ye.TOUCH_DOLLY_OFFSET||(this._state&ye.TOUCH_ZOOM_OFFSET)===ye.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},m=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,o1(this._activePointers,$i);const x=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,A=x?-x.deltaX:r.x-$i.x,M=x?-x.deltaY:r.y-$i.y;if(r.copy($i),((this._state&ye.ROTATE)===ye.ROTATE||(this._state&ye.TOUCH_ROTATE)===ye.TOUCH_ROTATE||(this._state&ye.TOUCH_DOLLY_ROTATE)===ye.TOUCH_DOLLY_ROTATE||(this._state&ye.TOUCH_ZOOM_ROTATE)===ye.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(A,M),this._isUserControllingRotate=!0),(this._state&ye.DOLLY)===ye.DOLLY||(this._state&ye.ZOOM)===ye.ZOOM){const P=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,I=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,L=this.dollyDragInverted?-1:1;(this._state&ye.DOLLY)===ye.DOLLY?(this._dollyInternal(L*M*Km,P,I),this._isUserControllingDolly=!0):(this._zoomInternal(L*M*Km,P,I),this._isUserControllingZoom=!0)}if((this._state&ye.TOUCH_DOLLY)===ye.TOUCH_DOLLY||(this._state&ye.TOUCH_ZOOM)===ye.TOUCH_ZOOM||(this._state&ye.TOUCH_DOLLY_TRUCK)===ye.TOUCH_DOLLY_TRUCK||(this._state&ye.TOUCH_ZOOM_TRUCK)===ye.TOUCH_ZOOM_TRUCK||(this._state&ye.TOUCH_DOLLY_OFFSET)===ye.TOUCH_DOLLY_OFFSET||(this._state&ye.TOUCH_ZOOM_OFFSET)===ye.TOUCH_ZOOM_OFFSET||(this._state&ye.TOUCH_DOLLY_ROTATE)===ye.TOUCH_DOLLY_ROTATE||(this._state&ye.TOUCH_ZOOM_ROTATE)===ye.TOUCH_ZOOM_ROTATE){const P=$i.x-this._activePointers[1].clientX,I=$i.y-this._activePointers[1].clientY,L=Math.sqrt(P*P+I*I),N=s.y-L;s.set(0,L);const B=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ye.TOUCH_DOLLY)===ye.TOUCH_DOLLY||(this._state&ye.TOUCH_DOLLY_ROTATE)===ye.TOUCH_DOLLY_ROTATE||(this._state&ye.TOUCH_DOLLY_TRUCK)===ye.TOUCH_DOLLY_TRUCK||(this._state&ye.TOUCH_DOLLY_OFFSET)===ye.TOUCH_DOLLY_OFFSET?(this._dollyInternal(N*Km,B,R),this._isUserControllingDolly=!0):(this._zoomInternal(N*Km,B,R),this._isUserControllingZoom=!0)}((this._state&ye.TRUCK)===ye.TRUCK||(this._state&ye.TOUCH_TRUCK)===ye.TOUCH_TRUCK||(this._state&ye.TOUCH_DOLLY_TRUCK)===ye.TOUCH_DOLLY_TRUCK||(this._state&ye.TOUCH_ZOOM_TRUCK)===ye.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(A,M,!1),this._isUserControllingTruck=!0),((this._state&ye.OFFSET)===ye.OFFSET||(this._state&ye.TOUCH_OFFSET)===ye.TOUCH_OFFSET||(this._state&ye.TOUCH_DOLLY_OFFSET)===ye.TOUCH_DOLLY_OFFSET||(this._state&ye.TOUCH_ZOOM_OFFSET)===ye.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(A,M,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},v=()=>{o1(this._activePointers,$i),r.copy($i),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",S),this._domElement.ownerDocument.addEventListener("pointerlockerror",y),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),p())},this.unlockPointer=()=>{var g,x,A;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(g=this._domElement)===null||g===void 0||g.ownerDocument.exitPointerLock(),(x=this._domElement)===null||x===void 0||x.ownerDocument.removeEventListener("pointerlockchange",S),(A=this._domElement)===null||A===void 0||A.ownerDocument.removeEventListener("pointerlockerror",y),this.cancel()};const S=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},y=()=>{this.unlockPointer()};this._addAllEventListeners=g=>{this._domElement=g,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",y))},this.cancel=()=>{this._state!==ye.NONE&&(this._state=ye.NONE,this._activePointers.length=0,v())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=ls(e.width,0,1),this._interactiveArea.height=ls(e.height,0,1),this._interactiveArea.x=ls(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=ls(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=ls(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=ls(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||an(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&an(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Wc.NONE,this._changedDolly=0,this._dollyToNoClamp(ls(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=an(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||an(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Qh).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=ls(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||an(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),Bs.setFromMatrixColumn(this._camera.matrix,0),Ns.setFromMatrixColumn(this._camera.matrix,1),Bs.multiplyScalar(e),Ns.multiplyScalar(-t);const r=Pt.copy(Bs).add(Ns),s=nn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){Pt.setFromMatrixColumn(this._camera.matrix,0),Pt.crossVectors(this._camera.up,Pt),Pt.multiplyScalar(e);const i=nn.copy(this._targetEnd).add(Pt);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Pt.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Pt.x,this._targetEnd.y+Pt.y,this._targetEnd.z+Pt.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=Pt.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=Pt.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?Kc.copy(e):Kc.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=tI(this._sphericalEnd.theta,eI),f=tI(this._sphericalEnd.phi,eI);l.push(this.rotateTo(d,f,t));const p=Pt.setFromSpherical(this._sphericalEnd).normalize(),m=aI.setFromUnitVectors(p,c1),v=an(Math.abs(p.y),1);v&&m.multiply(h1.setFromAxisAngle(Ym,d)),m.multiply(this._yAxisUpSpaceInverse);const S=oI.makeEmpty();nn.copy(c.min).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.min).setX(c.max.x).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.min).setY(c.max.y).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.max).setZ(c.min.z).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.min).setZ(c.max.z).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.max).setY(c.min.y).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.max).setX(c.min.x).applyQuaternion(m),S.expandByPoint(nn),nn.copy(c.max).applyQuaternion(m),S.expandByPoint(nn),S.min.x-=r,S.min.y-=o,S.max.x+=s,S.max.y+=a,m.setFromUnitVectors(c1,p),v&&m.premultiply(h1.invert()),m.premultiply(this._yAxisUpSpace);const y=S.getSize(Pt),g=S.getCenter(nn).applyQuaternion(m);if(dl(this._camera)){const x=this.getDistanceToFitBox(y.x,y.y,y.z,i);l.push(this.moveTo(g.x,g.y,g.z,t)),l.push(this.dollyTo(x,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Yo(this._camera)){const x=this._camera,A=x.right-x.left,M=x.top-x.bottom,P=i?Math.max(A/y.x,M/y.y):Math.min(A/y.x,M/y.y);l.push(this.moveTo(g.x,g.y,g.z,t)),l.push(this.zoomTo(P,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s="isSphere"in e?u1.copy(e):SS.createBoundingSphere(e,u1);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),dl(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(Yo(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);i.push(this.zoomTo(c,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Wc.NONE,this._changedDolly=0;const l=nn.set(r,s,o),c=Pt.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!a||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold)&&an(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&an(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&an(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(e,t,i,r,s,o,a,l,c,d,f,p,m,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Wc.NONE,this._changedDolly=0;const S=Pt.set(r,s,o),y=nn.set(e,t,i);kr.setFromVector3(y.sub(S).applyQuaternion(this._yAxisUpSpace));const g=Jc.set(d,f,p),x=nn.set(a,l,c);qh.setFromVector3(x.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(S.lerp(g,m));const A=qh.theta-kr.theta,M=qh.phi-kr.phi,P=qh.radius-kr.radius;this._sphericalEnd.set(kr.radius+P*m,kr.phi+M*m,kr.theta+A*m),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const I=!v||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold)&&an(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&an(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&an(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(I)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(Pt),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=ls(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||an(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&an(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&an(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),Bs.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Ns.setFromMatrixColumn(this._camera.matrixWorldInverse,1),fl.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Pt.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);Bs.multiplyScalar(o.x),Ns.multiplyScalar(o.y),fl.multiplyScalar(o.z),Pt.copy(Bs).add(Ns).add(fl),Pt.z=Pt.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Pt.x,Pt.y,-Pt.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new At.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(a1(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Kh,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(a1(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Kh,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new At.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new At.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new At.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new At.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Xc,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Xc),this._spherical.theta+=Xc*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Xc)}reset(e=!1){if(!an(this._camera.up.x,this._cameraUp0.x)||!an(this._camera.up.y,this._cameraUp0.y)||!an(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Pt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Ym),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Pt.subVectors(this._target,this._camera.position).normalize(),t=nn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Pt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=rI.subVectors(this._targetEnd,this._target),o=sI.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(pn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Jm(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(pn(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Jm(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(pn(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Jm(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(pn(s.x)&&pn(s.y)&&pn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;nI(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(pn(o.x)&&pn(o.y)&&pn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;nI(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(pn(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Jm(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(dl(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,p=this._camera,m=this._getCameraDirection(Qh),v=Pt.copy(m).cross(p.up).normalize();v.lengthSq()===0&&(v.x=1);const S=nn.crossVectors(v,m),y=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*Kh*.5),x=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,A=Jc.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*y*p.aspect)).add(S.multiplyScalar(this._dollyControlCoord.y*y)),M=Pt.copy(this._targetEnd).lerp(A,x),P=this._lastDollyDirection===Wc.IN&&this._spherical.radius<=this.minDistance,I=this._lastDollyDirection===Wc.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(P||I)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const N=nn.copy(m).multiplyScalar(-f);M.add(N)}this._boundary.clampPoint(M,M);const L=nn.subVectors(M,this._targetEnd);this._targetEnd.copy(M),this._target.add(L),this._changedDolly-=f,pn(this._changedDolly)&&(this._changedDolly=0)}else if(Yo(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,p=this._camera,m=Pt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(p.near+p.far)/(p.near-p.far)).unproject(p),v=nn.set(0,0,-1).applyQuaternion(p.quaternion),S=Jc.copy(m).add(v.multiplyScalar(-m.dot(p.up))),g=-(this._zoom-f-this._zoom)/this._zoom,x=this._getCameraDirection(Qh),A=this._targetEnd.dot(x),M=Pt.copy(this._targetEnd).lerp(S,g),P=M.dot(x),I=x.multiplyScalar(P-A);M.sub(I),this._boundary.clampPoint(M,M);const L=nn.subVectors(M,this._targetEnd);this._targetEnd.copy(M),this._target.add(L),this._changedZoom-=f,pn(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!pn(this._focalOffset.x)||!pn(this._focalOffset.y)||!pn(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Bs.setFromMatrixColumn(this._camera.matrix,0),Ns.setFromMatrixColumn(this._camera.matrix,1),fl.setFromMatrixColumn(this._camera.matrix,2),Bs.multiplyScalar(this._focalOffset.x),Ns.multiplyScalar(-this._focalOffset.y),fl.multiplyScalar(this._focalOffset.z),Pt.copy(Bs).add(Ns).add(fl),this._camera.position.add(Pt)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Pt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),pn(t,this.restThreshold)&&pn(i,this.restThreshold)&&pn(r,this.restThreshold)&&pn(s.x,this.restThreshold)&&pn(s.y,this.restThreshold)&&pn(s.z,this.restThreshold)&&pn(o.x,this.restThreshold)&&pn(o.y,this.restThreshold)&&pn(o.z,this.restThreshold)&&pn(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Yh(this.maxDistance),minZoom:this.minZoom,maxZoom:Yh(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Yh(this.maxPolarAngle),minAzimuthAngle:Yh(this.minAzimuthAngle),maxAzimuthAngle:Yh(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Pt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Zh(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Zh(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Zh(i.maxPolarAngle),this.minAzimuthAngle=Zh(i.minAzimuthAngle),this.maxAzimuthAngle=Zh(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),kr.setFromVector3(Pt.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(kr.theta,kr.phi,t),this.dollyTo(kr.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",AJ),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=nn.copy(t).add(e),a=this._boundary.clampPoint(s,Jc).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const c=1+i*l/t.dot(a);return e.add(nn.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(dl(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Kh,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Yo(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||a1(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(Qh);d1.lookAt(iI,i,this._camera.up);for(let r=0;r<4;r++){const s=nn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(d1);const o=Jc.addVectors(this._target,s);Zm.set(o,i),Zm.far=this._spherical.radius+1;const a=Zm.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new At.Sphere){const i=t,r=i.center;Kc.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Kc.expandByObject(o)}),Kc.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const d=l.attributes.position;for(let f=0,p=d.count;f<p;f++)Pt.fromBufferAttribute(d,f),s=Math.max(s,r.distanceToSquared(Pt))}),i.radius=Math.sqrt(s),i}};const lI=J.forwardRef((n,e)=>{J.useMemo(()=>{const P={Box3:vi,MathUtils:{clamp:ow.clamp},Matrix4:ht,Quaternion:gi,Raycaster:hv,Sphere:ui,Spherical:fL,Vector2:we,Vector3:z,Vector4:ln};f1.install({THREE:P}),Hw({CameraControlsImpl:f1})},[]);const{camera:t,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:l,...c}=n,d=gr(P=>P.camera),f=gr(P=>P.gl),p=gr(P=>P.invalidate),m=gr(P=>P.events),v=gr(P=>P.setEvents),S=gr(P=>P.set),y=gr(P=>P.get),g=gr(P=>P.performance),x=t||d,A=i||m.connected||f.domElement,M=J.useMemo(()=>new f1(x),[x]);return Ww((P,I)=>{M.enabled&&M.update(I)},-1),J.useEffect(()=>(M.connect(A),()=>void M.disconnect()),[A,M]),J.useEffect(()=>{const P=N=>{p(),l&&g.regress(),a&&a(N)},I=N=>{s&&s(N)},L=N=>{o&&o(N)};return M.addEventListener("update",P),M.addEventListener("controlstart",I),M.addEventListener("controlend",L),M.addEventListener("control",P),M.addEventListener("transitionstart",P),M.addEventListener("wake",P),()=>{M.removeEventListener("update",P),M.removeEventListener("controlstart",I),M.removeEventListener("controlend",L),M.removeEventListener("control",P),M.removeEventListener("transitionstart",P),M.removeEventListener("wake",P)}},[M,s,o,p,v,l,a]),J.useEffect(()=>{if(r){const P=y().controls;return S({controls:M}),()=>S({controls:P})}},[r,M]),J.createElement("primitive",ig({ref:e,object:M},c))});function MJ(n,e){const t=J.useRef(),[i]=J.useState(()=>e?e instanceof Ht?{current:e}:e:t),[r]=J.useState(()=>new dL(void 0));J.useLayoutEffect(()=>{e&&(i.current=e instanceof Ht?e:e.current),r._root=i.current});const s=J.useRef({}),o=J.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:n,actions:a,names:n.map(l=>l.name),mixer:r}},[n]);return Ww((a,l)=>r.update(l)),J.useEffect(()=>{const a=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[n]),o}const EJ=3e3,CJ=3001,YL=(n,e,t)=>{let i;switch(n){case Mr:i=new Uint8ClampedArray(e*t*4);break;case pi:i=new Uint16Array(e*t*4);break;case Ia:i=new Uint32Array(e*t*4);break;case YA:i=new Int8Array(e*t*4);break;case ZA:i=new Int16Array(e*t*4);break;case kg:i=new Int32Array(e*t*4);break;case Fn:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let Qm;const TJ=(n,e,t,i)=>{if(Qm!==void 0)return Qm;const r=new Er(1,1,i);e.setRenderTarget(r);const s=new wn(new Ua,new rr({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=YL(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),Qm=o[0]!==0,Qm};class Kw{constructor(e){var t,i,r,s,o,a,l,c,d,f,p,m,v,S,y,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(A){throw this._renderer.setRenderTarget(null),A}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const x={format:Kn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:rn,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:rn,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Hn,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(S=e.renderTargetOptions)===null||S===void 0?void 0:S.wrapT:Hn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Kw.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Hu,this._camera=new rc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!TJ(this._type,this._renderer,this._camera,x)){let A;switch(this._type){case pi:A=this._renderer.extensions.has("EXT_color_buffer_float")?Fn:void 0;break}A!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Fn}`),this._type=A):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new wn(new Ua,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Er(this.width,this.height,x),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping:Ea}static instantiateRenderer(){const e=new gw;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=YL(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Vs(this.toArray(),this.width,this.height,Kn,this._type,(e==null?void 0:e.mapping)||Ea,(e==null?void 0:e.wrapS)||Hn,(e==null?void 0:e.wrapT)||Hn,(e==null?void 0:e.magFilter)||rn,(e==null?void 0:e.minFilter)||rn,(e==null?void 0:e.anisotropy)||1,qr);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof lr&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof sn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof sn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const IJ=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,RJ=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class bJ extends lr{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:IJ,fragmentShader:RJ,uniforms:{sdr:{value:c},gainMap:{value:d},gamma:{value:new z(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new z().fromArray(t)},offsetSdr:{value:new z().fromArray(i)},gainMapMin:{value:new z().fromArray(r)},gainMapMax:{value:new z().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:zs,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class ZL extends Error{}class QL extends Error{}const $h=(n,e,t)=>{var i;let r;const s=(i=n.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},PJ=n=>{var e,t;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(n):i=n.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],d=$h(c,"hdrgm:GainMapMin","0"),f=$h(c,"hdrgm:GainMapMax"),p=$h(c,"hdrgm:Gamma","1"),m=$h(c,"hdrgm:OffsetSDR","0.015625"),v=$h(c,"hdrgm:OffsetHDR","0.015625");let S=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;S||(S="0");const y=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!y)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(d)?d.map(g=>parseFloat(g)):[parseFloat(d),parseFloat(d),parseFloat(d)],gainMapMax:Array.isArray(f)?f.map(g=>parseFloat(g)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(p)?p.map(g=>parseFloat(g)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(m)?m.map(g=>parseFloat(g)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetHdr:Array.isArray(v)?v.map(g=>parseFloat(g)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(S),hdrCapacityMax:parseFloat(y)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class BJ{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const d=a+4;if(s.getUint32(d)===1297106432){const f=d+4;let p;if(s.getUint16(f)===18761)p=!1;else if(s.getUint16(f)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(f+4,!p);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=f+m,S=s.getUint16(v,!p),y=v+2;let g=0;for(let P=y;P<y+12*S;P+=12)s.getUint16(P,!p)===45057&&(g=s.getUint32(P+8,!p));const A=v+2+S*12+4,M=[];for(let P=A;P<A+g*16;P+=16){const I={MPType:s.getUint32(P,!p),size:s.getUint32(P+4,!p),dataOffset:s.getUint32(P+8,!p),dependantImages:s.getUint32(P+12,!p),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=f+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,M.push(I)}if(this.options.extractNonFII&&M.length){const P=new Blob([s]),I=[];for(const L of M){if(L.isFII&&!this.options.extractFII)continue;const N=P.slice(L.start,L.end+1,"image/jpeg");I.push(N)}t(I)}}}a+=2+s.getUint16(a+2)}})}}const NJ=async n=>{const e=PJ(n);if(!e)throw new QL("Gain map XMP metadata not found");const i=await new BJ({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new ZL("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},cI=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class qL extends xi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new cv}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new bJ({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new sn,sdr:new sn});return new Kw({width:16,height:16,type:pi,colorSpace:qr,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?cI(s):Promise.resolve(void 0),cI(o)]);l=p[0],a=p[1],c=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const d=new sn(l||new ImageData(2,2),Ea,Hn,Hn,rn,Bx,Kn,Mr,1,qr);d.flipY=c,d.needsUpdate=!0;const f=new sn(a,Ea,Hn,Hn,rn,Bx,Kn,Mr,1,vr);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=d,e.material.sdr=f,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class LJ extends qL{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,d;const f=async()=>{if(l&&c&&d){try{await this.render(a,d,l,c)}catch(B){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(B),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let p=!0,m=0,v=0,S=!0,y=0,g=0,x=!0,A=0,M=0;const P=()=>{if(typeof s=="function"){const B=m+y+A,R=v+g+M,O=p&&S&&x;s(new ProgressEvent("progress",{lengthComputable:O,loaded:R,total:B}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const I=new _i(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async B=>{if(typeof B=="string")throw new Error("Invalid sdr buffer");l=B,await f()},B=>{p=B.lengthComputable,v=B.loaded,m=B.total,P()},B=>{this.manager.itemError(e),typeof o=="function"&&o(B)});const L=new _i(this._internalLoadingManager);L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(this.withCredentials),L.load(t,async B=>{if(typeof B=="string")throw new Error("Invalid gainmap buffer");c=B,await f()},B=>{S=B.lengthComputable,g=B.loaded,y=B.total,P()},B=>{this.manager.itemError(t),typeof o=="function"&&o(B)});const N=new _i(this._internalLoadingManager);return N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(i,async B=>{if(typeof B!="string")throw new Error("Invalid metadata string");d=JSON.parse(B),await f()},B=>{x=B.lengthComputable,M=B.loaded,A=B.total,P()},B=>{this.manager.itemError(i),typeof o=="function"&&o(B)}),a}}class DJ extends qL{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new _i(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,d,f;try{const p=await NJ(l);c=p.sdr,d=p.gainMap,f=p.metadata}catch(p){if(p instanceof QL||p instanceof ZL)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw p}try{await this.render(s,f,c,d)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const p1={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},FJ="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",qm=n=>Array.isArray(n);function $L({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1,l;if(t){if(!(t in p1))throw new Error("Preset must be one of: "+Object.keys(p1).join(", "));n=p1[t],e=FJ}const c=qm(n)&&n.length===6,d=qm(n)&&n.length===3&&n.some(y=>y.endsWith("json")),f=qm(n)?n[0]:n;if(a=qm(n),l=c?"cube":d?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(s=f.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?$N:l==="hdr"?vJ:l==="exr"?_J:l==="jpg"||l==="jpeg"?DJ:l==="webp"?LJ:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=gr(y=>y.gl),m=nh(o,a?[n]:n,y=>{(l==="webp"||l==="jpg"||l==="jpeg")&&y.setRenderer(p),y.setPath==null||y.setPath(e),r&&r(y)});let v=a?m[0]:m;if(l==="jpg"||l==="jpeg"||l==="webp"){var S;v=(S=v.renderTarget)==null?void 0:S.texture}return v.mapping=c?Xs:Fu,"colorSpace"in v?v.colorSpace=i??c?"srgb":"srgb-linear":v.encoding=i??c?CJ:EJ,v}const OJ=n=>n.current&&n.current.isScene,UJ=n=>OJ(n)?n.current:n;function Yw(n,e,t,i,r={}){var s,o,a,l,c;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const d=UJ(e||t),f=d.background,p=d.environment,m={backgroundBlurriness:d.backgroundBlurriness,backgroundIntensity:d.backgroundIntensity,backgroundRotation:(o=(a=d.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:d.environmentIntensity,environmentRotation:(l=(c=d.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(d.environment=i),n&&(d.background=i),ea(d,r),()=>{n!=="only"&&(d.environment=p),n&&(d.background=f),ea(d,m)}}function Zw({scene:n,background:e=!1,map:t,...i}){const r=gr(s=>s.scene);return J.useLayoutEffect(()=>{if(t)return Yw(e,n,r,t,i)}),null}function eD({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=$L(l),d=gr(f=>f.scene);return J.useLayoutEffect(()=>Yw(n,e,d,c,{blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function kJ({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:d,environmentIntensity:f,environmentRotation:p,scene:m,files:v,path:S,preset:y=void 0,extensions:g}){const x=gr(N=>N.gl),A=gr(N=>N.scene),M=J.useRef(null),[P]=J.useState(()=>new Hu),I=J.useMemo(()=>{const N=new hw(i);return N.texture.type=pi,N},[i]);J.useLayoutEffect(()=>(r===1&&M.current.update(x,P),Yw(o,m,A,I.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:d,environmentIntensity:f,environmentRotation:p})),[n,P,I.texture,m,A,o,r,x]);let L=1;return Ww(()=>{(r===1/0||L<r)&&(M.current.update(x,P),L++)}),J.createElement(J.Fragment,null,tX(J.createElement(J.Fragment,null,n,J.createElement("cubeCamera",{ref:M,args:[e,t,I]}),v||y?J.createElement(eD,{background:!0,files:v,preset:y,path:S,extensions:g}):s?J.createElement(Zw,{background:!0,map:s,extensions:g}):null),P))}function GJ(n){var e,t,i,r;const s=$L(n),o=n.map||s;J.useMemo(()=>Hw({GroundProjectedEnvImpl:DX}),[]);const a=J.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,d=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return J.createElement(J.Fragment,null,J.createElement(Zw,ig({},n,{map:o})),J.createElement("groundProjectedEnvImpl",{args:a,scale:d,height:l,radius:c}))}function uI(n){return n.ground?J.createElement(GJ,n):n.map?J.createElement(Zw,n):n.children?J.createElement(kJ,n):J.createElement(eD,n)}function hI(n){const e=J.useRef(),{nodes:t,materials:i,animations:r}=Ff("/Site.glb"),{actions:s,names:o}=MJ(r,e);return J.useEffect(()=>{s[o[0]].reset().fadeIn(2.5).play(),s[o[1]].reset().fadeIn(2.5).play(),s[o[2]].reset().fadeIn(2.5).play(),s[o[3]].reset().fadeIn(2.5).play(),s[o[4]].reset().fadeIn(2.5).play(),s[o[5]].reset().fadeIn(2.5).play(),s[o[6]].reset().fadeIn(2.5).play(),s[o[7]].reset().fadeIn(2.5).play(),s[o[8]].reset().fadeIn(2.5).play(),s[o[9]].reset().fadeIn(2.5).play(),s[o[10]].reset().fadeIn(2.5).play(),s[o[11]].reset().fadeIn(2.5).play(),s[o[12]].reset().fadeIn(2.5).play()},[]),C.jsx("group",{ref:e,...n,dispose:null,children:C.jsxs("group",{name:"Scene",position:[0,-.15,0],children:[C.jsx("mesh",{name:"Tela_3",castShadow:!0,receiveShadow:!0,geometry:t.Tela_3.geometry,material:i["Base Screen 01"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Tela_7",castShadow:!0,receiveShadow:!0,geometry:t.Tela_7.geometry,material:i["Base Screen 02"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Tela_6",castShadow:!0,receiveShadow:!0,geometry:t.Tela_6.geometry,material:i["Base Screen 03"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Tela_5",castShadow:!0,receiveShadow:!0,geometry:t.Tela_5.geometry,material:i["Base Screen 04"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Tela_4",castShadow:!0,receiveShadow:!0,geometry:t.Tela_4.geometry,material:i["Base Screen 05"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Tela_2",castShadow:!0,receiveShadow:!0,geometry:t.Tela_2.geometry,material:i["Base Screen 06"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Tela_1",castShadow:!0,receiveShadow:!0,geometry:t.Tela_1.geometry,material:i["Base Screen 07"]}),C.jsx("mesh",{name:"Tela_8",castShadow:!0,receiveShadow:!0,geometry:t.Tela_8.geometry,material:i["Base Screen 08"],position:[0,0,-.01]}),C.jsx("mesh",{name:"Monitor",castShadow:!0,receiveShadow:!0,geometry:t.Monitor.geometry,material:i.Plastico,position:[0,.208,-.127]}),C.jsx("mesh",{name:"Tentaculo",castShadow:!0,receiveShadow:!0,geometry:t.Tentaculo.geometry,material:i.Tentaculo,position:[.156,.256,-.119],scale:.27}),C.jsx("mesh",{name:"Post_It",castShadow:!0,receiveShadow:!0,geometry:t.Post_It.geometry,material:i.Papel,position:[0,0,-.001]}),C.jsx("mesh",{name:"Donut",castShadow:!0,receiveShadow:!0,geometry:t.Donut.geometry,material:i.Donut,position:[-.187,.324,-.119],rotation:[0,0,.461],scale:.051}),C.jsxs("group",{name:"Plane",position:[0,.007,.027],scale:[.153,.153,.067],children:[C.jsx("mesh",{name:"Mesh_2",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_2.geometry,material:i["Mousepad Interior"]}),C.jsx("mesh",{name:"Mesh_3",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_3.geometry,material:i["Mousepad Borda"]})]}),C.jsxs("mesh",{name:"Cobertura",castShadow:!0,receiveShadow:!0,geometry:t.Cobertura.geometry,material:i.Cobertura,position:[-.187,.324,-.119],rotation:[0,0,.461],scale:.051,children:[C.jsx("mesh",{name:"GN_Instance",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance.geometry,material:i.Material,position:[.249,.242,.256],scale:10}),C.jsx("mesh",{name:"GN_Instance_1",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_1.geometry,material:i.Material,position:[.092,.161,.545],scale:10}),C.jsx("mesh",{name:"GN_Instance_2",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_2.geometry,material:i.Material,position:[-.544,.106,.007],scale:10}),C.jsx("mesh",{name:"GN_Instance_3",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_3.geometry,material:i.Material,position:[.004,.204,.501],scale:10}),C.jsx("mesh",{name:"GN_Instance_4",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_4.geometry,material:i.Material,position:[-.516,.162,-.072],scale:10}),C.jsx("mesh",{name:"GN_Instance_5",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_5.geometry,material:i.Material,position:[.244,.246,.284],scale:10}),C.jsx("mesh",{name:"GN_Instance_6",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_6.geometry,material:i.Material,position:[-.529,.147,-.09],scale:10}),C.jsx("mesh",{name:"GN_Instance_7",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_7.geometry,material:i.Material,position:[-.464,.191,0],scale:10}),C.jsx("mesh",{name:"GN_Instance_8",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_8.geometry,material:i.Material,position:[-.502,.176,-.09],scale:10}),C.jsx("mesh",{name:"GN_Instance_9",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_9.geometry,material:i.Material,position:[.552,.147,-.047],scale:10}),C.jsx("mesh",{name:"GN_Instance_10",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_10.geometry,material:i.Material,position:[-.432,.214,-.021],scale:10}),C.jsx("mesh",{name:"GN_Instance_11",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_11.geometry,material:i.Material,position:[.557,.127,-.079],scale:10}),C.jsx("mesh",{name:"GN_Instance_12",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_12.geometry,material:i.Material,position:[-.387,.236,-.063],scale:10}),C.jsx("mesh",{name:"GN_Instance_13",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_13.geometry,material:i.Material,position:[.487,.207,-.079],scale:10}),C.jsx("mesh",{name:"GN_Instance_14",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_14.geometry,material:i.Material,position:[.531,.177,-.025],scale:10}),C.jsx("mesh",{name:"GN_Instance_15",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_15.geometry,material:i.Material,position:[.483,.212,.001],scale:10}),C.jsx("mesh",{name:"GN_Instance_16",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_16.geometry,material:i.Material,position:[.42,.229,-.002],scale:10}),C.jsx("mesh",{name:"GN_Instance_17",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_17.geometry,material:i.Material,position:[.359,.229,-.006],scale:10}),C.jsx("mesh",{name:"GN_Instance_18",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_18.geometry,material:i.Material,position:[.347,.231,-.031],scale:10}),C.jsx("mesh",{name:"GN_Instance_19",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_19.geometry,material:i.Material,position:[.316,.225,-.029],scale:10}),C.jsx("mesh",{name:"GN_Instance_20",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_20.geometry,material:i.Material,position:[-.345,.239,-.058],scale:10}),C.jsx("mesh",{name:"GN_Instance_21",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_21.geometry,material:i.Material,position:[-.349,.232,-.004],scale:10}),C.jsx("mesh",{name:"GN_Instance_22",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_22.geometry,material:i.Material,position:[.554,.042,-.191],scale:10}),C.jsx("mesh",{name:"GN_Instance_23",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_23.geometry,material:i.Material,position:[-.289,.221,.004],scale:10}),C.jsx("mesh",{name:"GN_Instance_24",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_24.geometry,material:i.Material,position:[-.263,.219,-.05],scale:10}),C.jsx("mesh",{name:"GN_Instance_25",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_25.geometry,material:i.Material,position:[.537,.074,-.211],scale:10}),C.jsx("mesh",{name:"GN_Instance_26",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_26.geometry,material:i.Material,position:[.037,.208,.498],scale:10}),C.jsx("mesh",{name:"GN_Instance_27",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_27.geometry,material:i.Material,position:[.578,.025,-.135],scale:10}),C.jsx("mesh",{name:"GN_Instance_28",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_28.geometry,material:i.Material,position:[.56,.078,-.147],scale:10}),C.jsx("mesh",{name:"GN_Instance_29",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_29.geometry,material:i.Material,position:[-.226,.191,-.002],scale:10}),C.jsx("mesh",{name:"GN_Instance_30",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_30.geometry,material:i.Material,position:[.559,.108,-.112],scale:10}),C.jsx("mesh",{name:"GN_Instance_31",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_31.geometry,material:i.Material,position:[.53,.142,-.149],scale:10}),C.jsx("mesh",{name:"GN_Instance_32",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_32.geometry,material:i.Material,position:[-.197,.167,-.006],scale:10}),C.jsx("mesh",{name:"GN_Instance_33",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_33.geometry,material:i.Material,position:[.478,.187,-.194],scale:10}),C.jsx("mesh",{name:"GN_Instance_34",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_34.geometry,material:i.Material,position:[.507,.179,-.136],scale:10}),C.jsx("mesh",{name:"GN_Instance_35",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_35.geometry,material:i.Material,position:[.466,.214,-.132],scale:10}),C.jsx("mesh",{name:"GN_Instance_36",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_36.geometry,material:i.Material,position:[.386,.241,-.108],scale:10}),C.jsx("mesh",{name:"GN_Instance_37",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_37.geometry,material:i.Material,position:[.352,.243,-.114],scale:10}),C.jsx("mesh",{name:"GN_Instance_38",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_38.geometry,material:i.Material,position:[.022,.233,.449],scale:10}),C.jsx("mesh",{name:"GN_Instance_39",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_39.geometry,material:i.Material,position:[.077,.226,.469],scale:10}),C.jsx("mesh",{name:"GN_Instance_40",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_40.geometry,material:i.Material,position:[.498,.086,-.28],scale:10}),C.jsx("mesh",{name:"GN_Instance_41",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_41.geometry,material:i.Material,position:[.075,.212,.493],scale:10}),C.jsx("mesh",{name:"GN_Instance_42",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_42.geometry,material:i.Material,position:[-.547,.069,.085],scale:10}),C.jsx("mesh",{name:"GN_Instance_43",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_43.geometry,material:i.Material,position:[.206,.224,.204],scale:10}),C.jsx("mesh",{name:"GN_Instance_44",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_44.geometry,material:i.Material,position:[-.528,.097,.098],scale:10}),C.jsx("mesh",{name:"GN_Instance_45",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_45.geometry,material:i.Material,position:[-.489,.158,.06],scale:10}),C.jsx("mesh",{name:"GN_Instance_46",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_46.geometry,material:i.Material,position:[.478,.172,-.222],scale:10}),C.jsx("mesh",{name:"GN_Instance_47",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_47.geometry,material:i.Material,position:[.458,.147,-.289],scale:10}),C.jsx("mesh",{name:"GN_Instance_48",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_48.geometry,material:i.Material,position:[.456,.173,-.258],scale:10}),C.jsx("mesh",{name:"GN_Instance_49",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_49.geometry,material:i.Material,position:[.439,.219,-.185],scale:10}),C.jsx("mesh",{name:"GN_Instance_50",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_50.geometry,material:i.Material,position:[.414,.234,-.171],scale:10}),C.jsx("mesh",{name:"GN_Instance_51",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_51.geometry,material:i.Material,position:[-.44,.198,.051],scale:10}),C.jsx("mesh",{name:"GN_Instance_52",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_52.geometry,material:i.Material,position:[.32,.248,-.182],scale:10}),C.jsx("mesh",{name:"GN_Instance_53",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_53.geometry,material:i.Material,position:[.281,.233,-.118],scale:10}),C.jsx("mesh",{name:"GN_Instance_54",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_54.geometry,material:i.Material,position:[-.404,.213,.064],scale:10}),C.jsx("mesh",{name:"GN_Instance_55",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_55.geometry,material:i.Material,position:[-.37,.227,.023],scale:10}),C.jsx("mesh",{name:"GN_Instance_56",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_56.geometry,material:i.Material,position:[-.313,.226,.014],scale:10}),C.jsx("mesh",{name:"GN_Instance_57",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_57.geometry,material:i.Material,position:[-.352,.224,.067],scale:10}),C.jsx("mesh",{name:"GN_Instance_58",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_58.geometry,material:i.Material,position:[-.254,.205,.032],scale:10}),C.jsx("mesh",{name:"GN_Instance_59",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_59.geometry,material:i.Material,position:[.06,.237,.443],scale:10}),C.jsx("mesh",{name:"GN_Instance_60",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_60.geometry,material:i.Material,position:[.443,.216,.253],scale:10}),C.jsx("mesh",{name:"GN_Instance_61",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_61.geometry,material:i.Material,position:[.435,.122,-.341],scale:10}),C.jsx("mesh",{name:"GN_Instance_62",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_62.geometry,material:i.Material,position:[.398,.126,-.377],scale:10}),C.jsx("mesh",{name:"GN_Instance_63",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_63.geometry,material:i.Material,position:[-.152,.107,.015],scale:10}),C.jsx("mesh",{name:"GN_Instance_64",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_64.geometry,material:i.Material,position:[.358,.208,-.325],scale:10}),C.jsx("mesh",{name:"GN_Instance_65",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_65.geometry,material:i.Material,position:[.402,.203,-.284],scale:10}),C.jsx("mesh",{name:"GN_Instance_66",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_66.geometry,material:i.Material,position:[.378,.22,-.277],scale:10}),C.jsx("mesh",{name:"GN_Instance_67",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_67.geometry,material:i.Material,position:[.371,.23,-.255],scale:10}),C.jsx("mesh",{name:"GN_Instance_68",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_68.geometry,material:i.Material,position:[.29,.248,-.251],scale:10}),C.jsx("mesh",{name:"GN_Instance_69",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_69.geometry,material:i.Material,position:[.319,.247,-.227],scale:10}),C.jsx("mesh",{name:"GN_Instance_70",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_70.geometry,material:i.Material,position:[.274,.247,-.202],scale:10}),C.jsx("mesh",{name:"GN_Instance_71",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_71.geometry,material:i.Material,position:[.225,.235,-.187],scale:10}),C.jsx("mesh",{name:"GN_Instance_72",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_72.geometry,material:i.Material,position:[.189,.219,-.172],scale:10}),C.jsx("mesh",{name:"GN_Instance_73",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_73.geometry,material:i.Material,position:[.139,.173,-.135],scale:10}),C.jsx("mesh",{name:"GN_Instance_74",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_74.geometry,material:i.Material,position:[.011,.24,.425],scale:10}),C.jsx("mesh",{name:"GN_Instance_75",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_75.geometry,material:i.Material,position:[-.535,.063,.157],scale:10}),C.jsx("mesh",{name:"GN_Instance_76",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_76.geometry,material:i.Material,position:[.009,.246,.358],scale:10}),C.jsx("mesh",{name:"GN_Instance_77",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_77.geometry,material:i.Material,position:[.348,.099,-.444],scale:10}),C.jsx("mesh",{name:"GN_Instance_78",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_78.geometry,material:i.Material,position:[.386,.098,-.409],scale:10}),C.jsx("mesh",{name:"GN_Instance_79",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_79.geometry,material:i.Material,position:[.364,.12,-.419],scale:10}),C.jsx("mesh",{name:"GN_Instance_80",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_80.geometry,material:i.Material,position:[-.445,.176,.205],scale:10}),C.jsx("mesh",{name:"GN_Instance_81",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_81.geometry,material:i.Material,position:[.323,.167,-.419],scale:10}),C.jsx("mesh",{name:"GN_Instance_82",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_82.geometry,material:i.Material,position:[.342,.146,-.421],scale:10}),C.jsx("mesh",{name:"GN_Instance_83",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_83.geometry,material:i.Material,position:[-.423,.2,.114],scale:10}),C.jsx("mesh",{name:"GN_Instance_84",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_84.geometry,material:i.Material,position:[.3,.214,-.371],scale:10}),C.jsx("mesh",{name:"GN_Instance_85",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_85.geometry,material:i.Material,position:[.315,.223,-.338],scale:10}),C.jsx("mesh",{name:"GN_Instance_86",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_86.geometry,material:i.Material,position:[.26,.221,-.388],scale:10}),C.jsx("mesh",{name:"GN_Instance_87",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_87.geometry,material:i.Material,position:[.287,.241,-.308],scale:10}),C.jsx("mesh",{name:"GN_Instance_88",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_88.geometry,material:i.Material,position:[-.344,.221,.146],scale:10}),C.jsx("mesh",{name:"GN_Instance_89",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_89.geometry,material:i.Material,position:[.251,.249,-.274],scale:10}),C.jsx("mesh",{name:"GN_Instance_90",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_90.geometry,material:i.Material,position:[.06,.245,.331],scale:10}),C.jsx("mesh",{name:"GN_Instance_91",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_91.geometry,material:i.Material,position:[-.26,.211,.114],scale:10}),C.jsx("mesh",{name:"GN_Instance_92",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_92.geometry,material:i.Material,position:[-.281,.215,.069],scale:10}),C.jsx("mesh",{name:"GN_Instance_93",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_93.geometry,material:i.Material,position:[.295,.127,-.466],scale:10}),C.jsx("mesh",{name:"GN_Instance_94",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_94.geometry,material:i.Material,position:[.318,.112,-.459],scale:10}),C.jsx("mesh",{name:"GN_Instance_95",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_95.geometry,material:i.Material,position:[-.223,.188,.059],scale:10}),C.jsx("mesh",{name:"GN_Instance_96",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_96.geometry,material:i.Material,position:[.045,.232,.288],scale:10}),C.jsx("mesh",{name:"GN_Instance_97",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_97.geometry,material:i.Material,position:[.456,.213,.228],scale:10}),C.jsx("mesh",{name:"GN_Instance_98",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_98.geometry,material:i.Material,position:[.237,.187,-.453],scale:10}),C.jsx("mesh",{name:"GN_Instance_99",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_99.geometry,material:i.Material,position:[.552,.166,.059],scale:10}),C.jsx("mesh",{name:"GN_Instance_100",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_100.geometry,material:i.Material,position:[.272,.195,-.423],scale:10}),C.jsx("mesh",{name:"GN_Instance_101",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_101.geometry,material:i.Material,position:[.183,.231,-.413],scale:10}),C.jsx("mesh",{name:"GN_Instance_102",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_102.geometry,material:i.Material,position:[.41,.226,.206],scale:10}),C.jsx("mesh",{name:"GN_Instance_103",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_103.geometry,material:i.Material,position:[.175,.252,-.326],scale:10}),C.jsx("mesh",{name:"GN_Instance_104",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_104.geometry,material:i.Material,position:[.384,.227,.159],scale:10}),C.jsx("mesh",{name:"GN_Instance_105",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_105.geometry,material:i.Material,position:[.22,.243,-.356],scale:10}),C.jsx("mesh",{name:"GN_Instance_106",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_106.geometry,material:i.Material,position:[.203,.251,-.299],scale:10}),C.jsx("mesh",{name:"GN_Instance_107",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_107.geometry,material:i.Material,position:[.441,.22,.085],scale:10}),C.jsx("mesh",{name:"GN_Instance_108",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_108.geometry,material:i.Material,position:[.149,.247,-.273],scale:10}),C.jsx("mesh",{name:"GN_Instance_109",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_109.geometry,material:i.Material,position:[.512,.071,.384],scale:10}),C.jsx("mesh",{name:"GN_Instance_110",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_110.geometry,material:i.Material,position:[-.48,.079,.333],scale:10}),C.jsx("mesh",{name:"GN_Instance_111",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_111.geometry,material:i.Material,position:[.279,.226,.169],scale:10}),C.jsx("mesh",{name:"GN_Instance_112",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_112.geometry,material:i.Material,position:[.081,.131,-.14],scale:10}),C.jsx("mesh",{name:"GN_Instance_113",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_113.geometry,material:i.Material,position:[.178,.085,-.524],scale:10}),C.jsx("mesh",{name:"GN_Instance_114",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_114.geometry,material:i.Material,position:[-.51,-.106,.317],scale:10}),C.jsx("mesh",{name:"GN_Instance_115",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_115.geometry,material:i.Material,position:[.191,.174,-.484],scale:10}),C.jsx("mesh",{name:"GN_Instance_116",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_116.geometry,material:i.Material,position:[.112,.134,-.524],scale:10}),C.jsx("mesh",{name:"GN_Instance_117",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_117.geometry,material:i.Material,position:[.155,.161,-.503],scale:10}),C.jsx("mesh",{name:"GN_Instance_118",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_118.geometry,material:i.Material,position:[-.46,.16,.222],scale:10}),C.jsx("mesh",{name:"GN_Instance_119",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_119.geometry,material:i.Material,position:[.121,.171,-.504],scale:10}),C.jsx("mesh",{name:"GN_Instance_120",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_120.geometry,material:i.Material,position:[.141,.185,-.49],scale:10}),C.jsx("mesh",{name:"GN_Instance_121",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_121.geometry,material:i.Material,position:[.449,.125,.418],scale:10}),C.jsx("mesh",{name:"GN_Instance_122",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_122.geometry,material:i.Material,position:[.143,.239,-.408],scale:10}),C.jsx("mesh",{name:"GN_Instance_123",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_123.geometry,material:i.Material,position:[.111,.251,-.371],scale:10}),C.jsx("mesh",{name:"GN_Instance_124",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_124.geometry,material:i.Material,position:[-.339,.222,.228],scale:10}),C.jsx("mesh",{name:"GN_Instance_125",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_125.geometry,material:i.Material,position:[.365,.225,.045],scale:10}),C.jsx("mesh",{name:"GN_Instance_126",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_126.geometry,material:i.Material,position:[-.225,.199,.124],scale:10}),C.jsx("mesh",{name:"GN_Instance_127",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_127.geometry,material:i.Material,position:[-.19,.179,.118],scale:10}),C.jsx("mesh",{name:"GN_Instance_128",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_128.geometry,material:i.Material,position:[.081,.251,-.299],scale:10}),C.jsx("mesh",{name:"GN_Instance_129",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_129.geometry,material:i.Material,position:[.078,.224,-.229],scale:10}),C.jsx("mesh",{name:"GN_Instance_130",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_130.geometry,material:i.Material,position:[-.153,.131,.084],scale:10}),C.jsx("mesh",{name:"GN_Instance_131",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_131.geometry,material:i.Material,position:[.086,.196,-.191],scale:10}),C.jsx("mesh",{name:"GN_Instance_132",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_132.geometry,material:i.Material,position:[.062,.109,-.137],scale:10}),C.jsx("mesh",{name:"GN_Instance_133",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_133.geometry,material:i.Material,position:[.128,.12,.563],scale:10}),C.jsx("mesh",{name:"GN_Instance_134",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_134.geometry,material:i.Material,position:[.458,.166,.372],scale:10}),C.jsx("mesh",{name:"GN_Instance_135",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_135.geometry,material:i.Material,position:[.504,.2,.009],scale:10}),C.jsx("mesh",{name:"GN_Instance_136",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_136.geometry,material:i.Material,position:[.198,.196,.494],scale:10}),C.jsx("mesh",{name:"GN_Instance_137",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_137.geometry,material:i.Material,position:[.039,.168,-.516],scale:10}),C.jsx("mesh",{name:"GN_Instance_138",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_138.geometry,material:i.Material,position:[.038,.201,-.489],scale:10}),C.jsx("mesh",{name:"GN_Instance_139",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_139.geometry,material:i.Material,position:[.13,.24,.432],scale:10}),C.jsx("mesh",{name:"GN_Instance_140",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_140.geometry,material:i.Material,position:[.091,.196,-.489],scale:10}),C.jsx("mesh",{name:"GN_Instance_141",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_141.geometry,material:i.Material,position:[.162,.232,.445],scale:10}),C.jsx("mesh",{name:"GN_Instance_142",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_142.geometry,material:i.Material,position:[-.448,.121,.353],scale:10}),C.jsx("mesh",{name:"GN_Instance_143",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_143.geometry,material:i.Material,position:[.069,.217,-.466],scale:10}),C.jsx("mesh",{name:"GN_Instance_144",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_144.geometry,material:i.Material,position:[.084,.227,-.449],scale:10}),C.jsx("mesh",{name:"GN_Instance_145",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_145.geometry,material:i.Material,position:[.055,.228,-.449],scale:10}),C.jsx("mesh",{name:"GN_Instance_146",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_146.geometry,material:i.Material,position:[.062,.246,-.404],scale:10}),C.jsx("mesh",{name:"GN_Instance_147",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_147.geometry,material:i.Material,position:[.171,.241,.42],scale:10}),C.jsx("mesh",{name:"GN_Instance_148",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_148.geometry,material:i.Material,position:[.076,.252,-.373],scale:10}),C.jsx("mesh",{name:"GN_Instance_149",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_149.geometry,material:i.Material,position:[.044,.251,-.296],scale:10}),C.jsx("mesh",{name:"GN_Instance_150",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_150.geometry,material:i.Material,position:[.473,.173,.345],scale:10}),C.jsx("mesh",{name:"GN_Instance_151",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_151.geometry,material:i.Material,position:[.027,.188,-.192],scale:10}),C.jsx("mesh",{name:"GN_Instance_152",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_152.geometry,material:i.Material,position:[.008,.203,-.206],scale:10}),C.jsx("mesh",{name:"GN_Instance_153",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_153.geometry,material:i.Material,position:[.107,.249,.39],scale:10}),C.jsx("mesh",{name:"GN_Instance_154",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_154.geometry,material:i.Material,position:[-.425,.171,.313],scale:10}),C.jsx("mesh",{name:"GN_Instance_155",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_155.geometry,material:i.Material,position:[-.408,.189,.294],scale:10}),C.jsx("mesh",{name:"GN_Instance_156",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_156.geometry,material:i.Material,position:[-.212,.214,.193],scale:10}),C.jsx("mesh",{name:"GN_Instance_157",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_157.geometry,material:i.Material,position:[-.058,.097,-.547],scale:10}),C.jsx("mesh",{name:"GN_Instance_158",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_158.geometry,material:i.Material,position:[-.079,.077,-.55],scale:10}),C.jsx("mesh",{name:"GN_Instance_159",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_159.geometry,material:i.Material,position:[-.038,.171,-.514],scale:10}),C.jsx("mesh",{name:"GN_Instance_160",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_160.geometry,material:i.Material,position:[-.015,.233,-.439],scale:10}),C.jsx("mesh",{name:"GN_Instance_161",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_161.geometry,material:i.Material,position:[-.241,.219,.192],scale:10}),C.jsx("mesh",{name:"GN_Instance_162",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_162.geometry,material:i.Material,position:[-.016,.244,-.411],scale:10}),C.jsx("mesh",{name:"GN_Instance_163",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_163.geometry,material:i.Material,position:[-.064,.229,-.443],scale:10}),C.jsx("mesh",{name:"GN_Instance_164",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_164.geometry,material:i.Material,position:[.088,.246,.329],scale:10}),C.jsx("mesh",{name:"GN_Instance_165",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_165.geometry,material:i.Material,position:[.096,.25,.362],scale:10}),C.jsx("mesh",{name:"GN_Instance_166",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_166.geometry,material:i.Material,position:[-.059,.251,-.378],scale:10}),C.jsx("mesh",{name:"GN_Instance_167",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_167.geometry,material:i.Material,position:[.53,.185,.093],scale:10}),C.jsx("mesh",{name:"GN_Instance_168",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_168.geometry,material:i.Material,position:[.097,.234,.28],scale:10}),C.jsx("mesh",{name:"GN_Instance_169",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_169.geometry,material:i.Material,position:[-.005,.254,-.359],scale:10}),C.jsx("mesh",{name:"GN_Instance_170",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_170.geometry,material:i.Material,position:[-.356,.086,.471],scale:10}),C.jsx("mesh",{name:"GN_Instance_171",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_171.geometry,material:i.Material,position:[-.033,.253,-.371],scale:10}),C.jsx("mesh",{name:"GN_Instance_172",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_172.geometry,material:i.Material,position:[-.014,.252,-.302],scale:10}),C.jsx("mesh",{name:"GN_Instance_173",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_173.geometry,material:i.Material,position:[-.067,.254,-.331],scale:10}),C.jsx("mesh",{name:"GN_Instance_174",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_174.geometry,material:i.Material,position:[-.036,.254,-.318],scale:10}),C.jsx("mesh",{name:"GN_Instance_175",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_175.geometry,material:i.Material,position:[-.052,.245,-.274],scale:10}),C.jsx("mesh",{name:"GN_Instance_176",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_176.geometry,material:i.Material,position:[-.018,.194,-.197],scale:10}),C.jsx("mesh",{name:"GN_Instance_177",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_177.geometry,material:i.Material,position:[.484,.14,.374],scale:10}),C.jsx("mesh",{name:"GN_Instance_178",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_178.geometry,material:i.Material,position:[-.025,.166,-.175],scale:10}),C.jsx("mesh",{name:"GN_Instance_179",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_179.geometry,material:i.Material,position:[.055,.213,.247],scale:10}),C.jsx("mesh",{name:"GN_Instance_180",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_180.geometry,material:i.Material,position:[-.375,.157,.406],scale:10}),C.jsx("mesh",{name:"GN_Instance_181",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_181.geometry,material:i.Material,position:[-.019,.111,-.145],scale:10}),C.jsx("mesh",{name:"GN_Instance_182",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_182.geometry,material:i.Material,position:[-.291,.208,.406],scale:10}),C.jsx("mesh",{name:"GN_Instance_183",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_183.geometry,material:i.Material,position:[-.283,.225,.363],scale:10}),C.jsx("mesh",{name:"GN_Instance_184",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_184.geometry,material:i.Material,position:[-.189,.001,-.54],scale:10}),C.jsx("mesh",{name:"GN_Instance_185",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_185.geometry,material:i.Material,position:[.38,.224,.327],scale:10}),C.jsx("mesh",{name:"GN_Instance_186",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_186.geometry,material:i.Material,position:[.049,.168,.188],scale:10}),C.jsx("mesh",{name:"GN_Instance_187",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_187.geometry,material:i.Material,position:[-.164,.023,-.545],scale:10}),C.jsx("mesh",{name:"GN_Instance_188",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_188.geometry,material:i.Material,position:[-.213,.231,.258],scale:10}),C.jsx("mesh",{name:"GN_Instance_189",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_189.geometry,material:i.Material,position:[-.179,.223,.238],scale:10}),C.jsx("mesh",{name:"GN_Instance_190",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_190.geometry,material:i.Material,position:[.402,.225,.288],scale:10}),C.jsx("mesh",{name:"GN_Instance_191",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_191.geometry,material:i.Material,position:[-.143,.13,-.524],scale:10}),C.jsx("mesh",{name:"GN_Instance_192",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_192.geometry,material:i.Material,position:[-.107,.104,-.541],scale:10}),C.jsx("mesh",{name:"GN_Instance_193",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_193.geometry,material:i.Material,position:[.591,.111,.14],scale:10}),C.jsx("mesh",{name:"GN_Instance_194",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_194.geometry,material:i.Material,position:[-.141,.177,.166],scale:10}),C.jsx("mesh",{name:"GN_Instance_195",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_195.geometry,material:i.Material,position:[-.18,.167,-.489],scale:10}),C.jsx("mesh",{name:"GN_Instance_196",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_196.geometry,material:i.Material,position:[-.171,.207,-.451],scale:10}),C.jsx("mesh",{name:"GN_Instance_197",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_197.geometry,material:i.Material,position:[-.107,.167,-.509],scale:10}),C.jsx("mesh",{name:"GN_Instance_198",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_198.geometry,material:i.Material,position:[-.147,.176,-.492],scale:10}),C.jsx("mesh",{name:"GN_Instance_199",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_199.geometry,material:i.Material,position:[.374,.231,.292],scale:10}),C.jsx("mesh",{name:"GN_Instance_200",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_200.geometry,material:i.Material,position:[-.115,.215,-.457],scale:10}),C.jsx("mesh",{name:"GN_Instance_201",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_201.geometry,material:i.Material,position:[-.113,.239,-.411],scale:10}),C.jsx("mesh",{name:"GN_Instance_202",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_202.geometry,material:i.Material,position:[.321,.237,.227],scale:10}),C.jsx("mesh",{name:"GN_Instance_203",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_203.geometry,material:i.Material,position:[-.147,.23,-.423],scale:10}),C.jsx("mesh",{name:"GN_Instance_204",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_204.geometry,material:i.Material,position:[-.089,.248,-.384],scale:10}),C.jsx("mesh",{name:"GN_Instance_205",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_205.geometry,material:i.Material,position:[.33,.24,.274],scale:10}),C.jsx("mesh",{name:"GN_Instance_206",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_206.geometry,material:i.Material,position:[-.09,.249,-.29],scale:10}),C.jsx("mesh",{name:"GN_Instance_207",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_207.geometry,material:i.Material,position:[-.237,.118,.515],scale:10}),C.jsx("mesh",{name:"GN_Instance_208",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_208.geometry,material:i.Material,position:[.286,.244,.279],scale:10}),C.jsx("mesh",{name:"GN_Instance_209",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_209.geometry,material:i.Material,position:[-.075,.237,-.252],scale:10}),C.jsx("mesh",{name:"GN_Instance_210",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_210.geometry,material:i.Material,position:[.251,.086,.542],scale:10}),C.jsx("mesh",{name:"GN_Instance_211",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_211.geometry,material:i.Material,position:[.308,.242,.298],scale:10}),C.jsx("mesh",{name:"GN_Instance_212",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_212.geometry,material:i.Material,position:[.492,.206,.073],scale:10}),C.jsx("mesh",{name:"GN_Instance_213",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_213.geometry,material:i.Material,position:[-.056,.159,-.166],scale:10}),C.jsx("mesh",{name:"GN_Instance_214",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_214.geometry,material:i.Material,position:[.587,.091,.208],scale:10}),C.jsx("mesh",{name:"GN_Instance_215",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_215.geometry,material:i.Material,position:[-.171,.231,.413],scale:10}),C.jsx("mesh",{name:"GN_Instance_216",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_216.geometry,material:i.Material,position:[.277,.194,.463],scale:10}),C.jsx("mesh",{name:"GN_Instance_217",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_217.geometry,material:i.Material,position:[-.147,.239,.309],scale:10}),C.jsx("mesh",{name:"GN_Instance_218",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_218.geometry,material:i.Material,position:[.263,.229,.191],scale:10}),C.jsx("mesh",{name:"GN_Instance_219",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_219.geometry,material:i.Material,position:[.294,.201,.445],scale:10}),C.jsx("mesh",{name:"GN_Instance_220",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_220.geometry,material:i.Material,position:[-.14,.225,.256],scale:10}),C.jsx("mesh",{name:"GN_Instance_221",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_221.geometry,material:i.Material,position:[-.105,.204,.223],scale:10}),C.jsx("mesh",{name:"GN_Instance_222",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_222.geometry,material:i.Material,position:[.57,.126,.212],scale:10}),C.jsx("mesh",{name:"GN_Instance_223",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_223.geometry,material:i.Material,position:[.268,.219,.43],scale:10}),C.jsx("mesh",{name:"GN_Instance_224",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_224.geometry,material:i.Material,position:[-.278,.193,-.412],scale:10}),C.jsx("mesh",{name:"GN_Instance_225",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_225.geometry,material:i.Material,position:[.231,.244,.378],scale:10}),C.jsx("mesh",{name:"GN_Instance_226",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_226.geometry,material:i.Material,position:[-.242,.178,-.452],scale:10}),C.jsx("mesh",{name:"GN_Instance_227",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_227.geometry,material:i.Material,position:[-.194,.188,-.465],scale:10}),C.jsx("mesh",{name:"GN_Instance_228",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_228.geometry,material:i.Material,position:[-.134,.115,.552],scale:10}),C.jsx("mesh",{name:"GN_Instance_229",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_229.geometry,material:i.Material,position:[-.187,.233,-.399],scale:10}),C.jsx("mesh",{name:"GN_Instance_230",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_230.geometry,material:i.Material,position:[-.224,.237,-.369],scale:10}),C.jsx("mesh",{name:"GN_Instance_231",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_231.geometry,material:i.Material,position:[.166,.25,.341],scale:10}),C.jsx("mesh",{name:"GN_Instance_232",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_232.geometry,material:i.Material,position:[-.202,.251,-.31],scale:10}),C.jsx("mesh",{name:"GN_Instance_233",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_233.geometry,material:i.Material,position:[.161,.247,.311],scale:10}),C.jsx("mesh",{name:"GN_Instance_234",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_234.geometry,material:i.Material,position:[-.197,.248,-.341],scale:10}),C.jsx("mesh",{name:"GN_Instance_235",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_235.geometry,material:i.Material,position:[.215,.204,.14],scale:10}),C.jsx("mesh",{name:"GN_Instance_236",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_236.geometry,material:i.Material,position:[-.162,.251,-.296],scale:10}),C.jsx("mesh",{name:"GN_Instance_237",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_237.geometry,material:i.Material,position:[-.135,.252,-.304],scale:10}),C.jsx("mesh",{name:"GN_Instance_238",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_238.geometry,material:i.Material,position:[-.089,.237,.412],scale:10}),C.jsx("mesh",{name:"GN_Instance_239",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_239.geometry,material:i.Material,position:[-.19,.251,-.286],scale:10}),C.jsx("mesh",{name:"GN_Instance_240",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_240.geometry,material:i.Material,position:[-.122,.233,-.236],scale:10}),C.jsx("mesh",{name:"GN_Instance_241",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_241.geometry,material:i.Material,position:[-.143,.241,-.253],scale:10}),C.jsx("mesh",{name:"GN_Instance_242",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_242.geometry,material:i.Material,position:[-.087,.183,-.177],scale:10}),C.jsx("mesh",{name:"GN_Instance_243",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_243.geometry,material:i.Material,position:[-.129,.218,-.207],scale:10}),C.jsx("mesh",{name:"GN_Instance_244",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_244.geometry,material:i.Material,position:[.156,.242,.286],scale:10}),C.jsx("mesh",{name:"GN_Instance_245",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_245.geometry,material:i.Material,position:[-.131,.242,.371],scale:10}),C.jsx("mesh",{name:"GN_Instance_246",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_246.geometry,material:i.Material,position:[.548,.166,.166],scale:10}),C.jsx("mesh",{name:"GN_Instance_247",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_247.geometry,material:i.Material,position:[-.114,.234,.291],scale:10}),C.jsx("mesh",{name:"GN_Instance_248",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_248.geometry,material:i.Material,position:[-.081,.189,.21],scale:10}),C.jsx("mesh",{name:"GN_Instance_249",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_249.geometry,material:i.Material,position:[-.358,.139,-.4],scale:10}),C.jsx("mesh",{name:"GN_Instance_250",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_250.geometry,material:i.Material,position:[-.389,.135,-.374],scale:10}),C.jsx("mesh",{name:"GN_Instance_251",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_251.geometry,material:i.Material,position:[.125,.232,.265],scale:10}),C.jsx("mesh",{name:"GN_Instance_252",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_252.geometry,material:i.Material,position:[-.343,.182,-.372],scale:10}),C.jsx("mesh",{name:"GN_Instance_253",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_253.geometry,material:i.Material,position:[.082,.178,.187],scale:10}),C.jsx("mesh",{name:"GN_Instance_254",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_254.geometry,material:i.Material,position:[-.053,.161,.185],scale:10}),C.jsx("mesh",{name:"GN_Instance_255",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_255.geometry,material:i.Material,position:[-.259,.25,-.275],scale:10}),C.jsx("mesh",{name:"GN_Instance_256",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_256.geometry,material:i.Material,position:[-.265,.242,-.32],scale:10}),C.jsx("mesh",{name:"GN_Instance_257",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_257.geometry,material:i.Material,position:[-.219,.25,-.262],scale:10}),C.jsx("mesh",{name:"GN_Instance_258",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_258.geometry,material:i.Material,position:[.473,.211,.108],scale:10}),C.jsx("mesh",{name:"GN_Instance_259",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_259.geometry,material:i.Material,position:[-.198,.238,-.215],scale:10}),C.jsx("mesh",{name:"GN_Instance_260",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_260.geometry,material:i.Material,position:[-.18,.219,-.181],scale:10}),C.jsx("mesh",{name:"GN_Instance_261",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_261.geometry,material:i.Material,position:[.483,.207,.134],scale:10}),C.jsx("mesh",{name:"GN_Instance_262",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_262.geometry,material:i.Material,position:[.259,.201,.021],scale:10}),C.jsx("mesh",{name:"GN_Instance_263",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_263.geometry,material:i.Material,position:[-.124,.151,-.123],scale:10}),C.jsx("mesh",{name:"GN_Instance_264",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_264.geometry,material:i.Material,position:[-.095,.103,-.099],scale:10}),C.jsx("mesh",{name:"GN_Instance_265",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_265.geometry,material:i.Material,position:[.393,.229,.005],scale:10}),C.jsx("mesh",{name:"GN_Instance_266",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_266.geometry,material:i.Material,position:[.585,.119,.043],scale:10}),C.jsx("mesh",{name:"GN_Instance_267",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_267.geometry,material:i.Material,position:[.421,.085,.459],scale:10}),C.jsx("mesh",{name:"GN_Instance_268",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_268.geometry,material:i.Material,position:[.426,.223,.058],scale:10}),C.jsx("mesh",{name:"GN_Instance_269",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_269.geometry,material:i.Material,position:[-.025,.145,.556],scale:10}),C.jsx("mesh",{name:"GN_Instance_270",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_270.geometry,material:i.Material,position:[-.427,.141,-.33],scale:10}),C.jsx("mesh",{name:"GN_Instance_271",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_271.geometry,material:i.Material,position:[-.385,.21,-.287],scale:10}),C.jsx("mesh",{name:"GN_Instance_272",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_272.geometry,material:i.Material,position:[-.361,.235,-.25],scale:10}),C.jsx("mesh",{name:"GN_Instance_273",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_273.geometry,material:i.Material,position:[.373,.126,.47],scale:10}),C.jsx("mesh",{name:"GN_Instance_274",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_274.geometry,material:i.Material,position:[-.307,.246,-.258],scale:10}),C.jsx("mesh",{name:"GN_Instance_275",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_275.geometry,material:i.Material,position:[-.083,.171,.525],scale:10}),C.jsx("mesh",{name:"GN_Instance_276",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_276.geometry,material:i.Material,position:[-.066,.21,.481],scale:10}),C.jsx("mesh",{name:"GN_Instance_277",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_277.geometry,material:i.Material,position:[-.264,.247,-.199],scale:10}),C.jsx("mesh",{name:"GN_Instance_278",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_278.geometry,material:i.Material,position:[-.217,.221,-.148],scale:10}),C.jsx("mesh",{name:"GN_Instance_279",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_279.geometry,material:i.Material,position:[-.189,.211,-.154],scale:10}),C.jsx("mesh",{name:"GN_Instance_280",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_280.geometry,material:i.Material,position:[.532,.173,.222],scale:10}),C.jsx("mesh",{name:"GN_Instance_281",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_281.geometry,material:i.Material,position:[-.079,.227,.445],scale:10}),C.jsx("mesh",{name:"GN_Instance_282",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_282.geometry,material:i.Material,position:[-.019,.237,.429],scale:10}),C.jsx("mesh",{name:"GN_Instance_283",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_283.geometry,material:i.Material,position:[-.051,.235,.43],scale:10}),C.jsx("mesh",{name:"GN_Instance_284",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_284.geometry,material:i.Material,position:[-.049,.242,.4],scale:10}),C.jsx("mesh",{name:"GN_Instance_285",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_285.geometry,material:i.Material,position:[-.468,.17,-.245],scale:10}),C.jsx("mesh",{name:"GN_Instance_286",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_286.geometry,material:i.Material,position:[.405,.111,.459],scale:10}),C.jsx("mesh",{name:"GN_Instance_287",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_287.geometry,material:i.Material,position:[-.475,.182,-.207],scale:10}),C.jsx("mesh",{name:"GN_Instance_288",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_288.geometry,material:i.Material,position:[-.377,.235,-.229],scale:10}),C.jsx("mesh",{name:"GN_Instance_289",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_289.geometry,material:i.Material,position:[-.426,.226,-.169],scale:10}),C.jsx("mesh",{name:"GN_Instance_290",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_290.geometry,material:i.Material,position:[-.346,.248,-.177],scale:10}),C.jsx("mesh",{name:"GN_Instance_291",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_291.geometry,material:i.Material,position:[-.332,.249,-.205],scale:10}),C.jsx("mesh",{name:"GN_Instance_292",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_292.geometry,material:i.Material,position:[.4,.144,.441],scale:10}),C.jsx("mesh",{name:"GN_Instance_293",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_293.geometry,material:i.Material,position:[-.217,.202,-.09],scale:10}),C.jsx("mesh",{name:"GN_Instance_294",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_294.geometry,material:i.Material,position:[.328,.193,.437],scale:10}),C.jsx("mesh",{name:"GN_Instance_295",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_295.geometry,material:i.Material,position:[-.05,.244,.354],scale:10}),C.jsx("mesh",{name:"GN_Instance_296",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_296.geometry,material:i.Material,position:[-.059,.24,.322],scale:10}),C.jsx("mesh",{name:"GN_Instance_297",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_297.geometry,material:i.Material,position:[-.01,.197,.23],scale:10}),C.jsx("mesh",{name:"GN_Instance_298",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_298.geometry,material:i.Material,position:[.483,.204,.222],scale:10}),C.jsx("mesh",{name:"GN_Instance_299",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_299.geometry,material:i.Material,position:[.56,.159,.092],scale:10}),C.jsx("mesh",{name:"GN_Instance_300",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_300.geometry,material:i.Material,position:[-.516,.156,-.152],scale:10}),C.jsx("mesh",{name:"GN_Instance_301",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_301.geometry,material:i.Material,position:[.336,.21,.406],scale:10}),C.jsx("mesh",{name:"GN_Instance_302",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_302.geometry,material:i.Material,position:[.288,.226,.403],scale:10}),C.jsx("mesh",{name:"GN_Instance_303",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_303.geometry,material:i.Material,position:[-.5,.179,-.116],scale:10}),C.jsx("mesh",{name:"GN_Instance_304",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_304.geometry,material:i.Material,position:[-.455,.207,-.177],scale:10}),C.jsx("mesh",{name:"GN_Instance_305",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_305.geometry,material:i.Material,position:[-.451,.215,-.107],scale:10}),C.jsx("mesh",{name:"GN_Instance_306",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_306.geometry,material:i.Material,position:[-.374,.245,-.146],scale:10}),C.jsx("mesh",{name:"GN_Instance_307",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_307.geometry,material:i.Material,position:[.362,.223,.351],scale:10}),C.jsx("mesh",{name:"GN_Instance_308",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_308.geometry,material:i.Material,position:[-.206,.184,-.052],scale:10}),C.jsx("mesh",{name:"GN_Instance_309",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_309.geometry,material:i.Material,position:[-.187,.168,-.056],scale:10}),C.jsx("mesh",{name:"GN_Instance_310",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_310.geometry,material:i.Material,position:[.305,.239,.344],scale:10}),C.jsx("mesh",{name:"GN_Instance_311",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_311.geometry,material:i.Material,position:[.494,.179,.307],scale:10}),C.jsx("mesh",{name:"GN_Instance_312",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_312.geometry,material:i.Material,position:[.018,.155,.551],scale:10}),C.jsx("mesh",{name:"GN_Instance_313",castShadow:!0,receiveShadow:!0,geometry:t.GN_Instance_313.geometry,material:i.Material,position:[.186,.241,.267],scale:10})]}),C.jsxs("group",{name:"Olho_1",position:[.185,.29,-.085],rotation:[2.321,-.913,.558],scale:.266,children:[C.jsx("mesh",{name:"Mesh_4",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_4.geometry,material:i["Material.002"]}),C.jsx("mesh",{name:"Mesh_5",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_5.geometry,material:i["Material.004"]})]}),C.jsx("group",{name:"Ufo_Curve",position:[.022,.373,-.085],scale:.22}),C.jsxs("group",{name:"Olho_2",position:[.215,.219,-.138],rotation:[2.925,-.578,-1.251],scale:.375,children:[C.jsx("mesh",{name:"Mesh_6",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_6.geometry,material:i["Material.002"]}),C.jsx("mesh",{name:"Mesh_7",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_7.geometry,material:i["Material.004"]})]}),C.jsxs("group",{name:"Olho_3",position:[.161,.198,-.182],rotation:[-1.949,-1.447,-.765],scale:.585,children:[C.jsx("mesh",{name:"Mesh_8",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_8.geometry,material:i["Material.002"]}),C.jsx("mesh",{name:"Mesh_9",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_9.geometry,material:i["Material.004"]})]}),C.jsx("group",{name:"Empty",position:[-.048,.374,-.087],rotation:[2.883,-.796,2.935],scale:.024,children:C.jsxs("group",{name:"UFO",position:[-.004,.133,-.065],rotation:[-1.764,1.255,1.271],scale:42.254,children:[C.jsx("mesh",{name:"Mesh_10",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_10.geometry,material:i.Vidro}),C.jsx("mesh",{name:"Mesh_11",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_11.geometry,material:i.Giro}),C.jsx("mesh",{name:"Mesh_12",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_12.geometry,material:i.Pes}),C.jsx("mesh",{name:"Mesh_13",castShadow:!0,receiveShadow:!0,geometry:t.Mesh_13.geometry,material:i.Metal})]})}),C.jsx("mesh",{name:"Gato",castShadow:!0,receiveShadow:!0,geometry:t.Gato.geometry,material:i["Pelo do Gato"]})]})})}Ff.preload("/Site.glb");function zJ(){return C.jsxs("section",{id:"home",children:[C.jsx("div",{className:"mobile",children:location.pathname==="/"&&C.jsx(C.Fragment,{children:C.jsx(ut.div,{className:"content",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:C.jsxs(Kd,{children:[C.jsxs(ut.p,{initial:{y:"-1rem",opacity:0},animate:{y:0,opacity:1},exit:{y:-"1rem",opacity:0},transition:{ease:"easeInOut"},children:["Jean Carlos,",C.jsx("br",{}),"desenvolvedor frontend ",C.jsx("br",{}),"entusiasta 3D."]},"apresentationP"),C.jsx("div",{className:"threeD-element",children:C.jsxs(J3,{children:[C.jsx("ambientLight",{}),C.jsx(lI,{distance:.41,polarAngle:1,azimuthAngle:0,boundaryEnclosesCamera:!1}),C.jsx(J.Suspense,{fallback:null,children:C.jsx(hI,{})}),C.jsx(uI,{preset:"sunset"})]})},"threeD"),C.jsx(nr,{to:"/contato",children:"Vamos conversar?"})]})})})}),C.jsx("div",{className:"desktop",children:location.pathname==="/"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"content",children:[C.jsxs(ut.div,{className:"intro-and-socials",initial:{opacity:0,x:"-200px"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-10rem"},transition:{duration:.75,ease:"backInOut",delay:.2},children:[C.jsxs("p",{children:["Jean Carlos,",C.jsx("br",{}),"desenvolvedor frontend ",C.jsx("br",{}),"entusiasta 3D."]}),C.jsx(nr,{to:"/contato",children:"Vamos conversar?"})]}),C.jsx(ut.div,{className:"threeD",initial:{opacity:0,x:"200px"},animate:{opacity:1,x:0},exit:{opacity:0,x:"10rem"},transition:{duration:.75,ease:"backInOut",delay:.2},children:C.jsxs(J3,{children:[C.jsx(lI,{distance:.65,polarAngle:.99,azimuthAngle:.7,boundaryEnclosesCamera:!1}),C.jsx(J.Suspense,{fallback:null,children:C.jsx(hI,{})}),C.jsx(uI,{preset:"sunset"})]})})]}),C.jsx(ut.div,{className:"red-skewed-bg",initial:{opacity:0,right:"-50rem"},animate:{opacity:1,right:"-8rem"},exit:{right:"-60rem"},transition:{duration:.75,ease:"backInOut"}},location.pathname)]})})]})}const HJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M45.27344,2.32422c-0.1875,-0.20703%20-0.45703,-0.32422%20-0.73828,-0.32422h-39.07031c-0.28125,0%20-0.55078,0.11719%20-0.73828,0.32422c-0.19141,0.20703%20-0.28516,0.48438%20-0.25781,0.76563l3.51953,39.42578c0.03516,0.41406%200.32422,0.75781%200.72266,0.875l16.01172,4.57031c0.08594,0.02734%200.17969,0.03906%200.27344,0.03906c0.09375,0%200.18359,-0.01172%200.27344,-0.03906l16.02344,-4.57031c0.39844,-0.11719%200.68359,-0.46094%200.72266,-0.875l3.51563,-39.42578c0.02734,-0.28125%20-0.06641,-0.55859%20-0.25781,-0.76562zM36.84766,15.91797h-18.8125l0.44922,5.08984h17.91016l-1.34375,15.04297l-10.05859,3.03906l-0.09766,-0.03125l-9.94141,-3.01172l-0.54297,-6.12891h4.87109l0.21094,2.37891l5.55859,1.16406l5.45703,-1.16406l0.58203,-6.4375h-17.04297l-1.32422,-14.80469h24.55859z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",VJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M43.33594,4h-36.66797c-1.47266,0%20-2.66797,1.19531%20-2.66797,2.66797v36.66406c0,1.47266%201.19531,2.66797%202.66797,2.66797h36.66406c1.47266,0%202.66797,-1.19531%202.66797,-2.66406v-36.66797c0,-1.47266%20-1.19531,-2.66797%20-2.66406,-2.66797zM27,36.18359c0,3.99609%20-2.34375,5.81641%20-5.76562,5.81641c-3.09375,0%20-5.32422,-2.07422%20-6.23437,-4l3.14453,-1.90234c0.60547,1.07422%201.52734,1.90234%202.85547,1.90234c1.26953,0%202,-0.49609%202,-2.42578v-12.57422h4zM35.67578,42c-3.54297,0%20-5.55469,-1.78516%20-6.67578,-4l3,-2c0.81641,1.33594%201.70703,2.61328%203.58984,2.61328c1.58203,0%202.41016,-0.78906%202.41016,-1.88281c0,-1.30469%20-0.85937,-1.76953%20-2.59766,-2.53125l-0.95312,-0.41016c-2.75391,-1.17187%20-4.58594,-2.64062%20-4.58594,-5.75c0,-2.85937%202.18359,-5.03906%205.58984,-5.03906c2.42578,0%204.16797,0.84375%205.42578,3.05469l-2.96875,1.91016c-0.65625,-1.17578%20-1.35937,-1.63672%20-2.45703,-1.63672c-1.11719,0%20-1.82422,0.71094%20-1.82422,1.63672c0,1.14453%200.70703,1.60547%202.34375,2.31641l0.95313,0.41016c3.24609,1.38672%205.07422,2.80469%205.07422,5.99219c0,3.43359%20-2.69922,5.31641%20-6.32422,5.31641z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",jJ="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2028.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2050%2050'%20style='enable-background:new%200%200%2050%2050;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill-rule:evenodd;clip-rule:evenodd;fill:%23FFFFFF;}%20%3c/style%3e%3cg%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20class='st0'%20d='M8.9,0.4l-0.7,8L4.9,9.4L1.6,8.4l-0.7-8H8.9z%20M2.9,5.6h0.9l0,0.6l1,0.3l1-0.3l0.1-1.1H3.8l0-0.9H6L6,3.2H2.8%20L2.7,2.3H7L6.9,4.2L6.7,6.9L4.9,7.5L3,6.9L2.9,5.6z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",WJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M25,2c-12.682,0%20-23,10.318%20-23,23c0,12.682%2010.318,23%2023,23c12.682,0%2023,-10.318%2023,-23c0,-12.682%20-10.318,-23%20-23,-23zM30.64844,9.00195c3.82279,-0.0636%206.97419,1.3278%207.63281,3.91211c0.943,3.697%20-2.266,8.11803%20-6.375,9.70703c-3.669,1.419%20-6.70222,1.19611%20-7.94922,0.78711c-1.417,-0.465%20-2.24722,-1.40073%20-2.44922,-1.92773c-0.079,-0.207%20-0.217,-0.55187%200,-0.67187c0.133,-0.074%200.18502,-0.05706%200.54102,0.33594c0.339,0.373%201.6992,1.37594%204.2832,1.08594c6.783,-0.76%2010.86717,-6.03119%209.57617,-8.86719c-0.904,-1.985%20-6.13111,-2.879%20-12.66211,0.375c-7.973,3.973%20-8.40466,7.24819%20-8.47266,8.49219c-0.187,3.421%204.22242,5.22063%206.60742,7.76563c0.056,0.06%200.11006,0.12064%200.16406,0.18164c0.722,-0.269%201.72155,-0.42027%203.31055,-0.44727c3.858,-0.066%206.03727,2.476%205.94727,4.75c-0.07,1.791%20-1.71353,2.52908%20-2.01953,2.58008c-0.222,0.038%20-0.344,0.04509%20-0.375,-0.12891c-0.022,-0.12%200.05836,-0.17589%200.31836,-0.33789c0.26,-0.161%201.03873,-0.69306%201.17773,-1.66406c0.139,-0.97%20-0.58778,-3.28966%20-4.30078,-3.72266c-1.316,-0.154%20-2.35224,-0.04945%20-3.24023,0.18555c0.644,1.419%200.76811,4.27437%20-0.71289,6.48438c-1.535,2.29%20-4.39178,3.68125%20-7.17578,2.90625c-0.898,-0.25%20-2.25694,-2.10536%20-1.08594,-4.69336c1.11,-2.453%205.85105,-4.85288%206.49805,-5.17187v-0.01172c-2.197,-1.891%20-7.53997,-4.43984%20-8.29297,-8.33984c-0.214,-1.105%200.30373,-3.75201%203.55273,-6.79101c2.733,-2.556%206.53492,-4.51277%2010.04492,-5.75977c1.84344,-0.655%203.7194,-0.98476%205.45703,-1.01367zM20.79883,32.07227c-0.065,0.036%20-0.12936,0.07147%20-0.19336,0.10547l0.00195,0.00781c0.001,-0.001%20-2.20623,1.04111%20-3.74023,2.66211c-1.426,1.507%20-1.82234,3.39838%20-1.02734,3.85938c0.737,0.427%202.45359,-0.07892%203.68359,-1.41992c0.403,-0.44%200.73252,-0.91678%200.97852,-1.42578c0.049,-0.102%200.09472,-0.20459%200.13672,-0.30859c0.042,-0.104%200.08219,-0.20941%200.11719,-0.31641c0.318,-0.962%200.35097,-2.02506%200.04297,-3.16406z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",XJ="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2041.43%2036.86'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23fff;stroke-width:0px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m20.71,14.74c-2.04,0-3.69,1.65-3.69,3.69s1.65,3.69,3.69,3.69,3.69-1.65,3.69-3.69-1.65-3.69-3.69-3.69Zm-10.34,11.04l-.81-.21C3.48,24.03,0,21.43,0,18.42s3.48-5.61,9.56-7.14l.81-.21.23.81c.62,2.12,1.4,4.18,2.35,6.18l.17.37-.17.37c-.95,1.99-1.74,4.06-2.35,6.18l-.23.81h0Zm-1.19-12.61c-4.62,1.3-7.45,3.28-7.45,5.26s2.83,3.96,7.45,5.26c.56-1.8,1.25-3.55,2.04-5.26-.8-1.71-1.48-3.46-2.04-5.26Zm21.88,12.61l-.23-.81c-.61-2.12-1.4-4.18-2.35-6.17l-.17-.37.17-.37c.95-1.99,1.74-4.06,2.35-6.18l.23-.81.82.21c6.07,1.53,9.55,4.14,9.55,7.15s-3.48,5.61-9.55,7.14l-.82.21Zm-.85-7.35c.83,1.79,1.51,3.56,2.04,5.26,4.62-1.3,7.45-3.28,7.45-5.26s-2.83-3.96-7.45-5.26c-.56,1.8-1.25,3.55-2.04,5.26h0Zm-21.04-5.27l-.23-.81c-1.71-6.02-1.19-10.33,1.42-11.83,2.56-1.48,6.67.27,10.98,4.69l.59.6-.59.6c-1.53,1.59-2.93,3.3-4.18,5.12l-.23.33-.41.03c-2.2.17-4.39.53-6.53,1.05l-.81.21h0ZM12.44,1.71c-.46,0-.87.1-1.22.3-1.72.99-2.02,4.43-.84,9.07,1.84-.41,3.7-.7,5.58-.86,1.08-1.54,2.27-3.01,3.54-4.39-2.69-2.62-5.24-4.11-7.07-4.11h0Zm16.55,35.15s0,0,0,0c-2.46,0-5.62-1.85-8.9-5.22l-.59-.6.59-.6c1.53-1.59,2.93-3.3,4.18-5.12l.23-.33.4-.03c2.2-.17,4.39-.52,6.54-1.05l.81-.21.23.81c1.7,6.01,1.19,10.33-1.42,11.83-.63.36-1.35.54-2.08.53h0Zm-7.07-5.84c2.69,2.62,5.24,4.11,7.07,4.11h0c.46,0,.87-.1,1.22-.3,1.72-.99,2.02-4.43.84-9.07-1.84.41-3.7.7-5.58.86-1.08,1.54-2.26,3.01-3.54,4.39Zm10.34-17.87l-.81-.21c-2.15-.53-4.33-.88-6.54-1.05l-.4-.03-.23-.33c-1.25-1.82-2.65-3.53-4.18-5.12l-.59-.6.59-.6C24.4.78,28.51-.96,31.07.51c2.61,1.51,3.13,5.82,1.42,11.83l-.23.81h0Zm-6.8-2.94c1.97.18,3.84.47,5.58.86,1.18-4.64.88-8.08-.84-9.07-1.71-.99-4.91.52-8.29,3.81,1.28,1.38,2.46,2.85,3.54,4.39Zm-13.02,26.65c-.73.01-1.45-.17-2.08-.53-2.61-1.5-3.13-5.82-1.42-11.83l.23-.81.81.21c1.99.5,4.19.86,6.53,1.05l.41.03.23.33c1.25,1.82,2.65,3.53,4.18,5.12l.59.6-.59.6c-3.28,3.37-6.44,5.22-8.89,5.22h0Zm-2.05-11.09c-1.18,4.64-.88,8.08.84,9.07,1.7.97,4.91-.53,8.29-3.81-1.28-1.39-2.46-2.85-3.54-4.39-1.88-.17-3.74-.45-5.58-.86h0Zm10.33,1.08c-1.42,0-2.88-.06-4.34-.18l-.41-.03-.23-.33c-.83-1.19-1.6-2.41-2.33-3.66-.72-1.25-1.4-2.54-2.01-3.85l-.17-.37.17-.37c.62-1.31,1.29-2.59,2.01-3.85.71-1.24,1.5-2.47,2.33-3.66l.23-.33.41-.03c2.89-.25,5.8-.25,8.69,0l.4.03.23.33c1.66,2.38,3.11,4.89,4.34,7.51l.17.37-.17.37c-1.23,2.62-2.69,5.13-4.34,7.51l-.23.33-.4.03c-1.46.12-2.92.18-4.34.18h0Zm-3.79-1.87c2.55.19,5.03.19,7.59,0,1.43-2.09,2.69-4.28,3.79-6.56-1.09-2.28-2.36-4.47-3.79-6.56-2.52-.19-5.06-.19-7.58,0-1.43,2.08-2.7,4.28-3.79,6.56,1.1,2.28,2.37,4.47,3.79,6.56h0Z'/%3e%3c/svg%3e",JJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='30px'%20height='30px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(8.53333,8.53333)'%3e%3cpath%20d='M27.324,4.804l-4.75,-1.625c-0.315,-0.108%20-0.667,-0.051%20-0.932,0.152l-10.708,8.21l-5.417,-3.271c-0.278,-0.169%20-0.62,-0.192%20-0.918,-0.061l-2,0.875c-0.364,0.159%20-0.599,0.519%20-0.599,0.916v10c0,0.397%200.235,0.757%200.599,0.916l2,0.875c0.297,0.131%200.639,0.107%200.918,-0.061l5.416,-3.271l10.708,8.21c0.177,0.136%200.392,0.206%200.608,0.206c0.109,0%200.218,-0.018%200.324,-0.054l4.75,-1.625c0.405,-0.138%200.677,-0.518%200.677,-0.946v-18.5c0,-0.428%20-0.272,-0.808%20-0.676,-0.946zM6,16.766v-3.532l2.923,1.766zM22,19.717l-6.962,-4.717l6.962,-4.717z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",KJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M46.79297,22.08984l-18.88281,-18.88281c-0.80078,-0.80469%20-1.85547,-1.20703%20-2.91016,-1.20703c-1.05469,0%20-2.10937,0.40234%20-2.91016,1.20703l-3.73437,3.73437l4.62109,4.62109c1.53516,-0.90234%203.53516,-0.70703%204.85156,0.60938c1.31641,1.31641%201.50781,3.31641%200.60547,4.84766l4.54297,4.54297c1.53516,-0.90234%203.53516,-0.70703%204.85156,0.60938c1.5625,1.5625%201.5625,4.09375%200,5.65625c-1.5625,1.5625%20-4.09375,1.5625%20-5.65625,0c-1.31641,-1.31641%20-1.51172,-3.31641%20-0.60937,-4.85156l-4.54297,-4.54297c-0.32422,0.19141%20-0.66406,0.33203%20-1.01953,0.42188v12.28516c1.72266,0.44531%203,1.99609%203,3.85938c0,2.21094%20-1.78906,4%20-4,4c-2.21094,0%20-4,-1.78906%20-4,-4c0,-1.86328%201.27734,-3.41406%203,-3.85937v-12.28516c-0.66797,-0.17187%20-1.30469,-0.50391%20-1.82812,-1.02734c-1.31641,-1.31641%20-1.50781,-3.31641%20-0.60547,-4.84766l-4.625,-4.625l-13.73437,13.73438c-1.60938,1.60547%20-1.60938,4.21484%200,5.82031l18.88281,18.88281c0.80078,0.80469%201.85547,1.20703%202.91016,1.20703c1.05469,0%202.10938,-0.40234%202.91016,-1.20703l18.88281,-18.88281c1.60938,-1.60547%201.60938,-4.21484%200,-5.82031z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",tD="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M17.791,46.836c0.711,-0.306%201.209,-1.013%201.209,-1.836v-5.4c0,-0.197%200.016,-0.402%200.041,-0.61c-0.014,0.004%20-0.027,0.007%20-0.041,0.01c0,0%20-3,0%20-3.6,0c-1.5,0%20-2.8,-0.6%20-3.4,-1.8c-0.7,-1.3%20-1,-3.5%20-2.8,-4.7c-0.3,-0.2%20-0.1,-0.5%200.5,-0.5c0.6,0.1%201.9,0.9%202.7,2c0.9,1.1%201.8,2%203.4,2c2.487,0%203.82,-0.125%204.622,-0.555c0.934,-1.389%202.227,-2.445%203.578,-2.445v-0.025c-5.668,-0.182%20-9.289,-2.066%20-10.975,-4.975c-3.665,0.042%20-6.856,0.405%20-8.677,0.707c-0.058,-0.327%20-0.108,-0.656%20-0.151,-0.987c1.797,-0.296%204.843,-0.647%208.345,-0.714c-0.112,-0.276%20-0.209,-0.559%20-0.291,-0.849c-3.511,-0.178%20-6.541,-0.039%20-8.187,0.097c-0.02,-0.332%20-0.047,-0.663%20-0.051,-0.999c1.649,-0.135%204.597,-0.27%208.018,-0.111c-0.079,-0.5%20-0.13,-1.011%20-0.13,-1.543c0,-1.7%200.6,-3.5%201.7,-5c-0.5,-1.7%20-1.2,-5.3%200.2,-6.6c2.7,0%204.6,1.3%205.5,2.1c1.699,-0.701%203.599,-1.101%205.699,-1.101c2.1,0%204,0.4%205.6,1.1c0.9,-0.8%202.8,-2.1%205.5,-2.1c1.5,1.4%200.7,5%200.2,6.6c1.1,1.5%201.7,3.2%201.6,5c0,0.484%20-0.045,0.951%20-0.11,1.409c3.499,-0.172%206.527,-0.034%208.204,0.102c-0.002,0.337%20-0.033,0.666%20-0.051,0.999c-1.671,-0.138%20-4.775,-0.28%20-8.359,-0.089c-0.089,0.336%20-0.197,0.663%20-0.325,0.98c3.546,0.046%206.665,0.389%208.548,0.689c-0.043,0.332%20-0.093,0.661%20-0.151,0.987c-1.912,-0.306%20-5.171,-0.664%20-8.879,-0.682c-1.665,2.878%20-5.22,4.755%20-10.777,4.974v0.031c2.6,0%205,3.9%205,6.6v5.4c0,0.823%200.498,1.53%201.209,1.836c9.161,-3.032%2015.791,-11.672%2015.791,-21.836c0,-12.682%20-10.317,-23%20-23,-23c-12.683,0%20-23,10.318%20-23,23c0,10.164%206.63,18.804%2015.791,21.836z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",YJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M18.5,2c-4.68248,0%20-8.5,3.81752%20-8.5,8.5c0,3.30029%201.94993,6.09286%204.70898,7.5c-2.75906,1.40715%20-4.70898,4.19971%20-4.70898,7.5c0,3.30029%201.94993,6.09286%204.70898,7.5c-2.75906,1.40715%20-4.70898,4.19971%20-4.70898,7.5c0,4.68248%203.81752,8.5%208.5,8.5c4.68248,0%208.5,-3.81752%208.5,-8.5v-7.5v-3.34375c1.34137,2.54547%203.93207,4.34375%207,4.34375c4.40644,0%208,-3.59357%208,-8c0,-3.62175%20-2.47383,-6.57131%20-5.78516,-7.55078c3.33871,-1.14751%205.78516,-4.22899%205.78516,-7.94922c0,-4.68248%20-3.81752,-8.5%20-8.5,-8.5h-7.5zM18.5,4h6.5v13h-6.5c-3.60152,0%20-6.5,-2.89848%20-6.5,-6.5c0,-3.60152%202.89848,-6.5%206.5,-6.5zM27,4h6.5c3.60152,0%206.5,2.89848%206.5,6.5c0,3.60152%20-2.89848,6.5%20-6.5,6.5h-6.5zM18.5,19h6.5v13h-6.5c-3.60152,0%20-6.5,-2.89848%20-6.5,-6.5c0,-3.60152%202.89848,-6.5%206.5,-6.5zM27,19h3.34375c-1.43491,0.75615%20-2.5876,1.90884%20-3.34375,3.34375zM34,20c3.32556,0%206,2.67445%206,6c0,3.32555%20-2.67444,6%20-6,6c-3.32556,0%20-6,-2.67445%20-6,-6c0,-3.32555%202.67444,-6%206,-6zM18.5,34h6.5v6.5c0,3.60152%20-2.89848,6.5%20-6.5,6.5c-3.60152,0%20-6.5,-2.89848%20-6.5,-6.5c0,-3.60152%202.89848,-6.5%206.5,-6.5z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ZJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M25.7832,5.01953c-0.19506,-0.01731%20-0.39305,-0.01709%20-0.5918,0.00391c-0.797,0.087%20-1.51167,0.47952%20-2.01367,1.10352c-1.037,1.289%20-0.83102,3.18175%200.45898,4.21875l3.30078,2.6543h-16.97656c-1.654,0%20-3,1.346%20-3,3c0,1.654%201.346,3%203,3h7.43555l-14.24023,11.50977c-0.647,0.523%20-1.05067,1.26675%20-1.13867,2.09375c-0.087,0.827%200.15083,1.64011%200.67383,2.28711c0.523,0.647%201.26675,1.05067%202.09375,1.13867c0.827,0.087%201.64011,-0.15083%202.28711,-0.67383l6.92578,-5.59766c0.579,7.941%207.96589,14.24219%2016.96289,14.24219c9.374,0%2017,-6.841%2017,-15.25c0,-5.196%20-2.90911,-9.97864%20-7.78711,-12.80664l-12.77734,-10.27344c-0.46875,-0.3765%20-1.02809,-0.59845%20-1.61328,-0.65039zM30.96094,20c4.962,0%209,3.364%209,7.5c0,4.136%20-4.038,7.5%20-9,7.5c-4.962,0%20-9,-3.364%20-9,-7.5c0,-4.136%204.038,-7.5%209,-7.5zM30.96094,22c-3.31371,0%20-6,2.23858%20-6,5c0,2.76142%202.68629,5%206,5c3.31371,0%206,-2.23858%206,-5c0,-2.76142%20-2.68629,-5%20-6,-5z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",QJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='50px'%20height='50px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M44.08203,25.20703l2.82031,-4.77734c0.11328,-0.23828%200.12891,-0.51172%200.04297,-0.75781l-5.58594,-16c-0.17187,-0.48828%20-0.68359,-0.76562%20-1.17969,-0.64453l-16.41797,4c-0.3125,0.07813%20-0.57031,0.30078%20-0.69141,0.60156l-1.74609,4.37109h-5.32422c-0.27734,0%20-0.54687,0.11719%20-0.73437,0.32031l-12,13c-0.37109,0.40234%20-0.35156,1.02734%200.04297,1.40234l12.58594,12c0.18359,0.17969%200.43359,0.27734%200.6875,0.27734h5.73828l1.75,4.37109c0.12891,0.32422%200.41797,0.55469%200.75781,0.61328l17.46094,3c0.05469,0.01172%200.11328,0.01563%200.16797,0.01563c0.46484,0%200.875,-0.32031%200.97656,-0.78516l3.54297,-16.23047c0.05469,-0.25%200.01172,-0.51172%20-0.125,-0.73437zM21.32422,12l14.09375,-2.58203l-7.41797,14.58203h-16.83203zM22.32422,39l-11.15625,-11h16.83203l8.75,13.16797zM40.38672,38.89844l-8.38672,-12.89844l7.33203,-14.58203l4.75,13.79297z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Ls={initial:{opacity:0,y:"-4rem"},animate:{opacity:1,y:0,transition:{delayChildren:1,staggerChildren:.1}}},m1={initial:{opacity:0,y:"-4rem"},animate:{opacity:1,y:0,transition:{delayChildren:2.2,staggerChildren:.1}}};function qJ(){return C.jsxs("section",{id:"habilidades",children:[C.jsxs("div",{className:"content",children:[C.jsxs(ut.h2,{initial:{opacity:0,x:"-100px"},animate:{opacity:1,x:0},transition:{duration:.75,ease:"backInOut",delay:.2},children:["As habilidades, ferramentas e tecnologias que eu uso",C.jsx("br",{})," nos meus projetos."]}),C.jsx(ut.h2,{initial:{opacity:0,x:"-100px"},animate:{opacity:1,x:0},transition:{duration:.75,ease:"backInOut",delay:.4},children:"Desenvolvimento Web:"}),C.jsxs(ut.div,{className:"stack",variants:Ls,initial:"initial",animate:"animate",children:[C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:HJ})," HTML5"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:jJ})," CSS3"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:VJ})," JAVASCRIPT"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:WJ})," SASS"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:XJ})," REACT"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:JJ})," VSCODE"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:KJ})," GIT"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:tD})," GITHUB"]}),C.jsxs(ut.span,{variants:Ls,children:[C.jsx("span",{children:"Loading..."})&&C.jsx("img",{src:YJ})," FIGMA"]})]}),C.jsx(ut.h2,{initial:{opacity:0,x:"-100px"},animate:{opacity:1,x:0},transition:{duration:.75,ease:"backInOut",delay:1.6},children:"Modelagem 3D:"}),C.jsxs(ut.div,{className:"stack",variants:m1,initial:"initial",animate:"animate",children:[C.jsxs(ut.span,{variants:m1,children:[C.jsx("img",{src:ZJ}),"BLENDER"]}),C.jsxs(ut.span,{variants:m1,children:[C.jsx("img",{src:QJ}),"UNITY"]})]})]}),location.pathname==="/habilidades"&&C.jsx(ut.div,{className:"red-skewed-bg",initial:{opacity:0,y:"100%"},animate:{opacity:1,height:"100%",y:"0"},exit:{opacity:0,y:"100%"},transition:{duration:.75,ease:"backInOut"}},location.pathname)]})}const AS=[{id:0,name:"Website do Instituto Glacia da Silva",cliente:"Instituto Glacia da Silva",tecnologies:["SCSS"],shortDescription:"Website realizado para a ONG Instituto Glacia da Silva.",longDescription:["Esse projeto consiste em um website que apresenta o Instituto Glacia da Silva - Corrente do Bem, é a terceira versão do website, todas programadas por mim, busquei nessa versão deixar ele mais limpo e simples que as versões anteriores.","O objetivo desse website é de maneira rápida fazer uma breve introdução da ONG, de suas atividades e de como poder entrar em contato com ela para ajudar."],linkImages:["/igds-website.png"],githubUrl:"https://github.com/jaen3dev/novositeigds",websiteUrl:""},{id:1,name:"Aplicativo de cadastro do Instituto Glacia da Silva",cliente:"Instituto Glacia da Silva",tecnologies:["REACT","REACT-ROUTER","SCSS","TAURI"],shortDescription:"Aplicativo de cadastro de empréstimos do Instituto Glacia da Silva.",longDescription:["Esse projeto consiste em um aplicativo desktop que realiza o cadastro, listagem e filtro de empréstimos de aparelhos hospitalares.","Existia uma necessidade de ter um controle dos aparelhos que são emprestados pelo Instituto Glacia da Silva - Corrente do Bem, as informações sobre os empréstimos estavam dispersas e confusas, causando perda de dados."],linkImages:["/igds-app.png"],githubUrl:"https://github.com/jaen3dev/app-gerenciador-de-emprestimos-igds",websiteUrl:""},{id:2,name:"Portfolio de projetos",cliente:"Jaen3Dev",tecnologies:["REACT","REACT-ROUTER","SCSS","FRAMER-MOTION","3D"],shortDescription:"Meu portfolio pessoal com projetos e maneira de entrar em contato.",longDescription:["Esse projeto consiste em apresentar os projetos que eu realizei assim como uma maneira de entrar em contato comigo, será atualizado sempre que um projeto novo for realizado."],linkImages:["/jaen3dev_website.png"],githubUrl:"https://github.com/jaen3dev/",websiteUrl:"https://jaen3dev.github.io/"}];function $J(){const[n,e]=jr.useState([]),[t,i]=jr.useState([]),[r,s]=jr.useState([]);jr.useEffect(()=>{e(AS),i(n)},[n]),jr.useEffect(()=>{a()},[r]);function o(d){s(f=>{const p=[...f];return p.includes("TODOS")&&p.splice(p.indexOf("TODOS"),1),p.includes(d.target.value)?p.splice(p.indexOf(d.target.value),1):p.push(d.target.value),p}),a()}function a(){function d(p,m){return p.filter(v=>m.every(S=>v.tecnologies.includes(S)))}const f=d(n,r);i(f)}function l(){s([])}const c=t.map(d=>C.jsx(nr,{to:`/projetos/${d.id}`,className:"project",children:C.jsxs(ut.div,{initial:{opacity:0,x:"-1rem"},animate:{x:0,opacity:1,transition:{duration:.5,delay:(d.id+1)*.1}},exit:{opacity:0,transition:{duration:.2}},layout:!0,children:[C.jsx("h1",{children:d.name}),C.jsx("img",{src:`/pngs/${d.linkImages[0]}`}),C.jsx("p",{children:d.shortDescription}),C.jsx("div",{className:"tags",children:d.tecnologies.map(f=>C.jsx("span",{children:f},f))})]})},d.id));return C.jsxs("section",{id:"projetos",children:[C.jsxs(ut.div,{className:"filters",initial:{x:"-400px",opacity:0},animate:{x:0,opacity:1,transition:{delay:.6}},exit:{opacity:0},children:[C.jsxs("label",{className:"form-control",children:[C.jsx("input",{type:"checkbox",name:"react",value:"REACT",onChange:o,checked:r.includes("REACT")}),"REACT"]}),C.jsxs("label",{className:"form-control",children:[C.jsx("input",{type:"checkbox",name:"react-router",value:"REACT-ROUTER",onChange:o,checked:r.includes("REACT-ROUTER")}),"REACT-ROUTER"]}),C.jsxs("label",{className:"form-control",children:[C.jsx("input",{type:"checkbox",name:"framer-motion",value:"FRAMER-MOTION",onChange:o,checked:r.includes("FRAMER-MOTION")}),"FRAMER MOTION"]}),C.jsxs("label",{className:"form-control",children:[C.jsx("input",{type:"checkbox",name:"threeD",value:"3D",onChange:o,checked:r.includes("3D")}),"3D"]}),C.jsxs("label",{className:"form-control",children:[C.jsx("input",{type:"checkbox",name:"scss",value:"SCSS",onChange:o,checked:r.includes("SCSS")}),"SCSS"]}),C.jsxs("label",{className:"form-control",children:[C.jsx("input",{type:"checkbox",name:"tauri",value:"TAURI",onChange:o,checked:r.includes("TAURI")}),"TAURI"]}),C.jsx(Kd,{mode:"popLayout",children:r.length>0&&C.jsx(ut.button,{onClick:l,layout:!0,initial:{opacity:0,color:"#c8102e",whiteSpace:"nowrap"},animate:{opacity:1,color:"white",height:"inherit",transition:{duration:1}},exit:{opacity:0,width:0,y:"-1rem",transition:{duration:.2}},children:"REMOVER FILTROS"},"button")})]}),C.jsx(ut.div,{className:"filtered-gallery",exit:{opacity:0},transition:{duration:.5,ease:"backInOut"},children:C.jsx(Kd,{mode:"popLayout",children:c})}),location.pathname==="/projetos"&&C.jsx(ut.div,{className:"red-skewed-bg",initial:{opacity:0,y:"-100%"},animate:{opacity:1,height:"5rem",y:"-.5rem"},exit:{opacity:0,y:"-100%"},transition:{duration:.75,ease:"backInOut"}},location.pathname)]})}const dI={hidden:{},visible:{opacity:1,transition:{staggerChildren:.1}}},$m={hidden:{opacity:0},visible:{opacity:1,transition:{opacity:{duration:0}}}};function eK(){return C.jsxs("section",{id:"contato",children:[C.jsx("div",{className:"mobile",children:C.jsxs("div",{className:"content",children:[C.jsxs(ut.h1,{variants:dI,initial:"hidden",animate:"visible",exit:{opacity:0},children:["Vamos".split("").map((n,e)=>C.jsx(ut.span,{variants:$m,children:n},`${n}-${e}`)),C.jsx("br",{}),"conversar?".split("").map((n,e)=>C.jsx(ut.span,{variants:$m,children:n},`${n}-${e}`)),C.jsx(ut.span,{className:"underscore",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:"_"})]},"Vamos"),C.jsxs(ut.div,{className:"contact-info",initial:{opacity:0,x:"-4rem"},animate:{opacity:1,x:0},exit:{opacity:0},children:[C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.3},children:[C.jsx("span",{children:"E-mail:"}),C.jsx("a",{href:"mailto:jaen3dev@proton.me",target:"_blank",children:"jaen_dev@protonmail.com"})]}),C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.5},children:[C.jsx("span",{children:"Linked-in:"}),C.jsx("a",{href:"https://www.linkedin.com/in/jean-carlos-ca/",target:"_blank",children:"@jean-carlos-ca"})]}),C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.7},children:[C.jsx("span",{children:"Github:"}),C.jsx("a",{href:"https://github.com/jaen3dev",target:"_blank",children:"@jaen3dev"})]}),C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.9},children:[C.jsx("span",{children:"XTwitter:"}),C.jsx("a",{href:"https://x.com/jaen3dev",target:"_blank",children:"@jaen3dev"})]})]})]})}),C.jsx("div",{className:"desktop",children:location.pathname==="/contato"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"content",children:[C.jsxs(ut.h1,{variants:dI,initial:"hidden",animate:"visible",exit:{opacity:0},children:["Vamos".split("").map((n,e)=>C.jsx(ut.span,{variants:$m,children:n},`${n}-${e}`)),C.jsx("br",{}),"conversar?".split("").map((n,e)=>C.jsx(ut.span,{variants:$m,children:n},`${n}-${e}`)),C.jsx(ut.span,{className:"underscore",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:"_"})]},"Vamos"),C.jsxs(ut.div,{className:"contact-info",initial:{opacity:0,x:"-4rem"},animate:{opacity:1,x:0},exit:{opacity:0},children:[C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.3},children:[C.jsx("span",{children:"E-mail:"}),C.jsx("a",{href:"mailto:jaen3dev@proton.me",target:"_blank",children:"jaen_dev@protonmail.com"})]}),C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.5},children:[C.jsx("span",{children:"Linked-in:"}),C.jsx("a",{href:"https://www.linkedin.com/in/jean-carlos-ca/",target:"_blank",children:"@jean-carlos-ca"})]}),C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.7},children:[C.jsx("span",{children:"Github:"}),C.jsx("a",{href:"https://github.com/jaen3dev",target:"_blank",children:"@jaen3dev"})]}),C.jsxs(ut.div,{className:"social",initial:{opacity:0,x:"-1rem"},animate:{opacity:1,x:0},exit:{opacity:0},transition:{delay:.9},children:[C.jsx("span",{children:"XTwitter:"}),C.jsx("a",{href:"https://x.com/jaen3dev",target:"_blank",children:"@jaen3dev"})]})]})]}),C.jsx(ut.div,{className:"red-skewed-bg",initial:{opacity:0,x:"200%",rotate:30},animate:{opacity:1,x:"50%",y:"10%"},exit:{opacity:0,x:"100%"},transition:{duration:.75,ease:"backInOut"}},location.pathname)]})})]})}const tK="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2022.45%2018.33'%3e%3cdefs%3e%3cstyle%3e.cls-1{stroke-width:0px;}.cls-2{fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:2px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m0,6.1l6.71,6.1V0C4.48,2.03,2.24,4.07,0,6.1Z'/%3e%3cpath%20class='cls-2'%20d='m6.38,6.04h9.27s5.8,0,5.8,5.64c0,3.13-2.09,4.53-3.76,5.16-.92.34-1.91.48-2.9.48h-3.53'/%3e%3crect%20class='cls-1'%20x='8.17'%20y='16.27'%20width='2.05'%20height='2.04'/%3e%3crect%20class='cls-1'%20x='5.17'%20y='16.27'%20width='2.05'%20height='2.04'/%3e%3crect%20class='cls-1'%20x='2.17'%20y='16.27'%20width='2.05'%20height='2.04'/%3e%3c/svg%3e",nK="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2022.45%2018.33'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:none;stroke:%23fff;stroke-miterlimit:10;stroke-width:2px;}.cls-2{fill:%23fff;stroke-width:0px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-2'%20d='m0,6.1l6.71,6.1V0C4.48,2.03,2.24,4.07,0,6.1Z'/%3e%3cpath%20class='cls-1'%20d='m6.38,6.04h9.27s5.8,0,5.8,5.64c0,3.13-2.09,4.53-3.76,5.16-.92.34-1.91.48-2.9.48h-3.53'/%3e%3crect%20class='cls-2'%20x='8.17'%20y='16.27'%20width='2.05'%20height='2.04'/%3e%3crect%20class='cls-2'%20x='5.17'%20y='16.27'%20width='2.05'%20height='2.04'/%3e%3crect%20class='cls-2'%20x='2.17'%20y='16.27'%20width='2.05'%20height='2.04'/%3e%3c/svg%3e",iK="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20394.88%20394.88'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20stroke:%20%23000;%20stroke-miterlimit:%2043.84;%20stroke-width:%2010.82px;%20}%20%3c/style%3e%3c/defs%3e%3cg%20id='team-collaboration_version-control_github'%20data-name='team-collaboration/version-control/github'%3e%3cpath%20class='cls-1'%20d='m313.74,5.41H81.14C39.32,5.41,5.41,39.32,5.41,81.14v232.6c0,41.82,33.91,75.73,75.73,75.73h232.6c41.82,0,75.73-33.91,75.73-75.73V81.14c0-41.82-33.91-75.73-75.73-75.73Zm4.22,280.26c-18.55,25.38-42.51,42.95-71.88,52.7-3.42.64-5.92.19-7.5-1.33-1.58-1.52-2.38-3.42-2.38-5.69v-40.07c0-12.28-3.29-21.27-9.87-26.96,7.22-.76,13.7-1.9,19.46-3.42,5.76-1.52,11.71-3.99,17.85-7.41,6.14-3.42,11.27-7.63,15.39-12.63,4.11-5,7.47-11.65,10.06-19.94,2.59-8.29,3.89-17.82,3.89-28.58,0-15.32-5-28.36-15-39.12,4.69-11.52,4.18-24.43-1.52-38.74-3.55-1.14-8.68-.44-15.39,2.09-6.71,2.53-12.53,5.32-17.47,8.36l-7.22,4.56c-11.78-3.29-23.93-4.94-36.46-4.94s-24.68,1.65-36.46,4.94c-2.03-1.39-4.72-3.1-8.07-5.13-3.36-2.02-8.64-4.46-15.86-7.31-7.22-2.85-12.66-3.7-16.33-2.56-5.57,14.31-6.01,27.22-1.33,38.74-10,10.76-15,23.8-15,39.12,0,10.76,1.3,20.25,3.89,28.48,2.59,8.23,5.92,14.88,9.97,19.94,4.05,5.06,9.15,9.3,15.29,12.72,6.14,3.42,12.09,5.89,17.85,7.41,5.76,1.52,12.25,2.66,19.46,3.42-5.06,4.56-8.16,11.08-9.3,19.56-2.66,1.27-5.51,2.22-8.54,2.85-3.04.63-6.65.95-10.82.95s-8.32-1.36-12.44-4.08c-4.12-2.72-7.63-6.68-10.54-11.87-2.41-4.05-5.48-7.34-9.21-9.87-3.74-2.53-6.87-4.05-9.4-4.56l-3.8-.57c-2.66,0-4.49.28-5.51.85-1.01.57-1.33,1.3-.95,2.19.38.89.95,1.77,1.71,2.66.76.89,1.58,1.65,2.47,2.28l1.33.95c2.78,1.27,5.54,3.67,8.26,7.22,2.72,3.54,4.72,6.77,5.98,9.68l1.9,4.37c1.65,4.81,4.43,8.7,8.35,11.68,3.92,2.98,8.17,4.87,12.72,5.69,4.56.83,8.96,1.27,13.2,1.33,4.24.06,7.75-.15,10.54-.67l4.37-.76c0,4.81.03,10.44.1,16.9.06,6.46.1,9.87.1,10.25,0,2.28-.82,4.18-2.47,5.69-1.65,1.52-4.18,1.96-7.6,1.33-29.37-9.75-53.33-27.31-71.88-52.7-18.55-25.38-27.82-53.96-27.82-85.74,0-26.46,6.52-50.86,19.56-73.2,13.04-22.35,30.73-40.04,53.08-53.08,22.34-13.04,46.75-19.56,73.21-19.56s50.86,6.52,73.21,19.56c22.34,13.04,40.03,30.73,53.08,53.08,13.03,22.34,19.56,46.74,19.56,73.2,0,31.78-9.28,60.36-27.82,85.74Z'/%3e%3c/g%3e%3c/svg%3e",rK="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2020.21%2020.21'%3e%3cdefs%3e%3cstyle%3e.cls-1{stroke-width:0px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m20.21,8.05s-.03.09-.05.13c-.18.55-.68.86-1.26.78-.53-.08-.94-.54-.94-1.1,0-1.16,0-2.33,0-3.49,0-.16,0-.32,0-.53-.09.08-.14.14-.2.19-3.01,3.01-6.02,6.02-9.03,9.03-.33.34-.72.49-1.18.36-.77-.21-1.07-1.15-.57-1.78.07-.08.14-.16.22-.23,2.99-2.99,5.97-5.97,8.96-8.96.06-.06.13-.11.19-.16-.01-.02-.02-.04-.03-.06-.07,0-.14,0-.21,0-1.25,0-2.5,0-3.75,0-.52,0-.94-.31-1.09-.79-.15-.47.02-.98.43-1.25C11.85.12,12.01.07,12.16,0c2.38,0,4.76,0,7.15,0,.11.05.22.08.32.14.32.16.48.45.59.77v7.15Z'/%3e%3cpath%20class='cls-1'%20d='m8.97,20.21c-1.86,0-3.71,0-5.57,0-1.66,0-3.02-1.11-3.34-2.74-.04-.22-.06-.44-.06-.67C0,13.09,0,9.37,0,5.66c0-1.91,1.47-3.4,3.38-3.41,1.48,0,2.96,0,4.44,0,.66,0,1.16.48,1.16,1.11,0,.63-.49,1.13-1.17,1.13-1.45,0-2.89,0-4.34,0-.77,0-1.23.45-1.23,1.22,0,3.67,0,7.34,0,11.01,0,.78.45,1.24,1.24,1.24,3.66,0,7.33,0,10.99,0,.71,0,1.26-.5,1.25-1.26-.03-1.43,0-2.87,0-4.3,0-.65.42-1.12,1.04-1.18.62-.06,1.2.43,1.2,1.06,0,1.59.03,3.17,0,4.76-.03,1.56-1.33,2.94-2.89,3.12-.19.02-.38.04-.57.04-1.84,0-3.68,0-5.53,0Z'/%3e%3c/svg%3e",sK="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2020.21%2020.21'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23fff;stroke-width:0px;}%3c/style%3e%3c/defs%3e%3cpath%20class='cls-1'%20d='m20.21,8.05s-.03.09-.05.13c-.18.55-.68.86-1.26.78-.53-.08-.94-.54-.94-1.1,0-1.16,0-2.33,0-3.49,0-.16,0-.32,0-.53-.09.08-.14.14-.2.19-3.01,3.01-6.02,6.02-9.03,9.03-.33.34-.72.49-1.18.36-.77-.21-1.07-1.15-.57-1.78.07-.08.14-.16.22-.23,2.99-2.99,5.97-5.97,8.96-8.96.06-.06.13-.11.19-.16-.01-.02-.02-.04-.03-.06-.07,0-.14,0-.21,0-1.25,0-2.5,0-3.75,0-.52,0-.94-.31-1.09-.79-.15-.47.02-.98.43-1.25C11.85.12,12.01.07,12.16,0c2.38,0,4.76,0,7.15,0,.11.05.22.08.32.14.32.16.48.45.59.77v7.15Z'/%3e%3cpath%20class='cls-1'%20d='m8.97,20.21c-1.86,0-3.71,0-5.57,0-1.66,0-3.02-1.11-3.34-2.74-.04-.22-.06-.44-.06-.67C0,13.09,0,9.37,0,5.66c0-1.91,1.47-3.4,3.38-3.41,1.48,0,2.96,0,4.44,0,.66,0,1.16.48,1.16,1.11,0,.63-.49,1.13-1.17,1.13-1.45,0-2.89,0-4.34,0-.77,0-1.23.45-1.23,1.22,0,3.67,0,7.34,0,11.01,0,.78.45,1.24,1.24,1.24,3.66,0,7.33,0,10.99,0,.71,0,1.26-.5,1.25-1.26-.03-1.43,0-2.87,0-4.3,0-.65.42-1.12,1.04-1.18.62-.06,1.2.43,1.2,1.06,0,1.59.03,3.17,0,4.76-.03,1.56-1.33,2.94-2.89,3.12-.19.02-.38.04-.57.04-1.84,0-3.68,0-5.53,0Z'/%3e%3c/svg%3e";function oK(){const n=jO(),[e,t]=jr.useState([]);return jr.useEffect(()=>{t(AS[n.id])},[]),jr.useEffect(()=>{t(AS[n.id])},[n.id]),C.jsxs(ut.section,{id:"detalhes-projeto",children:[C.jsx(ut.div,{className:"red-skewed-bg-desktop",initial:{opacity:0,x:"-100%",height:"100%"},animate:{opacity:1,x:"0",width:"50%"},exit:{opacity:0,x:"-100%"},transition:{duration:.75,ease:"backInOut"}},"red-skewed-bg-desktop"),C.jsx(ut.div,{className:"red-skewed-bg-mobile",initial:{opacity:0,y:"-100%"},animate:{opacity:1,y:"0",height:"4rem"},exit:{opacity:0,y:"-100%"},transition:{duration:.75,ease:"backInOut"}},"red-skewed-bg-mobile"),C.jsx(ut.div,{className:"thumbnail",initial:{opacity:0,x:"-100%"},animate:{opacity:1,x:"0",transition:{duration:.75,delay:.5,ease:"backInOut"}},exit:{opacity:0},children:C.jsxs("div",{className:"content",children:[C.jsx("span",{className:"mobile",children:C.jsxs(nr,{to:"/projetos",children:[C.jsx("img",{src:tK}),"Galeria de projetos"]})}),C.jsx("span",{className:"desktop",children:C.jsxs(nr,{to:"/projetos",children:[C.jsx("img",{src:nK}),"Galeria de projetos"]})}),C.jsx("h1",{children:e.name}),e.linkImages&&C.jsx("img",{src:`/pngs/${e.linkImages[0]}`}),C.jsx("div",{className:"mobile",children:C.jsxs("div",{className:"links",children:[C.jsx(nr,{to:e.githubUrl,target:"_blank",children:C.jsx("img",{src:iK})}),e.websiteUrl!=""?C.jsx(nr,{to:e.websiteUrl,target:"_blank",children:C.jsx("img",{src:rK})}):null]})}),C.jsx("div",{className:"desktop",children:C.jsxs("div",{className:"links",children:[C.jsx(nr,{to:e.githubUrl,target:"_blank",children:C.jsx("img",{src:tD})}),e.websiteUrl!=""?C.jsx(nr,{to:e.websiteUrl,target:"_blank",children:C.jsx("img",{src:sK})}):null]})})]})},"thumbnail"),C.jsx(ut.div,{className:"description",initial:{opacity:0,x:"100%"},animate:{opacity:1,x:"0",transition:{duration:.75,delay:1,ease:"backInOut"}},exit:{opacity:0},children:C.jsxs("div",{className:"content",children:[C.jsx("h1",{children:"Sobre"}),e.name&&e.longDescription.map((i,r)=>C.jsx("p",{children:i},r)),C.jsx("h1",{children:"Tecnologias Usadas"}),C.jsx("ul",{children:e.name&&e.tecnologies.map((i,r)=>C.jsx("li",{children:i},r))})]})},"description")]},n.id)}function aK(){const n=Da();return C.jsx(Kd,{mode:"wait",children:C.jsxs(sU,{location:n,children:[C.jsx(Yc,{path:"/",element:C.jsx(zJ,{})}),C.jsx(Yc,{path:"/habilidades",element:C.jsx(qJ,{})}),C.jsx(Yc,{path:"/projetos",element:C.jsx($J,{})}),C.jsx(Yc,{path:"/projetos/:id",element:C.jsx(oK,{})}),C.jsx(Yc,{path:"/contato",element:C.jsx(eK,{})})]},n.pathname)})}const lK="data:image/svg+xml,%3csvg%20fill='%23FFFFFF'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='50px'%20height='50px'%3e%3cpath%20d='M25,2C12.319,2,2,12.319,2,25s10.319,23,23,23s23-10.319,23-23S37.681,2,25,2z%20M33.71,32.29c0.39,0.39,0.39,1.03,0,1.42%20C33.51,33.9,33.26,34,33,34s-0.51-0.1-0.71-0.29L25,26.42l-7.29,7.29C17.51,33.9,17.26,34,17,34s-0.51-0.1-0.71-0.29%20c-0.39-0.39-0.39-1.03,0-1.42L23.58,25l-7.29-7.29c-0.39-0.39-0.39-1.03,0-1.42c0.39-0.39,1.03-0.39,1.42,0L25,23.58l7.29-7.29%20c0.39-0.39,1.03-0.39,1.42,0c0.39,0.39,0.39,1.03,0,1.42L26.42,25L33.71,32.29z'/%3e%3c/svg%3e";function cK({setIsOpen:n}){return Da(),C.jsxs(ut.nav,{id:"navmenu",initial:{opacity:0,x:"-2rem"},animate:{opacity:1,x:0},exit:{opacity:0},children:[C.jsx("img",{src:lK,onClick:()=>n(!1)}),C.jsxs("div",{className:"navlist-container",children:[C.jsx(ut.div,{className:"link-div",initial:{opacity:0,height:0},animate:{opacity:1,height:"120px"},exit:{opacity:0,height:0},transition:{duration:.3,delay:.2,ease:"backInOut"},children:C.jsx(nr,{onClick:()=>n(!1),to:"/",children:"sobre"})}),C.jsx(ut.div,{className:"link-div",initial:{opacity:0,height:0},animate:{opacity:1,height:"120px"},exit:{opacity:0,height:0},transition:{duration:.3,delay:.4,ease:"backInOut"},children:C.jsx(nr,{onClick:()=>n(!1),to:"/habilidades",children:"habilidades"})}),C.jsx(ut.div,{className:"link-div",initial:{opacity:0,height:0},animate:{opacity:1,height:"120px"},exit:{opacity:0,height:0},transition:{duration:.3,delay:.6,ease:"backInOut"},children:C.jsx(nr,{onClick:()=>n(!1),to:"/projetos",children:"projetos"})}),C.jsx(ut.div,{className:"link-div",initial:{opacity:0,height:0},animate:{opacity:1,height:"120px"},exit:{opacity:0,height:0},transition:{duration:.3,delay:.8,ease:"backInOut"},children:C.jsx(nr,{onClick:()=>n(!1),to:"/contato",children:"contato"})})]})]})}const uK="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24px'%20height='24px'%3e%3cpath%20d='M%202%205%20L%202%207%20L%2022%207%20L%2022%205%20L%202%205%20z%20M%202%2011%20L%202%2013%20L%2022%2013%20L%2022%2011%20L%202%2011%20z%20M%202%2017%20L%202%2019%20L%2022%2019%20L%2022%2017%20L%202%2017%20z'/%3e%3c/svg%3e",hK="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='24px'%20height='24px'%3e%3cg%20fill='%23ffffff'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(10.66667,10.66667)'%3e%3cpath%20d='M2,5v2h20v-2zM2,11v2h20v-2zM2,17v2h20v-2z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function dK(){const[n,e]=jr.useState(!1);jr.useEffect(()=>{document.body.style.overflow=n?"hidden":"unset",window.scrollTo(0,0)},[n]);let t=Da();return C.jsxs(C.Fragment,{children:[C.jsxs("nav",{id:"navbar",className:t.pathname==="/habilidades"||t.pathname.startsWith("/projetos")?"nav-red-bg":"nav-white-bg",children:[C.jsx(Xp,{to:"/",className:({isActive:i})=>i?"selected":null,children:"sobre"}),C.jsx(Xp,{to:"/habilidades",className:({isActive:i})=>i?"selected":null,children:"habilidades"}),C.jsx(Xp,{to:"/projetos",className:({isActive:i})=>i?"selected":null,children:"projetos"}),C.jsx(Xp,{to:"/contato",className:({isActive:i})=>i?"selected":null,children:"contato"})]}),C.jsx(Kd,{children:n&&C.jsx(cK,{setIsOpen:e})}),C.jsx("img",{className:"ham-menu",src:t.pathname==="/habilidades"||t.pathname.startsWith("/projetos")?hK:uK,onClick:()=>e(!0)})]})}function fK(){return C.jsxs(fU,{children:[C.jsx(dK,{}),C.jsx(aK,{})]})}g1.createRoot(document.getElementById("root")).render(C.jsx(jr.StrictMode,{children:C.jsx(fK,{})}));
